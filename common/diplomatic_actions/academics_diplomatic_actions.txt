#################################
# ACADEMICS DIPLOMATIC ACTIONS  #
#################################

#by Lord R

############################

#Recruit Foreign Scientist

academics_recruit_foreign_scientist = {
	requires_approval = yes
	show_effect_in_tooltip = yes

	potential = { #Only Countries that get the Academia JE are allowed to "sell" their scientists
		scope:target_country = {
			any_scope_building = {
				is_building_type = building_university
				level > 0
			}
		}
		hidden_trigger = {
			OR = {
				is_player = no
				AND = {
					is_player = yes
					has_diplomatic_relevance = scope:target_country
				}
			}
		}
	}
	
	possible = {
		custom_tooltip = { #This trigger checks if the country does not belong to the most advanced 30 percent of countries
			text = academics_smaller_tech_advance_than_best_30_percent_tt
			var:academics_country_tech_advance_var > 0.3
		}
		NOR = { 
			has_war_with = scope:target_country
			custom_tooltip = { #Checks if a scientist was recruited in the last 5 years
				text = academics_recent_foreign_scientist_recruitment_tt
				has_variable = academics_recruit_foreign_scientist_timer_var
			}
		}
		NOT = {
			AND = { #Checks if the country is even able to recruit a new scientist
				gaudi_has_engineer = yes
				verrier_has_astronomer = yes
				dubois_has_naturalist = yes
				dubois_has_paleontologist = yes
				lepsius_has_archaeologist = yes
				OR = {
					lepsius_has_anthropologist = yes
					NOT = { has_technology_researched = lepsius_modern_archaeology_tech } #Anthropologist option has the same trigger
				}
			}
		}
		is_revolutionary = no
		scope:target_country = {
			is_revolutionary = no
		}
		custom_tooltip = { #Checks if the target country is technologically more advanced
			text = academics_smaller_tech_advance_than_target_tt
			scope:target_country = {
				var:academics_country_tech_advance_var < root.var:academics_country_tech_advance_var
			}
		}
	}

	accept_effect = {
		set_variable = { #This is used to keep track of the foreign country
			name = academics_foreign_scientist_origin_country_var
			value = scope:target_country 
		}
		change_relations = {
			country = scope:target_country 
			value = 5 
		}
		trigger_event = { #This is the event to choose the scientist you want.
			id = academics.60
			popup = yes
		}
		add_treasury = -250000 #Cost of the action
		scope:target_country = {
			add_treasury = 250000 #Money gets transfered to foreign country
		}
		set_variable = { #Timer to keep track if it has been 5 years since the action was taken last
			name = academics_recruit_foreign_scientist_timer_var
			years = 5
		}
	}
	
	ai = {
		propose_score = {
			value = 0
		}
	
		will_propose = {					
		}	
		
		accept_score = {
			value = 10
		}
	}
}

