
##############################
# ACADEMICS JOURNAL ENTRIES  #
##############################

#by Marco Dandolo

############################

######ACADEMY######

je_academics_academy = {
	icon = "gfx/interface/icons/event_icons/event_academy.dds"

	is_shown_when_inactive = {
		has_technology_researched = academia
	}

	possible = {
		any_scope_building = {
			is_building_type = building_university
		}
	}

	on_monthly_pulse = {
		random_events = {
			1 = academics.50
		}
	}
	
	immediate = {
	}

	
    fail = {
    }

	on_fail = {
	}

	scripted_button = dubois_promote_humanities_button
	scripted_button = dubois_promote_natural_history_button
	scripted_button = dubois_promote_mathematics_button

	complete = {
		custom_tooltip = {
			text = je_academics_academy_goal
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_academics_academy_success
		}
		hidden_effect = {
			if = {
				limit = {
					has_variable = dubois_promote_mathematics_active
					any_scope_building = {
						is_building_type = building_university
						has_active_production_method = pm_dubois_university_mathematics
					}
				}
				random_list = {
					51 = {
						modifier = {
							if = {
								limit = {
									has_variable = gaudi_engineer_var
								}
								add = -50
							}
						}
						trigger_event = {
							id = academics.51 #Engineer
							popup = yes
						}
					}
					51 = {
						modifier = {
							if = {
								limit = {
									has_variable = verrier_astronomer_var
								}
								add = -50
							}
						}
						trigger_event = {
							id = academics.52 #Astronomer
							popup = yes
						}
					}
				}
			}
			else_if = {
				limit = {
					has_variable = dubois_promote_natural_history_active
					any_scope_building = {
						is_building_type = building_university
						has_active_production_method = pm_dubois_university_natural_history
					}
				}
				random_list = {
					51 = {
						modifier = {
							if = {
								limit = {
									has_variable = dubois_naturalist_var
								}
								add = -50
							}
						}
						trigger_event = {
							id = academics.53 #Naturalist
							popup = yes
						}
					}
					51 = {
						modifier = {
							if = {
								limit = {
									has_variable = dubois_paleontologist_var
								}
								add = -50
							}
						}
						trigger_event = {
							id = academics.54 #Paleontologist
							popup = yes
						}
						
					}
				}
			}
			else_if = {
				limit = {
					has_variable = dubois_promote_humanities_active
            		any_scope_building = {
						is_building_type = building_university
						has_active_production_method = pm_dubois_university_humanities
					}
				}
				random_list = {
					51 = {
						modifier = {
							if = {
								limit = {
									has_variable = lepsius_archaeologist_var
								}
								add = -50
							}
						}
						trigger_event = {
							id = academics.55 #Archaeologist
							popup = yes
						}
					}
					#51 = {
					#	modifier = {
					#		trigger = {
					#			has_variable = dubois_anthopologist_var
					#		}
					#		add = -50
					#	}
					#	trigger_event = {
					#		id = academics.56 #Anthropologist
					#		popup = yes
					#	}
					#}
				}
			}
			else = {
				random_list = {
					1 = {
						trigger_event = {
							id = academics.51
							popup = yes
						}
					}
					1 = {
						trigger_event = {
							id = academics.52
							popup = yes
						}
					}
					1 = {
						trigger_event = {
							id = academics.53
							popup = yes
						}
					}
					1 = {
						trigger_event = {
							id = academics.54
							popup = yes
						}
					}
					1 = {
						trigger_event = {
							id = academics.55
							popup = yes
						}
					}
					#1 = {
					#	trigger_event = {
					#		id = academics.56
					#		popup = yes
					#	}
					#}
				}

				
			}
		}
	}

	invalid = {
	}

	current_value = {
		value = var:dubois_academy_progress
	}

	goal_add_value = {
		add = 360
	}

	progressbar = yes

	should_be_pinned_by_default = yes

	weight = 35
}

je_academics_tech_school = {
	icon = "gfx/interface/icons/event_icons/event_academy.dds"

	is_shown_when_inactive = {
		has_technology_researched = academia
	}

	possible = {
		any_scope_building = {
			is_building_type = building_university
		}
	}
	
	immediate = {
	}

	
    fail = {
    }

	on_fail = {
	}

	scripted_button = academics_change_to_avantgarde_school_button
	scripted_button = academics_change_to_practical_school_button
	scripted_button = academics_change_to_military_school_button
	scripted_button = academics_change_to_business_school_button
	scripted_button = academics_change_to_seapower_school_button
	scripted_button = academics_change_to_useful_school_button

	complete = {
	}

	on_complete = {
	}

	invalid = {
	}

	current_value = {
	}

	goal_add_value = {
	}

	should_be_pinned_by_default = yes

	weight = 35
}

###### ASTRONOMICAL MISSIONS ###########################################################

je_academics_find_more_stars = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	immediate = {
		academics_add_astronomical_mission = yes
	}

	current_value = {
		value = var:verrier_astronomical_objects
	}

	goal_add_value = {
		value = 75
	}

	complete = {
		verrier_has_astronomer = yes

		custom_tooltip = {
			text = je_academics_find_more_stars_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_academics_find_more_stars_event_tt
			trigger_event = { 
				id = academics.2002
				popup = yes 
			}
		}

		academics_remove_astronomical_mission = yes
	}

	timeout = 3600

	on_timeout = {
		trigger_event = { 
			id = academics.2003
			popup = yes 
		}

		academics_remove_astronomical_mission = yes
	}

	progressbar = yes

	weight = 50
}

je_academics_create_star_chart = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	immediate = {
		academics_add_astronomical_mission = yes
	}

	current_value = {
		value = var:verrier_astronomical_objects
	}

	goal_add_value = {
		value = 100
	}

	complete = {
		custom_tooltip = {
			text = je_academics_create_star_chart_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				has_variable = verrier_astronomer_var
			}
			custom_tooltip = {
				text = je_academics_create_star_chart_event_tt
				trigger_event = { 
					id = academics.2005
					popup = yes 
				}
			}
		}
		else = {
			custom_tooltip = {
				text = je_academics_create_star_chart_event_without_astronomer_tt
				trigger_event = { 
					id = academics.2007
					popup = yes 
				}
			}
		}

		academics_remove_astronomical_mission = yes
	}

	timeout = 3600

	on_timeout = {
		if = {
			limit = {
				has_variable = verrier_astronomer_var
			}
			custom_tooltip = {
				text = je_academics_create_star_chart_failed_event_tt
				trigger_event = { 
					id = academics.2006
					popup = yes 
				}
			}
		}
		else = {
			custom_tooltip = {
				text = je_academics_create_star_chart_failed_event_without_astronomer_tt
				trigger_event = { 
					id = academics.2008
					popup = yes 
				}
			}
		}

		academics_remove_astronomical_mission = yes
	}

	progressbar = yes

	weight = 50
}

je_academics_rivalry_for_stars = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	immediate = {
		academics_add_astronomical_mission = yes
	}

	complete = {
		OR = {
			custom_tooltip = {
				text = je_academics_rivalry_for_stars_success
				var:verrier_astronomical_objects > scope:target.var:verrier_astronomical_objects
			}
			var:je_rival_nation_var = {
				is_country_alive = no
			}
		}
	}

	on_complete = {
		trigger_event = { 
			id = academics.2010
			popup = yes 
		}
			
		academics_remove_astronomical_mission = yes
	}

	timeout = 3600

	on_timeout = {
		trigger_event = { 
			id = academics.2011
			popup = yes 
		}

		academics_remove_astronomical_mission = yes
	}

	weight = 50
}

je_academics_build_observatory = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	immediate = {
		academics_add_astronomical_mission = yes
	}

	complete = {
		any_scope_building = {
			is_building_type = building_verrier_observatory
		}
	}

	on_complete = {
		trigger_event = { 
			id = academics.2013
			popup = yes 
		}

		academics_remove_astronomical_mission = yes
	}

	timeout = 3600

	on_timeout = {
		trigger_event = { 
			id = academics.2014
			popup = yes 
		}

		academics_remove_astronomical_mission = yes
	}

	weight = 50
}

je_academics_find_planet_x = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	immediate = {
		academics_add_astronomical_mission = yes
	}

	complete = {
		custom_tooltip = {
			text = je_academics_find_planet_x_complete_tt
			has_modifier = verrier_discovered_pluto_modifier
		}
	}

	on_complete = {
		trigger_event = { 
			id = academics.2016
			popup = yes 
		}

		academics_remove_astronomical_mission = yes
	}

	fail = {
		custom_tooltip = {
			text = je_academics_find_planet_x_fail_tt
			any_country = {
				NOT = {
					this = root
				}
				has_modifier = verrier_discovered_pluto_modifier
			}
		}
	}

	on_fail = {
		trigger_event = { 
			id = academics.2017
			popup = yes 
		}

		academics_remove_astronomical_mission = yes
	}

	weight = 50
}

###### ARCHAEOLOGICAL MISSIONS #########################################################

je_academics_found_archaeological_museum = {
	icon = "gfx/interface/icons/event_icons/event_archaeology.dds"

	immediate = {
		academics_add_archaeological_mission = yes
	}

	complete = {
		any_scope_building = {
			is_building_type = building_lepsius_archaeological_museum
		}
	}

	on_complete = {
		trigger_event = { 
			id = academics.2102
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	timeout = 3600

	on_timeout = {
		trigger_event = { 
			id = academics.2103
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	weight = 50
}

je_academics_egyptian_artifacts = {
	icon = "gfx/interface/icons/event_icons/event_archaeology.dds"

	immediate = {
		academics_add_archaeological_mission = yes
	}

	current_value = {
		value = var:lepsius_egyptian_artifact_minor
	}

	goal_add_value = {
		value = 25
	}

	complete = {
		custom_tooltip = {
			text = je_academics_egyptian_artifacts_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_academics_artifacts_event_tt
			trigger_event = { 
				id = academics.2108
				popup = yes 
			}
		}

		academics_remove_archaeological_mission = yes
	}

	timeout = 5500

	on_timeout = {
		trigger_event = { 
			id = academics.2109
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	progressbar = yes

	weight = 50
}

je_academics_mesopotamian_artifacts = {
	icon = "gfx/interface/icons/event_icons/event_archaeology.dds"

	immediate = {
		academics_add_archaeological_mission = yes
	}

	current_value = {
		value = var:lepsius_mesopotamian_artifact_minor
	}

	goal_add_value = {
		value = 25
	}

	complete = {
		custom_tooltip = {
			text = je_academics_mesopotamian_artifacts_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_academics_artifacts_event_tt
			trigger_event = { 
				id = academics.2108
				popup = yes 
			}
		}

		academics_remove_archaeological_mission = yes
	}

	timeout = 5500

	on_timeout = {
		trigger_event = { 
			id = academics.2109
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	progressbar = yes

	weight = 50
}

je_academics_aegean_artifacts = {
	icon = "gfx/interface/icons/event_icons/event_archaeology.dds"

	immediate = {
		academics_add_archaeological_mission = yes
	}

	current_value = {
		value = var:lepsius_aegean_artifact_minor
	}

	goal_add_value = {
		value = 25
	}

	complete = {
		custom_tooltip = {
			text = je_academics_aegean_artifacts_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_academics_artifacts_event_tt
			trigger_event = { 
				id = academics.2108
				popup = yes 
			}
		}

		academics_remove_archaeological_mission = yes
	}

	timeout = 5500

	on_timeout = {
		trigger_event = { 
			id = academics.2109
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	progressbar = yes

	weight = 50
}

je_academics_precolumbian_artifacts = {
	icon = "gfx/interface/icons/event_icons/event_archaeology.dds"

	immediate = {
		academics_add_archaeological_mission = yes
	}

	current_value = {
		value = var:lepsius_precolumbian_artifact_minor
	}

	goal_add_value = {
		value = 25
	}

	complete = {
		custom_tooltip = {
			text = je_academics_precolumbian_artifacts_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_academics_artifacts_event_tt
			trigger_event = { 
				id = academics.2108
				popup = yes 
			}
		}

		academics_remove_archaeological_mission = yes
	}

	timeout = 5500

	on_timeout = {
		trigger_event = { 
			id = academics.2109
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	progressbar = yes

	weight = 50
}

je_academics_major_artifact = {
	icon = "gfx/interface/icons/event_icons/event_archaeology.dds"

	immediate = {
		academics_add_archaeological_mission = yes
	}

	complete = {
		custom_tooltip = {
			text = je_academics_major_artifact_success
			lepsius_has_major_artifacts = yes
		}
	}

	on_complete = {
		trigger_event = { 
			id = academics.2111
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	timeout = 5400

	on_timeout = {
		trigger_event = { 
			id = academics.2112
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	weight = 50
}

je_academics_excellent_collection = {
	icon = "gfx/interface/icons/event_icons/event_archaeology.dds"

	immediate = {
		academics_add_archaeological_mission = yes
	}

	complete = {
		OR = {
			has_modifier = lepsius_excellent_egyptian_exhibition_modifier
			has_modifier = lepsius_excellent_mesopotamian_exhibition_modifier
			has_modifier = lepsius_excellent_aegean_exhibition_modifier
			has_modifier = lepsius_excellent_precolumbian_exhibition_modifier
		}
	}

	on_complete = {
		trigger_event = { 
			id = academics.2114
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	timeout = 7200

	on_timeout = {
		trigger_event = { 
			id = academics.2115
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	weight = 50
}

je_academics_rivalry_for_artifacts = {
	icon = "gfx/interface/icons/event_icons/event_archaeology.dds"

	immediate = {
		academics_add_archaeological_mission = yes
	}

	complete = {
		OR = {
			custom_tooltip = {
				text = je_academics_rivalry_for_artifacts_success
				var:lepsius_total_artifacts > scope:target.var:lepsius_total_artifacts
			}
			var:je_artifacts_rival_nation_var = {
				is_country_alive = no
			}
		}
	}

	on_complete = {
		trigger_event = { 
			id = academics.2117
			popup = yes 
		}
			
		academics_remove_archaeological_mission = yes
	}

	timeout = 3600

	on_timeout = {
		trigger_event = { 
			id = academics.2118
			popup = yes 
		}

		academics_remove_archaeological_mission = yes
	}

	weight = 50
}
