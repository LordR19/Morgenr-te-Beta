###########################
# DUBOIS JOURNAL ENTRIES  #
###########################

#by Marco Dandolo

############################

######ACADEMY######

je_dubois_academy = {
	icon = "gfx/interface/icons/event_icons/event_academy.dds"

	is_shown_when_inactive = {
		has_technology_researched = academia
	}

	possible = {
		any_scope_building = {
			is_building_type = building_university
		}
	}

	on_monthly_pulse = {
		random_events = {
			1 = dubois.50
		}
	}
	
	immediate = {
	}

	
    fail = {
    }

	on_fail = {
	}

	scripted_button = dubois_promote_humanities_button
	scripted_button = dubois_promote_natural_history_button
	scripted_button = dubois_promote_mathematics_button

	complete = {
		custom_tooltip = {
			text = je_dubois_academy_goal
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_dubois_academy_success
		}
		hidden_effect = {
			if = {
				limit = {
					has_variable = dubois_promote_mathematics_active
					any_scope_building = {
						is_building_type = building_university
						has_active_production_method = pm_dubois_university_mathematics
					}
				}
				random_list = {
					51 = {
						modifier = {
							trigger = {
								has_variable = gaudi_engineer_var
							}
							add = -50
						}
						trigger_event = {
							id = dubois.51 #Engineer
							popup = yes
						}
					}
					51 = {
						modifier = {
							trigger = {
								has_variable = verrier_astronomer_var
							}
							add = -50
						}
						trigger_event = {
							id = dubois.52 #Astronomer
							popup = yes
						}
					}
				}
			}
			if = {
				limit = {
					has_variable = dubois_promote_natural_history_active
					any_scope_building = {
						is_building_type = building_university
						has_active_production_method = pm_dubois_university_natural_history
					}
				}
				random_list = {
					51 = {
						modifier = {
							trigger = {
								has_variable = dubois_naturalist_var
							}
							add = -50
						}
						trigger_event = {
							id = dubois.53 #Naturalist
							popup = yes
						}
					}
					51 = {
						modifier = {
							trigger = {
								has_variable = verrier_paleontologist_var
							}
							add = -50
						}
						trigger_event = {
							id = dubois.54 #Paleontologist
							popup = yes
						}
						
					}
				}
			}
			if = {
				limit = {
					has_variable = dubois_promote_humanities_active
            		any_scope_building = {
						is_building_type = building_university
						has_active_production_method = pm_dubois_university_humanities
					}
				}
				random_list = {
					51 = {
						modifier = {
							trigger = {
								has_variable = lepsius_archaeologist_var
							}
							add = -50
						}
						trigger_event = {
							id = dubois.55 #Archaeologist
							popup = yes
						}
					}
					#51 = {
					#	modifier = {
					#		trigger = {
					#			has_variable = dubois_anthopologist_var
					#		}
					#		add = -50
					#	}
					#	trigger_event = {
					#		id = dubois.56 #Anthropologist
					#		popup = yes
					#	}
					#}
				}
			}
			else = {
				trigger_event = {
					id = dubois.60
					popup = yes
				}
			}
		}
	}

	invalid = {
	}

	current_value = {
		value = var:dubois_academy_progress
	}

	goal_add_value = {
		add = 360
	}

	progressbar = yes

	should_be_pinned_by_default = yes

	weight = 35
}


######SAFARI######

je_dubois_safari = {
	icon = "gfx/interface/icons/event_icons/event_animals.dds"

	on_monthly_pulse = {
		random_events = {
			4 = dubois.32 #Standard event: Trap or Follow
			2 = dubois.33 #Rare Flowers
			2 = dubois.34 #Unknown Species
			1 = dubois.35 #New vehicle: 2 follows possible
			1 = dubois.36 #Extra traps: 2 traps possible
			10 = dubois.38 #Hidden event
			10 = dubois.39 #Succesful Safari
		}
	}
	
	immediate = {
		var:dubois_naturalist_var = {
			save_scope_as = dubois_naturalist_scope
		}
	}
	
    fail = {
    }

	on_fail = {
	}

	complete = {
		custom_tooltip = {
			text = je_dubois_safari_fail
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = dubois.40
			popup = yes
		}
	}

	invalid = {
	}

	current_value = {
		value = var:dubois_safari_progress
	}

	goal_add_value = {
		add = 6
	}

	progressbar = yes

	should_be_pinned_by_default = yes

	weight = 35
}