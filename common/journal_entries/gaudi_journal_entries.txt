##########################
# GAUDÍ JOURNAL ENTRIES  #
##########################

#by Marco Dandolo and Lord R

###################

######Bauhaus######

je_gaudi_bauhaus = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	is_shown_when_inactive = {
        has_technology_researched = elgar_expressionism_tech
		NOT = {
			has_modifier = gaudi_bauhaus_modifier
		}
    }
    possible = {
        has_technology_researched = elgar_new_objectivity_tech
		any_scope_state = {
			has_building = building_arts_academy
		}
    }
	immediate = {
		set_variable = {
			name = gaudi_bauhaus_var
			days = 1
		}
	}
	complete = {
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_arts_academy
				level >= 5
			}
			any_scope_building = {
				is_building_type = building_university
				level >= 10
			}
		}
		hidden_trigger = {
			NOT = {
				has_variable = gaudi_bauhaus_var
			}
		}
	}
	on_complete = {
		add_modifier = {
			name = gaudi_bauhaus_modifier
		}
		random_scope_state = {
			limit = {
				any_scope_building = {
					is_building_type = building_arts_academy
					level >= 5
				}
				any_scope_building = {
					is_building_type = building_university
					level >= 10
				}
			}
			add_modifier = {
				name = gaudi_bauhaus_academy_modifier
			}
		}
	}
}

######Art Nouveau & Art Deco######

#Splendid Architecture

je_gaudi_splendid_architecture = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	is_shown_when_inactive = {
		has_technology_researched = elgar_art_nouveau_tech
	}

	possible = {
		has_technology_researched = elgar_art_nouveau_tech
	}

	immediate = {
		if = {
			limit = { NOT = { has_variable = gaudi_splendid_architecture } }
			set_variable = {
				name = gaudi_splendid_architecture
				value = 0
			}
		}
		set_variable = {
			name = je_gaudi_splendid_architecture_var
			days = 1
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
		hidden_trigger = {
			NOT = {
				has_variable = je_gaudi_splendid_architecture_var
			}
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.50
			popup = yes
		}
	}

	current_value = {
		if = {
			limit = {
				scope:journal_entry = {
					goal_value = 0
				}
			}
			value = 0
		}
		else = {
			value = var:gaudi_splendid_architecture #value or variable you use to meassure progress
		}
	}

	goal_add_value = {
		value = 10
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

#Art Nouveau city quarter

je_gaudi_art_nouveau_quarter = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	is_shown_when_inactive = {
        has_technology_researched = elgar_art_nouveau_tech
		NOT = {
			has_technology_researched = elgar_art_deco_tech
		}
    }
    possible = {
        has_technology_researched = elgar_art_nouveau_tech
		any_scope_state = {
			has_building = building_arts_academy
			has_building = building_university
			has_building = building_elgar_opera
		}
    }
	immediate = {
		set_variable = {
			name = gaudi_art_nouveau_quarter_var
			days = 1
		}
	}
	complete = {
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_arts_academy
				level >= 10
			}
			any_scope_building = {
				is_building_type = building_university
				level >= 10
			}
			any_scope_building = {
				is_building_type = building_elgar_opera
				level >= 10
			}
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 15
			}
			NOT = {
				has_modifier = gaudi_art_nouveau_quarter_modifier
			}
		}
		hidden_trigger = {
			NOT = {
				has_variable = gaudi_art_nouveau_quarter_var
			}
		}
	}
	on_complete = {
		random_scope_state = {
			limit = {
				any_scope_building = {
					is_building_type = building_arts_academy
					level >= 10
				}
				any_scope_building = {
					is_building_type = building_university
					level >= 10
				}
				any_scope_building = {
					is_building_type = building_elgar_opera
					level >= 10
				}
				any_scope_building = {
					is_building_type = building_urban_center
					level >= 15
				}
				NOT = {
					has_modifier = gaudi_art_nouveau_quarter_modifier
				}
			}
			add_modifier = {
				name = gaudi_art_nouveau_quarter_modifier
			}
		}
		trigger_event = { 
			id = gaudi.21
			popup = yes
		}
	}
	invalid = {
		has_technology_researched = elgar_art_deco_tech
	}
}

#Art Deco Cinema

je_gaudi_art_deco_cinema = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	is_shown_when_inactive = {
		has_variable = film_je_done
    }
    possible = {
        has_technology_researched = elgar_art_deco_tech
		any_scope_state = {
			has_building = building_elgar_opera
		}
    }
	immediate = {
		set_variable = {
			name = gaudi_art_deco_cinema_var
			days = 1
		}
	}
	complete = {
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_elgar_opera
				level >= 10
			}
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 20
			}
			NOT = {
				has_modifier = gaudi_art_deco_cinema_modifier
			}
		}
		hidden_trigger = {
			NOT = {
				has_variable = gaudi_art_deco_cinema_var
			}
		}
	}
	on_complete = {
		random_scope_state = {
			limit = {
				any_scope_building = {
					is_building_type = building_elgar_opera
					level >= 10
				}
				any_scope_building = {
					is_building_type = building_urban_center
					level >= 20
				}
				NOT = {
					has_modifier = gaudi_art_deco_cinema_modifier
				}
			}
			add_modifier = {
				name = gaudi_art_deco_cinema_modifier
			}
		}
		trigger_event = { 
			id = gaudi.31
			popup = yes
		}
	}

	invalid = {
		has_modifier = gaudi_splendid_architecture
	}
}

#Art Deco Skyscraper

je_gaudi_art_deco_skyscraper = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	is_shown_when_inactive = {
		has_technology_researched = elgar_art_nouveau_tech
    }
    possible = {
        has_technology_researched = elgar_art_deco_tech
		has_technology_researched = steel_frame_buildings
    }
	immediate = {
		set_variable = {
			name = gaudi_art_deco_skyscraper_var
			days = 1
		}
	}
	complete = {
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_skyscraper
				level >= 1
			}
			NOT = {
				has_modifier = gaudi_art_deco_skyscraper_modifier
			}
		}
		hidden_trigger = {
			NOT = {
				has_variable = gaudi_art_deco_skyscraper_var
			}
		}
	}
	on_complete = {
		random_scope_state = {
			limit = {
				any_scope_building = {
					is_building_type = building_skyscraper
				}
				NOT = {
					has_modifier = gaudi_art_deco_skyscraper_modifier
				}
			}
			add_modifier = {
				name = gaudi_art_deco_skyscraper_modifier
			}
		}
		trigger_event = { 
			id = gaudi.32
			popup = yes
		}
	}

	invalid = {
		has_modifier = gaudi_splendid_architecture
	}
}

#Art Deco Airport [with Curtiss]

je_gaudi_art_deco_airport = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	is_shown_when_inactive = {
		has_technology_researched = elgar_art_nouveau_tech
    }
    possible = {
        has_technology_researched = elgar_art_deco_tech
		has_technology_researched = curtiss_modern_aviation_tech
    }
	immediate = {
		set_variable = {
			name = gaudi_art_deco_airport_var
			days = 1
		}
	}
	complete = {
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_airport
				level >= 5
			}
			NOT = {
				has_modifier = gaudi_art_deco_airport_modifier
			}
		}
		hidden_trigger = {
			NOT = {
				has_variable = gaudi_art_deco_airport_var
			}
		}
	}
	on_complete = {
		random_scope_state = {
			limit = {
				any_scope_building = {
					is_building_type = building_airport
					level >= 5
				}
				NOT = {
					has_modifier = gaudi_art_deco_airport_modifier
				}
			}
			add_modifier = {
				name = gaudi_art_deco_airport_modifier
			}
		}
		trigger_event = { 
			id = gaudi.33
			popup = yes
		}
	}

	invalid = {
		has_modifier = gaudi_splendid_architecture
	}
}

#Art Deco Office

je_gaudi_art_deco_office = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	is_shown_when_inactive = {
		has_technology_researched = elgar_art_nouveau_tech
    }
    possible = {
        has_technology_researched = elgar_art_deco_tech
    }
	immediate = {
		set_variable = {
			name = gaudi_art_deco_office_var
			days = 1
		}
	}
	complete = {
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_government_administration
				level >= 35
			}
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 20
			}
			NOT = {
				has_modifier = gaudi_art_deco_office_modifier
			}
		}
		hidden_trigger = {
			NOT = {
				has_variable = gaudi_art_deco_office_var
			}
		}
	}
	on_complete = {
		random_scope_state = {
			limit = {
				any_scope_building = {
					is_building_type = building_government_administration
					level >= 35
				}
				any_scope_building = {
					is_building_type = building_urban_center
					level >= 20
				}
				NOT = {
					has_modifier = gaudi_art_deco_office_modifier
				}
			}
			add_modifier = {
				name = gaudi_art_deco_office_modifier
			}
		}
		trigger_event = { 
			id = gaudi.34
			popup = yes
		}
	}

	invalid = {
		has_modifier = gaudi_splendid_architecture
	}
}

###################

######COLOGNE CATHEDRAL######

je_gaudi_dombau_phase_1 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.110 #Gaudí 110: Normal building progress
			2 = gaudi.111 #Gaudí 111: Inferior material
			4 = gaudi.113 #Gaudí 113: Faster construction progress
			1 = gaudi.114 #Gaudí 114: Incident
			3 = gaudi.115 #Gaudí 115: New jobs
			2 = gaudi.116 #Gaudí 116: Political Controversy
			2 = gaudi.117 #Gaudí 117: Political Support
			5 = gaudi.118 #Gaudí 118: A national or a religious Project?
			1 = gaudi.119 #Gaudí 119: Cathedral building lottery
			2 = gaudi.120 #Gaudí 120: Romantic/pious ruler
			3 = gaudi.121 #Gaudí 121: Inviting an Ally
			5 = gaudi.124 #Gaudí 124: New machines
			5 = gaudi.125 #Gaudí 125: Railways
			3 = gaudi.126 #Gaudí 126: Stormy Weather
			5 = gaudi.127 #Gaudí 127: Archaeological investigations
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.102
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_NORTH_RHINE
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_dombau_building_phase_1
		remove_modifier = gaudi_dombau_cost_1_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_dombau_phase_1_modifier
			}
			remove_modifier = gaudi_dombau_phase_1_modifier
		}
		trigger_event = { 
			id = gaudi.109
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_dombau_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_dombau_phase_2 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.110 #Gaudí 110: Normal building progress
			
			2 = gaudi.111 #Gaudí 111: Inferior material
			4 = gaudi.113 #Gaudí 113: Faster construction progress
			1 = gaudi.114 #Gaudí 114: Incident
			3 = gaudi.115 #Gaudí 115: New jobs
			2 = gaudi.116 #Gaudí 116: Political Controversy
			2 = gaudi.117 #Gaudí 117: Political Support
			5 = gaudi.118 #Gaudí 118: A national or a religious Project?
			1 = gaudi.119 #Gaudí 119: Cathedral building lottery
			2 = gaudi.120 #Gaudí 120: Romantic/pious ruler
			3 = gaudi.121 #Gaudí 121: Inviting an Ally
			5 = gaudi.124 #Gaudí 124: New machines
			5 = gaudi.125 #Gaudí 125: Railways
			3 = gaudi.126 #Gaudí 126: Stormy Weather
			5 = gaudi.127 #Gaudí 127: Archaeological investigations
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.104
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_NORTH_RHINE
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_dombau_building_phase_2
		remove_modifier = gaudi_dombau_cost_2_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_dombau_phase_2_modifier
			}
			remove_modifier = gaudi_dombau_phase_2_modifier
		}
		trigger_event = { 
			id = gaudi.109
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_dombau_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_dombau_phase_3 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.110 #Gaudí 110: Normal building progress
			
			2 = gaudi.111 #Gaudí 111: Inferior material
			4 = gaudi.113 #Gaudí 113: Faster construction progress
			1 = gaudi.114 #Gaudí 114: Incident
			3 = gaudi.115 #Gaudí 115: New jobs
			2 = gaudi.116 #Gaudí 116: Political Controversy
			2 = gaudi.117 #Gaudí 117: Political Support
			5 = gaudi.118 #Gaudí 118: A national or a religious Project?
			1 = gaudi.119 #Gaudí 119: Cathedral building lottery
			2 = gaudi.120 #Gaudí 120: Romantic/pious ruler
			3 = gaudi.121 #Gaudí 121: Inviting an Ally
			5 = gaudi.124 #Gaudí 124: New machines
			5 = gaudi.125 #Gaudí 125: Railways
			3 = gaudi.126 #Gaudí 126: Stormy Weather
			5 = gaudi.127 #Gaudí 127: Archaeological investigations
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.106
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_NORTH_RHINE
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_dombau_building_phase_3
		remove_modifier = gaudi_dombau_cost_3_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_dombau_phase_3_modifier
			}
			remove_modifier = gaudi_dombau_phase_3_modifier
		}
		trigger_event = { 
			id = gaudi.109
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_dombau_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_dombau_phase_4 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.110 #Gaudí 110: Normal building progress
			
			2 = gaudi.111 #Gaudí 111: Inferior material
			4 = gaudi.113 #Gaudí 113: Faster construction progress
			1 = gaudi.114 #Gaudí 114: Incident
			3 = gaudi.115 #Gaudí 115: New jobs
			2 = gaudi.116 #Gaudí 116: Political Controversy
			2 = gaudi.117 #Gaudí 117: Political Support
			5 = gaudi.118 #Gaudí 118: A national or a religious Project?
			1 = gaudi.119 #Gaudí 119: Cathedral building lottery
			2 = gaudi.120 #Gaudí 120: Romantic/pious ruler
			3 = gaudi.121 #Gaudí 121: Inviting an Ally
			5 = gaudi.124 #Gaudí 124: New machines
			5 = gaudi.125 #Gaudí 125: Railways
			3 = gaudi.126 #Gaudí 126: Stormy Weather
			5 = gaudi.127 #Gaudí 127: Archaeological investigations
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.108
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_NORTH_RHINE
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_dombau_building_phase_4
		remove_modifier = gaudi_dombau_cost_4_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_dombau_phase_4_modifier
			}
			remove_modifier = gaudi_dombau_phase_4_modifier
		}
		trigger_event = { 
			id = gaudi.109
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_dombau_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######GOTTHARDBAHN######

je_gaudi_gotthard_survey = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			3 = gaudi.220 #Gaudí 220: Normal building progress
			1 = gaudi.221 #Gaudí 221: Credit from Italy
			1 = gaudi.222 #Gaudí 222: Credit from Germany
			1 = gaudi.223 #Gaudí 223: Gotthardbahngesellschaft
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.212
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				mr_state_in_uri_trigger = yes
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_gotthard_survey
		remove_modifier = gaudi_gotthard_survey_cost_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_gotthard_survey_modifier
			}
			remove_modifier = gaudi_gotthard_survey_modifier
		}
		random_scope_character = {
			limit = {
				has_modifier = gaudi_gotthard_surveyor_modifier
			}
			remove_modifier = gaudi_gotthard_surveyor_modifier
		}
		set_global_variable = {
			name = gaudi_gotthard_progress
			value = 0
		}
		trigger_event = { 
			id = gaudi.219
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_gotthard_progress
	}

	goal_add_value = {
		value = 60
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_gotthard_construction = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			300 = gaudi.220 #Gaudí 220: Normal building progress
			1 = gaudi.231 #Gaudí 231: Water ingress in the tunnel
			1 = gaudi.232 #Gaudí 232: Viaduct test
			1 = gaudi.234 #Gaudí 234: More breaks
			1 = gaudi.235 #Gaudí 235: Constricted throats
			1 = gaudi.236 #Gaudí 236: Cutthroat prices
			1 = gaudi.237 #Gaudí 237: Dirty shacks
			1 = gaudi.238 #Gaudí 238: Burried alive
			1 = gaudi.239 #Gaudí 239: New machines
			1 = gaudi.240 #Gaudí 240: Trade unions criticize Gotthard project
			1 = gaudi.241 #Gaudí 241: Escher donates money
			1 = gaudi.242 #Gaudí 242: Porous rock
			1 = gaudi.243 #Gaudí 243: Impenetrable rock
			1 = gaudi.244 #Gaudí 244: Magnificient explosions
			1 = gaudi.245 #Gaudí 245: Diseases
			1 = gaudi.246 #Gaudí 246: Foreign Investments
			1 = gaudi.249 #Gaudí 249: Durchstich
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.214
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				mr_state_in_uri_trigger = yes
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_gotthard_construction
		remove_modifier = gaudi_gotthard_construction_cost_modifier
		remove_modifier = gaudi_gotthard_waterproofing_modifier
		remove_modifier = gaudi_gotthard_bonus_modifier
		remove_modifier = gaudi_gotthard_cutthroat_shops_modifier
		remove_modifier = gaudi_gotthard_cutthroat_shops_closed_modifier
		remove_modifier = gaudi_gotthard_clean_houses_modifier
		remove_modifier = gaudi_gotthart_better_conditions_modifier
		remove_modifier = gaudi_gotthart_best_conditions_modifier
		remove_modifier = gaudi_gotthard_foreign_investor_modifier
		remove_modifier = gaudi_gotthard_experts_modifier
		remove_modifier = gaudi_gotthard_worker_condition_worse_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_gotthard_construction_modifier
			}
			remove_modifier = gaudi_gotthard_construction_modifier
			remove_modifier = gaudi_gotthard_bad_air_modifier
			remove_modifier = gaudi_gotthard_worker_influx_modifier
		}
		set_global_variable = {
			name = gaudi_gotthard_progress
			value = 0
		}
		set_global_variable = {
			name = gaudi_gotthard_discontent
			value = 0
		}
		trigger_event = { 
			id = gaudi.219
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_gotthard_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_gotthard_discontent = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.247
			popup = yes
		}
	}

	fail = {
		OR = {
			NOT = {
				any_scope_state = {
					mr_state_in_uri_trigger = yes
				}
			}
			any_scope_state = {
				has_building = building_gaudi_gotthard
			}
		}
	}

	on_fail = {
	}

	current_value = {
		value = global_var:gaudi_gotthard_discontent
	}

	goal_add_value = {
		value = 10
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######CRISTO REDENTOR######

je_gaudi_cristo = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.310 #Gaudí 310: Normal building progress

			1 = gaudi.311 #Gaudí 311: Good progress
			1 = gaudi.312 #Gaudí 312: A Donation
			1 = gaudi.313 #Gaudí 313: Clergy happy
			1 = gaudi.314 #Gaudí 314: Trade unions unhappy
			1 = gaudi.315 #Gaudí 315: Transportation problems
			1 = gaudi.316 #Gaudí 316: Accident
			1 = gaudi.317 #Gaudí 317: Thunderstorm
			1 = gaudi.318 #Gaudí 318: A praise
			1 = gaudi.319 #Gaudí 319: Atheistic intervention
			1 = gaudi.320 #Gaudí 320: Tourist investments
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		gaudi_add_1_splendid_architecture = yes
		trigger_event = { 
			id = gaudi.302
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_RIO_DE_JANEIRO
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_cristo_building
		remove_modifier = gaudi_cristo_construction_cost_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_cristo_construction_modifier
			}
			remove_modifier = gaudi_cristo_construction_modifier
		}
		trigger_event = { 
			id = gaudi.309
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_cristo_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######MOLE ANTONELLIANA######

je_gaudi_mole_phase_1 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.410 #Gaudí 410: Normal building progress
			1 = gaudi.411 #Bad bricks
			1 = gaudi.413 #Archaeological Investigations
			1 = gaudi.414 #New machines
			1 = gaudi.415 #Petite Bourgeois Donation
			1 = gaudi.416 #Antonelli just had another idea ...
			1 = gaudi.417 #Good progress
			1 = gaudi.418 #Falling beam destroys brick wall
			1 = gaudi.419 #The King makes a visit
			1 = gaudi.420 #Incident
			1 = gaudi.421 #Strike
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.402
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_PIEDMONT
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_mole_building_phase_1
		remove_modifier = gaudi_mole_cost_1_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_mole_phase_1_modifier
			}
			remove_modifier = gaudi_mole_phase_1_modifier
		}
		trigger_event = { 
			id = gaudi.409
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_mole_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_mole_phase_2 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.410 #Gaudí 410: Normal building progress
			1 = gaudi.411 #Bad bricks
			1 = gaudi.414 #New machines
			1 = gaudi.415 #Petite Bourgeois Donation
			1 = gaudi.416 #Antonelli just had another idea ...
			1 = gaudi.417 #Good progress
			1 = gaudi.418 #Falling beam destroys brick wall
			1 = gaudi.420 #Incident
			1 = gaudi.421 #Strike
			1 = gaudi.422 #Thunder destroys Spire
			1 = gaudi.423 #Nietzsche admires the Mole
			1 = gaudi.424 #Mongolfiera Italo (needs Reconnaissance Balloons)
			1 = gaudi.425 #Mongolfiera Italo Accident
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.404
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_PIEDMONT
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_mole_building_phase_2
		remove_modifier = gaudi_mole_cost_2_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_mole_phase_2_modifier
			}
			remove_modifier = gaudi_mole_phase_2_modifier
		}
		trigger_event = { 
			id = gaudi.409
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_mole_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######VIENNA RINGSTRASSE######

je_gaudi_ringstrasse_phase_1 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.510 #Gaudí 510: Normal building progress
			1 = gaudi.511 #Gaudí 511: Fountain or Pavillon?
			1 = gaudi.512 #Gaudí 512: New Statue on the Ringstrasse
			1 = gaudi.513 #Gaudí 513: Ministry
			1 = gaudi.514 #Gaudí 514: Coffee house
			1 = gaudi.515 #Gaudí 515: Ringstrassen-Palais
			1 = gaudi.516 #Gaudí 516: Good progress
			1 = gaudi.517 #Gaudí 517: Slow progress
			1 = gaudi.518 #Gaudí 518: Monument to $MONARCH$
			1 = gaudi.519 #Gaudí 519: Fire! 
			1 = gaudi.520 #Gaudí 520: Rural Folk unhappy
			1 = gaudi.521 #Gaudí 521: Industrialist Residence

			1 = gaudi.522 #Gaudí 522: Extending the Barracks
			1 = gaudi.523 #Gaudí 523: Extending the Construction Sector
			35 = gaudi.524 #Gaudí 524: Stadtpark
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.502
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_AUSTRIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_ringstrasse_building_phase_1
		remove_modifier = gaudi_ringstrasse_cost_1_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_ringstrasse_phase_1_modifier
			}
			remove_modifier = gaudi_ringstrasse_phase_1_modifier
		}
		trigger_event = { 
			id = gaudi.509
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_ringstrasse_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_ringstrasse_phase_2 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.510 #Gaudí 510: Normal building progress
			1 = gaudi.511 #Gaudí 511: Fountain or Pavillon?
			1 = gaudi.512 #Gaudí 512: New Statue on the Ringstrasse
			1 = gaudi.513 #Gaudí 513: Ministry
			1 = gaudi.514 #Gaudí 514: Coffee house
			1 = gaudi.515 #Gaudí 515: Ringstrassen-Palais
			1 = gaudi.516 #Gaudí 516: Good progress
			1 = gaudi.517 #Gaudí 517: Slow progress
			1 = gaudi.518 #Gaudí 518: Monument to $MONARCH$
			1 = gaudi.519 #Gaudí 519: Fire! 
			1 = gaudi.520 #Gaudí 520: Rural Folk unhappy
			1 = gaudi.521 #Gaudí 521: Industrialist Residence

			1 = gaudi.525 #Gaudí 525: Extending the Opera
			1 = gaudi.526 #Gaudí 526: Extending the Town Hall
			35 = gaudi.527 #Gaudí 527: Börse
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.504
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_AUSTRIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_ringstrasse_building_phase_2
		remove_modifier = gaudi_ringstrasse_cost_2_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_ringstrasse_phase_2_modifier
			}
			remove_modifier = gaudi_ringstrasse_phase_2_modifier
		}
		trigger_event = { 
			id = gaudi.509
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_ringstrasse_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_ringstrasse_phase_3 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.510 #Gaudí 510: Normal building progress
			1 = gaudi.511 #Gaudí 511: Fountain or Pavillon?
			1 = gaudi.512 #Gaudí 512: New Statue on the Ringstrasse
			1 = gaudi.513 #Gaudí 513: Ministry
			1 = gaudi.514 #Gaudí 514: Coffee house
			1 = gaudi.515 #Gaudí 515: Ringstrassen-Palais
			1 = gaudi.516 #Gaudí 516: Good progress
			1 = gaudi.517 #Gaudí 517: Slow progress
			1 = gaudi.518 #Gaudí 518: Monument to $MONARCH$
			1 = gaudi.519 #Gaudí 519: Fire! 
			1 = gaudi.520 #Gaudí 520: Rural Folk unhappy
			1 = gaudi.521 #Gaudí 521: Industrialist Residence

			1 = gaudi.528 #Gaudí 528: Extending the University
			1 = gaudi.529 #Gaudí 529: Extending the Academy
			35 = gaudi.530 #Gaudí 530: Urania
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.506
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_AUSTRIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_ringstrasse_building_phase_3
		remove_modifier = gaudi_ringstrasse_cost_3_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_ringstrasse_phase_3_modifier
			}
			remove_modifier = gaudi_ringstrasse_phase_3_modifier
		}
		trigger_event = { 
			id = gaudi.509
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_ringstrasse_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######SAGRADA FAMÍLIA######

je_gaudi_sagrada_phase_1 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.630 #Gaudí 630: Normal building progress
			4 = gaudi.631 #Gaudí 631: A Donation
			3 = gaudi.632 #Gaudí 632: Clergy happy
			2 = gaudi.633 #Gaudí 633: Trade unions unhappy
			1 = gaudi.634 #Gaudí 634: Incident
			2 = gaudi.635 #Gaudí 635: Atheistic intervention
			2 = gaudi.636 #Gaudí 636: Tourist investments
			5 = gaudi.637 #Gaudí 637: New machines
			2 = gaudi.638 #Gaudí 638: Strike
			2 = gaudi.639 #Gaudí 639: Inferior material
			4 = gaudi.641 #Gaudí 641: Faster construction progress
			3 = gaudi.642 #Gaudí 642: New jobs
			1 = gaudi.643 #Gaudí 643: Cathedral building lottery
			2 = gaudi.644 #Gaudí 644: Romantic/pious ruler
			3 = gaudi.645 #Gaudí 645: Inviting an Ally
			5 = gaudi.648 #Gaudí 648: Archaeological investigations
			3 = gaudi.649 #Gaudí 649: CHIEF ENGINEER just had another idea ...
			3 = gaudi.650 #Gaudí 650: CHIEF ENGINEER does a good job
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.602
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_CATALONIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_sagrada_building_phase_1
		remove_modifier = gaudi_sagrada_cost_1_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_sagrada_phase_1_modifier
			}
			remove_modifier = gaudi_sagrada_phase_1_modifier
		}
		trigger_event = { 
			id = gaudi.629
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_sagrada_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_sagrada_phase_2 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.630 #Gaudí 630: Normal building progress
			4 = gaudi.631 #Gaudí 631: A Donation
			3 = gaudi.632 #Gaudí 632: Clergy happy
			2 = gaudi.633 #Gaudí 633: Trade unions unhappy
			1 = gaudi.634 #Gaudí 634: Incident
			2 = gaudi.635 #Gaudí 635: Atheistic intervention
			2 = gaudi.636 #Gaudí 636: Tourist investments
			5 = gaudi.637 #Gaudí 637: New machines
			2 = gaudi.638 #Gaudí 638: Strike
			2 = gaudi.639 #Gaudí 639: Inferior material
			4 = gaudi.641 #Gaudí 641: Faster construction progress
			3 = gaudi.642 #Gaudí 642: New jobs
			1 = gaudi.643 #Gaudí 643: Cathedral building lottery
			2 = gaudi.644 #Gaudí 644: Romantic/pious ruler
			3 = gaudi.645 #Gaudí 645: Inviting an Ally
			5 = gaudi.648 #Gaudí 648: Archaeological investigations
			3 = gaudi.649 #Gaudí 649: CHIEF ENGINEER just had another idea ...
			3 = gaudi.650 #Gaudí 650: CHIEF ENGINEER does a good job
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.604
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_CATALONIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_sagrada_building_phase_2
		remove_modifier = gaudi_sagrada_cost_2_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_sagrada_phase_2_modifier
			}
			remove_modifier = gaudi_sagrada_phase_2_modifier
		}
		trigger_event = { 
			id = gaudi.629
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_sagrada_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_sagrada_phase_3 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.630 #Gaudí 630: Normal building progress
			4 = gaudi.631 #Gaudí 631: A Donation
			3 = gaudi.632 #Gaudí 632: Clergy happy
			2 = gaudi.633 #Gaudí 633: Trade unions unhappy
			1 = gaudi.634 #Gaudí 634: Incident
			2 = gaudi.635 #Gaudí 635: Atheistic intervention
			2 = gaudi.636 #Gaudí 636: Tourist investments
			5 = gaudi.637 #Gaudí 637: New machines
			2 = gaudi.638 #Gaudí 638: Strike
			2 = gaudi.639 #Gaudí 639: Inferior material
			4 = gaudi.641 #Gaudí 641: Faster construction progress
			3 = gaudi.642 #Gaudí 642: New jobs
			1 = gaudi.643 #Gaudí 643: Cathedral building lottery
			2 = gaudi.644 #Gaudí 644: Romantic/pious ruler
			3 = gaudi.645 #Gaudí 645: Inviting an Ally
			5 = gaudi.648 #Gaudí 648: Archaeological investigations
			3 = gaudi.649 #Gaudí 649: CHIEF ENGINEER just had another idea ...
			3 = gaudi.650 #Gaudí 650: CHIEF ENGINEER does a good job
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.606
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_CATALONIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_sagrada_building_phase_3
		remove_modifier = gaudi_sagrada_cost_3_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_sagrada_phase_3_modifier
			}
			remove_modifier = gaudi_sagrada_phase_3_modifier
		}
		trigger_event = { 
			id = gaudi.629
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_sagrada_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_sagrada_phase_4 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.630 #Gaudí 630: Normal building progress
			4 = gaudi.631 #Gaudí 631: A Donation
			3 = gaudi.632 #Gaudí 632: Clergy happy
			2 = gaudi.633 #Gaudí 633: Trade unions unhappy
			1 = gaudi.634 #Gaudí 634: Incident
			2 = gaudi.635 #Gaudí 635: Atheistic intervention
			2 = gaudi.636 #Gaudí 636: Tourist investments
			5 = gaudi.637 #Gaudí 637: New machines
			2 = gaudi.638 #Gaudí 638: Strike
			2 = gaudi.639 #Gaudí 639: Inferior material
			4 = gaudi.641 #Gaudí 641: Faster construction progress
			3 = gaudi.642 #Gaudí 642: New jobs
			1 = gaudi.643 #Gaudí 643: Cathedral building lottery
			2 = gaudi.644 #Gaudí 644: Romantic/pious ruler
			3 = gaudi.645 #Gaudí 645: Inviting an Ally
			5 = gaudi.648 #Gaudí 648: Archaeological investigations
			3 = gaudi.649 #Gaudí 649: CHIEF ENGINEER just had another idea ...
			3 = gaudi.650 #Gaudí 650: CHIEF ENGINEER does a good job
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.608
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_CATALONIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_sagrada_building_phase_4
		remove_modifier = gaudi_sagrada_cost_4_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_sagrada_phase_4_modifier
			}
			remove_modifier = gaudi_sagrada_phase_4_modifier
		}
		trigger_event = { 
			id = gaudi.629
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_sagrada_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_sagrada_phase_5 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.630 #Gaudí 630: Normal building progress
			4 = gaudi.631 #Gaudí 631: A Donation
			3 = gaudi.632 #Gaudí 632: Clergy happy
			2 = gaudi.633 #Gaudí 633: Trade unions unhappy
			1 = gaudi.634 #Gaudí 634: Incident
			2 = gaudi.635 #Gaudí 635: Atheistic intervention
			2 = gaudi.636 #Gaudí 636: Tourist investments
			5 = gaudi.637 #Gaudí 637: New machines
			2 = gaudi.638 #Gaudí 638: Strike
			2 = gaudi.639 #Gaudí 639: Inferior material
			4 = gaudi.641 #Gaudí 641: Faster construction progress
			3 = gaudi.642 #Gaudí 642: New jobs
			1 = gaudi.643 #Gaudí 643: Cathedral building lottery
			2 = gaudi.644 #Gaudí 644: Romantic/pious ruler
			3 = gaudi.645 #Gaudí 645: Inviting an Ally
			5 = gaudi.648 #Gaudí 648: Archaeological investigations
			3 = gaudi.649 #Gaudí 649: CHIEF ENGINEER just had another idea ...
			3 = gaudi.650 #Gaudí 650: CHIEF ENGINEER does a good job
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.610
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_CATALONIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_sagrada_building_phase_5
		remove_modifier = gaudi_sagrada_cost_5_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_sagrada_phase_5_modifier
			}
			remove_modifier = gaudi_sagrada_phase_5_modifier
		}
		trigger_event = { 
			id = gaudi.629
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_sagrada_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_sagrada_phase_6 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.630 #Gaudí 630: Normal building progress
			4 = gaudi.631 #Gaudí 631: A Donation
			3 = gaudi.632 #Gaudí 632: Clergy happy
			2 = gaudi.633 #Gaudí 633: Trade unions unhappy
			1 = gaudi.634 #Gaudí 634: Incident
			2 = gaudi.635 #Gaudí 635: Atheistic intervention
			2 = gaudi.636 #Gaudí 636: Tourist investments
			5 = gaudi.637 #Gaudí 637: New machines
			2 = gaudi.638 #Gaudí 638: Strike
			2 = gaudi.639 #Gaudí 639: Inferior material
			4 = gaudi.641 #Gaudí 641: Faster construction progress
			3 = gaudi.642 #Gaudí 642: New jobs
			1 = gaudi.643 #Gaudí 643: Cathedral building lottery
			2 = gaudi.644 #Gaudí 644: Romantic/pious ruler
			3 = gaudi.645 #Gaudí 645: Inviting an Ally
			5 = gaudi.648 #Gaudí 648: Archaeological investigations
			3 = gaudi.649 #Gaudí 649: CHIEF ENGINEER just had another idea ...
			3 = gaudi.650 #Gaudí 650: CHIEF ENGINEER does a good job
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.612
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_CATALONIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_sagrada_building_phase_6
		remove_modifier = gaudi_sagrada_cost_6_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_sagrada_phase_6_modifier
			}
			remove_modifier = gaudi_sagrada_phase_6_modifier
		}
		trigger_event = { 
			id = gaudi.629
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_sagrada_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_sagrada_phase_7 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.630 #Gaudí 630: Normal building progress
			4 = gaudi.631 #Gaudí 631: A Donation
			3 = gaudi.632 #Gaudí 632: Clergy happy
			2 = gaudi.633 #Gaudí 633: Trade unions unhappy
			1 = gaudi.634 #Gaudí 634: Incident
			2 = gaudi.635 #Gaudí 635: Atheistic intervention
			2 = gaudi.636 #Gaudí 636: Tourist investments
			5 = gaudi.637 #Gaudí 637: New machines
			2 = gaudi.638 #Gaudí 638: Strike
			2 = gaudi.639 #Gaudí 639: Inferior material
			4 = gaudi.641 #Gaudí 641: Faster construction progress
			3 = gaudi.642 #Gaudí 642: New jobs
			1 = gaudi.643 #Gaudí 643: Cathedral building lottery
			2 = gaudi.644 #Gaudí 644: Romantic/pious ruler
			3 = gaudi.645 #Gaudí 645: Inviting an Ally
			5 = gaudi.648 #Gaudí 648: Archaeological investigations
			3 = gaudi.649 #Gaudí 649: CHIEF ENGINEER just had another idea ...
			3 = gaudi.650 #Gaudí 650: CHIEF ENGINEER does a good job
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.614
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_CATALONIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_sagrada_building_phase_7
		remove_modifier = gaudi_sagrada_cost_7_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_sagrada_phase_7_modifier
			}
			remove_modifier = gaudi_sagrada_phase_7_modifier
		}
		trigger_event = { 
			id = gaudi.629
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_sagrada_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_sagrada_phase_8 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.630 #Gaudí 630: Normal building progress
			4 = gaudi.631 #Gaudí 631: A Donation
			3 = gaudi.632 #Gaudí 632: Clergy happy
			2 = gaudi.633 #Gaudí 633: Trade unions unhappy
			1 = gaudi.634 #Gaudí 634: Incident
			2 = gaudi.635 #Gaudí 635: Atheistic intervention
			2 = gaudi.636 #Gaudí 636: Tourist investments
			5 = gaudi.637 #Gaudí 637: New machines
			2 = gaudi.638 #Gaudí 638: Strike
			2 = gaudi.639 #Gaudí 639: Inferior material
			4 = gaudi.641 #Gaudí 641: Faster construction progress
			3 = gaudi.642 #Gaudí 642: New jobs
			1 = gaudi.643 #Gaudí 643: Cathedral building lottery
			2 = gaudi.644 #Gaudí 644: Romantic/pious ruler
			3 = gaudi.645 #Gaudí 645: Inviting an Ally
			5 = gaudi.648 #Gaudí 648: Archaeological investigations
			3 = gaudi.649 #Gaudí 649: CHIEF ENGINEER just had another idea ...
			3 = gaudi.650 #Gaudí 650: CHIEF ENGINEER does a good job
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.616
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_CATALONIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_sagrada_building_phase_8
		remove_modifier = gaudi_sagrada_cost_8_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_sagrada_phase_8_modifier
			}
			remove_modifier = gaudi_sagrada_phase_8_modifier
		}
		trigger_event = { 
			id = gaudi.629
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_sagrada_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_sagrada_phase_9 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.630 #Gaudí 630: Normal building progress
			4 = gaudi.631 #Gaudí 631: A Donation
			3 = gaudi.632 #Gaudí 632: Clergy happy
			2 = gaudi.633 #Gaudí 633: Trade unions unhappy
			1 = gaudi.634 #Gaudí 634: Incident
			2 = gaudi.635 #Gaudí 635: Atheistic intervention
			2 = gaudi.636 #Gaudí 636: Tourist investments
			5 = gaudi.637 #Gaudí 637: New machines
			2 = gaudi.638 #Gaudí 638: Strike
			2 = gaudi.639 #Gaudí 639: Inferior material
			4 = gaudi.641 #Gaudí 641: Faster construction progress
			3 = gaudi.642 #Gaudí 642: New jobs
			1 = gaudi.643 #Gaudí 643: Cathedral building lottery
			2 = gaudi.644 #Gaudí 644: Romantic/pious ruler
			3 = gaudi.645 #Gaudí 645: Inviting an Ally
			5 = gaudi.648 #Gaudí 648: Archaeological investigations
			3 = gaudi.649 #Gaudí 649: CHIEF ENGINEER just had another idea ...
			3 = gaudi.650 #Gaudí 650: CHIEF ENGINEER does a good job
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.618
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_CATALONIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_sagrada_building_phase_9
		remove_modifier = gaudi_sagrada_cost_9_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_sagrada_phase_9_modifier
			}
			remove_modifier = gaudi_sagrada_phase_9_modifier
		}
		trigger_event = { 
			id = gaudi.629
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_sagrada_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_sagrada_phase_10 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.630 #Gaudí 630: Normal building progress
			4 = gaudi.631 #Gaudí 631: A Donation
			3 = gaudi.632 #Gaudí 632: Clergy happy
			2 = gaudi.633 #Gaudí 633: Trade unions unhappy
			1 = gaudi.634 #Gaudí 634: Incident
			2 = gaudi.635 #Gaudí 635: Atheistic intervention
			2 = gaudi.636 #Gaudí 636: Tourist investments
			5 = gaudi.637 #Gaudí 637: New machines
			2 = gaudi.638 #Gaudí 638: Strike
			2 = gaudi.639 #Gaudí 639: Inferior material
			4 = gaudi.641 #Gaudí 641: Faster construction progress
			3 = gaudi.642 #Gaudí 642: New jobs
			1 = gaudi.643 #Gaudí 643: Cathedral building lottery
			2 = gaudi.644 #Gaudí 644: Romantic/pious ruler
			3 = gaudi.645 #Gaudí 645: Inviting an Ally
			5 = gaudi.648 #Gaudí 648: Archaeological investigations
			3 = gaudi.649 #Gaudí 649: CHIEF ENGINEER just had another idea ...
			3 = gaudi.650 #Gaudí 650: CHIEF ENGINEER does a good job
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.620
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_CATALONIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_sagrada_building_phase_10
		remove_modifier = gaudi_sagrada_cost_10_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_sagrada_phase_10_modifier
			}
			remove_modifier = gaudi_sagrada_phase_10_modifier
		}
		trigger_event = { 
			id = gaudi.629
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_sagrada_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######Neuschwanstein######

je_gaudi_neuschwanstein_phase_1 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.710 #Gaudí 710: Normal building progress
			1 = gaudi.711 #Bad bricks
			1 = gaudi.713 #Opposition criticizes Neuschwanstein
			1 = gaudi.714 #New machines
			1 = gaudi.715 #Neighbour impressed
			1 = gaudi.716 #The King just had another idea ...
			1 = gaudi.717 #Good progress
			1 = gaudi.718 #A National or a Royal Project?
			1 = gaudi.719 #The King makes a visit
			1 = gaudi.720 #Fire!
			1 = gaudi.721 #"Verein der Handwerker am königlichen Schlossbau zu Hohenschwangau"
			#1 = gaudi.722 #Artist in Neuschwanstein
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.702
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_BAVARIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_neuschwanstein_building_phase_1
		remove_modifier = gaudi_neuschwanstein_cost_1_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_neuschwanstein_phase_1_modifier
			}
			remove_modifier = gaudi_neuschwanstein_phase_1_modifier
		}
		trigger_event = { 
			id = gaudi.709
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_neuschwanstein_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_neuschwanstein_phase_2 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.710 #Gaudí 710: Normal building progress
			1 = gaudi.711 #Bad bricks
			1 = gaudi.713 #Opposition criticizes Neuschwanstein
			1 = gaudi.714 #New machines
			1 = gaudi.715 #Neighbour impressed
			1 = gaudi.716 #The King just had another idea ...
			1 = gaudi.717 #Good progress
			1 = gaudi.718 #A National or a Royal Project?
			1 = gaudi.719 #The King makes a visit
			1 = gaudi.720 #Fire!
			1 = gaudi.721 #"Verein der Handwerker am königlichen Schlossbau zu Hohenschwangau"
			#1 = gaudi.722 #Artist in Neuschwanstein
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.704
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_BAVARIA
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_neuschwanstein_building_phase_2
		remove_modifier = gaudi_neuschwanstein_cost_2_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_neuschwanstein_phase_2_modifier
			}
			remove_modifier = gaudi_neuschwanstein_phase_2_modifier
		}
		trigger_event = { 
			id = gaudi.709
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_neuschwanstein_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######PALACIO DE BELLAS ARTES######

je_gaudi_palacio_phase_1 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.810 #Gaudí 810: Normal building progress
			1 = gaudi.811 #Gaudí 811: A Donation
			1 = gaudi.812 #Gaudí 812: Trade unions unhappy
			1 = gaudi.813 #Gaudí 813: Swampy Ground
			1 = gaudi.814 #Gaudí 814: New machines
			1 = gaudi.815 #Gaudí 815: Strike
			1 = gaudi.816 #Gaudí 816: Grave Incident
			1 = gaudi.817 #Gaudí 817: Good progress
			1 = gaudi.818 #Gaudí 818: Archaeological investigations
			1 = gaudi.819 #Gaudí 819: New Jobs
			#1 = gaudi.820 #Gaudí 822: Artist in Palacio
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.802
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_MEXICO
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_palacio_building_phase_1
		remove_modifier = gaudi_palacio_cost_1_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_palacio_phase_1_modifier
			}
			remove_modifier = gaudi_palacio_phase_1_modifier
		}
		trigger_event = { 
			id = gaudi.809
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_palacio_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_palacio_phase_2 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.810 #Gaudí 810: Normal building progress
			1 = gaudi.811 #Gaudí 811: A Donation
			1 = gaudi.812 #Gaudí 812: Trade unions unhappy
			1 = gaudi.813 #Gaudí 813: Swampy Ground
			1 = gaudi.814 #Gaudí 814: New machines
			1 = gaudi.815 #Gaudí 815: Strike
			1 = gaudi.816 #Gaudí 816: Grave Incident
			1 = gaudi.817 #Gaudí 817: Good progress
			1 = gaudi.818 #Gaudí 818: Archaeological investigations
			1 = gaudi.819 #Gaudí 819: New Jobs
			#1 = gaudi.820 #Gaudí 822: Artist in Palacio
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.804
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_MEXICO
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_palacio_building_phase_2
		remove_modifier = gaudi_palacio_cost_2_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_palacio_phase_2_modifier
			}
			remove_modifier = gaudi_palacio_phase_2_modifier
		}
		trigger_event = { 
			id = gaudi.809
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_palacio_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######GYEONGBOKGUNG######

je_gaudi_gyeong_phase_1 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			175 = gaudi.910 #Gaudí 910: Normal building progress
			5 = gaudi.911 #Gaudí 911: Slow Progress
			5 = gaudi.912 #Gaudí 912: Good Progress
			5 = gaudi.913 #Gaudí 913: Fire
			5 = gaudi.914 #Gaudí 914: More Rooms
			5 = gaudi.915 #Gaudí 915: IG impressed
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.902
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_SEOUL
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_gyeong_building_phase_1
		remove_modifier = gaudi_gyeong_cost_1_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_gyeong_phase_1_modifier
			}
			remove_modifier = gaudi_gyeong_phase_1_modifier
		}
		trigger_event = { 
			id = gaudi.909
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_gyeong_progress
	}

	goal_add_value = {
		value = 60
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######EIFFEL TOWER######

je_gaudi_eiffel_phase_1 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			175 = gaudi.2110 #Gaudí 2110: Normal building progress
			5 = gaudi.2111 #Gaudí 2111: Elevator
			5 = gaudi.2112 #Gaudí 2112: Outcry of the intellectuals
			5 = gaudi.2113 #Gaudí 2113: Industrialists applaud titanic masterpiece
			5 = gaudi.2114 #Gaudí 2114: Inferior Steel
			5 = gaudi.2115 #Gaudí 2115: Quality Steel
			5 = gaudi.2116 #Gaudí 2116: Mathematician predicts collapse
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.2102
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_ILE_DE_FRANCE
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_eiffel_building_phase_1
		remove_modifier = gaudi_eiffel_cost_1_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_eiffel_phase_1_modifier
			}
			remove_modifier = gaudi_eiffel_phase_1_modifier
		}
		trigger_event = { 
			id = gaudi.2109
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_eiffel_progress
	}

	goal_add_value = {
		value = 60
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######STATUE OF LIBERTY######

je_gaudi_liberty_phase_1 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.2210 #Gaudí 2110: Normal building progress
			5 = gaudi.2211 #Gaudí 2211: Elevator
			#5 = gaudi.2212 #Gaudí 2212: Migration policy
			5 = gaudi.2213 #Gaudí 2213: Intellectuals impressed
			5 = gaudi.2214 #Gaudí 2214: An American or a French Accomplishement?
			5 = gaudi.2215 #Gaudí 2215: Quality Steel
			5 = gaudi.2216 #Gaudí 2216: A Donation
			5 = gaudi.2217 #Gaudí 2217: Incident
			5 = gaudi.2218 #Gaudí 2218: Opposition criticizes project
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.2202
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_NEW_YORK
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_liberty_building_phase_1
		remove_modifier = gaudi_liberty_cost_1_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_liberty_phase_1_modifier
			}
			remove_modifier = gaudi_liberty_phase_1_modifier
		}
		trigger_event = { 
			id = gaudi.2209
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_liberty_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######BIG BEN######

je_gaudi_ben_phase_1 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.2310 #Gaudí 2110: Normal building progress
			5 = gaudi.2311 #Gaudí 2311: Bad bricks
			5 = gaudi.2313 #Gaudí 2313: New machines
			5 = gaudi.2314 #Gaudí 2314: Good Progress
			5 = gaudi.2315 #Gaudí 2315: Slow progress
			5 = gaudi.2316 #Gaudí 2316: The Queen makes a visit
			5 = gaudi.2317 #Gaudí 2317: Fire!
			5 = gaudi.2318 #Gaudí 2318: Decoration
			5 = gaudi.2319 #Gaudí 2319: Government IG supports Parliament
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.2302
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_HOME_COUNTIES
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_ben_building_phase_1
		remove_modifier = gaudi_ben_cost_1_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_ben_phase_1_modifier
			}
			remove_modifier = gaudi_ben_phase_1_modifier
		}
		trigger_event = { 
			id = gaudi.2209
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_ben_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

je_gaudi_ben_phase_2 = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			350 = gaudi.2310 #Gaudí 2110: Normal building progress
			5 = gaudi.2311 #Gaudí 2311: Bad bricks
			5 = gaudi.2313 #Gaudí 2313: New machines
			5 = gaudi.2314 #Gaudí 2314: Good Progress
			5 = gaudi.2315 #Gaudí 2315: Slow progress
			5 = gaudi.2316 #Gaudí 2316: The Queen makes a visit
			5 = gaudi.2317 #Gaudí 2317: Fire!
			5 = gaudi.2318 #Gaudí 2318: Decoration
			5 = gaudi.2319 #Gaudí 2319: Government IG supports Parliament
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.2304
			popup = yes
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				state_region = s:STATE_HOME_COUNTIES
			}
		}
	}

	on_fail = {
		remove_global_variable = gaudi_ben_building_phase_2
		remove_modifier = gaudi_ben_cost_2_modifier
		every_state = {
			limit = {
				has_modifier = gaudi_ben_phase_2_modifier
			}
			remove_modifier = gaudi_ben_phase_2_modifier
		}
		trigger_event = { 
			id = gaudi.2309
			popup = yes
		}
	}

	current_value = {
		value = global_var:gaudi_ben_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######CAMPANILE DI SAN MARCO######

je_gaudi_rebuild_campanile = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	group = je_group_gaudi_architecture

	on_monthly_pulse = {
		random_events = {
			1 = gaudi.72 #Gaudí 72: Normal building progress
		}
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = { 
			id = gaudi.71
			popup = yes
		}
	}

	fail = {
		#NOT = {
		#	any_scope_state = {
		#		state_region = s:STATE_VENETIA
		#	}
		#}
	}

	on_fail = {
	}

	current_value = {
		value = var:gaudi_campanile_progress
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 25

	should_be_pinned_by_default = yes
}

######MOSTLY HARMLESS######

je_gaudi_nemo = {
	icon = "gfx/interface/icons/event_icons/event_navigation.dds"

	group = je_group_crises

	on_monthly_pulse = {
		random_events = {
			12 = 0

			2 = gaudi.91 #Gaudí 91: Mysterious Whale sinks another ship
			1 = gaudi.92 #Gaudí 92: Nautilus attacks coast!
		}
	}

	scripted_button = gaudi_nemo_button

	complete = {
		NOT = {
			has_modifier = gaudi_nautilus_modifier
		}
	}

	on_complete = {
	}

	fail = {
	}

	on_fail = {
	}

	current_value = {
	}

	goal_add_value = {
	}

	progressbar = no

	weight = 25

	should_be_pinned_by_default = yes
}

######SUMMER PALACE######

je_gaudi_summer_burn = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_foreign_affairs

    is_shown_when_inactive = {
		NOT = {
			has_global_variable = gaudi_summer_palace_looted
		}
        exists = c:CHI
        c:CHI = {
			any_scope_state = {
				state_region = s:STATE_BEIJING
				has_building = building_gaudi_summer
			}
			is_country_type = unrecognized
		}
		country_rank >= rank_value:major_power
    }
    possible = {
		exists = c:CHI
        has_war_with = c:CHI
    }
    immediate = {
        
    }
    complete = {
		custom_tooltip = {
			text = je_gaudi_summer_burn_success
			any_state = {
        		state_region = s:STATE_BEIJING
	        	controller = ROOT
			}
        }
    }
    on_complete = {
        trigger_event = { 
			id = gaudi.60
			popup = yes
		} # The Burning of the Summer Palace
    }
    weight = 100
    should_be_pinned_by_default = yes
}

je_gaudi_ben_burn = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_foreign_affairs

    is_shown_when_inactive = {
        exists = c:CHI
		THIS = c:CHI
        c:GBR ?= {
			any_scope_state = {
				state_region = s:STATE_HOME_COUNTIES
				has_building = building_big_ben
			}
		}
		has_variable = lost_opium_wars
    }
    possible = {
		exists = c:GBR
        has_war_with = c:GBR
    }
    immediate = {
    }
    complete = {
        custom_tooltip = {
			text = je_gaudi_ben_burn_success
			any_state = {
        		state_region = s:STATE_HOME_COUNTIES
	        	controller = ROOT
			}
        }
    }
    on_complete = {
        trigger_event = { 
			id = gaudi.62
			popup = yes
		} # The Burning of Big Ben
    }
    weight = 100
    should_be_pinned_by_default = yes
}

###################

######CIVIL ENGINEER PROJECTS######

je_gaudi_civil_research_project = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_civil_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_civil_engineering_progress_var
				add = var:gaudi_monthly_civil_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_civil_engineering_progress_var > gaudi_research_progress_cost
				}
				gaudi_civil_engineering_small_add_technology = yes
				civil_engineer_experience_gain_effect = { AMOUNT = 5 }
				post_notification = gaudi_technology_boost_from_engineer_notification
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_civil_engineering_progress_var
					subtract = gaudi_research_progress_cost
				}

				#If any other project is available, this project will be stopped.
				if = {
					limit = {
						is_ai = yes
						OR = {
							any_scope_state = {
								OR = {
									NOT = { has_modifier = gaudi_modern_roads_modifier }
									NOT = { has_modifier = gaudi_canal_systems_modifier }
									NOT = { has_modifier = gaudi_new_bridge_modifier }
									NOT = { has_modifier = gaudi_new_tunnel_modifier }
									AND = {
										NOT = { has_modifier = gaudi_modernized_railway_lines_modifier }
										any_scope_building = {
											is_building_type = building_railway
											level > 0
										}
									}
								}
							}
							any_scope_building = {
								is_building_type = building_construction_sector
								level > 0
								NOR = {
									has_modifier = gaudi_new_construction_methods_modifier
									has_modifier = gaudi_faster_construction_methods_modifier
									has_modifier = gaudi_efficient_construction_methods_modifier
								}
							}
							AND = {
								any_scope_state = {
									NOT = { has_modifier = gaudi_topographic_state_map_modifier }
								}
								NOT = { has_journal_entry = je_dufour_carte_dufour }
							}
						}
					}
					set_variable = gaudi_stop_engineering_project_var
				}
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_civil_engineering_progress_var
			value = 0
		}
		gaudi_civil_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
	}

	on_complete = {
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_civil_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_research_progress_cost
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = gaudi_stop_engineering_project_tt
				has_variable = gaudi_stop_engineering_project_var
			}
			gaudi_has_no_civil_engineer_trigger = yes
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_stop_engineering_project_var

		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_road_project = {
	icon = "gfx/interface/icons/event_icons/paved_roads.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_civil_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_civil_engineering_progress_var
				add = var:gaudi_monthly_civil_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_civil_engineering_progress_var > gaudi_road_progress_cost
				}
				if = {
					limit = {
						any_scope_state = {
							is_incorporated = yes
							NOT = { has_modifier = gaudi_modern_roads_modifier }
						}
					}
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = {
							is_incorporated = yes
							NOT = { has_modifier = gaudi_modern_roads_modifier }
						}
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_modern_roads_modifier
						}
					}
				}
				else = {
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = { NOT = { has_modifier = gaudi_modern_roads_modifier } }
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_modern_roads_modifier
						}
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_civil_engineering_progress_var
					subtract = gaudi_road_progress_cost
				}
			}
			set_variable = {
				name = gaudi_num_states_var
				value = root.num_states
			}
			set_variable = {
				name = gaudi_num_states_roads_var
				value = gaudi_states_with_roads_value
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_civil_engineering_progress_var
			value = 0
		}
		#Sets a variable for the number of states
		set_variable = {
			name = gaudi_num_states_var
			value = root.num_states
		}
		#Sets a variable for the number of states with a road modifier
		set_variable = {
			name = gaudi_num_states_roads_var
			value = gaudi_states_with_roads_value #See Gaudi Script Values for the calculation
		}
		gaudi_civil_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		custom_tooltip = { #All States need to have a roads modifier to end this journal entry
			text = gaudi_states_with_roads_tt
			var:gaudi_num_states_roads_var = var:gaudi_num_states_var
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_num_states_roads_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1101
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_civil_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_road_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_civil_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_num_states_roads_var
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_canal_project = {
	icon = "gfx/interface/icons/event_icons/steamers.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_civil_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_civil_engineering_progress_var
				add = var:gaudi_monthly_civil_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_civil_engineering_progress_var > gaudi_canal_progress_cost
				}
				if = {
					limit = {
						any_scope_state = {
							is_incorporated = yes
							NOT = { has_modifier = gaudi_canal_systems_modifier }
						}
					}
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = {
							is_incorporated = yes
							NOT = { has_modifier = gaudi_canal_systems_modifier }
						}
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_canal_systems_modifier
						}
					}
				}
				else = {
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = { NOT = { has_modifier = gaudi_canal_systems_modifier } }
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_canal_systems_modifier
						}
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_civil_engineering_progress_var
					subtract = gaudi_canal_progress_cost
				}
			}
			set_variable = {
				name = gaudi_num_states_var
				value = root.num_states
			}
			set_variable = {
				name = gaudi_num_states_canals_var
				value = gaudi_states_with_canals_value
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_civil_engineering_progress_var
			value = 0
		}
		#Sets a variable for the number of states
		set_variable = {
			name = gaudi_num_states_var
			value = root.num_states
		}
		#Sets a variable for the number of states with a road modifier
		set_variable = {
			name = gaudi_num_states_canals_var
			value = gaudi_states_with_canals_value #See Gaudi Script Values for the calculation
		}
		gaudi_civil_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		custom_tooltip = { #All States need to have a canals modifier to end this journal entry
			text = gaudi_states_with_canals_tt
			var:gaudi_num_states_canals_var = var:gaudi_num_states_var
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_num_states_canals_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1111
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_civil_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_canal_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_civil_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_num_states_canals_var
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_bridge_project = {
	icon = "gfx/interface/icons/event_icons/paved_roads.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_civil_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_civil_engineering_progress_var
				add = var:gaudi_monthly_civil_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_civil_engineering_progress_var > gaudi_bridge_progress_cost
				}
				if = {
					limit = {
						any_scope_state = {
							is_incorporated = yes
							NOT = { has_modifier = gaudi_new_bridge_modifier }
						}
					}
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = {
							is_incorporated = yes
							NOT = { has_modifier = gaudi_new_bridge_modifier }
						}
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_new_bridge_modifier
						}
					}
				}
				else = {
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = { NOT = { has_modifier = gaudi_new_bridge_modifier } }
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_new_bridge_modifier
						}
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_civil_engineering_progress_var
					subtract = gaudi_bridge_progress_cost
				}
			}
			set_variable = {
				name = gaudi_num_states_var
				value = root.num_states
			}
			set_variable = {
				name = gaudi_num_states_bridge_var
				value = gaudi_states_with_bridges_value
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_civil_engineering_progress_var
			value = 0
		}
		#Sets a variable for the number of states
		set_variable = {
			name = gaudi_num_states_var
			value = root.num_states
		}
		#Sets a variable for the number of states with a road modifier
		set_variable = {
			name = gaudi_num_states_bridge_var
			value = gaudi_states_with_bridges_value #See Gaudi Script Values for the calculation
		}
		gaudi_civil_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		custom_tooltip = { #All States need to have a bridge modifier to end this journal entry
			text = gaudi_states_with_bridges_tt
			var:gaudi_num_states_bridge_var = var:gaudi_num_states_var
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_num_states_bridge_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1121
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_civil_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_bridge_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_civil_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_num_states_bridge_var
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_tunnel_project = {
	icon = "gfx/interface/icons/event_icons/paved_roads.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_civil_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_civil_engineering_progress_var
				add = var:gaudi_monthly_civil_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_civil_engineering_progress_var > gaudi_tunnel_progress_cost
				}
				if = {
					limit = {
						any_scope_state = {
							is_incorporated = yes
							NOT = { has_modifier = gaudi_new_tunnel_modifier }
						}
					}
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = {
							is_incorporated = yes
							NOT = { has_modifier = gaudi_new_tunnel_modifier }
						}
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_new_tunnel_modifier
						}
					}
				}
				else = {
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = { NOT = { has_modifier = gaudi_new_tunnel_modifier } }
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_new_tunnel_modifier
						}
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_civil_engineering_progress_var
					subtract = gaudi_tunnel_progress_cost
				}
			}
			set_variable = {
				name = gaudi_num_states_var
				value = root.num_states
			}
			set_variable = {
				name = gaudi_num_states_tunnel_var
				value = gaudi_states_with_tunnel_value
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_civil_engineering_progress_var
			value = 0
		}
		#Sets a variable for the number of states
		set_variable = {
			name = gaudi_num_states_var
			value = root.num_states
		}
		#Sets a variable for the number of states with a road modifier
		set_variable = {
			name = gaudi_num_states_tunnel_var
			value = gaudi_states_with_tunnel_value #See Gaudi Script Values for the calculation
		}
		gaudi_civil_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		custom_tooltip = { #All States need to have a bridge modifier to end this journal entry
			text = gaudi_states_with_tunnels_tt
			var:gaudi_num_states_tunnel_var = var:gaudi_num_states_var
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_num_states_tunnel_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1131
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_civil_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_tunnel_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_civil_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_num_states_tunnel_var
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_railway_project = {
	icon = "gfx/interface/icons/event_icons/railways.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_civil_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_civil_engineering_progress_var
				add = var:gaudi_monthly_civil_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_civil_engineering_progress_var > gaudi_road_progress_cost
				}
				if = {
					limit = {
						any_scope_state = {
							is_incorporated = yes
							any_scope_building = {
								is_building_type = building_railway
								level > 0
							}
							NOT = { has_modifier = gaudi_modernized_railway_lines_modifier }
						}
					}
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = {
							is_incorporated = yes
							any_scope_building = {
								is_building_type = building_railway
								level > 0
							}
							NOT = { has_modifier = gaudi_modernized_railway_lines_modifier }
						}
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_modernized_railway_lines_modifier
						}
					}
				}
				else = {
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = {
							NOT = { has_modifier = gaudi_modernized_railway_lines_modifier }
							any_scope_building = {
								is_building_type = building_railway
								level > 0
							}
						}
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_modernized_railway_lines_modifier
						}
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_civil_engineering_progress_var
					subtract = gaudi_road_progress_cost
				}
			}
			set_variable = {
				name = gaudi_num_states_var
				value = gaudi_states_with_railways_value
			}
			set_variable = {
				name = gaudi_num_states_modernized_railway_var
				value = gaudi_states_with_modernized_railways_value
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_civil_engineering_progress_var
			value = 0
		}
		#Sets a variable for the number of states
		set_variable = {
			name = gaudi_num_states_var
			value = gaudi_states_with_railways_value
		}
		#Sets a variable for the number of states with a Modernized Railway Lines modifier
		set_variable = {
			name = gaudi_num_states_modernized_railway_var
			value = gaudi_states_with_modernized_railways_value #See Gaudi Script Values for the calculation
		}
		gaudi_civil_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		custom_tooltip = { #All States need to have a Modernized Railway Lines modifier to end this journal entry
			text = gaudi_states_with_modernized_railway_tt
			var:gaudi_num_states_modernized_railway_var = var:gaudi_num_states_var
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_num_states_modernized_railway_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1141
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_civil_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_road_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_civil_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_num_states_modernized_railway_var
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_construction_sector_project = {
	icon = "gfx/interface/icons/event_icons/event_architecture.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_civil_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_civil_engineering_progress_var
				add = var:gaudi_monthly_civil_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_civil_engineering_progress_var > gaudi_construction_sectors_progress_cost
				}
				if = { #First modifier
					limit = {
						any_scope_building = {
							is_building_type = building_construction_sector
							level > 0
							NOT = { has_modifier = gaudi_new_construction_methods_modifier }
						}
					}
					#The construction sector with the most construction sectors will be chosen
					ordered_scope_building = {
						limit = {
							NOT = { has_modifier = gaudi_new_construction_methods_modifier }
							is_building_type = building_construction_sector
							level > 0
						}
						order_by = level
						add_modifier = {
							name = gaudi_new_construction_methods_modifier
						}
					}
				}
				else_if = {
					limit = {
						any_scope_building = {
							is_building_type = building_construction_sector
							level > 0
							NOT = { has_modifier = gaudi_faster_construction_methods_modifier }
						}
					}
					#The construction sector with the most construction sectors will be chosen
					ordered_scope_building = {
						limit = {
							NOT = { has_modifier = gaudi_faster_construction_methods_modifier }
							is_building_type = building_construction_sector
							level > 0
						}
						order_by = level
						add_modifier = {
							name = gaudi_faster_construction_methods_modifier
						}
					}
				}
				else = {
					#The construction sector with the most construction sectors will be chosen
					ordered_scope_building = {
						limit = {
							NOT = { has_modifier = gaudi_efficient_construction_methods_modifier }
							is_building_type = building_construction_sector
							level > 0
						}
						order_by = level
						add_modifier = {
							name = gaudi_efficient_construction_methods_modifier
						}
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_civil_engineering_progress_var
					subtract = gaudi_construction_sectors_progress_cost
				}
			}
			set_variable = {
				name = gaudi_num_construction_sectors_var
				value = gaudi_num_construction_sectors_value
			}
			set_variable = {
				name = gaudi_num_construction_sectors_with_modifiers_var
				value = gaudi_num_construction_sectors_with_modifiers_value
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_civil_engineering_progress_var
			value = 0
		}
		#Sets a variable for the number of construction sectors
		set_variable = {
			name = gaudi_num_construction_sectors_var
			value = gaudi_num_construction_sectors_value
		}
		#Sets a variable for the number of construction sectors with the modifiers modifier
		set_variable = {
			name = gaudi_num_construction_sectors_with_modifiers_var
			value = gaudi_num_construction_sectors_with_modifiers_value
		}
		gaudi_civil_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		custom_tooltip = { #All construction sectors need to have the modifiers to end this journal entry
			text = gaudi_construction_sectors_with_modifiers_tt
			var:gaudi_num_construction_sectors_with_modifiers_var = var:gaudi_num_construction_sectors_var
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_construction_sectors_var
		remove_variable = gaudi_num_construction_sectors_with_modifiers_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1151
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_civil_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_construction_sectors_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_civil_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_construction_sectors_var
		remove_variable = gaudi_num_construction_sectors_with_modifiers_var
		remove_variable = gaudi_stop_engineering_project_var

		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_topographic_map_project = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_civil_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_civil_engineering_progress_var
				add = var:gaudi_monthly_civil_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_civil_engineering_progress_var > gaudi_topographic_map_progress_cost
				}
				if = {
					limit = {
						any_scope_state = {
							is_incorporated = yes
							NOT = { has_modifier = gaudi_topographic_state_map_modifier }
						}
					}
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = {
							is_incorporated = yes
							NOT = { has_modifier = gaudi_topographic_state_map_modifier }
						}
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_topographic_state_map_modifier
						}
					}
				}
				else = {
					#The state with the least available infrastructure will be chosen
					ordered_scope_state = {
						limit = { NOT = { has_modifier = gaudi_topographic_state_map_modifier } }
						order_by = gaudi_infrastructure_balance
						add_modifier = {
							name = gaudi_topographic_state_map_modifier
						}
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_civil_engineering_progress_var
					subtract = gaudi_topographic_map_progress_cost
				}
			}
			set_variable = {
				name = gaudi_num_states_var
				value = root.num_states
			}
			set_variable = {
				name = gaudi_states_with_topographic_map_var
				value = gaudi_states_with_topographic_map_value
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_civil_engineering_progress_var
			value = 0
		}
		#Sets a variable for the number of states
		set_variable = {
			name = gaudi_num_states_var
			value = root.num_states
		}
		#Sets a variable for the number of states with a road modifier
		set_variable = {
			name = gaudi_states_with_topographic_map_var
			value = gaudi_states_with_topographic_map_value #See Gaudi Script Values for the calculation
		}
		gaudi_civil_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		custom_tooltip = { #All States need to have a topographic map modifier to end this journal entry
			text = gaudi_states_with_topographic_maps_tt
			var:gaudi_states_with_topographic_map_var = var:gaudi_num_states_var
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_states_with_topographic_map_var

		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1161
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_civil_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_topographic_map_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_civil_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_states_var
		remove_variable = gaudi_states_with_topographic_map_var
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every civil engineering je
		remove_variable = gaudi_civil_engineering_progress_var
		remove_variable = gaudi_monthly_civil_engineering_progress_var
		remove_variable = engineer_civil_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

###################

######MECHANICAL ENGINEER PROJECTS######

je_gaudi_mechanical_research_project = {
	icon = "gfx/interface/icons/event_icons/steam_donkey.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_mechanical_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_mechanical_engineering_progress_var
				add = var:gaudi_monthly_mechanical_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_mechanical_engineering_progress_var > gaudi_research_progress_cost
				}
				gaudi_mechanical_engineering_small_add_technology = yes
				mechanical_engineer_experience_gain_effect = { AMOUNT = 5 }
				post_notification = gaudi_technology_boost_from_engineer_notification
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_mechanical_engineering_progress_var
					subtract = gaudi_research_progress_cost
				}

				#If any other project is available, this project will be stopped.
				if = {
					limit = {
						is_ai = yes
						OR = {
							any_scope_building = {
								is_building_type = building_railway
								level > 0
								NOR = {
									has_modifier = gaudi_locomotive_tier_1_modifier
									has_modifier = gaudi_locomotive_tier_2_modifier
									has_modifier = gaudi_locomotive_tier_3_modifier
									has_modifier = gaudi_locomotive_tier_4_modifier
									has_modifier = gaudi_locomotive_tier_5_modifier
								}
							}
							any_scope_building = {
								NOR = {
									is_building_group = bg_whaling
									is_building_group = bg_fishing
									is_building_group = bg_service
									is_building_group = bg_urban_facilities
									is_building_group = bg_power
									is_building_group = bg_government
									is_building_group = bg_infrastructure
									is_building_group = bg_military
									is_building_type = building_elgar_opera
								}
								level > 0
								NOR = {
									has_modifier = gaudi_building_throughput_add_modifier
									has_modifier = gaudi_building_production_mult_modifier
									has_modifier = gaudi_building_goods_input_mult_modifier
								}
							}
						}
					}
					set_variable = gaudi_stop_engineering_project_var
				}
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_mechanical_engineering_progress_var
			value = 0
		}
		gaudi_mechanical_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_mechanical_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_research_progress_cost
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = gaudi_stop_engineering_project_tt
				has_variable = gaudi_stop_engineering_project_var
			}
			gaudi_has_no_mechanical_engineer_trigger = yes
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_stop_engineering_project_var

		#Those should be removed in every mechanical engineering je
		remove_variable = gaudi_mechanical_engineering_progress_var
		remove_variable = gaudi_monthly_mechanical_engineering_progress_var
		remove_variable = engineer_mechanical_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_new_locomotives_project = {
	icon = "gfx/interface/icons/event_icons/locomotives.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_mechanical_engineering_progress = yes
			#Adds the monthly progress to the variable
			if = {
				limit = { NOT = { var:gaudi_mechanical_engineering_progress_var > gaudi_locomotives_progress_cost } }
				change_variable = {
					name = gaudi_mechanical_engineering_progress_var
					add = var:gaudi_monthly_mechanical_engineering_progress_var
				}
			}
			#If the Progress reaches the cost, the modifier will be added to a state
			else = {
				if = {
					limit = {
						any_scope_building = {
							is_building_type = building_railway
							level > 0
							NOT = { has_modifier = gaudi_locomotive_tier_1_modifier }
						}
					}
					#The railways with the most building levels will be chosen
					ordered_scope_building = {
						limit = {
							NOT = { has_modifier = gaudi_locomotive_tier_1_modifier }
							is_building_type = building_railway
							level > 0
						}
						order_by = level
						add_modifier = {
							name = gaudi_locomotive_tier_1_modifier
						}
					}
					if = {
						limit = {
							any_scope_state = {
								count = all
								any_scope_building = {
									is_building_type = building_railway
									level > 0
									has_modifier = gaudi_locomotive_tier_1_modifier
								}
							}
						}
						#The cost will be subtracted from the current progress
						change_variable = {
							name = gaudi_mechanical_engineering_progress_var
							subtract = gaudi_locomotives_progress_cost
						}
					}
				}
				else_if = {
					limit = {
						any_scope_building = {
							is_building_type = building_railway
							level > 0
							NOT = { has_modifier = gaudi_locomotive_tier_2_modifier }
						}
					}
					#The railways with the most building levels will be chosen
					ordered_scope_building = {
						limit = {
							NOT = { has_modifier = gaudi_locomotive_tier_2_modifier }
							is_building_type = building_railway
							level > 0
						}
						order_by = level
						add_modifier = {
							name = gaudi_locomotive_tier_2_modifier
						}
					}
					if = {
						limit = {
							any_scope_state = {
								count = all
								any_scope_building = {
									is_building_type = building_railway
									level > 0
									has_modifier = gaudi_locomotive_tier_2_modifier
								}
							}
						}
						#The cost will be subtracted from the current progress
						change_variable = {
							name = gaudi_mechanical_engineering_progress_var
							subtract = gaudi_locomotives_progress_cost
						}
					}
				}
				else_if = {
					limit = {
						any_scope_building = {
							is_building_type = building_railway
							level > 0
							NOT = { has_modifier = gaudi_locomotive_tier_3_modifier }
						}
					}
					#The railways with the most building levels will be chosen
					ordered_scope_building = {
						limit = {
							NOT = { has_modifier = gaudi_locomotive_tier_3_modifier }
							is_building_type = building_railway
							level > 0
						}
						order_by = level
						add_modifier = {
							name = gaudi_locomotive_tier_3_modifier
						}
					}
					if = {
						limit = {
							any_scope_state = {
								count = all
								any_scope_building = {
									is_building_type = building_railway
									level > 0
									has_modifier = gaudi_locomotive_tier_3_modifier
								}
							}
						}
						#The cost will be subtracted from the current progress
						change_variable = {
							name = gaudi_mechanical_engineering_progress_var
							subtract = gaudi_locomotives_progress_cost
						}
					}
				}
				else_if = {
					limit = {
						any_scope_building = {
							is_building_type = building_railway
							level > 0
							NOT = { has_modifier = gaudi_locomotive_tier_4_modifier }
						}
					}
					#The railways with the most building levels will be chosen
					ordered_scope_building = {
						limit = {
							NOT = { has_modifier = gaudi_locomotive_tier_4_modifier }
							is_building_type = building_railway
							level > 0
						}
						order_by = level
						add_modifier = {
							name = gaudi_locomotive_tier_4_modifier
						}
					}
					if = {
						limit = {
							any_scope_state = {
								count = all
								any_scope_building = {
									is_building_type = building_railway
									level > 0
									has_modifier = gaudi_locomotive_tier_4_modifier
								}
							}
						}
						#The cost will be subtracted from the current progress
						change_variable = {
							name = gaudi_mechanical_engineering_progress_var
							subtract = gaudi_locomotives_progress_cost
						}
					}
				}
				else = {
					#The railways with the most building levels will be chosen
					ordered_scope_building = {
						limit = {
							NOT = { has_modifier = gaudi_locomotive_tier_5_modifier }
							is_building_type = building_railway
							level > 0
						}
						order_by = level
						add_modifier = {
							name = gaudi_locomotive_tier_5_modifier
						}
					}
				}
			}
			set_variable = {
				name = gaudi_num_railway_buildings_var
				value = gaudi_num_railway_buildings_value
			}
			set_variable = {
				name = gaudi_num_railway_buildings_with_first_modifier_var
				value = gaudi_num_railway_buildings_with_first_modifier_value
			}
			set_variable = {
				name = gaudi_num_railway_buildings_with_second_modifier_var
				value = gaudi_num_railway_buildings_with_second_modifier_value
			}
			set_variable = {
				name = gaudi_num_railway_buildings_with_third_modifier_var
				value = gaudi_num_railway_buildings_with_third_modifier_value
			}
			set_variable = {
				name = gaudi_num_railway_buildings_with_fourth_modifier_var
				value = gaudi_num_railway_buildings_with_fourth_modifier_value
			}
			set_variable = {
				name = gaudi_num_railway_buildings_with_modifiers_var
				value = gaudi_num_railway_buildings_with_modifiers_value
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Mechanical Engineering Progress at the beginning
		set_variable = {
			name = gaudi_mechanical_engineering_progress_var
			value = 0
		}
		#Sets a variable for the number of buildings
		set_variable = {
			name = gaudi_num_railway_buildings_var
			value = gaudi_num_railway_buildings_value
		}
		#Sets a variable for the number of buildings with the modifiers
		set_variable = {
			name = gaudi_num_railway_buildings_with_first_modifier_var
			value = gaudi_num_railway_buildings_with_first_modifier_value
		}
		set_variable = {
			name = gaudi_num_railway_buildings_with_second_modifier_var
			value = gaudi_num_railway_buildings_with_second_modifier_value
		}
		set_variable = {
			name = gaudi_num_railway_buildings_with_third_modifier_var
			value = gaudi_num_railway_buildings_with_third_modifier_value
		}
		set_variable = {
			name = gaudi_num_railway_buildings_with_fourth_modifier_var
			value = gaudi_num_railway_buildings_with_fourth_modifier_value
		}
		set_variable = {
			name = gaudi_num_railway_buildings_with_modifiers_var
			value = gaudi_num_railway_buildings_with_modifiers_value #See Gaudi Script Values for the calculation
		}
		gaudi_mechanical_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		custom_tooltip = { #All railways need to have the modifiers to end this journal entry
			text = gaudi_railways_with_new_locomotives_tt
			var:gaudi_num_railway_buildings_with_modifiers_var = var:gaudi_num_railway_buildings_var
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_railway_buildings_var
		remove_variable = gaudi_num_railway_buildings_with_first_modifier_var
		remove_variable = gaudi_num_railway_buildings_with_second_modifier_var
		remove_variable = gaudi_num_railway_buildings_with_third_modifier_var
		remove_variable = gaudi_num_railway_buildings_with_fourth_modifier_var
		remove_variable = gaudi_num_railway_buildings_with_modifiers_var

		#Those should be removed in every mechanical engineering je
		remove_variable = gaudi_mechanical_engineering_progress_var
		remove_variable = gaudi_monthly_mechanical_engineering_progress_var
		remove_variable = engineer_mechanical_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1201
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_mechanical_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_locomotives_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_mechanical_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_railway_buildings_var
		remove_variable = gaudi_num_railway_buildings_with_first_modifier_var
		remove_variable = gaudi_num_railway_buildings_with_second_modifier_var
		remove_variable = gaudi_num_railway_buildings_with_third_modifier_var
		remove_variable = gaudi_num_railway_buildings_with_fourth_modifier_var
		remove_variable = gaudi_num_railway_buildings_with_modifiers_var
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every mechanical engineering je
		remove_variable = gaudi_mechanical_engineering_progress_var
		remove_variable = gaudi_monthly_mechanical_engineering_progress_var
		remove_variable = engineer_mechanical_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_modernizing_industries_project = {
	icon = "gfx/interface/icons/event_icons/machinists.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_mechanical_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_mechanical_engineering_progress_var
				add = var:gaudi_monthly_mechanical_engineering_progress_var
			}
			if = {
				limit = { var:gaudi_mechanical_engineering_progress_var > gaudi_industries_progress_cost }
				if = {
					limit = {
						any_scope_building = {
							has_modifier = gaudi_engineer_focus_building
							NOT = { has_modifier = gaudi_building_throughput_add_modifier }
						}
					}
					random_scope_building = {
						limit = {
							has_modifier = gaudi_engineer_focus_building
							NOT = { has_modifier = gaudi_building_throughput_add_modifier }
						}
						add_modifier = {
							name = gaudi_building_throughput_add_modifier
						}
					}
					change_variable = {
						name = gaudi_mechanical_engineering_progress_var
						subtract = gaudi_industries_progress_cost
					}
				}
				else_if = {
					limit = {
						any_scope_building = {
							has_modifier = gaudi_engineer_focus_building
							NOT = { has_modifier = gaudi_building_production_mult_modifier }
						}
					}
					random_scope_building = {
						limit = {
							has_modifier = gaudi_engineer_focus_building
							NOT = { has_modifier = gaudi_building_production_mult_modifier }
						}
						add_modifier = {
							name = gaudi_building_production_mult_modifier
						}
					}
					change_variable = {
						name = gaudi_mechanical_engineering_progress_var
						subtract = gaudi_industries_progress_cost
					}
				}
				else = {
					random_scope_building = {
						limit = {
							has_modifier = gaudi_engineer_focus_building
							NOT = { has_modifier = gaudi_building_goods_input_mult_modifier }
						}
						add_modifier = {
							name = gaudi_building_goods_input_mult_modifier
						}
					}
					change_variable = {
						name = gaudi_mechanical_engineering_progress_var
						subtract = gaudi_industries_progress_cost
					}
				}
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		ordered_scope_building = {
			limit = {
				level > 0
				NOR = {
					is_building_group = bg_whaling
					is_building_group = bg_fishing
					is_building_group = bg_service
					is_building_group = bg_urban_facilities
					is_building_group = bg_power
					is_building_group = bg_government
					is_building_group = bg_infrastructure
					is_building_group = bg_military
					is_building_type = building_elgar_opera
				}
				NOR = {
					has_modifier = gaudi_building_throughput_add_modifier
					has_modifier = gaudi_building_production_mult_modifier
					has_modifier = gaudi_building_goods_input_mult_modifier
				}
			}
			order_by = earnings
			add_modifier = {
				name = gaudi_engineer_focus_building
			}
			root = {
				set_variable = {
					name = gaudi_industrial_building_modernizing_var
					value = prev
				}
			}
		}
		#Sets the Mechanical Engineering Progress at the beginning
		set_variable = {
			name = gaudi_mechanical_engineering_progress_var
			value = 0
		}
		gaudi_mechanical_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		custom_tooltip = {
			text = gaudi_industrial_building_has_throughput_modifier_tt
			any_scope_building = {
				has_modifier = gaudi_engineer_focus_building
				has_modifier = gaudi_building_throughput_add_modifier
			}
		}
		custom_tooltip = {
			text = gaudi_industrial_building_has_production_modifier_tt
			any_scope_building = {
				has_modifier = gaudi_engineer_focus_building
				has_modifier = gaudi_building_production_mult_modifier
			}
		}
		custom_tooltip = {
			text = gaudi_industrial_building_has_input_modifier_tt
			any_scope_building = {
				has_modifier = gaudi_engineer_focus_building
				has_modifier = gaudi_building_goods_input_mult_modifier
			}
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		
		#Those should be removed in every mechanical engineering je
		remove_variable = gaudi_mechanical_engineering_progress_var
		remove_variable = gaudi_monthly_mechanical_engineering_progress_var
		remove_variable = engineer_mechanical_experience_add_var

		every_scope_building = {
			limit = {
				has_modifier = gaudi_engineer_focus_building
			}
			remove_modifier = gaudi_engineer_focus_building
		}
		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1211
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_mechanical_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_industries_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_mechanical_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		
		#Those should be removed in every mechanical engineering je
		remove_variable = gaudi_mechanical_engineering_progress_var
		remove_variable = gaudi_monthly_mechanical_engineering_progress_var
		remove_variable = engineer_mechanical_experience_add_var

		every_scope_building = {
			limit = {
				has_modifier = gaudi_engineer_focus_building
			}
			remove_modifier = gaudi_engineer_focus_building
		}
		remove_variable = gaudi_stop_engineering_project_var
		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_mechanical_computer_project = {
	icon = "gfx/interface/icons/event_icons/machinists.dds"

	scripted_button = gaudi_stop_engineering_project_button
#	scripted_button = gaudi_additional_support_for_civil_engineer_button
#	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	scripted_progress_bar = gaudi_mechanical_computer_project_progress_bar

	modifiers_while_active = {
		gaudi_engineer_project_very_high_cost_modifier
	}

	on_monthly_pulse = {
	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					gaudi_has_mechanical_engineer_trigger = yes
				}
				set_variable = {
					name = engineer_mechanical_experience_add_var
					value = gaudi_mechanical_engineer_progress_gain_from_experience
				}
			}
			set_variable = {
				name = gaudi_num_tooling_workshop_levels_var
				value = gaudi_num_tooling_workshop_levels_value
			}
			set_variable = {
				name = gaudi_mechanical_computer_monthly_progress_var
				value = gaudi_mechanical_computer_monthly_progress_value
			}
		}
	}

	immediate = {
		if = {
			limit = {
				gaudi_has_mechanical_engineer_trigger = yes
			}
			set_variable = {
				name = engineer_mechanical_experience_add_var
				value = gaudi_mechanical_engineer_progress_gain_from_experience
			}
		}
		set_variable = {
			name = gaudi_num_tooling_workshop_levels_var
			value = gaudi_num_tooling_workshop_levels_value
		}
		set_variable = {
			name = gaudi_mechanical_computer_monthly_progress_var
			value = gaudi_mechanical_computer_monthly_progress_value
		}
	}

	complete = {
		custom_tooltip = {
			text = je_gaudi_mechanical_computer_progress_complete_tt
			je:je_gaudi_mechanical_computer_project = {
				"scripted_bar_progress(gaudi_mechanical_computer_project_progress_bar)" >= 2000
			}
		}
	}

	on_complete = {
		trigger_event = gaudi.1221
		add_technology_researched = verrier_mechanical_computer_tech
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed

		remove_variable = gaudi_mechanical_computer_progress_save_var #As it is only completeable once, this will remove the variable
		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		remove_variable = engineer_mechanical_experience_add_var
		remove_variable = gaudi_num_tooling_workshop_levels_var
		remove_variable = gaudi_mechanical_computer_monthly_progress_var
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_mechanical_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes

		set_variable = {
			name = gaudi_mechanical_computer_progress_save_var
			value = gaudi_mechanical_computer_progress_percentage_value
		}

		remove_variable = gaudi_stop_engineering_project_var
		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		remove_variable = engineer_mechanical_experience_add_var
		remove_variable = gaudi_num_tooling_workshop_levels_var
		remove_variable = gaudi_mechanical_computer_monthly_progress_var
	}

	weight = 30

	should_be_pinned_by_default = yes
}

###################

######MILITARY ENGINEER PROJECTS######

je_gaudi_military_research_project = {
	icon = "gfx/interface/icons/event_icons/breech_loading_artillery.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_military_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_military_engineering_progress_var
				add = var:gaudi_monthly_military_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_military_engineering_progress_var > gaudi_research_progress_cost
				}
				gaudi_military_engineering_small_add_technology = yes
				military_engineer_experience_gain_effect = { AMOUNT = 5 }
				post_notification = gaudi_technology_boost_from_engineer_notification
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_military_engineering_progress_var
					subtract = gaudi_research_progress_cost
				}
				if = {
					limit = {
						is_ai = yes
						OR = {
							AND = {
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_weapon }
									var:gaudi_military_engineer_advanced_weapon < 3
								}
								has_technology_researched = rifling
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_weapon }
									NOT = { var:gaudi_military_engineer_advanced_weapon > 2 }
								}
								trigger_else = {
									always = yes
								}
							}
							AND = {
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_tanks }
									var:gaudi_military_engineer_advanced_tanks < 3
								}
								has_technology_researched = mobile_armor
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_tanks }
									NOT = { var:gaudi_military_engineer_advanced_tanks > 2 }
								}
								trigger_else = {
									always = yes
								}
							}
							AND = {
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_defence_var }
									var:gaudi_military_engineer_advanced_defence_var < 3
								}
								has_technology_researched = field_works
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_defence_var }
									NOT = { var:gaudi_military_engineer_advanced_defence_var > 2 }
								}
								trigger_else = {
									always = yes
								}
							}
						}
					}
					set_variable = gaudi_stop_engineering_project_var
				}
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_military_engineering_progress_var
			value = 0
		}
		gaudi_military_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_military_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_research_progress_cost
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = gaudi_stop_engineering_project_tt
				has_variable = gaudi_stop_engineering_project_var
			}
			gaudi_has_no_military_engineer_trigger = yes
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_stop_engineering_project_var

		#Those should be removed in every military engineering je
		remove_variable = gaudi_military_engineering_progress_var
		remove_variable = gaudi_monthly_military_engineering_progress_var
		remove_variable = engineer_military_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_naval_research_project = {
	icon = "gfx/interface/icons/event_icons/dreadnought.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_military_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_military_engineering_progress_var
				add = var:gaudi_monthly_military_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_military_engineering_progress_var > gaudi_research_progress_cost
				}
				gaudi_naval_engineering_small_add_technology = yes
				military_engineer_experience_gain_effect = { AMOUNT = 5 }
				post_notification = gaudi_technology_boost_from_engineer_notification
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_military_engineering_progress_var
					subtract = gaudi_research_progress_cost
				}
				if = {
					limit = {
						is_ai = yes
						OR = {
							AND = {
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_weapon }
									var:gaudi_military_engineer_advanced_weapon < 3
								}
								has_technology_researched = rifling
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_weapon }
									NOT = { var:gaudi_military_engineer_advanced_weapon > 2 }
								}
								trigger_else = {
									always = yes
								}
							}
							AND = {
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_tanks }
									var:gaudi_military_engineer_advanced_tanks < 3
								}
								has_technology_researched = mobile_armor
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_tanks }
									NOT = { var:gaudi_military_engineer_advanced_tanks > 2 }
								}
								trigger_else = {
									always = yes
								}
							}
							AND = {
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_defence_var }
									var:gaudi_military_engineer_advanced_defence_var < 3
								}
								has_technology_researched = field_works
								trigger_if = {
									limit = { has_variable = gaudi_military_engineer_advanced_defence_var }
									NOT = { var:gaudi_military_engineer_advanced_defence_var > 2 }
								}
								trigger_else = {
									always = yes
								}
							}
						}
					}
					set_variable = gaudi_stop_engineering_project_var
				}
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_military_engineering_progress_var
			value = 0
		}
		gaudi_military_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
	}

	on_complete = {
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_military_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_research_progress_cost
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = gaudi_stop_engineering_project_tt
				has_variable = gaudi_stop_engineering_project_var
			}
			gaudi_has_no_military_engineer_trigger = yes
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every military engineering je
		remove_variable = gaudi_military_engineering_progress_var
		remove_variable = gaudi_monthly_military_engineering_progress_var
		remove_variable = engineer_military_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_advanced_weapons_project = {
	icon = "gfx/interface/icons/event_icons/event_rifling.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_military_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_military_engineering_progress_var
				add = var:gaudi_monthly_military_engineering_progress_var
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_military_engineering_progress_var
			value = 0
		}
		gaudi_military_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		
		#Those should be removed in every military engineering je
		remove_variable = gaudi_military_engineering_progress_var
		remove_variable = gaudi_monthly_military_engineering_progress_var
		remove_variable = engineer_military_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1301
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_military_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_advanced_weapons_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_military_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every military engineering je
		remove_variable = gaudi_military_engineering_progress_var
		remove_variable = gaudi_monthly_military_engineering_progress_var
		remove_variable = engineer_military_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_advanced_tanks_project = {
	icon = "gfx/interface/icons/event_icons/mobile_armor.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_military_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_military_engineering_progress_var
				add = var:gaudi_monthly_military_engineering_progress_var
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_military_engineering_progress_var
			value = 0
		}
		gaudi_military_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		
		#Those should be removed in every military engineering je
		remove_variable = gaudi_military_engineering_progress_var
		remove_variable = gaudi_monthly_military_engineering_progress_var
		remove_variable = engineer_military_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1311
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_military_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_advanced_tanks_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_military_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every military engineering je
		remove_variable = gaudi_military_engineering_progress_var
		remove_variable = gaudi_monthly_military_engineering_progress_var
		remove_variable = engineer_military_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_advanced_defence_project = {
	icon = "gfx/interface/icons/event_icons/unit_defense.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_military_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_military_engineering_progress_var
				add = var:gaudi_monthly_military_engineering_progress_var
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_military_engineering_progress_var
			value = 0
		}
		gaudi_military_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		
		#Those should be removed in every military engineering je
		remove_variable = gaudi_military_engineering_progress_var
		remove_variable = gaudi_monthly_military_engineering_progress_var
		remove_variable = engineer_military_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1321
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_military_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_advanced_defence_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_military_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every military engineering je
		remove_variable = gaudi_military_engineering_progress_var
		remove_variable = gaudi_monthly_military_engineering_progress_var
		remove_variable = engineer_military_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

###################

######ELECTRICAL ENGINEER PROJECTS######

je_gaudi_electrical_research_project = {
	icon = "gfx/interface/icons/event_icons/electrical_generation.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_electrical_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_electrical_engineering_progress_var
				add = var:gaudi_monthly_electrical_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_electrical_engineering_progress_var > gaudi_research_progress_cost
				}
				gaudi_electrical_engineering_small_add_technology = yes
				electrical_engineer_experience_gain_effect = { AMOUNT = 5 }
				post_notification = gaudi_technology_boost_from_engineer_notification
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_electrical_engineering_progress_var
					subtract = gaudi_research_progress_cost
				}
				if = {
					limit = {
						is_ai = yes
						OR = {
							AND = {
								NOR = {
									has_variable = gaudi_magnetic_station_var
									any_scope_building = {
										is_building_type = building_verrier_observatory
										has_active_production_method = pm_gaudi_magnetic_observatory
										level > 0
									}
								}
								OR = {
									AND = {
										has_technology_researched = verrier_electromagnetism_tech
										OR = {
											gaudi_has_mechanical_engineer_trigger = yes
											gaudi_has_civil_engineer_trigger = yes
										}
									}
									AND = {
										verrier_has_astronomer = yes
										OR = {
											gaudi_has_mechanical_engineer_trigger = yes
											gaudi_has_civil_engineer_trigger = yes
										}
									}
									gaudi_has_electrical_engineer_trigger = yes
								}
							}
							AND = {
								has_technology_researched = electric_telegraph
								NOR = {
									has_modifier = gaudi_building_telegraph_network_modifier
									has_technology_researched = radio
									any_scope_state = {
										any_scope_building = {
											is_building_type = building_railway
											has_active_production_method = pm_gaudi_telegraph_office
										}
										percent >= 1
									}
								}
								any_scope_state = {
									is_capital = yes
									has_building = building_railway
								}
								any_scope_state = {
									has_building = building_railway
									percent >= 0.65
								}
							}
							AND = {
								has_technology_researched = radio
								NOR = {
									has_modifier = gaudi_building_radio_network_modifier
									any_scope_state = {
										any_scope_building = {
											is_building_type = building_railway
											has_active_production_method = pm_elgar_radio_stations
										}
										percent >= 1
									}
								}
								any_scope_state = {
									is_capital = yes
									has_building = building_railway
								}
								any_scope_state = {
									has_building = building_railway
									percent >= 0.65
								}
							}
						}
					}
					set_variable = gaudi_stop_engineering_project_var
				}
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Electrical Engineering Progress at the beginning
		set_variable = {
			name = gaudi_electrical_engineering_progress_var
			value = 0
		}
		gaudi_electrical_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
	}

	on_complete = {
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_electrical_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_research_progress_cost
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = gaudi_stop_engineering_project_tt
				has_variable = gaudi_stop_engineering_project_var
			}
			gaudi_has_no_electrical_engineer_trigger = yes
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_stop_engineering_project_var
		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_magnetic_observation = {
	icon = "gfx/interface/icons/event_icons/electrical_generation.dds"

	group = je_group_gaudi_engineers

	on_yearly_pulse = {
		effect = {
			change_global_variable = {
				name = gaudi_total_magnetic_data
				add = global_var:gaudi_magnetic_association_members
			}
			every_country = {
				limit = {
					has_variable = gaudi_magnetic_association_members
				}
				change_variable = {
					name = gaudi_magnetic_data
					add = 1
				}
			}
		}
	}

	immediate = {
	}

	complete = {
		any_country = {
			any_scope_building = {
				is_building_type = building_verrier_observatory
				has_active_production_method = pm_gaudi_magnetic_observatory
			}
			count >= 10
		}
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		every_country = {
			limit = {
				has_variable = gaudi_magnetic_association_member_var
			}
			trigger_event = {
				id = gaudi.1403
			}
		}
	}

	current_value = {
		value = global_var:gaudi_total_magnetic_data
	}

	goal_add_value = {
		value = 100
	}

	invalid = {
	}

	on_invalid = {
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_magnetic_station = {
	icon = "gfx/interface/icons/event_icons/electrical_generation.dds"

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = gaudi_megnetic_station_progress
				add = 1
			}
		}

		random_events = {
			25 = 0
			1 = gaudi.1404 #Gaudi 1404: Nautical interest
			1 = gaudi.1405 #Gaudi 1405: An Anomaly
			1 = gaudi.1406 #Gaudi 1406: Astronomer consults Geomagnetic Observatory
		}
	}

	immediate = {
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		trigger_event = {
			id = gaudi.1402
			popup = yes
		}
	}

	current_value = {
		value = var:gaudi_megnetic_station_progress
	}

	goal_add_value = {
		value = 24
	}

	invalid = {
	}

	on_invalid = {
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_telegraphy_network = {
	icon = "gfx/interface/icons/event_icons/event_telegraph.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_electrical_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_electrical_engineering_progress_var
				add = var:gaudi_monthly_electrical_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the PM will be unlocked in a state
				limit = {
					var:gaudi_electrical_engineering_progress_var >= 12
				}
				#Electrical Engineer gets experience
				electrical_engineer_experience_gain_effect = { AMOUNT = 10 }
				#The state with the next available telegraph office will be chosen
				random_scope_state = {
					limit = {
						has_building = building_railway
						NOT = {
							any_scope_building = {
								is_building_type = building_railway
								has_active_production_method = pm_gaudi_telegraph_office
							}
						}
						OR = {
							any_neighbouring_state = {
								any_scope_building = {
									is_building_type = building_railway
									has_active_production_method = pm_gaudi_telegraph_office
								}
							}
							owner = {
								has_technology_researched = verrier_electromagnetism_tech
							}
						}
					}
					activate_production_method = {
						building_type = building_railway
						production_method = pm_gaudi_telegraph_office
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_electrical_engineering_progress_var
					subtract = 12
				}
			}
		}

		events = {
			gaudi.1414 #Gaudí 1414: Universities connected via Telegraph
			gaudi.1415 #Gaudí 1415: A Telegram to your Neigbour
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Electrical Engineering Progress at the beginning
		set_variable = {
			name = gaudi_electrical_engineering_progress_var
			value = 0
		}
		gaudi_electrical_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_railway
				has_active_production_method = pm_gaudi_telegraph_office
			}
			percent >= 1
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		trigger_event = {
			id = gaudi.1413
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a PM will be unlocked.
		value = var:gaudi_electrical_engineering_progress_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_electrical_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		trigger_event = {
			id = gaudi.1412
			popup = yes
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_radio_network = {
	icon = "gfx/interface/icons/event_icons/radio.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_electrical_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_electrical_engineering_progress_var
				add = var:gaudi_monthly_electrical_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the PM will be unlocked in a state
				limit = {
					var:gaudi_electrical_engineering_progress_var >= 12
				}
				#Electrical Engineer gets experience
				electrical_engineer_experience_gain_effect = { AMOUNT = 10 }
				#The state with the next available telegraph office will be chosen
				random_scope_state = {
					limit = {
						has_building = building_railway
						NOT = {
							any_scope_building = {
								is_building_type = building_railway
								has_active_production_method = pm_elgar_radio_stations
							}
						}
					}
					activate_production_method = {
						building_type = building_railway
						production_method = pm_elgar_radio_stations
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_electrical_engineering_progress_var
					subtract = 12
				}
			}
		}

		events = {
			gaudi.1424 #Gaudí 1424: First Radio Program
			gaudi.1425 #Gaudí 1425: Agitation
			gaudi.1426 #Gaudí 1426: A disturbing Radio Play
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Electrical Engineering Progress at the beginning
		set_variable = {
			name = gaudi_electrical_engineering_progress_var
			value = 0
		}
		gaudi_electrical_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_railway
				has_active_production_method = pm_elgar_radio_stations
			}
			percent >= 1
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		trigger_event = {
			id = gaudi.1423
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a PM will be unlocked.
		value = var:gaudi_electrical_engineering_progress_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_electrical_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_stop_engineering_project_var #Needs to be removed, when the JE is removed
		trigger_event = {
			id = gaudi.1422
			popup = yes
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

#je_gaudi_transatlantic_cable = {
#	icon = "gfx/interface/icons/event_icons/event_telegraph.dds"
#
#	group = je_group_gaudi_engineers
#
#	can_deactivate = yes
#
#	is_shown_when_inactive = {
#		OR = {
#			any_scope_state = {
#				state_region = s:STATE_MUNSTER
#			}
#			any_scope_state = {
#				state_region = s:STATE_NEWFOUNDLAND
#			}
#		}
#	}
#
#	possible = {
#		has_technology_researched = electric_telegraph
#		OR = {
#			any_scope_state = {
#				state_region = s:STATE_MUNSTER
#			}
#			any_scope_state = {
#				state_region = s:STATE_NEWFOUNDLAND
#			}
#		}
#	}
#
#	immediate = {
#	}
#
#	complete = {
#		gaudi_has_electrical_engineer_trigger = yes
#		any_state = {
#			state_region = s:STATE_MUNSTER
#			any_scope_building = {
#				is_building_type = building_railway
#				has_active_production_method = pm_gaudi_telegraph_office
#			}
#		}
#		any_state = {
#			state_region = s:STATE_NEWFOUNDLAND
#			any_scope_building = {
#				is_building_type = building_railway
#				has_active_production_method = pm_gaudi_telegraph_office
#			}
#		}
#	}
#
#	on_complete = {
#		every_country = {
#			limit = {
#				OR = {
#					any_scope_state = {
#						state_region = s:STATE_MUNSTER
#					}
#					any_scope_state = {
#						state_region = s:STATE_NEWFOUNDLAND
#					}
#				}
#			}
#			trigger_event = {
#				id = gaudi.1420
#			}
#		}
#		set_global_variable = gaudi_transatlantic_cable_var
#	}
#
#	current_value = {
#	}
#
#	goal_add_value = {
#	}
#
#	invalid = {
#		OR = {
#			has_global_variable = gaudi_transatlantic_cable_var
#			has_technology_researched = radio
#		}
#	}
#
#	on_invalid = {
#	}
#
#	progressbar = no
#
#	weight = 30
#
#	should_be_pinned_by_default = yes
#}

je_gaudi_transatlantic_radio = {
	icon = "gfx/interface/icons/event_icons/radio.dds"

	group = je_group_gaudi_engineers

	can_deactivate = yes

	is_shown_when_inactive = {
		OR = {
			any_scope_state = {
				state_region = s:STATE_NEWFOUNDLAND
			}
			any_scope_state = {
				state_region = s:STATE_WEST_COUNTRY
			}
		}
	}

	possible = {
		has_technology_researched = radio
		OR = {
			any_scope_state = {
				state_region = s:STATE_NEWFOUNDLAND
			}
			any_scope_state = {
				state_region = s:STATE_WEST_COUNTRY
			}
		}
	}

	immediate = {
	}

	complete = {
		gaudi_has_electrical_engineer_trigger = yes
		any_state = {
			state_region = s:STATE_NEWFOUNDLAND
			any_scope_building = {
				is_building_type = building_railway
				has_active_production_method = pm_elgar_radio_stations
			}
		}
		any_state = {
			state_region = s:STATE_WEST_COUNTRY
			any_scope_building = {
				is_building_type = building_railway
				has_active_production_method = pm_elgar_radio_stations
			}
		}
	}

	on_complete = {
		every_country = {
			limit = {
				OR = {
					any_scope_state = {
						state_region = s:STATE_NEWFOUNDLAND
					}
					any_scope_state = {
						state_region = s:STATE_WEST_COUNTRY
					}
				}
			}
			trigger_event = {
				id = gaudi.1430
			}
		}
		set_global_variable = gaudi_transatlantic_radio_var
	}

	current_value = {
	}

	goal_add_value = {
	}

	invalid = {
		has_global_variable = gaudi_transatlantic_radio_var
	}

	on_invalid = {
	}

	progressbar = no

	weight = 30

	should_be_pinned_by_default = yes
}

###################

######AERONAUTICAL ENGINEER PROJECTS######

je_gaudi_aviation_research_project = {
	icon = "gfx/interface/icons/event_icons/event_aviation.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_aeronautical_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_aeronautical_engineering_progress_var
				add = var:gaudi_monthly_aeronautical_engineering_progress_var
			}
			if = {
				#If the Progress reaches the cost, the modifier will be added to a state
				limit = {
					var:gaudi_aeronautical_engineering_progress_var > gaudi_research_progress_cost
				}
				gaudi_aeronautical_engineering_small_add_technology = yes
				aeronautical_engineer_experience_gain_effect = { AMOUNT = 5 }
				post_notification = gaudi_technology_boost_from_engineer_notification
				#The cost will be subtracted from the current progress
				change_variable = {
					name = gaudi_aeronautical_engineering_progress_var
					subtract = gaudi_research_progress_cost
				}
				if = {
					limit = {
						is_ai = yes
						OR = {
							AND = {
								any_scope_building = {
									is_building_type = building_airport
									level > 0
									NOR = {
										has_modifier = gaudi_runway_expansion_mult_modifier
										has_modifier = gaudi_state_of_the_art_planes_mult_modifier
										has_modifier = gaudi_efficient_motors_modifier
									}
								}
							}
							AND = {
								trigger_if = {
									limit = { has_variable = gaudi_aeronautical_engineer_advanced_aircrafts_var }
									var:gaudi_aeronautical_engineer_advanced_aircrafts_var < 3
								}
								has_technology_researched = military_aviation
								trigger_if = {
									limit = { has_variable = gaudi_aeronautical_engineer_advanced_aircrafts_var }
									NOT = { var:gaudi_aeronautical_engineer_advanced_aircrafts_var > 2 }
								}
								trigger_else = {
									always = yes
								}
							}
						}
					}
					set_variable = gaudi_stop_engineering_project_var
				}
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Aeronautical Engineering Progress at the beginning
		set_variable = {
			name = gaudi_aeronautical_engineering_progress_var
			value = 0
		}
		gaudi_aeronautical_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
	}

	on_complete = {
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_aeronautical_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_research_progress_cost
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = gaudi_stop_engineering_project_tt
				has_variable = gaudi_stop_engineering_project_var
			}
			gaudi_has_no_aeronautical_engineer_trigger = yes
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_stop_engineering_project_var

		#Those should be removed in every aeronautical engineering je
		remove_variable = gaudi_aeronautical_engineering_progress_var
		remove_variable = gaudi_monthly_aeronautical_engineering_progress_var
		remove_variable = engineer_aeronautical_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_civil_airports_project = {
	icon = "gfx/interface/icons/event_icons/event_aviation.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_aeronautical_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_aeronautical_engineering_progress_var
				add = var:gaudi_monthly_aeronautical_engineering_progress_var
			}
			if = {
				limit = { var:gaudi_aeronautical_engineering_progress_var > gaudi_civil_airport_cost }
				if = {
					limit = {
						any_scope_building = {
							is_building_type = building_airport
							NOT = { has_modifier = gaudi_runway_expansion_mult_modifier }
						}
					}
					ordered_scope_building = {
						limit = {
							is_building_type = building_airport
							NOT = { has_modifier = gaudi_runway_expansion_mult_modifier }
						}
						order_by = level
						add_modifier = {
							name = gaudi_runway_expansion_mult_modifier
						}
					}
					change_variable = {
						name = gaudi_aeronautical_engineering_progress_var
						subtract = gaudi_civil_airport_cost
					}
				}
				else_if = {
					limit = {
						any_scope_building = {
							is_building_type = building_airport
							NOT = { has_modifier = gaudi_state_of_the_art_planes_mult_modifier }
						}
					}
					ordered_scope_building = {
						limit = {
							is_building_type = building_airport
							NOT = { has_modifier = gaudi_state_of_the_art_planes_mult_modifier }
						}
						order_by = level
						add_modifier = {
							name = gaudi_state_of_the_art_planes_mult_modifier
						}
					}
					change_variable = {
						name = gaudi_aeronautical_engineering_progress_var
						subtract = gaudi_civil_airport_cost
					}
				}
				else = {
					ordered_scope_building = {
						limit = {
							is_building_type = building_airport
							NOT = { has_modifier = gaudi_efficient_motors_modifier }
						}
						order_by = level
						add_modifier = {
							name = gaudi_efficient_motors_modifier
						}
					}
					change_variable = {
						name = gaudi_aeronautical_engineering_progress_var
						subtract = gaudi_civil_airport_cost
					}
				}
			}
			set_variable = {
				name = gaudi_num_airports_var
				value = gaudi_num_airport_buildings_value
			}
			set_variable = {
				name = gaudi_num_states_modernized_airport_var
				value = gaudi_num_airport_buildings_with_modifiers_value
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Aeronautical Engineering Progress at the beginning
		set_variable = {
			name = gaudi_aeronautical_engineering_progress_var
			value = 0
		}
		#Sets a variable for the number of states
		set_variable = {
			name = gaudi_num_airports_var
			value = gaudi_num_airport_buildings_value
		}
		#Sets a variable for the number of states with a Modernized Airport modifier
		set_variable = {
			name = gaudi_num_states_modernized_airport_var
			value = gaudi_num_airport_buildings_with_modifiers_value
		}
		gaudi_aeronautical_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		custom_tooltip = { #All States need to have a Modernized Airports modifier to end this journal entry
			text = gaudi_states_with_modernized_airports_tt
			var:gaudi_num_states_modernized_airport_var = var:gaudi_num_airports_var
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_airports_var
		remove_variable = gaudi_num_states_modernized_airport_var
		
		#Those should be removed in every aeronautical engineering je
		remove_variable = gaudi_aeronautical_engineering_progress_var
		remove_variable = gaudi_monthly_aeronautical_engineering_progress_var
		remove_variable = engineer_aeronautical_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1501
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_aeronautical_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_civil_airport_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_aeronautical_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_num_airports_var
		remove_variable = gaudi_num_states_modernized_airport_var
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every aeronautical engineering je
		remove_variable = gaudi_aeronautical_engineering_progress_var
		remove_variable = gaudi_monthly_aeronautical_engineering_progress_var
		remove_variable = engineer_aeronautical_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_gaudi_advanced_airplanes_project = {
	icon = "gfx/interface/icons/event_icons/event_aviation.dds"

	scripted_button = gaudi_stop_engineering_project_button
	scripted_button = gaudi_additional_support_for_civil_engineer_button
	scripted_button = gaudi_additional_support_for_civil_engineer_stop_button

	group = je_group_gaudi_engineers

	on_monthly_pulse = {
		effect = {
			#Calculates the Progress added (see gaudi_scripted_effects for calculation)
			gaudi_aeronautical_engineering_progress = yes
			#Adds the monthly progress to the variable
			change_variable = {
				name = gaudi_aeronautical_engineering_progress_var
				add = var:gaudi_monthly_aeronautical_engineering_progress_var
			}
		}
	}

	immediate = {
		set_variable = gaudi_can_stop_active_engineering_project_var #This is used to check if the country has a project already
		#Sets the Civil Engineering Progress at the beginning
		set_variable = {
			name = gaudi_aeronautical_engineering_progress_var
			value = 0
		}
		gaudi_aeronautical_engineering_progress = yes #Determines how much Engineering Progress will be added next month
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes 
		}
	}

	on_complete = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		
		#Those should be removed in every aeronautical engineering je
		remove_variable = gaudi_aeronautical_engineering_progress_var
		remove_variable = gaudi_monthly_aeronautical_engineering_progress_var
		remove_variable = engineer_aeronautical_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
		trigger_event = {
			id = gaudi.1511
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Engineering Progress. If the Progress reaches the progress_cost, a modifier will be added.
		value = var:gaudi_aeronautical_engineering_progress_var
	}

	goal_add_value = {
		#You can change this in gaudi_script_values
		value = gaudi_advanced_aircraft_progress_cost
	}

	invalid = {
		custom_tooltip = {
			text = gaudi_stop_engineering_project_tt
			OR = {
				trigger_if = {
					limit = { is_ai = yes }
					gaudi_has_engineer = yes
					gaudi_has_no_aeronautical_engineer_trigger = yes
				}
				has_variable = gaudi_stop_engineering_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = gaudi_can_stop_active_engineering_project_var #Needs to be removed, when the JE is removed
		gaudi_remove_je_cost_modifiers_effect = yes
		remove_variable = gaudi_stop_engineering_project_var
		
		#Those should be removed in every aeronautical engineering je
		remove_variable = gaudi_aeronautical_engineering_progress_var
		remove_variable = gaudi_monthly_aeronautical_engineering_progress_var
		remove_variable = engineer_aeronautical_experience_add_var

		var:gaudi_engineer_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}
