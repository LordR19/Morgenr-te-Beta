
###############################
# MENDELEJEW JOURNAL ENTRIES  #
###############################

#by Marco Dandolo

############################

je_mendelejew_element_theory = {
	icon = "gfx/interface/icons/event_icons/event_chemistry.dds"

	group = je_group_mendelejew_chemistry

	immediate = {
		set_variable = {
			name = mendelejew_chemist_theory_progress_var
			value = 0
		}
	}

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = mendelejew_chemist_theory_progress_var
				add = {
					value = mendelejew_element_theory_progress_value
				}
			}
		}
		random_events = {
			600 = 0
			
			10 = mendelejew.111 #Mendelejew 111: An absent Professor?
			10 = mendelejew.112 #Mendelejew 112: A Dream
			10 = mendelejew.113 #Mendelejew 113: Publication on Chemistry
			10 = mendelejew.114 #Mendelejew 114: Daydreaming
			10 = mendelejew.115 #Mendelejew 115: ASTRONOMER helps
		}
	}

	current_value = {
		value = var:mendelejew_chemist_theory_progress_var
	}

	goal_add_value = {
		add = 60
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		trigger_event = {
			id = mendelejew.101
		}
	}

	invalid = {
		custom_tooltip = {
			text = je_chemist_dies_tt
			NOT = {
				has_variable = mendelejew_chemist_var
			}
		}
	}

	on_invalid = {
		remove_variable = mendelejew_thought_variable
	}

	fail = {
		mendelejew_element_x_is_theorized_trigger = {
			NUMBER = var:mendelejew_thought_variable
		}
	}

	on_fail = {
		trigger_event = {
			id = mendelejew.103
		}
	}

	progressbar = yes

	weight = 50
}

je_mendelejew_element_discovery = {
	icon = "gfx/interface/icons/event_icons/event_chemistry.dds"

	group = je_group_mendelejew_chemistry

	immediate = {
		set_variable = {
			name = mendelejew_chemist_discovery_progress_var
			value = 0
		}
	}

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = mendelejew_chemist_discovery_progress_var
				add = {
					value = mendelejew_element_discovery_progress_value
				}
			}
		}
		random_events = {
			600 = 0
			
			10 = mendelejew.211 #Mendelejew 211: A new Laboratory
			10 = mendelejew.212 #Mendelejew 212: Unknown Chemical Compound
			10 = mendelejew.213 #Mendelejew 213: Chemical Assistant
			10 = mendelejew.214 #Mendelejew 214: Bad samples
			10 = mendelejew.215 #Mendelejew 215: GEOLOGIST helps
		}
	}

	current_value = {
		value = var:mendelejew_chemist_discovery_progress_var
	}

	goal_add_value = {
		add = 60
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		trigger_event = {
			id = mendelejew.201
		}
	}

	invalid = {
		custom_tooltip = {
			text = je_chemist_dies_tt
			NOT = {
				has_variable = mendelejew_chemist_var
			}
		}
	}

	on_invalid = {
		remove_variable = mendelejew_searched_variable
	}

	fail = {
		custom_tooltip = {
			text = je_element_theory_failed_tt
			mendelejew_element_x_is_discovered_trigger = { 
				NUMBER = var:mendelejew_searched_variable
			}
		}
	}

	on_fail = {
		trigger_event = {
			id = mendelejew.203
		}
	}

	progressbar = yes

	weight = 50
}

je_mendelejew_element_isolation = {
	icon = "gfx/interface/icons/event_icons/event_chemistry.dds"

	group = je_group_mendelejew_chemistry

	immediate = {
		set_variable = {
			name = mendelejew_chemist_isolation_progress_var
			value = 0
		}
	}

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = mendelejew_chemist_isolation_progress_var
				add = {
					value = mendelejew_element_isolation_progress_value
				}
			}
		}
		random_events = {
			600 = 0
			
			10 = mendelejew.311 #Mendelejew 311: Chemical Synthesis
			10 = mendelejew.312 #Mendelejew 312: Chemical Dissociation
			10 = mendelejew.313 #Mendelejew 313: Neglected duties
			10 = mendelejew.314 #Mendelejew 314: An unforeseen Chemical Reaction
			10 = mendelejew.315 #Mendelejew 315: ENGINEER helps
		}
	}

	current_value = {
		value = var:mendelejew_chemist_isolation_progress_var
	}

	goal_add_value = {
		add = 60
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		trigger_event = {
			id = mendelejew.301
		}
	}

	invalid = {
		custom_tooltip = {
			text = je_chemist_dies_tt
			NOT = {
				has_variable = mendelejew_chemist_var
			}
		}
	}

	on_invalid = {
		remove_variable = mendelejew_examined_variable
	}

	fail = {
		custom_tooltip = {
			text = je_element_isolation_failed_tt
			mendelejew_element_x_is_isolated_trigger = { 
				NUMBER = var:mendelejew_examined_variable
			}
		}
	}

	on_fail = {
		trigger_event = {
			id = mendelejew.303
		}
	}

	progressbar = yes

	weight = 50
}