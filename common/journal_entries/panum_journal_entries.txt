##########################
# PANUM JOURNAL ENTRIES  #
##########################

#by Marco Dandolo

############################

### General ###

#Germ Theory VS Miasma Theory
je_panum_germ_theory = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	is_shown_when_inactive = {
		has_technology_researched = medical_degrees
	}

	possible = {
		has_technology_researched = panum_vaccination_tech
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_germ_theory_clues_var
				}
			}
			set_variable = {
				name = panum_germ_theory_clues_var
				value = 0
			}
		}
	}

	complete = {
		panum_has_physician = yes
		custom_tooltip = {
			text = je_panum_germ_theory_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = panum.11
			popup = yes
		}
	}

	current_value = {
		value = var:panum_germ_theory_clues_var
	}

	goal_add_value = {
		value = 20
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

### Expand Medical System ###
je_panum_medical_system_project = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	scripted_button = panum_stop_medical_project_button

	group = je_group_panum_medicine

	scripted_progress_bar = panum_medical_system_project_progress_bar

	on_monthly_pulse = {
		effect = {
			if = {
				#If the Progress reaches the cost, the PM will be unlocked in a state
				limit = {
					var:panum_medical_system_project_progress_var >= 30
				}
				#Physician gets experience
				physician_experience_gain_effect = { AMOUNT = 20 }
				#The state with the next available hospital > clinic will be chosen
				if = {
					limit = {
						any_scope_state = {
							has_building = building_government_administration
							any_scope_building = {
								is_building_type = building_government_administration
								level >= 20
								has_active_production_method = pm_panum_clinic
							}
						}
					}
					ordered_scope_state = {
						limit = {
							has_building = building_government_administration
							any_scope_building = {
								is_building_type = building_government_administration
								level >= 20
								has_active_production_method = pm_panum_clinic
							}
						}
						order_by = panum_administration_buildings_value
						max = 1 #Limits to the state with highest urbanization
						check_range_bounds = no #prevents errors
						activate_production_method = {
							building_type = building_government_administration
							production_method = pm_panum_hospital
						}
					}
				}
				else_if = {
					limit = {
						any_scope_state = {
							has_building = building_government_administration
							any_scope_building = {
								is_building_type = building_government_administration
								level >= 5
								has_active_production_method = pm_panum_no_clinic
							}
						}
					}
					ordered_scope_state = {
						limit = {
							has_building = building_government_administration
							any_scope_building = {
								is_building_type = building_government_administration
								level >= 5
								has_active_production_method = pm_panum_no_clinic
							}
						}
						order_by = panum_administration_buildings_value
						activate_production_method = {
							building_type = building_government_administration
							production_method = pm_panum_clinic
						}
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = panum_medical_system_project_progress_var
					subtract = 30
				}
			}
		}
		events = {
			panum.2102 #Panum 2102: First Clinic
			panum.2103 #Panum 2103: First Hospital
		}
	}

	immediate = {
		set_variable = panum_can_stop_active_medical_project_var #This is used to check if the country has a project already
		#Sets the Medical Progress at the beginning
		set_variable = {
			name = panum_medical_system_project_progress_var
			value = 0
		}
	}

	complete = {
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_government_administration
				level >= 5
				has_active_production_method = pm_panum_clinic
			}
			percent >= 1
		}
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_government_administration
				level >= 20
				has_active_production_method = pm_panum_hospital
			}
			percent >= 1
		}
	}

	on_complete = {
		remove_variable = mr_physician_expand_medical_system_var
		remove_variable = panum_can_stop_active_medical_project_var #Needs to be removed, when the JE is removed
		trigger_event = {
			id = panum.2101
			popup = yes
		}
	}

	current_value = {
		#Keeps track of the Medical Progress. If the Progress reaches the progress_cost, a PM will be unlocked.
		value = var:panum_medical_system_project_progress_var
	}

	goal_add_value = {
		value = 30
	}

	invalid = {
		custom_tooltip = {
			text = panum_stop_medical_project_tt
			OR = {
				custom_tooltip = {
					text = je_physician_dies_tt
					NOT = {
						has_variable = panum_physician_var
					}
				}
				has_variable = panum_stop_medical_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = mr_physician_expand_medical_system_var
		remove_variable = panum_can_stop_active_medical_project_var #Needs to be removed, when the JE is removed
		var:panum_physician_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	weight = 30

	should_be_pinned_by_default = yes
}

### Medical Research ###
je_panum_medical_research_project = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	scripted_button = panum_stop_medical_project_button

	group = je_group_panum_medicine

	scripted_progress_bar = panum_medical_research_project_progress_bar

	on_monthly_pulse = {
		effect = {
			if = {
				#If the Progress reaches the cost, the PM will be unlocked in a state
				limit = {
					var:panum_medical_research_project_progress_var >= 40
				}
				#Physician gets experience	
				panum_small_add_technology = yes
				physician_experience_gain_effect = { AMOUNT = 10 }
				post_notification = panum_technology_boost_from_physician_notification
				#AI should abandon this if descriptions or treatments are possible
				if = {
					limit = {
						is_ai = yes
						OR = {
							panum_has_$DISEASE$_description_trigger = no
							AND = {
								panum_has_$DISEASE$_description_trigger = yes
								panum_has_$DISEASE$_treatment_trigger = no
							}
						}
					}
					set_variable = panum_stop_medical_project_var
				}
				#Special Event occurs when Germ Theory isn't researched yet
				if = {
					limit = {
						panum_has_miasma_theory_trigger = yes
					}
					trigger_event = {
						id = panum.2201
					}
				}
				#The cost will be subtracted from the current progress
				change_variable = {
					name = panum_medical_system_project_progress_var
					subtract = 40
				}
			}
		}
		random_events = {
			36 = 0

			1 = panum.2202 #Panum 2202: Ancient Disease
			1 = panum.2203 #Panum 2203: Strange Medicine
			1 = panum.2204 #Panum 2204: Herbal Remedies?
		}
	}

	immediate = {
		set_variable = panum_can_stop_active_medical_project_var #This is used to check if the country has a project already
		#Sets the Medical Progress at the beginning
		set_variable = {
			name = panum_medical_research_project_progress_var
			value = 0
		}
	}

	complete = {
	}

	on_complete = {
	}

	current_value = {
		#Keeps track of the Medical Progress. If the Progress reaches the progress_cost, a PM will be unlocked.
		value = var:panum_medical_research_project_progress_var
	}

	goal_add_value = {
		value = 40
	}

	invalid = {
		custom_tooltip = {
			text = panum_stop_medical_project_tt
			OR = {
				custom_tooltip = {
					text = je_physician_dies_tt
					NOT = {
						has_variable = panum_physician_var
					}
				}
				has_variable = panum_stop_medical_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = panum_stop_medical_project_var
		remove_variable = panum_can_stop_active_medical_project_var #Needs to be removed, when the JE is removed
		var:panum_physician_var ?= {
			set_character_busy_and_immortal = no
		}
	}

	weight = 30

	should_be_pinned_by_default = yes
}


###################################################################################################

### Epidemic JEs ###

je_panum_cholera = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			400 = 0
			125 = panum.101 #Panum 101: Cholera in STATE
			25 = panum.102 #Panum 102: Cholera spreads to COUNTRY
			10 = panum.103 #Panum 103: Cholera in Factory
			10 = panum.104 #Panum 104: CHARACTER gets Cholera!
			10 = panum.105 #Panum 105: The Exodus of the Rich
			10 = panum.106 #Panum 106: Opposition is trying to take advantage of Cholera
			10 = panum.107 #Panum 107: Mass Graves
			10 = panum.108 #Panum 108: Cholera Hospitals
			10 = panum.109 #Panum 109: Public Panic
			10 = panum.110 #Panum 110: Common Purpose
			10 = panum.111 #Panum 111: The Horror
			10 = panum.112 #Panum 112: A Glimmer of Hope
			10 = panum.1000 #Panum 1000: Calls for Medical Reforms
		}
	}

	immediate = {
		panum_general_disease_research_from_je_effect = { DISEASE = cholera }
	}
	
    fail = {
    }

	on_fail = {
	}

	complete = {
		NOT = {
			any_scope_state = {
				panum_state_has_cholera_trigger = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_recent_cholera_in_country_var
			years = 10
		}
		panum_remove_disease_effect = yes
		trigger_event = {
			id = panum.120
			popup = yes
		}
	}

	invalid = {
	}

	current_value = {
	}

	goal_add_value = {
	}

	progressbar = no

	should_be_pinned_by_default = yes

	weight = 50
}

je_panum_tuberculosis = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			400 = 0
			125 = panum.201 #Panum 201: Tuberculosis in STATE
			25 = panum.202 #Panum 202: A hereditary disease?
			10 = panum.203 #Panum 203: Spitting on the streets
			10 = panum.204 #Panum 204: ARTIST gets Tuberculosis
			10 = panum.205 #Panum 205: Tuberculosis Sanatorium
			10 = panum.206 #Panum 206: The disease of the proletarians
			10 = panum.207 #Panum 207: Religious Initiative
			10 = panum.208 #Panum 208: The white plague takes its toll
			10 = panum.209 #Panum 209: The Tuberculosis Doctor

			10 = panum.1000 #Panum 1000: Calls for Medical Reforms
		}
	}

	immediate = {
		panum_general_disease_research_from_je_effect = { DISEASE = tuberculosis }
	}
	
    fail = {
    }

	on_fail = {
	}

	complete = {
		NOT = {
			any_scope_state = {
				panum_state_has_tuberculosis_trigger = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_recent_tuberculosis_in_country_var
			years = 5
		}
		panum_remove_disease_effect = yes
		trigger_event = {
			id = panum.220
			popup = yes
		}
	}

	invalid = {
	}

	current_value = {
	}

	goal_add_value = {
	}

	progressbar = no

	should_be_pinned_by_default = yes

	weight = 50
}

je_panum_smallpox = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			400 = 0
			125 = panum.301 #Panum 301: Smallpox in STATE
			10 = panum.302 #Panum 302: Smallpox spreads to COUNTRY
			5 = panum.303 #Panum 303: Smallpox out of control

			10 = panum.1000 #Panum 1000: Calls for Medical Reforms
		}
	}

	immediate = {
		panum_general_disease_research_from_je_effect = { DISEASE = smallpox }
	}
	
    fail = {
    }

	on_fail = {
	}

	complete = {
		NOT = {
			any_scope_state = {
				panum_state_has_smallpox_trigger = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_recent_smallpox_in_country_var
			years = 10
		}
		panum_remove_disease_effect = yes
		trigger_event = {
			id = panum.320
			popup = yes
		}
	}

	invalid = {
	}

	current_value = {
	}

	goal_add_value = {
	}

	progressbar = no

	should_be_pinned_by_default = yes

	weight = 50
}

je_panum_typhus = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			400 = 0
			125 = panum.401 #Panum 401: Typhus in STATE
			10 = panum.402 #Panum 402: A Disease of moral corruption?
			10 = panum.403 #Panum 403: Quarantine?
			10 = panum.404 #Panum 404: Filthy Sheds
			10 = panum.405 #Panum 405: Riot against Fever Sheds
			10 = panum.406 #Panum 406: Unburied Corpses
			10 = panum.407 #Panum 407: Typhus in Barracks
			10 = panum.408 #Panum 408: Tormented in illness, not in war

			10 = panum.1000 #Panum 1000: Calls for Medical Reforms
		}
	}

	immediate = {
		panum_general_disease_research_from_je_effect = { DISEASE = typhus }
	}
	
    fail = {
    }

	on_fail = {
	}

	complete = {
		NOT = {
			any_scope_state = {
				panum_state_has_typhus_trigger = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_recent_typhus_in_country_var
			years = 5
		}
		panum_remove_disease_effect = yes
		trigger_event = {
			id = panum.420
			popup = yes
		}
	}

	invalid = {
	}

	current_value = {
	}

	goal_add_value = {
	}

	progressbar = no

	should_be_pinned_by_default = yes

	weight = 50
}

je_panum_yellow_fever = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			400 = 0
			125 = panum.501 #Panum 501: Yellow Fever in STATE
			25 = panum.502 #Panum 502: A contagious disease?
			10 = panum.503 #Panum 503: Yellow fever affects plantation workers
			10 = panum.504 #Panum 504: Evacuation plans
			10 = panum.505 #Panum 505: Yellow fever spreads to barracks
			10 = panum.506 #Panum 506: Sailor's sickness
			10 = panum.507 #Panum 507: Black vomit

			10 = panum.1000 #Panum 1000: Calls for Medical Reforms
		}
	}

	immediate = {
		panum_general_disease_research_from_je_effect = { DISEASE = yellow_fever }
	}
	
    fail = {
    }

	on_fail = {
	}

	complete = {
		NOT = {
			any_scope_state = {
				panum_state_has_yellow_fever_trigger = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_recent_yellow_fever_in_country_var
			years = 10
		}
		panum_remove_disease_effect = yes
		trigger_event = {
			id = panum.520
			popup = yes
		}
	}

	invalid = {
	}

	current_value = {
	}

	goal_add_value = {
	}

	progressbar = no

	should_be_pinned_by_default = yes

	weight = 50
}

je_panum_measles = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			400 = 0
			200 = panum.601 #Panum 601: Measles in STATE
			100 = panum.602 #Panum 602: Measles spreads to COUNTRY
			50 = panum.603 #Panum 603: Measles kills children
			50 = panum.604 #Panum 604: Measles paralyzes sailors
			50 = panum.605 #Panum 605: Child Clinic for Measles
			50 = panum.606 #Panum 606: Measles Depression

			10 = panum.1000 #Panum 1000: Calls for Medical Reforms
		}
	}

	immediate = {
		panum_general_disease_research_from_je_effect = { DISEASE = measles }
	}
	
    fail = {
    }

	on_fail = {
	}

	complete = {
		NOT = {
			any_scope_state = {
				panum_state_has_measles_trigger = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_recent_measles_in_country_var
			years = 10
		}
		panum_remove_disease_effect = yes
		trigger_event = {
			id = panum.420
			popup = yes
		}
	}

	invalid = {
	}

	current_value = {
	}

	goal_add_value = {
	}

	progressbar = no

	should_be_pinned_by_default = yes

	weight = 50
}

je_panum_scarlet = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_panum_medicine
}

je_panum_plague = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_panum_medicine
}

je_panum_diphteria = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_panum_medicine
}

je_panum_polio = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_panum_medicine
}

### Description JEs (local) ###

je_panum_cholera_description = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			40 = 0
			4 = panum.121 #Panum 121: Cholera Hint (hidden)
			2 = panum.122 #Panum 122: Cholera Incubation
			2 = panum.123 #Panum 123: Cholera Symptoms
			1 = panum.124 #Panum 124: Cholera Morbus and Asiatic Cholera
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_cholera_description_clues_var
				}
			}
			set_variable = {
				name = panum_cholera_description_clues_var
				value = 0
			}
		}
	}
	
    fail = {
		NOT = {
			has_journal_entry = je_panum_cholera
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.131 #Unfinished Description
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 1
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_cholera_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_tuberculosis_description = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			20 = 0
			4 = panum.221 #Panum 221: Tuberculosis Hint (hidden)
			2 = panum.222 #Panum 222: Tuberculosis Incubation
			2 = panum.223 #Panum 223: Tuberculosis Symptoms
			1 = panum.224 #Panum 224: Tuberculosis and Scrofula
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_tuberculosis_description_clues_var
				}
			}
			set_variable = {
				name = panum_tuberculosis_description_clues_var
				value = 0
			}
		}
	}
	
    fail = {
		NOT = {
			has_journal_entry = je_panum_tuberculosis
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.131 #Unfinished Description
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 2
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_tuberculosis_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_smallpox_description = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			20 = 0
			4 = panum.321 #Panum 321: Smallpox Hint (hidden)
			2 = panum.322 #Panum 322: Smallpox Incubation and Symptoms
			2 = panum.323 #Panum 323: Chickenpox or Smallpox?
			1 = panum.324 #Panum 324: The Difference between Measles and Smallpox
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_smallpox_description_clues_var
				}
			}
			set_variable = {
				name = panum_smallpox_description_clues_var
				value = 0
			}
		}
	}
	
    fail = {
		NOT = {
			has_journal_entry = je_panum_smallpox
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.131 #Unfinished Description
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 3
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_smallpox_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_typhus_description = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"
	
	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			20 = 0
			4 = panum.421 #Panum 421: Typhus Hint (hidden)
			2 = panum.422 #Panum 422: Typhus Symptoms & Incubation
			2 = panum.423 #Panum 423: The Camp Fever
			1 = panum.424 #Panum 424: Typhus: Two Diseases in one?
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_typhus_description_clues_var
				}
			}
			set_variable = {
				name = panum_typhus_description_clues_var
				value = 0
			}
		}
	}
	
    fail = {
		NOT = {
			has_journal_entry = je_panum_typhus
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.131 #Unfinished Description
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 4
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_typhus_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_yellow_fever_description = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			20 = 0
			4 = panum.521 #Panum 521: Yellow Fever Hint (hidden)
			2 = panum.522 #Panum 522: Two Courses of Yellow Fever
			2 = panum.523 #Panum 523: Yellow Fever Seasons
			1 = panum.524 #Panum 524: A Local Disease?
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_yellow_fever_description_clues_var
				}
			}
			set_variable = {
				name = panum_yellow_fever_description_clues_var
				value = 0
			}
		}
	}
	
    fail = {
		NOT = {
			has_journal_entry = je_panum_yellow_fever
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.131 #Unfinished Description
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 5
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_yellow_fever_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_measles_description = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			20 = 0
			4 = panum.621 #Panum 621: Measles Hint (hidden)
			2 = panum.622 #Panum 622: Measles Incubation
			2 = panum.623 #Panum 623: Measles & Scarlet Fever
			1 = panum.624 #Panum 624: Virgin populations and lifelong immunity
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_measles_description_clues_var
				}
			}
			set_variable = {
				name = panum_measles_description_clues_var
				value = 0
			}
		}
	}
	
    fail = {
		NOT = {
			has_journal_entry = je_panum_measles
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.131 #Unfinished Description
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 6
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_measles_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_scarlet_description = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			20 = 0
			4 = panum.721 #Panum 721: Scarlet Hint (hidden)
			2 = panum.722 #Panum 722: Scarlet Incubation
			2 = panum.723 #Panum 723: Scarlet Symptoms
			1 = panum.724 #Panum 724: Scarlet Fever or Diphteria?
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_scarlet_description_clues_var
				}
			}
			set_variable = {
				name = panum_scarlet_description_clues_var
				value = 0
			}
		}
	}
	
    fail = {
		NOT = {
			has_journal_entry = je_panum_scarlet
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.131 #Unfinished Description
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 7
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_scarlet_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_plague_description = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			20 = 0
			4 = panum.821 #Panum 821: Plague Hint (hidden)
			2 = panum.822 #Panum 822: Plague Incubation
			2 = panum.823 #Panum 823: Plague Symptoms
			1 = panum.824 #Panum 824: The Black Death
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_plague_description_clues_var
				}
			}
			set_variable = {
				name = panum_plague_description_clues_var
				value = 0
			}
		}
	}
	
    fail = {
		NOT = {
			has_journal_entry = je_panum_plague
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.131 #Unfinished Description
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 8
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_plague_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_diphteria_description = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			20 = 0
			4 = panum.921 #Panum 921: Diphteria Hint (hidden)
			2 = panum.922 #Panum 922: Diphteria Incubation
			2 = panum.923 #Panum 923: Diphteria Symptoms
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_diphteria_description_clues_var
				}
			}
			set_variable = {
				name = panum_diphteria_description_clues_var
				value = 0
			}
		}
	}
	
    fail = {
		NOT = {
			has_journal_entry = je_panum_diphteria
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.131 #Unfinished Description
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 9
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_diphteria_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_polio_description = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			20 = 0
			4 = panum.1021 #Panum 1021: Polio Hint (hidden)
			2 = panum.1022 #Panum 1022: Polio Incubation
			2 = panum.1023 #Panum 1023: Polio Symptoms
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_polio_description_clues_var
				}
			}
			set_variable = {
				name = panum_polio_description_clues_var
				value = 0
			}
		}
	}
	
    fail = {
		NOT = {
			has_journal_entry = je_panum_polio
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.131 #Unfinished Description
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 10
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_polio_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

### Description JEs (expedition) ###

je_panum_cholera_description_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.132 #Panum 132: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_cholera_description_clues_var
				}
			}
			set_variable = {
				name = panum_cholera_description_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_cholera
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.133 #Unfinished Description (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		panum_remove_active_variables_effect = yes
		set_variable = {
			name = panum_disease_title_var
			value = 1
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_cholera_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_tuberculosis_description_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.132 #Panum 132: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_tuberculosis_description_clues_var
				}
			}
			set_variable = {
				name = panum_tuberculosis_description_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_tuberculosis
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.133 #Unfinished Description (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 2
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_tuberculosis_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_smallpox_description_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.132 #Panum 132: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_smallpox_description_clues_var
				}
			}
			set_variable = {
				name = panum_smallpox_description_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_smallpox
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.133 #Unfinished Description (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 3
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_smallpox_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_typhus_description_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.132 #Panum 132: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_typhus_description_clues_var
				}
			}
			set_variable = {
				name = panum_typhus_description_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_typhus
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.133 #Unfinished Description (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 4
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_typhus_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_yellow_fever_description_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.132 #Panum 132: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_yellow_fever_description_clues_var
				}
			}
			set_variable = {
				name = panum_yellow_fever_description_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_yellow_fever
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.133 #Unfinished Description (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 5
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_yellow_fever_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_measles_description_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.132 #Panum 132: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_measles_description_clues_var
				}
			}
			set_variable = {
				name = panum_measles_description_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_measles
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.133 #Unfinished Description (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 6
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_measles_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_scarlet_description_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.132 #Panum 132: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_scarlet_description_clues_var
				}
			}
			set_variable = {
				name = panum_scarlet_description_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_scarlet
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.133 #Unfinished Description (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 7
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_scarlet_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_plague_description_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.132 #Panum 132: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_plague_description_clues_var
				}
			}
			set_variable = {
				name = panum_plague_description_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_plague
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.133 #Unfinished Description (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 8
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_plague_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_diphteria_description_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.132 #Panum 132: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_diphteria_description_clues_var
				}
			}
			set_variable = {
				name = panum_diphteria_description_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_diphteria
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.133 #Unfinished Description (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 9
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_diphteria_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_polio_description_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.132 #Panum 132: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_polio_description_clues_var
				}
			}
			set_variable = {
				name = panum_polio_description_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_polio
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.133 #Unfinished Description (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_description_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 10
		}
		trigger_event = {
			id = panum.138
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_polio_description_clues_var
	}

	goal_add_value = {
		value = 6
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

### Treatment JEs (local) ###

je_panum_cholera_treatment = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_weekly_pulse = {
		random_events = {
			30 = 0

			#Good Events
			1 = panum.141 #Panum 141: The Brewery
			2 = panum.142 #Panum 142: Creatures of Habit
			2 = panum.143 #Panum 143: The odd ones
			2 = panum.144 #Panum 144: The filters
			2 = panum.145 #Panum 145: Brown Water
			2 = panum.146 #Panum 146: The First Death
			2 = panum.147 #Panum 147: The Pit
			1 = panum.148 #Panum 148: The Mansion
			1 = panum.149 #Panum 149: The Tiny Death
			2 = panum.150 #Panum 150: A Hands on Matter

			#Bad Events
			1 = panum.151 #Panum 151: The Tool Factory
			1 = panum.152 #Panum 152: The Jar
			1 = panum.153 #Panum 153: Misplaced
			1 = panum.154 #Panum 154: The Copycat killer
			1 = panum.155 #Panum 155: The Miasma ...?
			1 = panum.156 #Panum 156: Deconstructed
			1 = panum.157 #Panum 157: Contamined

			#Character Events
			10 = panum.161 #Panum 161: A spot of gin
			10 = panum.162 #Panum 162: Bottom's up
			10 = panum.163 #Panum 163: A Map to success
			10 = panum.164 #Panum 164: Fire and Fury
			10 = panum.165 #Panum 165: The Heart of Infection
			10 = panum.166 #Panum 166: The Power of Prayer
			10 = panum.167 #Panum 167: Safe over sorry
			10 = panum.168 #Panum 168: Restless Labor
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_cholera_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_cholera_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			has_journal_entry = je_panum_cholera
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.134 #Unfinished Treatment
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_cholera_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = panum.140
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_cholera_treatment_clues_var
	}

	goal_add_value = {
		value = 10
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_tuberculosis_treatment = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine
}

je_panum_smallpox_treatment = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine
}

je_panum_typhus_treatment = {
	group = je_group_panum_medicine
}

je_panum_yellow_fever_treatment = {
	group = je_group_panum_medicine
}

je_panum_measles_treatment = {
	group = je_group_panum_medicine
}

je_panum_scarlet_treatment = {
	group = je_group_panum_medicine
}

je_panum_plague_treatment = {
	group = je_group_panum_medicine
}

je_panum_diphteria_treatment = {
	group = je_group_panum_medicine
}

je_panum_polio_treatment = {
	group = je_group_panum_medicine
}

### Treatment JEs (expedition) ###

je_panum_cholera_treatment_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.135 #Panum 135: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_cholera_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_cholera_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_cholera
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.136 #Unfinished Treatment (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_cholera_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 1
		}
		trigger_event = {
			id = panum.139
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_cholera_treatment_clues_var
	}

	goal_add_value = {
		value = 10
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_tuberculosis_treatment_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.135 #Panum 135: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_tuberculosis_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_tuberculosis_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_tuberculosis
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.136 #Unfinished treatment (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 2
		}
		trigger_event = {
			id = panum.139
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_tuberculosis_treatment_clues_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_smallpox_treatment_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.135 #Panum 135: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_smallpox_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_smallpox_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_smallpox
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.136 #Unfinished treatment (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 3
		}
		trigger_event = {
			id = panum.139
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_smallpox_treatment_clues_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_typhus_treatment_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.135 #Panum 135: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_typhus_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_typhus_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_typhus
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.136 #Unfinished treatment (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 4
		}
		trigger_event = {
			id = panum.139
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_typhus_treatment_clues_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_yellow_fever_treatment_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.135 #Panum 135: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_yellow_fever_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_yellow_fever_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_yellow_fever
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.136 #Unfinished treatment (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 5
		}
		trigger_event = {
			id = panum.139
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_yellow_fever_treatment_clues_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_measles_treatment_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.135 #Panum 135: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_measles_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_measles_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_measles
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.136 #Unfinished treatment (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 6
		}
		trigger_event = {
			id = panum.139
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_measles_treatment_clues_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_scarlet_treatment_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.135 #Panum 135: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_scarlet_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_scarlet_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_scarlet
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.136 #Unfinished treatment (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 7
		}
		trigger_event = {
			id = panum.139
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_scarlet_treatment_clues_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_plague_treatment_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.135 #Panum 135: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_plague_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_plague_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_plague
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.136 #Unfinished treatment (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 8
		}
		trigger_event = {
			id = panum.139
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_plague_treatment_clues_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_diphteria_treatment_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.135 #Panum 135: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_diphteria_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_diphteria_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_diphteria
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.136 #Unfinished treatment (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 9
		}
		trigger_event = {
			id = panum.139
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_diphteria_treatment_clues_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}

je_panum_polio_treatment_expedition = {
	icon = "gfx/interface/icons/event_icons/event_medicine.dds"

	group = je_group_panum_medicine

	on_monthly_pulse = {
		random_events = {
			4 = 0
			1 = panum.135 #Panum 135: News from the Medical Expedition
		}
	}

	immediate = {
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_polio_treatment_clues_var
				}
			}
			set_variable = {
				name = panum_polio_treatment_clues_var
				value = 0
			}
		}
	}

	fail = {
		NOT = {
			scope:target = {
				has_journal_entry = je_panum_polio
			}
		}
    }

	on_fail = {
		trigger_event = {
			id = panum.136 #Unfinished treatment (expedition)
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_panum_treatment_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = panum_disease_title_var
			value = 10
		}
		trigger_event = {
			id = panum.139
			popup = yes
		}
		panum_remove_active_variables_effect = yes
	}

	current_value = {
		value = var:panum_polio_treatment_clues_var
	}

	goal_add_value = {
		value = 12
	}

	invalid = {
		custom_tooltip = {
			text = je_physician_dies_tt
			NOT = {
				has_variable = panum_physician_var
			}
		}
	}

	on_invalid = {
		panum_remove_active_variables_effect = yes
	}

	progressbar = yes

	weight = 30

	should_be_pinned_by_default = yes
}