############################
# VERRIER JOURNAL ENTRIES  #
############################

#by Marco Dandolo

############################

######DISCOVERIES######

je_verrier_uranus = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	group = je_group_verrier_astronomy

	should_be_pinned_by_default = yes

	is_shown_when_inactive = {
		NOT = { has_global_variable = verrier_uranus_year_global_var }
		trigger_if = {
			limit = {
				is_ai = yes
			}
			has_technology_researched = verrier_physics_tech
		}
		trigger_else = {
			always = yes
		}
	}

	possible = {
		trigger_if = {
			limit = {
				is_ai = yes
			}
			country_has_building_type_levels = {  
				target = bt:building_university  
				value  >= 1
			}
		}
		trigger_else = {
			always = yes
		}
	}

	current_value = {
		if = {
			limit = {
				scope:journal_entry = {
					goal_value = 0
				}
			}
			value = 0
		}
		else = {
			value = var:verrier_astronomical_objects #value or variable you use to meassure progress
		}
	}

	goal_add_value = {
		# Basically takes the amount of years before 1836 and multiplies it by 2 (average objects per year),
		# then adds the base value of 100
		value = 1781
		subtract = global_var:start_year_global_var
		multiply = 2 #Assuming about 2 astronomical objects get discovered each year on average.
		add = 100 #Base value
	}

	immediate = {
		set_variable = {
			name = je_verrier_uranus_var
			days = 1
		}
	}

	complete = {
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 1
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
		}
		OR = {
			any_scope_character = {
				OR = {
					has_trait = innovative
					has_trait = meticulous
					has_trait = ambitious
					has_trait = persistent
				}
			}
			verrier_has_astronomer = yes
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
		hidden_trigger = {
			NOT = { has_variable = je_verrier_uranus_var }
		}
	}

	on_complete = {
		trigger_event = { 
			id = verrier.12
			popup = yes 
		}
	}

	fail = {
		custom_tooltip = {
			text = je_verrier_uranus_fail
			has_global_variable = verrier_uranus_year_global_var
		}
    }

	progressbar = yes

	weight = 50
}

je_verrier_dwarf_planets = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	group = je_group_verrier_astronomy

	should_be_pinned_by_default = yes

	is_shown_when_inactive = {
		NAND = {
			has_global_variable = verrier_ceres_year_global_var
			has_global_variable = verrier_pallas_year_global_var
			has_global_variable = verrier_vesta_year_global_var
			has_global_variable = verrier_juno_year_global_var
		}
		has_global_variable = verrier_uranus_year_global_var
		trigger_if = {
			limit = {
				is_ai = yes
			}
			has_technology_researched = verrier_physics_tech
		}
		trigger_else = {
			always = yes
		}
	}

	possible = {
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 1
		}
	}

	current_value = {
		value = var:verrier_astronomical_objects #value or variable you use to meassure progress
	}

	goal_add_value = {
		# About 20 years between Uranus and dwarf planets multiplied by 2 = 40
		value = 40
	}

	immediate = {
	}

	complete = {
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 1
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
		}
		OR = {
			any_scope_character = {
				OR = {
					has_trait = innovative
					has_trait = meticulous
					has_trait = ambitious
					has_trait = persistent
				}
			}
			verrier_has_astronomer = yes
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		if = {
			limit = { has_global_variable = verrier_ceres_year_global_var }

			random_list = {
				1 = {
					trigger = { NOT = { has_global_variable = verrier_pallas_year_global_var } }
					trigger_event = { 
						id = verrier.15 #Verrier 15: Pallas discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { NOT = { has_global_variable = verrier_vesta_year_global_var } }
					trigger_event = { 
						id = verrier.16 #Verrier 16: Vesta discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { NOT = { has_global_variable = verrier_juno_year_global_var } }
					trigger_event = { 
						id = verrier.17 #Verrier 17: Juno discovered
						popup = yes 
					}
				}
			}
		}
		else = {
			trigger_event = { 
				id = verrier.14 #Verrier 14: Ceres discovered
				popup = yes 
			}
		}
	}

	invalid = {
		has_global_variable = verrier_uranus_year_global_var
		has_global_variable = verrier_pallas_year_global_var
		has_global_variable = verrier_vesta_year_global_var
		has_global_variable = verrier_juno_year_global_var
    }

	on_invalid = {
	}

	progressbar = yes

	weight = 50
}

je_verrier_neptune = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	group = je_group_verrier_astronomy

	should_be_pinned_by_default = yes

	is_shown_when_inactive = {
		has_global_variable = verrier_uranus_year_global_var
		trigger_if = {
			limit = {
				is_ai = yes
			}
			has_technology_researched = verrier_physics_tech
			NOT = {
				has_global_variable = verrier_neptune_discovered_var
			}
		}
		trigger_else = {
			always = yes
		}
	}

	possible = {
		trigger_if = {
			limit = {
				is_ai = yes
			}
			has_technology_researched = verrier_astronomy_tech
			country_has_building_type_levels = {  
				target = bt:building_university  
				value  >= 5
			}
		}
		trigger_else = {
			always = yes
		}
	}

	current_value = {
		if = {
			limit = {
				scope:journal_entry = {
					goal_value = 0
				}
			}
			value = 0
		}
		else = {
			value = var:verrier_astronomical_objects #value or variable you use to meassure progress
		}
	}

	goal_add_value = {
		if = { #If start date is 1836
			limit = { global_var:start_year_global_var >= 1836 }
			value = 100
		}
		else = { #Before 1836
		# Basically takes the amount of years before 1836 and multiplies it by 2 (average objects per year),
		# then adds the base value of 100
			value = 1836
			subtract = global_var:start_year_global_var
			multiply = 2 #Assuming about 2 astronomical objects get discovered each year on average.
			add = 100 #Base value
		}
	}

	immediate = {
		set_variable = {
			name = je_verrier_neptune_var
			days = 1
		}
	}

	complete = {
		has_technology_researched = verrier_astronomy_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 5
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
		}
		OR = {
			any_scope_character = {
				OR = {
					has_trait = innovative
					has_trait = meticulous
					has_trait = ambitious
					has_trait = persistent
				}
			}
			verrier_has_astronomer = yes
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
		hidden_trigger = {
			NOT = { has_variable = je_verrier_neptune_var }
		}
	}

	on_complete = {
		trigger_event = { 
			id = verrier.10
			popup = yes 
		}
	}

	fail = {
		custom_tooltip = {
			text = je_verrier_neptune_fail
			has_global_variable = verrier_neptune_discovered_var
		}
    }

	scripted_button = verrier_neptune_buy_additional_instruments_button
	scripted_button = verrier_neptune_star_chart_button
	scripted_button = verrier_neptune_modern_telescope_button
	scripted_button = verrier_neptune_academic_synergies_button

	progressbar = yes

	weight = 50
}

je_verrier_pluto = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	group = je_group_verrier_astronomy

	should_be_pinned_by_default = yes

	is_shown_when_inactive = {
		has_technology_researched = verrier_astronomy_tech
		has_technology_researched = camera
		has_global_variable = verrier_neptune_discovered_var
		NOT = {
			has_global_variable = verrier_pluto_year_global_var
		}
	}

	possible = {
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 35
		}
	}

	immediate = {
		set_variable = {
			name = je_verrier_pluto_var
			days = 1
		}
	}

	current_value = {
		if = {
			limit = {
				scope:journal_entry = {
					goal_value = 0
				}
			}
			value = 0
		}
		else = {
			value = var:verrier_astronomical_objects #value or variable you use to meassure progress
		}
	}

	goal_add_value = {
		if = { #If start date is 1836
			limit = { global_var:start_year_global_var >= 1836 }
			value = 1500
		}
		else = { #Before 1836
		# Basically takes the amount of years before 1836 and multiplies it by 2 (average objects per year),
		# then adds the base value of 1500
			value = 1836
			subtract = global_var:start_year_global_var
			multiply = 2 #Assuming about 2 astronomical objects get discovered each year on average.
			add = 1500 #Base value
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_verrier_observatory
		}
		verrier_has_astronomer = yes
		scope:journal_entry = {
			is_goal_complete = yes
		}
		hidden_trigger = {
			NOT = { has_variable = je_verrier_pluto_var }
		}
	}

	on_complete = {
		trigger_event = { 
			id = verrier.20
			popup = yes 
		}
	}

	fail = {
		custom_tooltip = {
			text = je_verrier_pluto_fail
			any_country = {
				NOT = { this = ROOT }
				has_variable = verrier_discovered_pluto_variable
			}
		}
    }

	progressbar = yes

	weight = 50
}

###########################################################

######SATELLITES#######

#Mars Satellites #2
je_verrier_mars_satellites = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	scripted_button = verrier_stop_astronomer_project_button

	scripted_progress_bar = verrier_satellite_discovery_progress_bar

	group = je_group_verrier_astronomy

	immediate = {
	}

	complete = {
		custom_tooltip = {
			text = verrier_satellite_discovery_progress_bar_at_full_tt
			je:je_verrier_mars_satellites = {
				"scripted_bar_progress(verrier_satellite_discovery_progress_bar)" >= 48
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_verrier_satellites_success
			random_list = {
				1 = {
					trigger = { verrier_can_discover_deimos_trigger = yes }
					trigger_event = { 
						id = verrier.511 #Verrier 511: Deimos discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_phobos_trigger = yes }
					trigger_event = { 
						id = verrier.512 #Verrier 512: Phobos discovered
						popup = yes 
					}
				}
			}
		}
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = je_astronomer_dies_tt
				NOT = {
					has_variable = verrier_astronomer_var
				}
			}
			custom_tooltip = {
				text = verrier_stop_astronomer_project_tt
				has_variable = verrier_stop_astronomer_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = verrier_can_stop_active_project_var #Needs to be removed, when the JE is removed
		remove_variable = verrier_stop_astronomer_project_var
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	fail = {
		custom_tooltip = {
			text = je_satellite_discovery_failed_tt
			verrier_can_discover_mars_satellite_trigger = no
		}
	}

	on_fail = {
		trigger_event = {
			id = verrier.501
		}
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	weight = 25
}

#Jupiter Satellites #7
je_verrier_jupiter_satellites = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	scripted_button = verrier_stop_astronomer_project_button

	scripted_progress_bar = verrier_satellite_discovery_progress_bar

	group = je_group_verrier_astronomy

	immediate = {
	}

	complete = {
		custom_tooltip = {
			text = verrier_satellite_discovery_progress_bar_at_full_tt
			je:je_verrier_jupiter_satellites = {
				"scripted_bar_progress(verrier_satellite_discovery_progress_bar)" >= 48
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_verrier_satellites_success
			random_list = {
				1 = {
					trigger = { verrier_can_discover_amalthea_trigger = yes }
					trigger_event = { 
						id = verrier.521 #Verrier 521: Amalthea discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_himalia_trigger = yes }
					trigger_event = { 
						id = verrier.522 #Verrier 522: Himalia discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_elara_trigger = yes }
					trigger_event = { 
						id = verrier.523 #Verrier 523: Elara discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_pasiphae_trigger = yes }
					trigger_event = { 
						id = verrier.524 #Verrier 524: Pasiphae discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_sinope_trigger = yes }
					trigger_event = { 
						id = verrier.525 #Verrier 525: Sinope discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_lysithea_trigger = yes }
					trigger_event = { 
						id = verrier.526 #Verrier 526: Lysithea discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_carme_trigger = yes }
					trigger_event = { 
						id = verrier.527 #Verrier 527: Carme discovered
						popup = yes 
					}
				}
			}
		}
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = je_astronomer_dies_tt
				NOT = {
					has_variable = verrier_astronomer_var
				}
			}
			custom_tooltip = {
				text = verrier_stop_astronomer_project_tt
				has_variable = verrier_stop_astronomer_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = verrier_can_stop_active_project_var #Needs to be removed, when the JE is removed
		remove_variable = verrier_stop_astronomer_project_var
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	fail = {
		custom_tooltip = {
			text = je_satellite_discovery_failed_tt
			verrier_can_discover_jupiter_satellite_trigger = no
		}
	}

	on_fail = {
		trigger_event = {
			id = verrier.501
		}
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	weight = 25
}

#Saturn Satellites #4
je_verrier_saturn_satellites = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	scripted_button = verrier_stop_astronomer_project_button

	scripted_progress_bar = verrier_satellite_discovery_progress_bar

	group = je_group_verrier_astronomy

	immediate = {
	}

	complete = {
		custom_tooltip = {
			text = verrier_satellite_discovery_progress_bar_at_full_tt
			je:je_verrier_saturn_satellites = {
				"scripted_bar_progress(verrier_satellite_discovery_progress_bar)" >= 48
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_verrier_satellites_success
			random_list = {
				1 = {
					trigger = { verrier_can_discover_enceladus_trigger = yes }
					trigger_event = { 
						id = verrier.531 #Verrier 531: Enceladus discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_mimas_trigger = yes }
					trigger_event = { 
						id = verrier.532 #Verrier 532: Mimas discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_hyperion_trigger = yes }
					trigger_event = { 
						id = verrier.533 #Verrier 533: Hyperion discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_phoebe_trigger = yes }
					trigger_event = { 
						id = verrier.534 #Verrier 534: Phoebe discovered
						popup = yes 
					}
				}
			}
		}
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = je_astronomer_dies_tt
				NOT = {
					has_variable = verrier_astronomer_var
				}
			}
			custom_tooltip = {
				text = verrier_stop_astronomer_project_tt
				has_variable = verrier_stop_astronomer_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = verrier_can_stop_active_project_var #Needs to be removed, when the JE is removed
		remove_variable = verrier_stop_astronomer_project_var
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	fail = {
		custom_tooltip = {
			text = je_satellite_discovery_failed_tt
			verrier_can_discover_saturn_satellite_trigger = no
		}
	}

	on_fail = {
		trigger_event = {
			id = verrier.501
		}
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	weight = 25
}

#Uranus Satellites #5
je_verrier_uranus_satellites = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	scripted_button = verrier_stop_astronomer_project_button

	scripted_progress_bar = verrier_satellite_discovery_progress_bar

	group = je_group_verrier_astronomy

	immediate = {
	}

	complete = {
		custom_tooltip = {
			text = verrier_satellite_discovery_progress_bar_at_full_tt
			je:je_verrier_uranus_satellites = {
				"scripted_bar_progress(verrier_satellite_discovery_progress_bar)" >= 48
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_verrier_satellites_success
			random_list = {
				1 = {
					trigger = { verrier_can_discover_titania_trigger = yes }
					trigger_event = { 
						id = verrier.541 #Verrier 541: Titania discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_oberon_trigger = yes }
					trigger_event = { 
						id = verrier.542 #Verrier 542: Oberon discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_ariel_trigger = yes }
					trigger_event = { 
						id = verrier.543 #Verrier 543: Ariel discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_umbriel_trigger = yes }
					trigger_event = { 
						id = verrier.544 #Verrier 544: Umbriel discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_miranda_trigger = yes }
					trigger_event = { 
						id = verrier.545 #Verrier 545: Miranda discovered
						popup = yes 
					}
				}
			}
		}
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = je_astronomer_dies_tt
				NOT = {
					has_variable = verrier_astronomer_var
				}
			}
			custom_tooltip = {
				text = verrier_stop_astronomer_project_tt
				has_variable = verrier_stop_astronomer_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = verrier_can_stop_active_project_var #Needs to be removed, when the JE is removed
		remove_variable = verrier_stop_astronomer_project_var
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	fail = {
		custom_tooltip = {
			text = je_satellite_discovery_failed_tt
			verrier_can_discover_uranus_satellite_trigger = no
		}
	}

	on_fail = {
		trigger_event = {
			id = verrier.501
		}
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	weight = 25
}

#Neptune Satellites #2
je_verrier_neptune_satellites = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	scripted_button = verrier_stop_astronomer_project_button

	scripted_progress_bar = verrier_satellite_discovery_progress_bar

	group = je_group_verrier_astronomy

	immediate = {
	}

	complete = {
		custom_tooltip = {
			text = verrier_satellite_discovery_progress_bar_at_full_tt
			je:je_verrier_neptune_satellites = {
				"scripted_bar_progress(verrier_satellite_discovery_progress_bar)" >= 48
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_verrier_satellites_success
			random_list = {
				1 = {
					trigger = { verrier_can_discover_triton_trigger = yes }
					trigger_event = { 
						id = verrier.551 #Verrier 551: Triton discovered
						popup = yes 
					}
				}
				1 = {
					trigger = { verrier_can_discover_nereid_trigger = yes }
					trigger_event = { 
						id = verrier.552 #Verrier 552: Nereid discovered
						popup = yes 
					}
				}
			}
		}
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = je_astronomer_dies_tt
				NOT = {
					has_variable = verrier_astronomer_var
				}
			}
			custom_tooltip = {
				text = verrier_stop_astronomer_project_tt
				has_variable = verrier_stop_astronomer_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = verrier_can_stop_active_project_var #Needs to be removed, when the JE is removed
		remove_variable = verrier_stop_astronomer_project_var
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	fail = {
		custom_tooltip = {
			text = je_satellite_discovery_failed_tt
			verrier_can_discover_neptune_satellite_trigger = no
		}
	}

	on_fail = {
		trigger_event = {
			id = verrier.501
		}
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	weight = 25
}

###########################################################

######MOON MAPPING#######

je_verrier_charter_moon = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	scripted_button = verrier_stop_astronomer_project_button

	group = je_group_verrier_astronomy

	immediate = {
		set_variable = verrier_can_stop_active_project_var
		set_variable = {
			name = je_verrier_charter_moon_var
			days = 1
		}
	}

	on_yearly_pulse = {
		random_events = {
			40 = 0
			
			10 = verrier.51 #Verrier 51: Lunar channels
			10 = verrier.52 #Verrier 52: Lunar crater
			10 = verrier.53 #Verrier 53: Lunar maria
			10 = verrier.54 #Verrier 54: Lunar mountains
			10 = verrier.55 #Verrier 55: Libration of the Moon
		}
	}

	current_value = {
		if = {
			limit = {
				scope:journal_entry = {
					goal_value = 0
				}
			}
			value = 0
		}
		else = {
			value = var:verrier_moon_photo #value or variable you use to meassure progress
		}
	}

	goal_add_value = {
		value = 10 #value you want the variable to reach
	}

	complete = {
		custom_tooltip = {
			text = je_verrier_charter_moon_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		hidden_trigger = {
			NOT = { has_variable = je_verrier_charter_moon_var }
		}
	}

	on_complete = {
		trigger_event = { 
			id = verrier.50
			popup = yes 
		}
		remove_modifier = verrier_charter_moon_modifier
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = je_astronomer_dies_tt
				NOT = {
					has_variable = verrier_astronomer_var
				}
			}
			custom_tooltip = {
				text = verrier_stop_astronomer_project_tt
				has_variable = verrier_stop_astronomer_project_var
			}
		}
	}

	on_invalid = {
		remove_variable = verrier_can_stop_active_project_var #Needs to be removed, when the JE is removed
		remove_variable = verrier_stop_astronomer_project_var
		var:verrier_astronomer_var = {
			set_character_busy_and_immortal = no
		}
	}

	progressbar = yes

	weight = 25
}

###########################################################

######ASTRO METEORITES######

je_verrier_meteorites = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	group = je_group_verrier_astronomy

	immediate = {
		set_variable = {
			name = je_verrier_charter_moon_var
			days = 1
		}
	}

	current_value = {
		if = {
			limit = {
				scope:journal_entry = {
					goal_value = 0
				}
			}
			value = 0
		}
		else = {
			value = var:verrier_meteorites_var #value or variable you use to meassure progress
		}
	}

	goal_add_value = {
		value = 10 #value you want the variable to reach
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		hidden_trigger = {
			NOT = { has_variable = je_verrier_charter_moon_var }
		}
	}

	on_complete = {
		set_variable = verrier_meteorites_je_done_var
		verrier_large_add_technology = yes
	}

	progressbar = yes

	weight = 25
}

###########################################################

######ASTRO PHYSICS######

je_verrier_astro_physics = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	group = je_group_verrier_astronomy

	is_shown_when_inactive = {
		has_global_variable = verrier_neptune_discovered_var
	}

	possible = {
		has_technology_researched = verrier_astronomy_tech
	}

	immediate = {
		set_variable = {
			name = je_verrier_astro_physics_var
			days = 1
		}
	}

	current_value = {
		if = {
			limit = {
				scope:journal_entry = {
					goal_value = 0
				}
			}
			value = 0
		}
		else = {
			value = var:verrier_astronomical_objects #value or variable you use to meassure progress
		}
	}

	goal_add_value = {
		value = 750 #value you want the variable to reach
	}

	complete = {
		has_technology_researched = verrier_modern_physics_tech
		custom_tooltip = {
			text = je_verrier_astro_physics_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		hidden_trigger = {
			NOT = { has_variable = je_verrier_astro_physics_var }
		}
	}

	on_complete = {
		add_technology_researched = verrier_astro_physics_tech
	}

	progressbar = yes

	weight = 35
}

###########################################################

######FROM THE EARTH TO THE MOON######

je_from_the_earth_to_the_moon = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	group = je_group_verrier_astronomy

	current_value = {
	}

	immediate = {
	}

	goal_add_value = {
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_variable = verrier_gun_club_president_var
			}
			save_scope_as = verrier_club_president
		}
	}

	complete = {
		any_scope_state = {
			state_region = s:STATE_FLORIDA
			has_building = building_railway
		}
		verrier_has_astronomer = yes
		gaudi_has_engineer = yes
		custom_tooltip = {
			text = verrier_baltimore_president_alive_tt
			any_scope_character = {
				has_variable = verrier_gun_club_president_var
				is_busy = no
			}
		}
		any_scope_building = {
			is_building_type = building_artillery_foundries
			level >= 15
		}
		any_scope_building = {
			is_building_type = building_explosives_factory
			level >= 10
		}
	}

	on_complete = {
		trigger_event = { 
			id = verrier.132
			popup = yes 
		}
	}

	fail = {
		game_date >= 1869.7.20
	}

	progressbar = no

	weight = 15
}

###########################################################

######Tara Wali Kothi######

je_verrier_tara_wali_kothi = {
	icon = "gfx/interface/icons/event_icons/event_astronomy.dds"

	group = je_group_verrier_astronomy

	scripted_button = verrier_kothe_buy_additional_instruments_button
	scripted_button = verrier_kothe_pay_workers_extra_button
	scripted_button = verrier_kothe_employ_physics_teachers_button
	scripted_button = verrier_kothe_employ_foreign_engineers_button

	immediate = {
		set_variable = { #This variable tracks the progress of the construction
			name = verrier_tara_wali_kothi_progress
			value = 0
		}
		set_variable = {
			name = je_verrier_tara_wali_kothi_var
			days = 1
		}
	}

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = verrier_tara_wali_kothi_progress
				add = 1
			}
		}
	}

	current_value = {
		if = {
			limit = {
				scope:journal_entry = {
					goal_value = 0
				}
			}
			value = 0
		}
		else = {
			value = var:verrier_tara_wali_kothi_progress #value or variable you use to meassure progress
		}
	}

	goal_add_value = {
		value = 100
	}

	complete = {
		custom_tooltip = {
			text = je_verrier_tara_wali_kothi_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		hidden_trigger = {
			NOT = { has_variable = je_verrier_tara_wali_kothi_var }
		}
	}

	on_complete = {
		remove_variable = verrier_tara_wali_kothi_progress

		trigger_event = { 
			id = verrier.1002
			popup = yes 
		}
	}

	progressbar = yes

	weight = 15
}