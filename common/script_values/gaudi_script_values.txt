#######################
# GAUDI SCRPIT VALUES #
#######################

#By Lord R

############################################################################

#This Script value depends on the technological advancement of a country.
gaudi_tech_level_multiplier_5_value = {
	value = gaudi_percentage_more_advanced_countries_value
	multiply = 5
}

#This Script Value calculates the percentage of more advanced countries that are not decentralized
gaudi_percentage_more_advanced_countries_value = {
	if = {
		limit = {
			any_country = {
				techs_researched >= root.techs_researched
			}
		}
		every_country = {
			limit = {
				NOT = { is_country_type = decentralized }
				techs_researched >= root.techs_researched
			}
			add = 1
		}
	}
	else = {
		value = 0.01
	}

	divide = gaudi_num_countries_not_decentralized_value
}

#This Script Value counts the number of countries that are not decentralized
gaudi_num_countries_not_decentralized_value = {
	every_country = {
		limit = {
			NOT = { is_country_type = decentralized }
		}
		add = 1
	}
}

#This Script Value calculates the Civil Engineering Progress
gaudi_civil_engineering_progress = {
	desc = "ENGINEERING_PROGRESS_BASE"
	value = 1
	if = {
		limit = {
			gaudi_has_civil_engineer_trigger = yes
		}
		desc = "HAS_CIVIL_ENGINEER"
		add = 1
	}
	if = {
		limit = {
			gaudi_has_civil_engineer_trigger = yes
		}
		set_local_variable = {
			name = engineer_experience_add
			value = var:gaudi_engineer_var.var:gaudi_civil_engineer_experience
		}
		change_local_variable = {
			name = engineer_experience_add
			multiply = 0.01
		}
		desc = "CIVIL_ENGINEER_EXPERIENCE"
		add = local_var:engineer_experience_add
	}
	if = {
		limit = {
			gaudi_has_civil_engineer_trigger = yes
			gaudi_engineer_var = {
				has_trait = gaudi_civil_engineer
			}
		}
		desc = "CIVIL_ENGINEER_HAS_SKILL_TRAIT"
		add = 1
	}
	if = {
		limit = {
			gaudi_has_civil_engineer_trigger = yes
			gaudi_engineer_var = {
				has_trait = meticulous
			}
			desc = "ENGINEER_HAS_METICULOUS_TRAIT"
			add = 0.25
		}
	}
	if = {
		limit = {
			gaudi_has_civil_engineer_trigger = yes
			gaudi_engineer_var = {
				has_trait = persistent
			}
			desc = "ENGINEER_HAS_PERSISTENT_TRAIT"
			add = 0.25
		}
	}
	if = {
		limit = {
			gaudi_has_civil_engineer_trigger = yes
			gaudi_engineer_var = {
				has_trait = innovative
			}
			desc = "ENGINEER_HAS_INNOVATIVE_TRAIT"
			add = 0.25
		}
	}
	if = {
		limit = {
			gaudi_has_civil_engineer_trigger = yes
			gaudi_engineer_var = {
				has_trait = surveyor
			}
			desc = "ENGINEER_HAS_SURVEYOR_TRAIT"
			add = 0.25
		}
	}
}