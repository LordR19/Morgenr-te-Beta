###############################
# MORGENRÖTE SCRIPTED BUTTONS #
###############################

#by Marco Dandolo

######################

######ARCHAEOLOGICAL MUSEUM######

mr_visit_museum_button = {
	name = "mr_visit_museum_button"
	desc = "mr_visit_museum_button_desc"

	visible = { always = yes }

	possible = {
		any_scope_building = {
			is_building_type = building_lepsius_archaeological_museum
			level >= 1
		}
		custom_tooltip = {
			text = mr_visiting_museum_tt
			NOT = {
				has_variable = lepsius_visiting_museum_var
			}
		}
	}

	effect = {
		set_variable = lepsius_visiting_museum_var
		trigger_event = { 
			id = lepsius.11 
			popup = yes 
		}
	}
}

######OBSERVATORY######

mr_visit_observatory_button = {
	name = "mr_visit_observatory_button"
	desc = "mr_visit_observatory_button_desc"

	visible = { always = yes }

	possible = {
		any_scope_building = {
			is_building_type = building_verrier_observatory
			level >= 1
		}
		custom_tooltip = {
			text = verrier_visiting_observatory_tt
			NOT = {
				has_variable = verrier_visiting_observatory_var
			}
		}
	}

	effect = {
		set_variable = verrier_visiting_observatory_var
		trigger_event = { 
			id = verrier.100 
			popup = yes 
		}
	}
}

######OPERA######

mr_visit_opera_button = {
	name = "mr_visit_opera_button"
	desc = "mr_visit_opera_button_desc"

	visible = { always = yes }

	possible = {
		any_scope_building = {
			is_building_type = building_elgar_opera
			level >= 1
		}
		custom_tooltip = {
			text = mr_visiting_opera_tt
			NOT = {
				has_variable = elgar_visiting_opera_var
			}
		}
	}

	effect = {
		set_variable = elgar_visiting_opera_var
		trigger_event = { 
			id = elgar.10
			popup = yes 
		}
	}
}

######ZOO######

mr_visit_zoo_button = {
	name = "mr_visit_zoo_button"
	desc = "mr_visit_zoo_button_desc"

	visible = { always = yes }

	possible = {
		any_scope_building = {
			is_building_type = building_dubois_zoo
			level >= 1
		}
		custom_tooltip = {
			text = mr_visiting_zoo_tt
			NOT = {
				has_variable = dubois_visiting_zoo_var
			}
		}
	}

	effect = {
		set_variable = dubois_visiting_zoo_var
		trigger_event = {
			id = dubois.1001
			popup = yes
		}
		hidden_effect = {
			if = {
				limit = {
					elgar_has_musician = yes
					has_variable = dubois_zoo_animal_lion
					has_variable = dubois_zoo_animal_elephant
					has_variable = dubois_zoo_animal_turtle
					has_variable = dubois_zoo_animal_kangaroo
					NOT = {
						has_variable = dubois_animal_carnival_var
					}
				}
				trigger_event = {
					id = dubois.1000
				}
			}
		}
	}
}

######PALEONTOLOGICAL COLLECTION######

mr_visit_paleontological_collection_button = {
	name = "mr_visit_paleontological_collection_button"
	desc = "mr_visit_paleontological_collection_button_desc"

	visible = { always = yes }

	possible = {
		OR = {
			dubois_has_paleontologist = yes
			dubois_has_fossil = yes
			dubois_has_dinosaur_bone = yes
		}
		custom_tooltip = {
			text = mr_visiting_fossils_tt
			NOT = {
				has_variable = dubois_visiting_fossils_var
			}
		}
	}

	effect = {
		set_variable = dubois_visiting_fossils_var
		trigger_event = {
			id = dubois.2001
			popup = yes
		}
	}
}

######SCIENTIFIC SOCIETY######

mr_visit_scientific_society_button = {
	name = "mr_visit_scientific_society_button"
	desc = "mr_visit_scientific_society_button_desc"

	visible = { always = yes }

	possible = {
		OR ={
			gaudi_has_engineer = yes
			verrier_has_astronomer = yes
			dubois_has_naturalist = yes
			dubois_has_paleontologist = yes
			lepsius_has_archaeologist = yes
			lepsius_has_anthropologist = yes
		}
		custom_tooltip = {
			text = mr_visiting_scientific_society_tt
			NOT = {
				has_variable = academics_character_overview_var
			}
		}
	}

	effect = {
		set_variable = academics_character_overview_var
		trigger_event = {
			id = academics.30
			popup = yes
		}
	}
}

###########################################################################

######BOTANICAL EXPEDITION######

mr_botanical_expedition_button = {
	name = "mr_botanical_expedition_button"
	desc = "mr_botanical_expedition_button_desc"

	visible = { always = yes }

	possible = {
		has_technology_researched = dubois_theory_of_evolution_tech
		has_technology_researched = malaria_prevention
		dubois_has_active_naturalist = yes
		OR = {
			dubois_has_rainforest = yes
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = botanical_license
				}				
				dubois_has_rainforest = yes
			}
		}
		NOR = {
			has_modifier = dubois_botanical_expedition_modifier
			has_modifier = dubois_had_botanical_expedition_modifier
		}
	}

	effect = {
		add_modifier = {
			name = dubois_botanical_expedition_modifier
		}
		trigger_event = { id = dubois.301 popup = yes }
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				var:dubois_specimen < 35000
			}
			add = 100
		}		
		modifier = {
			trigger = {
				var:lepsius_aegean_artifact_minor < 45000
			}
			add = 25
		}	
		modifier = {
			trigger = {
				var:dubois_specimen >= 50000
			}
			add = -200
		}	
	}
}