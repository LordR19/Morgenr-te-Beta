###############################
# MORGENRÖTE SCRIPTED BUTTONS #
###############################

#by Marco Dandolo

######################

######ARCHAEOLOGICAL MUSEUM######

mr_visit_museum_button = {
	name = "mr_visit_museum_button"
	desc = "mr_visit_museum_button_desc"

	visible = { always = yes }

	possible = {
		any_scope_building = {
			is_building_type = building_lepsius_archaeological_museum
			level >= 1
		}
		custom_tooltip = {
			text = mr_visiting_museum_tt
			NOT = {
				has_variable = lepsius_visiting_museum_var
			}
		}
	}

	effect = {
		set_variable = lepsius_visiting_museum_var
		trigger_event = { 
			id = lepsius.11 
			popup = yes 
		}
	}
}

######OBSERVATORY######

mr_visit_observatory_button = {
	name = "mr_visit_observatory_button"
	desc = "mr_visit_observatory_button_desc"

	visible = { always = yes }

	possible = {
		any_scope_building = {
			is_building_type = building_verrier_observatory
			level >= 1
		}
		custom_tooltip = {
			text = verrier_visiting_observatory_tt
			NOT = {
				has_variable = verrier_visiting_observatory_var
			}
		}
	}

	effect = {
		set_variable = verrier_visiting_observatory_var
		trigger_event = { 
			id = verrier.100 
			popup = yes 
		}
	}
}

######OPERA######

mr_visit_opera_button = {
	name = "mr_visit_opera_button"
	desc = "mr_visit_opera_button_desc"

	visible = { always = yes }

	possible = {
		any_scope_building = {
			is_building_type = building_elgar_opera
			level >= 1
		}
		custom_tooltip = {
			text = mr_visiting_opera_tt
			NOT = {
				has_variable = elgar_visiting_opera_var
			}
		}
	}

	effect = {
		set_variable = elgar_visiting_opera_var
		trigger_event = { 
			id = elgar.10
			popup = yes 
		}
	}
}

mr_visit_opera_arts_button = {
	name = "mr_visit_opera_button"
	desc = "mr_visit_opera_button_desc"

	visible = { 
		is_player = yes
		has_game_rule = academics_gui_rule
	}

	possible = {
		any_scope_building = {
			is_building_type = building_elgar_opera
			level >= 1
		}
		custom_tooltip = {
			text = mr_visiting_opera_tt
			NOT = {
				has_variable = elgar_visiting_opera_var
			}
		}
	}

	effect = {
		set_variable = elgar_visiting_opera_var
		trigger_event = { 
			id = elgar.10
			popup = yes 
		}
	}
}

######ZOO######

mr_visit_zoo_button = {
	name = "mr_visit_zoo_button"
	desc = "mr_visit_zoo_button_desc"

	visible = { always = yes }

	possible = {
		any_scope_building = {
			is_building_type = building_dubois_zoo
			level >= 1
		}
		custom_tooltip = {
			text = mr_visiting_zoo_tt
			NOT = {
				has_variable = dubois_visiting_zoo_var
			}
		}
	}

	effect = {
		set_variable = dubois_visiting_zoo_var
		trigger_event = {
			id = dubois.1001
			popup = yes
		}
		hidden_effect = {
			if = {
				limit = {
					elgar_has_composer = yes
					has_variable = dubois_zoo_animal_lion
					has_variable = dubois_zoo_animal_elephant
					has_variable = dubois_zoo_animal_turtle
					has_variable = dubois_zoo_animal_kangaroo
					NOT = {
						has_variable = dubois_animal_carnival_var
					}
				}
				trigger_event = {
					id = dubois.1000
				}
			}
		}
	}
}

######PALEONTOLOGICAL COLLECTION######

mr_visit_paleontological_collection_button = {
	name = "mr_visit_paleontological_collection_button"
	desc = "mr_visit_paleontological_collection_button_desc"

	visible = { always = yes }

	possible = {
		OR = {
			dubois_has_paleontologist = yes
			dubois_has_fossil = yes
			dubois_has_dinosaur_bone = yes
		}
		custom_tooltip = {
			text = mr_visiting_fossils_tt
			NOT = {
				has_variable = dubois_visiting_fossils_var
			}
		}
	}

	effect = {
		set_variable = dubois_visiting_fossils_var
		trigger_event = {
			id = dubois.2001
			popup = yes
		}
	}
}

######ANTHROPOLOGICAL COLLECTION######

mr_visit_anthropological_collection_button = {
	name = "mr_visit_anthropological_collection_button"
	desc = "mr_visit_anthropological_collection_button_desc"

	visible = { always = yes }

	possible = {
		OR = {
			lepsius_has_anthropologist = yes
			lepsius_has_human_fossil = yes
		}
		custom_tooltip = {
			text = mr_visiting_human_evolution_tt
			NOT = {
				has_variable = lepsius_visiting_human_evolution_var
			}
		}
	}

	effect = {
		set_variable = lepsius_visiting_human_evolution_var
		trigger_event = {
			id = lepsius.1501
			popup = yes
		}
	}
}

######SCIENTIFIC SOCIETY######

mr_visit_scientific_society_button = {
	name = "mr_visit_scientific_society_button"
	desc = "mr_visit_scientific_society_button_desc"

	visible = { always = yes }

	possible = {
		custom_tooltip = {
			text = mr_visiting_scientific_society_tt
			NOT = {
				has_variable = academics_character_overview_var
			}
		}
	}

	effect = {
		set_variable = academics_character_overview_var
		trigger_event = {
			id = academics.30
			popup = yes
		}
	}
}

###########################################################################

#SCIENTIFIC EXPEDITION

######PACIFIC EXPEDITION######

mr_pacific_expedition_button = {
	name = "mr_pacific_expedition_button"
	desc = "mr_pacific_expedition_button_desc"

	visible = { always = yes }

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = screw_frigate
		has_technology_researched = dialectics
		any_scope_building = {
			is_building_type = building_port
		}
		any_scope_building = {
			is_building_type = building_university
		}
		navy_size >= 15
		any_scope_character = {
			has_role = admiral
			is_busy = no
		}
		NOT = {
			any_country = {
				OR = {
					has_technology_researched = dreadnought
					has_technology_researched = destroyer
				}
			}
		}
		NOR = {
			has_modifier = rapanui_pacific_expedition_modifier
			has_modifier = rapanui_had_pacific_expedition_modifier
		}
	}

	effect = {
		add_treasury = -25000
		add_modifier = {
			name = rapanui_pacific_expedition_modifier
		}
		trigger_event = { 
			id = rapanui.201
			popup = yes 
		}
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
	}
}

######MOUNTAIN EXPEDITION######

mr_mountain_expedition_button = {
	name = "mr_mountain_expedition_button"
	desc = "mr_mountain_expedition_button_desc"

	visible = { 
		OR = {
			is_player = yes
			AND = {
				any_scope_character = {
					has_role = general
					is_busy = no
					OR = {
						has_trait = dubois_mountaineer
						has_trait = explorer
						has_trait = mountain_commander
						has_trait = surveyor
					}
				}
				has_technology_researched = nationalism
				has_technology_researched = prospecting
				NOR = {
					has_modifier = dubois_summit_level_1_modifier
					has_modifier = dubois_summit_level_2_modifier
					has_modifier = dubois_summit_level_3_modifier
					has_modifier = dubois_summit_level_4_modifier
					has_modifier = dubois_summit_level_5_modifier
					has_modifier = dubois_summit_level_6_modifier
					has_modifier = dubois_mountaineering_disaster_modifier
					has_modifier = dubois_mountaineering_disappointment_modifier
					has_journal_entry = je_dubois_mountain_expedition
					has_variable = dubois_current_mountain_expedition_var
				}
			}
		}
	}

	possible = {
		any_scope_character = {
			has_role = general
			is_busy = no
			OR = {
				has_trait = dubois_mountaineer
				has_trait = explorer
				has_trait = mountain_commander
				has_trait = surveyor
			}
		}
		has_technology_researched = nationalism
		has_technology_researched = prospecting
		NOR = {
			has_modifier = dubois_summit_level_1_modifier
			has_modifier = dubois_summit_level_2_modifier
			has_modifier = dubois_summit_level_3_modifier
			has_modifier = dubois_summit_level_4_modifier
			has_modifier = dubois_summit_level_5_modifier
			has_modifier = dubois_summit_level_6_modifier
			has_modifier = dubois_mountaineering_disaster_modifier
			has_modifier = dubois_mountaineering_disappointment_modifier
			has_journal_entry = je_dubois_mountain_expedition
			has_variable = dubois_current_mountain_expedition_var
		}
		OR = {
			dubois_has_unconquered_summit_no_tt_trigger = yes
			any_country = {
				dubois_has_unconquered_summit_no_tt_trigger = yes
				has_diplomatic_pact = {
					who = ROOT
					type = mountaineering_license
				}
			}
		}
	}

	effect = {
		add_treasury = -25000
		set_variable = {
			name = dubois_current_mountain_expedition_var
			days = 90
		}
		trigger_event = { 
			id = dubois.411
			popup = yes 
		}
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				gold_reserves > 0
			}
			add = 100
		}
	}
}

######ARCTIC EXPEDITION######

mr_arctica_expedition_button = {
	name = "mr_arctica_expedition_button"
	desc = "mr_arctica_expedition_button_desc"

	visible = { always = yes }

	possible = {
		has_technology_researched = zeppelins
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_curtiss_weather_station
		}
		any_scope_character = {
			OR = {
				has_trait = curtiss_pilot
				has_trait = curtiss_pilot_ace
			}
			is_busy = no
		}
		OR = {

			OR = {
				any_scope_state = {
					state_region = s:STATE_GREENLAND
				}
				any_country = {
					has_diplomatic_pact = {
						who = ROOT
						type = airspace_convention
					}				
					any_scope_state = {
						state_region = s:STATE_GREENLAND
					}
				}		
			}
			OR = {
				any_scope_state = {
					state_region = s:STATE_NORTHERN_NORWAY
				}
				any_country = {
					has_diplomatic_pact = {
						who = ROOT
						type = airspace_convention
					}				
					any_scope_state = {
						state_region = s:STATE_NORTHERN_NORWAY
					}
				}		
			}
			OR = {
				any_scope_state = {
					state_region = s:STATE_ALASKA
				}
				any_country = {
					has_diplomatic_pact = {
						who = ROOT
						type = airspace_convention
					}				
					any_scope_state = {
						state_region = s:STATE_ALASKA
					}
				}		
			}
			OR = {
				any_scope_state = {
				state_region = s:STATE_NUNAVUT
				}
				any_country = {
					has_diplomatic_pact = {
						who = ROOT
						type = airspace_convention
					}				
					any_scope_state = {
						state_region = s:STATE_NUNAVUT
					}
				}		
			}
			OR = {
				any_scope_state = {
					state_region = s:STATE_NENETSIA
				}
				any_country = {
					has_diplomatic_pact = {
						who = ROOT
						type = airspace_convention
					}				
					any_scope_state = {
						state_region = s:STATE_NENETSIA
					}
				}		
			}
		}
		NOR = {
			has_modifier = curtiss_arctica_expedition_modifier
			has_modifier = curtiss_had_arctica_expedition_modifier
		}
	}

	effect = {
		set_variable = {
			name = curtiss_zeppelin_progress
			value = 0
		}
		set_variable = {
			name = curtiss_zeppelin_science
			value = 0
		}
		set_variable = {
			name = curtiss_zeppelin_danger
			value = 0
		}
		add_modifier = {
			name = curtiss_arctica_expedition_modifier
		}
		add_modifier = {
			name = curtiss_zeppelin_expedition_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		trigger_event = { 
			id = curtiss.520
			popup = yes 
		}
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_small
				gold_reserves > 0

			}
			add = 1
		}
		modifier = {
			trigger = {
				has_strategy = ai_strategy_armed_isolationism
			}
			add = -1000
		}		
		modifier = {
			OR = {
				is_diplomatic_play_committed_participant = yes
				is_at_war = yes
			}
			add = -1000
		}
	}
}

######SAFARI EXPEDITION######

mr_safari_expedition_button = {
	name = "mr_safari_expedition_button"
	desc = "mr_safari_expedition_button_desc"

	visible = { always = yes }

	possible = {
		has_technology_researched = dubois_theory_of_evolution_tech
		has_technology_researched = civilizing_mission
		any_scope_state = {
			is_capital = yes
			OR = {
				is_production_method_active = {
					building_type = building_dubois_zoo
					production_method = pm_zoo_level_2
				}
				is_production_method_active = {
					building_type = building_dubois_zoo
					production_method = pm_zoo_level_3
				}
				is_production_method_active = {
					building_type = building_dubois_zoo
					production_method = pm_zoo_level_4
				}
			}
		}
		dubois_has_active_naturalist = yes
		custom_tooltip = {
			text = dubois_safari_possible_tt
			dubois_safari_possible = yes
		}
		NOR = {
			has_modifier = dubois_on_safari_modifier
			has_modifier = dubois_had_safari_modifier
		}
	}

	effect = {
		add_modifier = {
			name = dubois_on_safari_modifier
		}
		trigger_event = {
			id = dubois.31
			popup = yes
		}
		hidden_effect = {
			var:dubois_naturalist_var = {
				add_modifier = {
					name = dubois_animal_hunter_modifier
				}
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_chance = {
		base = 1000
	}
}

######ZOOLOGICAL EXPEDITION

mr_zoological_expedition_button = {
	name = "mr_zoological_expedition_button"
	desc = "mr_zoological_expedition_button_desc"

	visible = { always = yes }

	possible = {
		has_technology_researched = dubois_theory_of_evolution_tech
		dubois_has_active_naturalist = yes
		custom_tooltip = {
			text = dubois_has_local_animal_tt
			dubois_has_local_animal = yes
		}
		NOT = {
			has_modifier = dubois_search_local_animal_modifier
		}
	}

	effect = {
		add_modifier = {
			name = dubois_search_local_animal_modifier
		}
		hidden_effect = {
			dubois_set_catch_animals = yes
			var:dubois_naturalist_var = {
				add_modifier = {
					name = dubois_animal_hunter_modifier
				}
				set_character_busy_and_immortal = yes
			}
			trigger_event = {
				id = dubois.21
				days = 365
			}
		}
	}

	ai_chance = {
		base = 1000
	}
}

######BOTANICAL EXPEDITION######

mr_botanical_expedition_button = {
	name = "mr_botanical_expedition_button"
	desc = "mr_botanical_expedition_button_desc"

	visible = {
		NOT = {
			has_modifier = dubois_botanical_expedition_modifier
		}
	}

	possible = {
		has_technology_researched = dubois_theory_of_evolution_tech
		has_technology_researched = malaria_prevention
		dubois_has_active_naturalist = yes
		dubois_botanical_expedition_banned = no
		OR = {
			dubois_has_rainforest = yes
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = botanical_license
				}				
				dubois_has_rainforest = yes
			}
		}
	}

	effect = {
		trigger_event = { 
			id = dubois.301
			popup = yes 
		}
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				var:dubois_specimen < 35000
			}
			add = 100
		}		
		modifier = {
			trigger = {
				var:dubois_specimen < 45000
			}
			add = 25
		}	
		modifier = {
			trigger = {
				var:dubois_specimen >= 50000
			}
			add = -200
		}	
	}
}

mr_botanical_expedition_recall_button = {
	name = "mr_botanical_expedition_recall_button"
	desc = "mr_botanical_expedition_recall_button_desc"

	visible = { 
		has_modifier = dubois_botanical_expedition_modifier
	}

	possible = {
		NOR = {
			has_modifier = dubois_naturalist_travell_to_location_modifier
			has_modifier = dubois_naturalist_travell_from_location_modifier
		}
		dubois_naturalist_sick = no
	}

	effect = {
		var:dubois_naturalist_var = {
			set_character_busy_and_immortal = no
		}
		dubois_set_naturalist_to_default = yes
		remove_modifier = dubois_botanical_expedition_modifier
		add_modifier = {
			name = dubois_naturalist_travell_from_location_modifier
			days = 90
		}
	}

	ai_chance = {
		base = 0
	}
}

######PALEONTOLOGICAL EXPEDITION######

mr_paleontological_expedition_button = {

	###############################################################################
	# !!! Warning: The AI uses another system. Check mr.2 and mr.3 for the AI !!! #
	###############################################################################

	name = "mr_paleontological_expedition_button"
	desc = "mr_paleontological_expedition_button_desc"

	visible = { 
		NOR = {
			has_modifier = dubois_paleontological_research_modifier
			has_modifier = dubois_paleontologist_travell_to_location_modifier
			has_modifier = dubois_paleontologist_travell_from_location_modifier
		}
	}

	possible = {
		dubois_has_active_paleontologist = yes
		OR = {
			dubois_has_formation = yes
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = paleontological_license
				}				
				dubois_has_formation = yes
			}
		}
		NOT = {
			has_variable = dubois_paleontological_expedition_destination_selection_var
		}
	}

	effect = {
		trigger_event = { 
			id = dubois.201
			popup = yes 
		}
		set_variable = dubois_paleontological_expedition_destination_selection_var
	}

	ai_chance = {
		base = 0
	}
}

mr_paleontological_expedition_recall_button = {
	
	###############################################################################
	# !!! Warning: The AI uses another system. Check mr.2 and mr.3 for the AI !!! #
	###############################################################################

	name = "mr_paleontological_expedition_recall_button"
	desc = "mr_paleontological_expedition_recall_button_desc"

	visible = { 
		has_modifier = dubois_paleontological_research_modifier
	}

	possible = {
		NOR = {
			has_modifier = dubois_paleontologist_travell_to_location_modifier
			has_modifier = dubois_paleontologist_travell_from_location_modifier
		}
	}

	effect = {
		var:dubois_paleontologist_var = {
			set_character_busy_and_immortal = no
		}
		dubois_set_paleontologist_to_default = yes
		remove_modifier = dubois_paleontological_research_modifier
		add_modifier = {
			name = dubois_paleontologist_travell_from_location_modifier
			days = 90
		}
	}

	ai_chance = {
		base = 0
	}
}

######BONES & SKELETONs######

mr_transform_fossils_to_bones_button = {

	###############################################################################
	# !!! Warning: The AI uses another system. Check mr.2 and mr.3 for the AI !!! #
	###############################################################################

	name = "mr_transform_fossils_to_bones_button"
	desc = "mr_transform_fossils_to_bones_button_desc"

	visible = { 
		always = yes
	}

	possible = {
		custom_tooltip = {
			text = mr_transform_fossils_to_bones_transformable_dinosaur_bone_trigger
			dubois_has_transformable_dinosaur_bone = yes
		}
		custom_tooltip = {
			text = mr_transform_fossils_to_bones_fossils_trigger
			var:dubois_fossil >= 20
		}
		custom_tooltip = {
			text = mr_transform_fossils_to_bones_paleontologist_trigger
			trigger_if = {
				limit = {
					has_variable = dubois_paleontologist_var
				}
				var:dubois_paleontologist_var = {
					OR = {
						has_trait = dubois_paleontologist_experienced
						has_trait = dubois_paleontologist_famous
					}
					is_busy = no
				}
			}
			trigger_else = {
				always = no
			}
		}
	}

	effect = {
		dubois_fossils_for_transformation_effect = yes
		if = {
			limit = { has_variable = dubois_paleontologist_var }
			var:dubois_paleontologist_var = {
				set_character_busy_and_immortal = yes
			}
			random_list = {
				50 = {
					modifier = {
						if = {
							limit = {
								var:dubois_paleontologist_var = {
									var:dubois_paleontologist_experience >= 175
								}
							}
							add = 25
						}
					}
					modifier = {
						if = {
							limit = {
								var:dubois_paleontologist_var = {
									var:dubois_paleontologist_experience >= 200
								}
							}
							add = 25
						}
					}
					modifier = {
						if = {
							limit = {
								var:dubois_paleontologist_var = {
									var:dubois_paleontologist_experience >= 250
								}
							}
							add = 50
						}
					}
					modifier = {
						if = {
							limit = {
								var:dubois_paleontologist_var = {
									var:dubois_paleontologist_experience >= 300
								}
							}
							add = 50
						}
					}
					trigger_event = {
						id = dubois.2042
						days = { 50 60 }
					}
				}
				50 = {
					trigger_event = {
						id = dubois.2043
						days = { 50 60 }
					}
				}
			}
			hidden_effect = {
				trigger_event = {
					id = dubois.2001
					popup = yes
				}
			}
		}
	}

	ai_chance = {
		base = 0
	}
}

mr_mount_skeleton_button = {

	###############################################################################
	# !!! Warning: The AI uses another system. Check mr.2 and mr.3 for the AI !!! #
	###############################################################################

	name = "mr_mount_skeleton_button"
	desc = "mr_mount_skeleton_button_desc"

	visible = { 
		always = yes
	}

	possible = {
		custom_tooltip = {
			text = mr_mount_skeleton_active_button_trigger
			NOT = { has_variable = mr_mount_dinosaur_skeleton_button_var }
		}
		custom_tooltip = {
			text = mr_remount_skeleton_paleontologist_trigger
			trigger_if = {
				limit = {
					has_variable = dubois_paleontologist_var
				}
				var:dubois_paleontologist_var = {
					is_busy = no
					NOT = {
						has_modifier = dubois_exhausted_paleontologist_modifier
					}
				}
			}
			trigger_else = {
				always = no
			}
		}
		custom_tooltip = {
			text = mr_mount_skeleton_trigger_tt
			OR = {
				AND = {
					var:dubois_north_american_dinosaur_bone >= 5
					NAND = {
						has_variable = dubois_ankylosaurus_var
						has_variable = dubois_diplodocus_var
						has_variable = dubois_triceratops_var
						has_variable = dubois_tyrannosaurus_var
						has_variable = dubois_stegosaurus_var
					}
				}
				AND = {
					var:dubois_south_american_dinosaur_bone >= 5
					NAND = {
						has_variable = dubois_antarctosaurus_var
						has_variable = dubois_argyrosaurus_var
					}
				}
				AND = {
					var:dubois_european_dinosaur_bone >= 5
					NAND = {
						has_variable = dubois_iguanodon_var
						has_variable = dubois_plateosaurus_var
					}
				}
				AND = {
					var:dubois_african_dinosaur_bone >= 5
					NAND = {
						has_variable = dubois_giraffatitan_var
						#has_variable = dubois_melanorosaurus_var
						has_variable = dubois_spinosaurus_var
					}
				}
				AND = {
					var:dubois_asian_dinosaur_bone >= 5
					NAND = {
						has_variable = dubois_psittacosaurus_var
						has_variable = dubois_velociraptor_var
					}
				}
				AND = {
					var:dubois_australian_dinosaur_bone >= 5
					NAND = {
						has_variable = dubois_muttaburrasaurus_var
						has_variable = dubois_rhoetosaurus_var
					}
				}
			}
		}
	}

	effect = {
		set_variable = mr_mount_dinosaur_skeleton_button_var
		trigger_event = {
			id = dubois.2171
			popup = yes
		}
	}

	ai_chance = {
		base = 0
	}
}

mr_remount_skeleton_button = {

	###############################################################################
	# !!! Warning: The AI uses another system. Check mr.2 and mr.3 for the AI !!! #
	###############################################################################

	name = "mr_remount_skeleton_button"
	desc = "mr_remount_skeleton_button_desc"

	visible = { 
		always = yes
	}

	possible = {
		custom_tooltip = {
			text = mr_remount_skeleton_active_button_trigger
			NOT = { has_variable = mr_remount_dinosaur_skeleton_button_var }
		}
		custom_tooltip = {
			text = mr_remount_skeleton_paleontologist_trigger
			trigger_if = {
				limit = {
					has_variable = dubois_paleontologist_var
				}
				var:dubois_paleontologist_var = {
					is_busy = no
					NOT = {
						has_modifier = dubois_exhausted_paleontologist_modifier
					}
				}
			}
			trigger_else = {
				always = no
			}
		}
		custom_tooltip = {
			text = mr_remount_skeleton_trigger_tt
			OR = {
				has_variable = dubois_imperfect_ankylosaurus_var
				has_variable = dubois_poor_ankylosaurus_var
				has_variable = dubois_imperfect_diplodocus_var
				has_variable = dubois_poor_diplodocus_var
				has_variable = dubois_imperfect_triceratops_var
				has_variable = dubois_poor_triceratops_var
				has_variable = dubois_imperfect_tyrannosaurus_var
				has_variable = dubois_poor_tyrannosaurus_var
				has_variable = dubois_imperfect_stegosaurus_var
				has_variable = dubois_poor_stegosaurus_var
				has_variable = dubois_imperfect_antarctosaurus_var
				has_variable = dubois_poor_antarctosaurus_var
				has_variable = dubois_imperfect_argyrosaurus_var
				has_variable = dubois_poor_argyrosaurus_var
				has_variable = dubois_imperfect_iguanodon_var
				has_variable = dubois_poor_iguanodon_var
				has_variable = dubois_imperfect_plateosaurus_var
				has_variable = dubois_poor_plateosaurus_var
				has_variable = dubois_imperfect_giraffatitan_var
				has_variable = dubois_poor_giraffatitan_var
				has_variable = dubois_imperfect_spinosaurus_var
				has_variable = dubois_poor_spinosaurus_var
				has_variable = dubois_imperfect_psittacosaurus_var
				has_variable = dubois_poor_psittacosaurus_var
				has_variable = dubois_imperfect_velociraptor_var
				has_variable = dubois_poor_velociraptor_var
				has_variable = dubois_imperfect_muttaburrasaurus_var
				has_variable = dubois_poor_muttaburrasaurus_var
				has_variable = dubois_imperfect_rhoetosaurus_var
				has_variable = dubois_poor_rhoetosaurus_var
			}
		}
	}

	effect = {
		set_variable = mr_remount_dinosaur_skeleton_button_var
		trigger_event = {
			id = dubois.2181
			popup = yes
		}
	}

	ai_chance = {
		base = 0
	}
}

###########################################################################

######SCIENTIFIC CONFERENCES######

#Historicity of Exodus

mr_exodus_congress_button = {
	name = "mr_exodus_congress_button"
	desc = "mr_exodus_congress_button_desc"

	visible = { 
		NOT = {
			has_global_variable = lepsius_exodus_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = lepsius_congress_host_modifier
			}
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = lepsius_antiquarianism_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 5
		}
		any_scope_building = {
			is_building_type = building_lepsius_archaeological_museum
		}
		lepsius_has_archaeologist = yes
		any_country = {
			lepsius_has_archaeologist = yes
			count >= 5
		}
		custom_tooltip = {
			text = mr_exodus_congress_egyptian_artifacts_tt
			var:lepsius_egyptian_artifact_minor >= 25
		}
		custom_tooltip = {
			text = mr_exodus_congress_global_artifacts_tt
			global_var:lepsius_global_artifacts >= 150
		}
		trigger_if = {
			limit = { is_ai = yes}
			global_var:lepsius_global_artifacts >= 175
		}
	}

	effect = {
		trigger_event = { 
			id = lepsius.1101
			popup = yes 
		}
		set_global_variable = lepsius_exodus_congress_hosted_var
		add_modifier = {
			name = lepsius_congress_host_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 1000
	}
}

#The Rise of Civilization

mr_civilization_congress_button = {
	name = "mr_civilization_congress_button"
	desc = "mr_civilization_congress_button_desc"

	visible = { 
		has_global_variable = lepsius_exodus_congress_hosted_var
		NOT = {
			has_global_variable = lepsius_civilization_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = lepsius_congress_host_modifier
			}
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = lepsius_early_archaeology_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 10
		}
		any_scope_building = {
			is_building_type = building_lepsius_archaeological_museum
		}
		lepsius_has_archaeologist = yes
		any_country = {
			has_variable = lepsius_archaeologist_var
			count >= 10
		}
		custom_tooltip = {
			text = mr_civilization_congress_mesopotamian_artifacts_tt
			var:lepsius_mesopotamian_artifact_minor >= 25
		}
		custom_tooltip = {
			text = mr_civilization_congress_global_artifacts_tt
			global_var:lepsius_global_artifacts >= 300
		}
		trigger_if = {
			limit = { is_ai = yes}
			global_var:lepsius_global_artifacts >= 330
		}
	}

	effect = {
		trigger_event = { 
			id = lepsius.1111
			popup = yes 
		}
		set_global_variable = lepsius_civilization_congress_hosted_var
		add_modifier = {
			name = lepsius_congress_host_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 1000
	}
}

#Troy: Just a Myth?

mr_troy_congress_button = {
	name = "mr_troy_congress_button"
	desc = "mr_troy_congress_button_desc"

	visible = { 
		has_global_variable = lepsius_civilization_congress_hosted_var
		has_global_variable = lepsius_support_schliemann_var
		NOT = {
			has_global_variable = lepsius_troy_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = lepsius_congress_host_modifier
			}
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = lepsius_early_archaeology_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 20
		}
		any_scope_building = {
			is_building_type = building_lepsius_archaeological_museum
		}
		lepsius_has_archaeologist = yes
		any_country = {
			has_variable = lepsius_archaeologist_var
			count >= 15
		}
		custom_tooltip = {
			text = mr_troy_congress_aegean_artifacts_tt
			var:lepsius_aegean_artifact_minor >= 25
		}
		custom_tooltip = {
			text = mr_troy_congress_global_artifacts_tt
			global_var:lepsius_global_artifacts >= 500
		}
		trigger_if = {
			limit = { is_ai = yes}
			global_var:lepsius_global_artifacts >= 550
		}
	}

	effect = {
		trigger_event = { 
			id = lepsius.1121
			popup = yes 
		}
		set_global_variable = lepsius_troy_congress_hosted_var
		add_modifier = {
			name = lepsius_congress_host_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 1000
	}
}

#Asteroids or Planets?

mr_asteroid_congress_button = {
	name = "mr_asteroid_congress_button"
	desc = "mr_asteroid_congress_button_desc"

	visible = { 
		NOT = {
			has_global_variable = verrier_asteroid_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = verrier_congress_host_modifier
			}
		}
	}

	possible = {
		any_country = {
			has_modifier = verrier_discovered_neptune_modifier
		}
		country_rank >= rank_value:major_power
		has_technology_researched = verrier_astronomy_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 5
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
		}
		verrier_has_astronomer = yes
		custom_tooltip = {
			text = verrier_asteroid_congress_decision_tt
			global_var:verrier_total_astronomical_objects >= 1500
		}
		trigger_if = {
			limit = { is_ai = yes}
			global_var:verrier_total_astronomical_objects >= 1650
		}
	}

	effect = {
		trigger_event = { 
			id = verrier.30
			popup = yes 
		}
		set_global_variable = verrier_asteroid_congress_hosted_var
		add_modifier = {
			name = verrier_congress_host_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 1000
	}
}

#Carte du Ciel

mr_carte_congress_button = {
	name = "mr_carte_congress_button"
	desc = "mr_carte_congress_button_desc"

	visible = { 
		has_global_variable = verrier_asteroid_congress_hosted_var
		NOT = {
			has_global_variable = verrier_carte_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = verrier_congress_host_modifier
			}
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = verrier_electromagnetism_tech
		has_technology_researched = camera
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 10
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
		}
		verrier_has_astronomer = yes
		custom_tooltip = {
			text = verrier_carte_congress_decision_tt
			global_var:verrier_total_astronomical_objects >= 7000
		}
		trigger_if = {
			limit = { is_ai = yes}
			global_var:verrier_total_astronomical_objects >= 7700
		}
	}

	effect = {
		trigger_event = { 
			id = verrier.80
			popup = yes 
		}
		set_global_variable = verrier_carte_congress_hosted_var
		add_modifier = {
			name = verrier_congress_host_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 1000
	}
}

#The Great Debate

mr_great_debate_congress_button = {
	name = "mr_great_debate_congress_button"
	desc = "mr_great_debate_congress_button_desc"

	visible = { 
		has_global_variable = verrier_carte_congress_hosted_var
		NOT = {
			has_global_variable = verrier_debate_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = verrier_congress_host_modifier
			}
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = verrier_astro_physics_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 15
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
		}
		verrier_has_astronomer = yes
		custom_tooltip = {
			text = verrier_debate_congress_decision_tt
			global_var:verrier_total_astronomical_objects >= 12000
		}
		trigger_if = {
			limit = { is_ai = yes}
			global_var:verrier_total_astronomical_objects >= 13200
		}
	}

	effect = {
		trigger_event = { 
			id = verrier.86
			popup = yes 
		}
		set_global_variable = verrier_debate_congress_hosted_var
		add_modifier = {
			name = verrier_congress_host_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 1000
	}
}

#Man's Place in Nature

mr_hippocampus_congress_button = {
	name = "mr_hippocampus_congress_button"
	desc = "mr_hippocampus_congress_button_desc"

	visible = { 
		NOT = {
			has_global_variable = dubois_hippocampus_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = dubois_congress_host_modifier
			}
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = dubois_theory_of_evolution_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 10
		}
		any_scope_building = {
			is_building_type = building_dubois_zoo
		}
		dubois_has_naturalist = yes
		any_country = {
			dubois_has_naturalist = yes
			count >= 5
		}
		custom_tooltip = {
			text = mr_hippocampus_congress_specimen_tt
			var:dubois_specimen >= 20000
		}
		custom_tooltip = {
			text = mr_hippocampus_congress_global_specimen_tt
			global_var:dubois_global_specimen >= 100000
		}
		trigger_if = {
			limit = { is_ai = yes}
			global_var:dubois_global_specimen >= 110000
		}
	}

	effect = {
		trigger_event = { 
			id = dubois.901
			popup = yes 
		}
		set_global_variable = dubois_hippocampus_congress_hosted_var
		add_modifier = {
			name = dubois_congress_host_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 1000
	}
}

#Origin of Modern Humans

mr_origin_congress_button = {
	name = "mr_origin_congress_button"
	desc = "mr_origin_congress_button_desc"

	visible = { 
		has_global_variable = dubois_hippocampus_congress_hosted_var
		NOT = {
			has_global_variable = dubois_origin_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = dubois_congress_host_modifier
			}
		}
	}

	possible = {
		has_technology_researched = lepsius_modern_archaeology_tech
		has_technology_researched = dubois_paleontology_tech
		has_technology_researched = dubois_genetics_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 25
		}
		any_scope_building = {
			is_building_type = building_dubois_zoo
		}
		lepsius_has_anthropologist = yes
		any_country = {
			lepsius_has_anthropologist = yes
			count >= 10
		}
		custom_tooltip = {
			text = mr_origin_congress_human_fossil_tt
			var:lepsius_total_human_fossil >= 10
		}
		custom_tooltip = {
			text = mr_origin_congress_special_human_fossil_tt
			OR = {
				var:lepsius_neanderthalensis_human_fossil >= 3
				var:lepsius_erectus_human_fossil >= 3
				var:lepsius_australopithecus_human_fossil >= 3
				var:lepsius_paranthropus_human_fossil >= 3
			}
		}
		custom_tooltip = {
			text = mr_origin_congress_global_human_fossil_tt
			global_var:lepsius_global_human_fossil >= 50
		}
		trigger_if = {
			limit = { is_ai = yes}
			global_var:lepsius_global_human_fossil >= 55
		}
	}

	effect = {
		trigger_event = { 
			id = dubois.911
			popup = yes 
		}
		set_global_variable = dubois_origin_congress_hosted_var
		add_modifier = {
			name = dubois_congress_host_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 1000
	}
}

#Extinction of the Dinosaurs

mr_extinction_congress_button = {
	name = "mr_extinction_congress_button"
	desc = "mr_extinction_congress_button_desc"

	visible = { 
		has_global_variable = dubois_hippocampus_congress_hosted_var
		NOT = {
			has_global_variable = dubois_extinction_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = dubois_congress_host_modifier
			}
		}
	}

	possible = {
		has_technology_researched = dubois_paleontology_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 20
		}
		any_scope_building = {
			is_building_type = building_dubois_zoo
		}
		dubois_has_paleontologist = yes
		any_country = {
			dubois_has_paleontologist = yes
			count >= 15
		}
		dubois_has_dinosaur_skeleton = yes
		any_country = {
			dubois_has_dinosaur_skeleton = yes
			count >= 5
		}
		custom_tooltip = {
			text = mr_extinction_congress_global_fossil_tt
			global_var:dubois_global_fossil >= 500
		}
		trigger_if = {
			limit = { is_ai = yes}
			global_var:dubois_global_fossil >= 550
		}
	}

	effect = {
		trigger_event = { 
			id = dubois.921
			popup = yes 
		}
		set_global_variable = dubois_extinction_congress_hosted_var
		add_modifier = {
			name = dubois_congress_host_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 1000
	}
}

###########################################################################

######ARCHAEOLOGICAL EXPEDITIONS######

#Upper Egypt/The Valley of the Kings

mr_upper_egypt_expedition_button = {
	name = "mr_upper_egypt_expedition_button"
	desc = "mr_upper_egypt_expedition_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		lepsius_on_archaeological_expedition = no
		any_country = {			
			any_scope_state = {
				has_state_trait = lepsius_state_trait_upper_egypt
			}
		}
		NOT = {
			has_modifier = lepsius_had_expedition_modifier
		}
		NOT = {
			has_modifier = lepsius_upper_egypt_expedition_modifier
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		custom_tooltip = {
			text = lepsius_excavation_team_needed_tt
			var:lepsius_excavation_teams >= 1
 		}
		any_scope_character = {
			has_role = general	
			count >= 1
		}
		lepsius_has_active_archaeologist = yes
		OR = {
			any_scope_state = {
				has_state_trait = lepsius_state_trait_upper_egypt
			}
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = excavation_license
				}				
				any_scope_state = {
					has_state_trait = lepsius_state_trait_upper_egypt
				}
			}		
		}
	}

	effect = {
		custom_tooltip = {
			text = lepsius_sub_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = -1
 			}
 		}
		add_modifier = {
			name = lepsius_upper_egypt_expedition_modifier
		}
		lepsius_set_archaeologist_busy_effect = yes
		trigger_event = { id = lepsius.100 popup = yes }
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				var:lepsius_egyptian_artifact_minor < 50
			}
			add = 100
		}		
		modifier = {
			trigger = {
				var:lepsius_egyptian_artifact_minor < 100
			}
			add = 25
		}	
		modifier = {
			trigger = {
				var:lepsius_egyptian_artifact_minor >= 100
			}
			add = -90
		}	
	}
}

#Lower Egypt/The Pyramids

mr_lower_egypt_expedition_button = {
	name = "mr_lower_egypt_expedition_button"
	desc = "mr_lower_egypt_expedition_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		lepsius_on_archaeological_expedition = no
		any_country = {			
			any_scope_state = {
				has_state_trait = lepsius_state_trait_lower_egypt
			}
		}
		NOT = {
			has_modifier = lepsius_had_expedition_modifier
		}
		NOT = {
			has_modifier = lepsius_lower_egypt_expedition_modifier
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		custom_tooltip = {
			text = lepsius_excavation_team_needed_tt
			var:lepsius_excavation_teams >= 1
 		}
		any_scope_character = {
			has_role = general	
			count >= 1
		}
		lepsius_has_active_archaeologist = yes
		OR = {
			any_scope_state = {
				has_state_trait = lepsius_state_trait_lower_egypt
			}
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = excavation_license
				}				
				any_scope_state = {
					has_state_trait = lepsius_state_trait_lower_egypt
				}
			}		
		}
	}

	effect = {
		custom_tooltip = {
			text = lepsius_sub_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = -1
 			}
 		}
		add_modifier = {
			name = lepsius_lower_egypt_expedition_modifier
		}
		lepsius_set_archaeologist_busy_effect = yes
		trigger_event = { id = lepsius.100 popup = yes }
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				var:lepsius_egyptian_artifact_minor < 50
			}
			add = 100
		}		
		modifier = {
			trigger = {
				var:lepsius_egyptian_artifact_minor < 100
			}
			add = 25
		}	
		modifier = {
			trigger = {
				var:lepsius_egyptian_artifact_minor >= 100
			}
			add = -90
		}
	}
}

#Baghdad/Babylonia

mr_babylonia_expedition_button = {
	name = "mr_babylonia_expedition_button"
	desc = "mr_babylonia_expedition_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		lepsius_on_archaeological_expedition = no
		any_country = {			
			any_scope_state = {
				has_state_trait = lepsius_state_trait_babylonia
			}
		}
		NOT = {
			has_modifier = lepsius_had_expedition_modifier
		}
		NOT = {
			has_modifier = lepsius_babylonia_expedition_modifier
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = lepsius_modern_archaeology_tech
		custom_tooltip = {
			text = lepsius_excavation_team_needed_tt
			var:lepsius_excavation_teams >= 1
 		}
		any_scope_character = {
			has_role = general	
			count >= 1
		}
		lepsius_has_active_archaeologist = yes
		OR = {
			any_scope_state = {
				has_state_trait = lepsius_state_trait_babylonia
			}
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = excavation_license
				}				
				any_scope_state = {
					has_state_trait = lepsius_state_trait_babylonia
				}
			}
		}
	}

	effect = {
		custom_tooltip = {
			text = lepsius_sub_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = -1
 			}
 		}
		add_modifier = {
			name = lepsius_babylonia_expedition_modifier
		}
		lepsius_set_archaeologist_busy_effect = yes
		trigger_event = { id = lepsius.100 popup = yes }
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				var:lepsius_mesopotamian_artifact_minor < 50
			}
			add = 100
		}		
		modifier = {
			trigger = {
				var:lepsius_mesopotamian_artifact_minor < 100
			}
			add = 25
		}	
		modifier = {
			trigger = {
				var:lepsius_mesopotamian_artifact_minor >= 100
			}
			add = -90
		}	
	}
}

#Mosul/Assyria

mr_assyria_expedition_button = {
	name = "mr_assyria_expedition_button"
	desc = "mr_assyria_expedition_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		lepsius_on_archaeological_expedition = no
		any_country = {			
			any_scope_state = {
				has_state_trait = lepsius_state_trait_assyria
			}
		}
		NOT = {
			has_modifier = lepsius_had_expedition_modifier
		}
		NOT = {
			has_modifier = lepsius_assyria_expedition_modifier
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = lepsius_early_archaeology_tech
		custom_tooltip = {
			text = lepsius_excavation_team_needed_tt
			var:lepsius_excavation_teams >= 1
 		}
		any_scope_character = {
			has_role = general	
			count >= 1
		}
		lepsius_has_active_archaeologist = yes
		OR = {
			any_scope_state = {
				has_state_trait = lepsius_state_trait_assyria
			}
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = excavation_license
				}				
				any_scope_state = {
					has_state_trait = lepsius_state_trait_assyria
				}
			}
		}
	}

	effect = {
		custom_tooltip = {
			text = lepsius_sub_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = -1
 			}
 		}	
		add_modifier = {
			name = lepsius_assyria_expedition_modifier
		}
		lepsius_set_archaeologist_busy_effect = yes
		trigger_event = { id = lepsius.100 popup = yes }
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				var:lepsius_mesopotamian_artifact_minor < 50
			}
			add = 100
		}		
		modifier = {
			trigger = {
				var:lepsius_mesopotamian_artifact_minor < 100
			}
			add = 25
		}	
		modifier = {
			trigger = {
				var:lepsius_mesopotamian_artifact_minor >= 100
			}
			add = -90
		}
	}
}

#Peloponnes/Argolis

mr_argolis_expedition_button = {
	name = "mr_argolis_expedition_button"
	desc = "mr_argolis_expedition_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		lepsius_on_archaeological_expedition = no
		any_country = {			
			any_scope_state = {
				has_state_trait = lepsius_state_trait_argolis
			}
		}
		NOT = {
			has_modifier = lepsius_had_expedition_modifier
		}
		NOT = {
			has_modifier = lepsius_argolis_expedition_modifier
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = lepsius_early_archaeology_tech
		custom_tooltip = {
			text = lepsius_excavation_team_needed_tt
			var:lepsius_excavation_teams >= 1
 		}
		any_scope_character = {
			has_role = general	
			count >= 1
		}
		lepsius_has_active_archaeologist = yes
		OR = {
			any_scope_state = {
				has_state_trait = lepsius_state_trait_argolis
			}
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = excavation_license
				}				
				any_scope_state = {
					has_state_trait = lepsius_state_trait_argolis
				}
			}
		}
	}

	effect = {
		custom_tooltip = {
			text = lepsius_sub_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = -1
 			}
 		}	
		add_modifier = {
			name = lepsius_argolis_expedition_modifier
		}
		lepsius_set_archaeologist_busy_effect = yes
		trigger_event = { id = lepsius.100 popup = yes }
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				var:lepsius_aegean_artifact_minor < 50
			}
			add = 100
		}		
		modifier = {
			trigger = {
				var:lepsius_aegean_artifact_minor < 100
			}
			add = 25
		}	
		modifier = {
			trigger = {
				var:lepsius_aegean_artifact_minor >= 100
			}
			add = -90
		}	
	}
}

#Crete

mr_crete_expedition_button = {
	name = "mr_crete_expedition_button"
	desc = "mr_crete_expedition_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		lepsius_on_archaeological_expedition = no
		any_country = {			
			any_scope_state = {
				has_state_trait = lepsius_state_trait_crete
			}
		}
		NOT = {
			has_modifier = lepsius_had_expedition_modifier
		}
		NOT = {
			has_modifier = lepsius_crete_expedition_modifier
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = lepsius_modern_archaeology_tech
		custom_tooltip = {
			text = lepsius_excavation_team_needed_tt
			var:lepsius_excavation_teams >= 1
 		}
		any_scope_character = {
			has_role = general	
			count >= 1
		}
		lepsius_has_active_archaeologist = yes
		OR = {
			any_scope_state = {
				has_state_trait = lepsius_state_trait_crete
			}
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = excavation_license
				}				
				any_scope_state = {
					has_state_trait = lepsius_state_trait_crete
				}
			}
		}
	}

	effect = {
		custom_tooltip = {
			text = lepsius_sub_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = -1
 			}
 		}
		add_modifier = {
			name = lepsius_crete_expedition_modifier
		}
		lepsius_set_archaeologist_busy_effect = yes
		trigger_event = { id = lepsius.100 popup = yes }	
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				var:lepsius_aegean_artifact_minor < 50
			}
			add = 100
		}		
		modifier = {
			trigger = {
				var:lepsius_aegean_artifact_minor < 100
			}
			add = 25
		}	
		modifier = {
			trigger = {
				var:lepsius_aegean_artifact_minor >= 100
			}
			add = -90
		}	
	}
}

#Yucatán

mr_yucatan_expedition_button = {
	name = "mr_yucatan_expedition_button"
	desc = "mr_yucatan_expedition_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		lepsius_on_archaeological_expedition = no
		any_country = {			
			any_scope_state = {
				has_state_trait = lepsius_state_trait_yucatan
			}
		}
		NOT = {
			has_modifier = lepsius_had_expedition_modifier
		}
		NOT = {
			has_modifier = lepsius_yucatan_expedition_modifier
		}
	}

	possible = {
		country_rank >= rank_value:major_power
		has_technology_researched = lepsius_antiquarianism_tech
		has_technology_researched = quinine
		custom_tooltip = {
			text = lepsius_excavation_team_needed_tt
			var:lepsius_excavation_teams >= 1
 		}
		any_scope_character = {
			has_role = general	
			count >= 1
		}
		lepsius_has_active_archaeologist = yes
		OR = {
			any_scope_state = {
				has_state_trait = lepsius_state_trait_yucatan
			}
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = excavation_license
				}				
				any_scope_state = {
					has_state_trait = lepsius_state_trait_yucatan
				}
			}
		}
	}

	effect = {
		custom_tooltip = {
			text = lepsius_sub_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = -1
 			}
 		}
		add_modifier = {
			name = lepsius_yucatan_expedition_modifier
		}
		lepsius_set_archaeologist_busy_effect = yes
		trigger_event = { id = lepsius.100 popup = yes }		
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				var:lepsius_precolumbian_artifact_minor < 50
			}
			add = 100
		}		
		modifier = {
			trigger = {
				var:lepsius_precolumbian_artifact_minor < 100
			}
			add = 25
		}	
		modifier = {
			trigger = {
				var:lepsius_precolumbian_artifact_minor >= 100
			}
			add = -90
		}
	}
}

#Peru

mr_peru_expedition_button = {
	name = "mr_peru_expedition_button"
	desc = "mr_peru_expedition_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		lepsius_on_archaeological_expedition = no
		any_country = {			
			any_scope_state = {
				has_state_trait = lepsius_state_trait_peru
			}
		}
		NOT = {
			has_modifier = lepsius_had_expedition_modifier
		}
		NOT = {
			has_modifier = lepsius_peru_expedition_modifier
		}
	}

	possible = {
		OR = {
			country_rank >= rank_value:major_power
			has_building = building_airport
		}
		has_technology_researched = lepsius_modern_archaeology_tech
		has_technology_researched = military_aviation
		custom_tooltip = {
			text = lepsius_excavation_team_needed_tt
			var:lepsius_excavation_teams >= 1
 		}
		any_scope_character = {
			has_role = general	
			count >= 1
		}
		lepsius_has_active_archaeologist = yes
		OR = {
			any_scope_state = {
				has_state_trait = lepsius_state_trait_peru
			}
			any_country = {
				has_diplomatic_pact = {
					who = ROOT
					type = excavation_license
				}				
				any_scope_state = {
					has_state_trait = lepsius_state_trait_peru
				}
			}
		}
	}

	effect = {
		custom_tooltip = {
			text = lepsius_sub_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = -1
 			}
 		}
		add_modifier = {
			name = lepsius_peru_expedition_modifier
		}
		lepsius_set_archaeologist_busy_effect = yes
		trigger_event = { id = lepsius.100 popup = yes }			
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				var:lepsius_precolumbian_artifact_minor < 50
			}
			add = 100
		}		
		modifier = {
			trigger = {
				var:lepsius_precolumbian_artifact_minor < 100
			}
			add = 25
		}	
		modifier = {
			trigger = {
				var:lepsius_precolumbian_artifact_minor >= 100
			}
			add = -90
		}
	}
}

#################################

###Inspect and Cancel Excavation###

#Inspect Excavation

mr_inspect_excavation_button = {
	name = "mr_inspect_excavation_button"
	desc = "mr_inspect_excavation_button_desc"

	visible = { 
		lepsius_has_discovery_excavation = yes
		lepsius_on_excavation_inspection = no
		NOT = {
			has_modifier = lepsius_recent_excavation_inspection_modifier
		}
		NOT = {
			has_variable = lepsius_inspect_excavation_decision_on
		}
	}

	possible = {
		custom_tooltip = {
			text = lepsius_inspect_excavation_tt
			lepsius_has_discovery_excavation = yes
 		}
		custom_tooltip = {
			text = lepsius_has_artifacts_for_discovery_tt
			lepsius_has_artifacts_for_discovery = yes
 		}
		has_technology_researched = lepsius_modern_archaeology_tech
		OR = {
			lepsius_has_active_experienced_archaeologist = yes
			lepsius_has_active_famous_archaeologist = yes
		}
	}

	effect = {
		set_variable = lepsius_inspect_excavation_decision_on
		trigger_event = { 
			id = lepsius.801 
			popup = yes 
		}		
	}

	ai_chance = {
		base = 100
	}
}

#Cancel Excavation

mr_cancel_excavation_button = {
	name = "mr_cancel_excavation_button"
	desc = "mr_cancel_excavation_button_desc"

	visible = { 
		is_player = yes
		lepsius_on_archaeological_excavation = yes
		lepsius_on_excavation_inspection = no
		NOT = {
			has_variable = lepsius_cancel_excavation_decision_on
		}
	}

	possible = {
		custom_tooltip = {
			text = lepsius_on_archaeological_excavation_tt
			lepsius_on_archaeological_excavation = yes
 		}
	}

	effect = {
		set_variable = lepsius_cancel_excavation_decision_on
		trigger_event = { id = lepsius.190 popup = yes }		
	}

	ai_chance = {
		base = 0
	}
}

#Local Excavation

mr_local_excavation_button = {
	name = "mr_local_excavation_button"
	desc = "mr_local_excavation_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		NOT = {
			has_modifier = lepsius_local_excavation_modifier
		}
	}

	possible = {
		has_technology_researched = lepsius_early_archaeology_tech
		custom_tooltip = {
			text = lepsius_excavation_team_needed_tt
			var:lepsius_excavation_teams >= 1
 		}
		lepsius_has_active_archaeologist = yes
	}

	effect = {
		add_treasury = -25000
		custom_tooltip = {
			text = lepsius_sub_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = -1
 			}
 		}
		lepsius_set_archaeologist_busy_effect = yes
		hidden_effect = {
			trigger_event = { id = lepsius.1201 popup = yes }			
		}
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				country_rank <= rank_value:major_power
			}
			add = 100
		}
		modifier = {
			trigger = { 
				var:lepsius_local_artifact_minor >= 50
			}
			add = -1000
		}
	}
}

#################################

###Excavation Teams###

#First Team

mr_first_excavation_team_button = {
	name = "mr_first_excavation_team_button"
	desc = "mr_first_excavation_team_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		NOT = {
			has_variable = lepsius_first_excavation_team
		}
	}

	possible = {
		has_technology_researched = lepsius_antiquarianism_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 3
		}
		literacy_rate >= 0.33
	}

	effect = {
		lepsius_total_excavation_teams_add = yes
		custom_tooltip = {
			text = lepsius_add_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = 1
			}
 		}	
		set_variable = lepsius_first_excavation_team			
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
	}
}

#Second Team

mr_second_excavation_team_button = {
	name = "mr_second_excavation_team_button"
	desc = "mr_second_excavation_team_button_desc"

	visible = { 
		has_technology_researched = lepsius_antiquarianism_tech
		has_variable = lepsius_first_excavation_team
		NOT = {
			has_variable = lepsius_second_excavation_team
		}
	}

	possible = {
		has_technology_researched = lepsius_antiquarianism_tech
		lepsius_has_experienced_archaeologist = yes
		any_scope_building = {
			is_building_type = building_lepsius_archaeological_museum
		}
	}

	effect = {
		lepsius_total_excavation_teams_add = yes
		custom_tooltip = {
			text = lepsius_add_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = 1
			}
 		}	
		set_variable = lepsius_second_excavation_team			
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				NOT = {
					any_country = {
						has_diplomatic_pact = {
							who = ROOT
							type = excavation_license
						}				
						lepsius_has_excavation_site = yes
					}
				}
			}
			add = -1000
		}
	}
}

#Third Team

mr_third_excavation_team_button = {
	name = "mr_third_excavation_team_button"
	desc = "mr_third_excavation_team_button_desc"

	visible = { 
		has_technology_researched = lepsius_modern_archaeology_tech
		has_variable = lepsius_first_excavation_team
		has_variable = lepsius_second_excavation_team
		NOT = {
			has_variable = lepsius_third_excavation_team
		}
	}

	possible = {
		has_technology_researched = lepsius_modern_archaeology_tech
		country_has_building_type_levels = {  
			target = bt:building_university  
			value  >= 15
		}
		literacy_rate >= 0.66
	}

	effect = {
		lepsius_total_excavation_teams_add = yes
		custom_tooltip = {
			text = lepsius_add_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = 1
			}
 		}		
		set_variable = lepsius_third_excavation_team		
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				NOT = {
					any_country = {
						has_diplomatic_pact = {
							who = ROOT
							type = excavation_license
						}				
						lepsius_has_excavation_site = yes
					}
				}
			}
			add = -1000
		}
	}
}

#Fourth Team

mr_fourth_excavation_team_button = {
	name = "mr_fourth_excavation_team_button"
	desc = "mr_fourth_excavation_team_button_desc"

	visible = { 
		has_technology_researched = lepsius_modern_archaeology_tech
		has_variable = lepsius_first_excavation_team
		has_variable = lepsius_second_excavation_team
		has_variable = lepsius_third_excavation_team
		NOT = {
			has_variable = lepsius_fourth_excavation_team
		}
	}

	possible = {
		has_technology_researched = lepsius_modern_archaeology_tech
		lepsius_has_famous_archaeologist = yes
	}

	effect = {
		lepsius_total_excavation_teams_add = yes
		custom_tooltip = {
			text = lepsius_add_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = 1
			}
 		}		
		set_variable = lepsius_fourth_excavation_team		
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				NOT = {
					any_country = {
						has_diplomatic_pact = {
							who = ROOT
							type = excavation_license
						}				
						lepsius_has_excavation_site = yes
					}
				}
			}
			add = -1000
		}
	}
}

###########################################################################

######ANTHROPOLOGY######

mr_fossil_identification_button = {
	name = "mr_fossil_identification_button"
	desc = "mr_fossil_identification_button_desc"

	visible = { 
		always = yes
	}

	possible = {
		lepsius_has_active_anthropologist = yes
		lepsius_has_unknown_bone = yes
	}

	effect = {
		hidden_effect = {
			lepsius_set_fossil_identification_progress = yes
		}
		lepsius_set_anthropologist_busy_effect = yes
		add_journal_entry = {
			type = je_lepsius_fossil_identification
		}	
	}

	ai_chance = {
		base = 100
	}
}

mr_examine_cave_button = {
	name = "mr_examine_cave_button"
	desc = "mr_examine_cave_button_desc"

	visible = { 
		NOT = {
			has_modifier = lepsius_cave_examination_modifier
		}
	}

	possible = {
		lepsius_has_active_anthropologist = yes
		any_scope_state = {
			lepsius_has_discovered_cave = yes
		}
	}

	effect = {
		add_treasury = -50000
		lepsius_set_anthropologist_busy_effect = yes
		add_modifier = {
			name = lepsius_cave_examination_modifier
		}
		trigger_event = { 
			id = lepsius.1401
			popup = yes 
		}
	}

	ai_chance = {
		base = 100
	}
}

mr_recall_anthropologist_button = {
	name = "mr_recall_anthropologist_button"
	desc = "mr_recall_anthropologist_button_desc"

	visible = { 
		has_modifier = lepsius_cave_examination_modifier
	}

	possible = {
	}

	effect = {
		var:lepsius_anthropologist_var = {
			set_character_busy_and_immortal = no
		}
		remove_modifier = lepsius_cave_examination_modifier
		random_scope_state = {
			limit = {
				has_modifier = lepsius_cave_examination_state_modifier
			}
			remove_modifier = lepsius_cave_examination_state_modifier
		}
	}

	ai_chance = {
		base = 0
	}
}


###########################################################################

######THE ARTS######

###Composer###

mr_composer_commission_button = {
	name = "mr_composer_commission_button"
	desc = "mr_composer_commission_button_desc"

	visible = { 
		always = yes
	}

	possible = {
		elgar_has_active_composer = yes
		NOT = {
			has_modifier = elgar_conductor_exhausted_modifier
		}
		custom_tooltip = {
			text = mr_visiting_opera_tt
			NOT = {
				has_variable = elgar_visiting_opera_var
			}
		}
	}

	effect = {
		set_variable = elgar_visiting_opera_var
		if = {
			limit = {
				elgar_has_composer = yes
			}
			trigger_event = { 
				id = elgar.30
				popup = yes
			}
		}
	}

	ai_chance = {
		base = 100
	}
}

###Painter###

mr_vernissage_button = {
	name = "mr_vernissage_button"
	desc = "mr_vernissage_button_desc"

	visible = { 
		always = yes
	}

	possible = {
		any_scope_state = {
			any_scope_building = {
				has_active_production_method = pm_artists_arts_academy_studio
			}
		}
		klimt_has_active_painter = yes
		klimt_vernissage_possible = yes
	}

	effect = {
		trigger_event = { 
			id = klimt.40
			popup = yes
		}
	}

	ai_chance = {
		base = 100
	}
}

mr_painter_trip_button = {
	name = "mr_painter_trip_button"
	desc = "mr_painter_trip_button_desc"

	visible = { 
		NOT = {
			has_variable = klimt_trip_destination_var
		}
	}

	possible = {
		klimt_has_active_painter = yes
		klimt_painter_trip_possible = yes
	}

	effect = {
		set_variable = klimt_trip_destination_var
		if = {
			limit = {
				klimt_has_active_painter = yes
			}
			trigger_event = { 
				id = klimt.401
				popup = yes
			}
		}
	}

	ai_chance = {
		base = 100
	}
}

mr_acquire_masterwork_button = {
	name = "mr_acquire_masterwork_button"
	desc = "mr_acquire_masterwork_button_desc"

	visible = { 
		NOT = {
			has_variable = klimt_acquire_masterwork_var
		}
	}

	possible = {
		klimt_can_acquire_masterwork = yes
		klimt_has_gallery = yes
	}

	effect = {
		set_variable = klimt_acquire_masterwork_var
		trigger_event = { 
			id = klimt.110
			popup = yes
		}
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = { 
				var:klimt_painting_tradition_var <= 950
				NOT = {
					has_global_variable = elgar_art_nouveau_discovered #AI should not waste Painting Tradition if it has the theoretical option to get Art Nouveau CoA
				}
			}
			add = -10000
		}
	}
}

###Monuments###

mr_mozart_monument_button = {
	name = "mr_mozart_monument_button"
	desc = "mr_mozart_monument_button_desc"

	visible = { 
		any_scope_state = {
			state_region = s:STATE_TYROL
		}
		is_player = yes
		NOT = {
			has_global_variable = elgar_mozart_monument_var
		}
	}

	possible = {
		is_at_war = no
		any_scope_state = {
			state_region = s:STATE_TYROL
		}
		has_technology_researched = romanticism
		any_scope_building = {
			is_building_type = building_elgar_opera
			level >= 4
		}
				
		custom_tooltip = {
			text = elgar_mozart_monument_decision_tt
			var:elgar_music_tradition >= 50
		}
	}

	effect = {
		trigger_event = { 
			id = elgar.111
			popup = yes
		}
		set_global_variable = elgar_mozart_monument_var		
	}

	ai_chance = {
		base = 1000
	}
}

mr_mozart_monument_ai_button = {
	name = "mr_mozart_monument_button"
	desc = "mr_mozart_monument_button_desc"

	visible = { 
		any_scope_state = {
			state_region = s:STATE_TYROL
		}
		is_player = no
		NOT = {
			has_global_variable = elgar_mozart_monument_var
		}
	}

	possible = {
		is_at_war = no
		any_scope_state = {
			state_region = s:STATE_TYROL
		}
		has_technology_researched = romanticism
		custom_tooltip = {
			text = elgar_mozart_monument_decision_tt
			var:elgar_music_tradition >= 50
		}
	}

	effect = {
		trigger_event = { 
			id = elgar.111
			popup = yes
		}
		set_global_variable = elgar_mozart_monument_var
	}

	ai_chance = {
		base = 1000
	}
}

mr_beethoven_monument_button = {
	name = "mr_beethoven_monument_button"
	desc = "mr_beethoven_monument_button_desc"

	visible = { 
		any_scope_state = {
			state_region = s:STATE_NORTH_RHINE
		}
		has_variable = elgar_beethoven_sponsor_var
		NOT = {
			has_global_variable = elgar_beethoven_monument_var
		}
	}

	possible = {
		is_at_war = no
		any_scope_state = {
			state_region = s:STATE_NORTH_RHINE
		}
		has_technology_researched = elgar_irrationalism_tech
		custom_tooltip = {
			text = elgar_beethoven_monument_decision_tt
			var:elgar_music_tradition >= 100
		}
	}

	effect = {
		trigger_event = { 
			id = elgar.102
			popup = yes
		}
		set_global_variable = elgar_beethoven_monument_var
	}

	ai_chance = {
		base = 1000
	}
}

###Allgemeiner Deutscher Musikverein###

mr_musikverein_button = {
	name = "mr_musikverein_button"
	desc = "mr_musikverein_button_desc"

	visible = { 
		OR = {
			country_has_primary_culture = cu:south_german
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:united_german
			country_has_primary_culture = cu:alemannic
			country_has_primary_culture = cu:united_swiss
		}
		NOT = {
			has_global_variable = elgar_musikverein_var
		}
	}

	possible = {
		elgar_has_great_composer = yes
		has_technology_researched = nationalism
		has_technology_researched = elgar_irrationalism_tech
		custom_tooltip = {
			text = elgar_musikverein_decision_tt
			var:elgar_music_tradition >= 250
		}
	}

	effect = {
		add_modifier = {
			name = elgar_founded_musikverein_modifier
		}
		trigger_event = { 
			id = elgar.121
			popup = yes
		}
		set_global_variable = elgar_musikverein_var
	}

	ai_chance = {
		base = 1000
	}
}

###Other special musical institutions###

mr_concertgebouw_button = {
	name = "mr_concertgebouw_button"
	desc = "mr_concertgebouw_button_desc"

	visible = { 
		any_scope_state = {
			state_region = s:STATE_HOLLAND
		}
		OR = {
			country_has_primary_culture = cu:wallonian
			country_has_primary_culture = cu:flemish
			country_has_primary_culture = cu:dutch
		}
		NOT = {
			any_state = {
				has_modifier = elgar_amsterdam_concertgebouw_modifier
			}
		}
	}

	possible = {
		any_scope_state = {
			state_region = s:STATE_HOLLAND
		}
		any_scope_building = {
			is_building_type = building_elgar_opera
			level >= 10
		}
		custom_tooltip = {
			text = elgar_concertgebouw_decision_tt
			var:elgar_music_tradition >= 750
		}
	}

	effect = {
		every_state = {
			limit = {
				state_region = s:STATE_HOLLAND
			}
			add_modifier = {
				name = elgar_amsterdam_concertgebouw_modifier
			}
		}
	}

	ai_chance = {
		base = 1000
	}
}

mr_the_proms_button = {
	name = "mr_the_proms_button"
	desc = "mr_the_proms_button_desc"

	visible = { 
		any_scope_state = {
			state_region = s:STATE_HOME_COUNTIES
		}
		c:GBR ?= this
		NOT = {
			any_state = {
				has_modifier = elgar_london_proms_modifier
			}
		}
	}

	possible = {
		any_scope_state = {
			state_region = s:STATE_HOME_COUNTIES
		}
		any_scope_building = {
			is_building_type = building_elgar_opera
			level >= 20
		}
		custom_tooltip = {
			text = elgar_the_proms_decision_tt
			var:elgar_music_tradition >= 750
		}
	}

	effect = {
		every_state = {
			limit = {
				state_region = s:STATE_HOME_COUNTIES
			}
			add_modifier = {
				name = elgar_london_proms_modifier
			}
		}
	}

	ai_chance = {
		base = 1000
	}
}

###National Broadcasting Channel###

mr_nbc_button = {
	name = "mr_nbc_button"
	desc = "mr_nbc_button_desc"

	visible = { 
		NOT = {
			has_variable = elgar_nbc_var
		}
	}

	possible = {
		has_technology_researched = radio
		has_technology_researched = elgar_mass_culture_tech
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_railway
				has_active_production_method = pm_elgar_radio_stations
			}
			percent >= 0.35
		}
		NOR = {
			has_law = law_type:law_laissez_faire
			has_law = law_type:law_anarchy
		}
	}

	effect = {
		set_variable = elgar_nbc_var
		trigger_event = {
			id = elgar.40
			popup = yes
		}
	}

	ai_chance = {
		base = 1000
	}
}

mr_nbc_license_button = {
	name = "mr_nbc_license_button"
	desc = "mr_nbc_button_desc"

	visible = { 
		has_technology_researched = radio
		has_variable = elgar_nbc_var
		NOR = {
			has_modifier = elgar_nbc_news_modifier
			has_modifier = elgar_nbc_education_modifier
			has_modifier = elgar_nbc_government_modifier
			has_modifier = elgar_nbc_monarch_modifier
			has_modifier = elgar_nbc_propaganda_modifier
		}
		NOR = {
			has_law = law_type:law_laissez_faire
			has_law = law_type:law_anarchy
		}
		NOT = {
			has_variable = elgar_nbc_decision_taken
		}
	}

	possible = {
		has_technology_researched = radio
		has_technology_researched = political_agitation
		has_technology_researched = elgar_mass_culture_tech
		any_scope_building = {
			is_building_type = building_urban_center
			has_active_production_method = pm_elgar_radio_stations
		}
	}

	effect = {
		trigger_event = {
			id = elgar.40
			popup = yes
		}
		set_variable = elgar_nbc_decision_taken
	}

	ai_chance = {
		base = 1000
	}
}

mr_patron_of_arts_button = {
	name = "mr_patron_of_arts_button"
	desc = "mr_patron_of_arts_button_desc"

	visible = { 
		NOT = {
			has_modifier = artists_patron_of_the_arts_modifier
		}
	}

	possible = {
		OR = {
			any_scope_building = {
				is_building_type = building_arts_academy
			}
			any_scope_building = {
				is_building_type = building_elgar_opera
			}
		}
	}

	effect = {
		set_variable = {
            name = patron_of_the_arts_cooldown_var
            months = 12
        }
        if = {
			limit = {
				has_modifier = artists_patron_of_the_arts_modifier
			}
			remove_modifier = artists_patron_of_the_arts_modifier
		}
		add_modifier = {
			name = artists_patron_of_the_arts_modifier
			multiplier = money_amount_multiplier_small
		}
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_small
				gold_reserves > 0
			}
			add = 1000
		}
	}
}

mr_remove_patron_of_arts_button = {
	name = "mr_remove_patron_of_arts_button"
	desc = "mr_remove_patron_of_arts_button_desc"

	visible = { 
		has_modifier = artists_patron_of_the_arts_modifier
	}

	possible = {
		custom_tooltip = {
			text = MR_DEACTIVATE_PATRON_OF_THE_ARTS_TRIGGER_TT
			NOT = {
				has_variable = patron_of_the_arts_cooldown_var
			}
		}
	}

	effect = {
		remove_modifier = artists_patron_of_the_arts_modifier
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income < money_amount_multiplier_small
				gold_reserves < 0
			}
			add = 1000
		}
	}
}

###########################################################################

######ZOOLOGY######

###Extend Zoo###

mr_extend_zoo_small_button = {
	name = "mr_extend_zoo_small_button"
	desc = "mr_extend_zoo_button_desc"

	visible = { 
		any_scope_state = {
			is_capital = yes
			is_production_method_active = {
				building_type = building_dubois_zoo
				production_method = pm_zoo_level_1
			}
			any_scope_building = {
				is_building_type = building_dubois_zoo
				level > 0
			}
		}
		NOT = {
			has_variable = dubois_zoo_first_extension
		}
	}

	possible = {
		custom_tooltip = {
			text = dubois_needs_10_animals_tt
			var:dubois_zoo_animal_total >= 10
		}
		OR = {
			custom_tooltip = {
				text = dubois_needs_2_african_animals_tt
				var:dubois_zoo_animal_africa >= 2
			}
			custom_tooltip = {
				text = dubois_needs_2_asian_animals_tt
				var:dubois_zoo_animal_asia >= 2
			}
			custom_tooltip = {
				text = dubois_needs_2_australian_animals_tt
				var:dubois_zoo_animal_australia >= 2
			}
		}
		NOT = {
			has_modifier = dubois_zoo_extension_modifier
		}
	}

	effect = {
		set_variable = dubois_zoo_first_extension
		random_scope_state = {
			limit = {
				has_building = building_dubois_zoo
				is_capital = yes
			}
			activate_production_method = {
				building_type = building_dubois_zoo
				production_method = pm_zoo_level_2
			}
		}
		add_modifier = {
			name = dubois_zoo_extension_modifier
			days = 300
		}	
	}

	ai_chance = {
		base = 1000
	}
}

mr_extend_zoo_medium_button = {
	name = "mr_extend_zoo_medium_button"
	desc = "mr_extend_zoo_button_desc"

	visible = { 
		any_scope_state = {
			is_capital = yes
			is_production_method_active = {
				building_type = building_dubois_zoo
				production_method = pm_zoo_level_2
			}
			any_scope_building = {
				is_building_type = building_dubois_zoo
				level > 0
			}
		}
		NOT = {
			has_variable = dubois_zoo_second_extension
		}
	}

	possible = {
		custom_tooltip = {
			text = dubois_needs_20_animals_tt
			var:dubois_zoo_animal_total >= 20
		}
		OR = {
			custom_tooltip = {
				text = dubois_needs_5_african_animals_tt
				var:dubois_zoo_animal_africa >= 5
			}
			custom_tooltip = {
				text = dubois_needs_5_asian_animals_tt
				var:dubois_zoo_animal_asia >= 5
			}
			custom_tooltip = {
				text = dubois_needs_5_australian_animals_tt
				var:dubois_zoo_animal_australia >= 5
			}
			custom_tooltip = {
				text = dubois_needs_5_south_american_animals_tt
				var:dubois_zoo_animal_australia >= 5
			}
		}
		NOT = {
			has_modifier = dubois_zoo_extension_modifier
		}
	}

	effect = {
		set_variable = dubois_zoo_second_extension
		random_scope_state = {
			limit = {
				has_building = building_dubois_zoo
				is_capital = yes
			}
			activate_production_method = {
				building_type = building_dubois_zoo
				production_method = pm_zoo_level_3
			}
		}
		add_modifier = {
			name = dubois_zoo_extension_modifier
			days = 400
		}	
	}

	ai_chance = {
		base = 1000
	}
}

mr_extend_zoo_large_button = {
	name = "mr_extend_zoo_large_button"
	desc = "mr_extend_zoo_button_desc"

	visible = { 
		any_scope_state = {
			is_capital = yes
			is_production_method_active = {
				building_type = building_dubois_zoo
				production_method = pm_zoo_level_3
			}
			any_scope_building = {
				is_building_type = building_dubois_zoo
				level > 0
			}
		}
		NOT = {
			has_variable = dubois_zoo_third_extension
		}
	}

	possible = {
		custom_tooltip = {
			text = dubois_needs_30_animals_tt
			var:dubois_zoo_animal_total >= 30
		}
		NOT = {
			has_modifier = dubois_zoo_extension_modifier
		}
	}

	effect = {
		set_variable = dubois_zoo_third_extension
		random_scope_state = {
			limit = {
				has_building = building_dubois_zoo
				is_capital = yes
			}
			activate_production_method = {
				building_type = building_dubois_zoo
				production_method = pm_zoo_level_4
			}
		}
		add_modifier = {
			name = dubois_zoo_extension_modifier
			days = 500
		}
	}

	ai_chance = {
		base = 1000
	}
}

mr_extend_zoo_famous_button = {
	name = "mr_extend_zoo_famous_button"
	desc = "mr_extend_zoo_button_desc"

	visible = { 
		any_scope_state = {
			is_capital = yes
			is_production_method_active = {
				building_type = building_dubois_zoo
				production_method = pm_zoo_level_4
			}
			any_scope_building = {
				is_building_type = building_dubois_zoo
				level > 0
			}
		}
		NOT = {
			has_variable = dubois_zoo_fourth_extension
		}
	}

	possible = {
		custom_tooltip = {
			text = dubois_needs_40_animals_tt
			var:dubois_zoo_animal_total >= 40
		}
		NOT = {
			has_modifier = dubois_zoo_extension_modifier
		}
	}

	effect = {
		set_variable = dubois_zoo_fourth_extension
		random_scope_state = {
			limit = {
				has_building = building_dubois_zoo
				is_capital = yes
			}
			activate_production_method = {
				building_type = building_dubois_zoo
				production_method = pm_zoo_level_5
			}
		}
		add_modifier = {
			name = dubois_zoo_extension_modifier
			days = 600
		}
	}

	ai_chance = {
		base = 1000
	}
}

###Animal Export###

mr_ban_animal_export_button = {
	name = "mr_ban_animal_export_button"
	desc = "mr_ban_animal_export_button_desc"

	visible = { 
		is_player = yes
		dubois_has_habitat = yes
		NOT = {
			has_modifier = dubois_no_animal_export_modifier
		}
	}

	possible = {
		any_country = {
			has_technology_researched = dubois_theory_of_evolution_tech 
		}
	}

	effect = {
		add_modifier = {
			name = dubois_no_animal_export_modifier
		}
	}

	ai_chance = {
		base = 0
	}
}

mr_allow_animal_export_button = {
	name = "mr_allow_animal_export_button"
	desc = "mr_allow_animal_export_button_desc"

	visible = { 
		is_player = yes
		has_modifier = dubois_no_animal_export_modifier
	}

	possible = {
		any_country = {
			has_technology_researched = dubois_theory_of_evolution_tech 
		}
	}

	effect = {
		remove_modifier = dubois_no_animal_export_modifier
	}

	ai_chance = {
		base = 0
	}
}

###Nature Reserve###

#mr_nature_reserve_survey_button = {
#	name = "mr_nature_reserve_survey_button"
#	desc = "mr_nature_reserve_survey_button_desc"
#
#	visible = { 
#		trigger_if = {
#			limit = { is_ai = yes}
#			has_variable = dubois_naturalist_var
#			literacy_rate >= 50
#		}
#		NOR = {
#			has_variable = dubois_nature_reserve_surveying_var
#			dubois_has_habitat = yes
#			any_scope_building = {
#				is_building_type = building_dubois_national_park
#			}
#		}
#	}
#
#	possible = {
#		dubois_nature_reserve_without_habitat_possible_trigger = yes
#	}
#
#	effect = {
#		set_variable = {
#			name = dubois_nature_reserve_surveying_var
#			months = 9
#		}
#		trigger_event = {
#			id = dubois.1201
#			months = { 1 3 }
#		}
#	}
#
#	ai_chance = {
#		base = 10
#	}
#}

mr_breeding_animals_button = {
	name = "mr_breeding_animals_button"
	desc = "mr_breeding_animals_button_desc"

	visible = { 
		trigger_if = {
			limit = {
				is_ai = yes
			}
			has_variable = dubois_naturalist_var
			literacy_rate >= 60
		}
		has_technology_researched = dubois_genetics_tech
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_dubois_national_park
				level > 0
			}
		}
		any_scope_building = {
			is_building_type = building_dubois_zoo
			level > 0
		}
	}

	possible = {
		dubois_nature_reserve_breeding_possible_trigger = yes
	}

	effect = {
		set_variable = dubois_breeding_animals_var
		trigger_event = {
			id = dubois.1301
			popup = yes
		}
	}

	ai_chance = {
		base = 10
	}
}

######ENGINEER SPECIALIZATION BUTTONS######

#Civil Engineer

academics_change_to_civil_engineer_button = {
	name = "academics_change_to_civil_engineer_button"
	desc = "academics_change_to_civil_engineer_button_desc"

	visible = { always = yes }

	possible = {
		gaudi_has_engineer = yes
		gaudi_has_no_civil_engineer_trigger = yes
		NOT = { has_modifier = academics_engineer_recent_specialization_switch_modifier }
	}

	effect = {
		gaudi_set_civil_engineer_effect = yes
		add_modifier = {
			name = academics_engineer_recent_specialization_switch_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 0	
	}
}

#Mechanical Engineer

academics_change_to_mechanical_engineer_button = {
	name = "academics_change_to_mechanical_engineer_button"
	desc = "academics_change_to_mechanical_engineer_button_desc"

	visible = { always = yes }

	possible = {
		gaudi_has_engineer = yes
		gaudi_has_no_mechanical_engineer_trigger = yes
		NOT = { has_modifier = academics_engineer_recent_specialization_switch_modifier }
	}

	effect = {
		gaudi_set_mechanical_engineer_effect = yes
		add_modifier = {
			name = academics_engineer_recent_specialization_switch_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 0	
	}
}

#Military Engineer

academics_change_to_military_engineer_button = {
	name = "academics_change_to_military_engineer_button"
	desc = "academics_change_to_military_engineer_button_desc"

	visible = { always = yes }

	possible = {
		gaudi_has_engineer = yes
		gaudi_has_no_military_engineer_trigger = yes
		NOT = { has_modifier = academics_engineer_recent_specialization_switch_modifier }
	}

	effect = {
		gaudi_set_military_engineer_effect = yes
		add_modifier = {
			name = academics_engineer_recent_specialization_switch_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 0
		
	}
}

#Electrical Engineer

academics_change_to_electrical_engineer_button = {
	name = "academics_change_to_electrical_engineer_button"
	desc = "academics_change_to_electrical_engineer_button_desc"

	visible = { always = yes }

	possible = {
		gaudi_has_engineer = yes
		has_technology_researched = verrier_physics_tech
		gaudi_has_no_electrical_engineer_trigger = yes
		NOT = { has_modifier = academics_engineer_recent_specialization_switch_modifier }
	}

	effect = {
		gaudi_set_electrical_engineer_effect = yes
		add_modifier = {
			name = academics_engineer_recent_specialization_switch_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 0
		
	}
}

#Aeronautical Engineer

academics_change_to_aeronautical_button = {
	name = "academics_change_to_aeronautical_button"
	desc = "academics_change_to_aeronautical_button_desc"

	visible = { always = yes }

	possible = {
		gaudi_has_engineer = yes
		has_technology_researched = curtiss_reconnaissance_balloon_tech
		gaudi_has_no_aeronautical_engineer_trigger = yes
		NOT = { has_modifier = academics_engineer_recent_specialization_switch_modifier }
	}

	effect = {
		gaudi_set_aeronautical_engineer_effect = yes
		add_modifier = {
			name = academics_engineer_recent_specialization_switch_modifier
			years = 5
		}
	}

	ai_chance = {
		base = 0
		
	}
}
