########################
# GUI SCRIPTED EFFECTS #
########################

#by Lord R

#############################

#Calculates the Amount of Academy Progress
academics_calculate_progress_effect = {
	set_variable = {
		name = academics_estimated_monthly_academy_progress_var
		value = 0
	}
	if = { #University
		limit = {
			any_scope_building = { #No academy progress without academy
				is_building_type = building_university
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
	if = { #Literacy 25%
		limit = {
			literacy_rate >= 0.25
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
	if = { #Literacy 50%
		limit = {
			literacy_rate >= 0.5
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
	if = { #Literacy 75%
		limit = {
			literacy_rate >= 0.75
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
	if = { #Academics at least 0.5%
		limit = {
			pop_type_percent_country = {
				pop_type = academics
				percent >= 0.005
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
	if = { #Academics at least 1%
		limit = {
			pop_type_percent_country = {
				pop_type = academics
				percent >= 0.01
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
	if = { #Academics at least 2%
		limit = {
			pop_type_percent_country = {
				pop_type = academics
				percent >= 0.02
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
	if = { #Institution Level 2
		limit = {
			institution_investment_level = {
				institution	= institution_schools
				value = 2
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
	if = { #Institution Level 3
		limit = {
			institution_investment_level = {
				institution	= institution_schools
				value = 3
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
	if = { #Institution Level 4
		limit = {
			institution_investment_level = {
				institution	= institution_schools
				value = 4
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 2
		}
	}
	if = { #Institution Level 5
		limit = {
			institution_investment_level = {
				institution	= institution_schools
				value = 4
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 2
		}
	}
	if = { #Intelligentsia is content
		limit = {
			ig:ig_intelligentsia = {
				ig_approval >= 5
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
	if = { #Special Tech School
		limit = {
			OR = {
				has_modifier = academics_avantgarde_intelligentsia_modifier
				has_modifier = academics_practical_academia_modifier
				has_modifier = academics_useful_ivory_tower_modifier
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}

	if = { #Observatory gives mathematical advantage
		limit = {
			OR = {
				has_variable = academics_promote_astronomer_active
				has_variable = academics_promote_engineer_active
			}
			any_scope_building = {
				is_building_type = building_verrier_observatory
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}

	if = { #Zoo gives naturalistic advantage
		limit = {
			OR = {
				has_variable = academics_promote_naturalist_active
				has_variable = academics_promote_paleontologist_active
			}
			any_scope_building = {
				is_building_type = building_dubois_zoo
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}

	if = { #Archaoelogical Museum gives anthropological advantage
		limit = {
			OR = {
				has_variable = academics_promote_archaeologist_active
				has_variable = academics_promote_anthropologist_active
			}
			any_scope_building = {
				is_building_type = building_lepsius_archaeological_museum
			}
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}

	if = { #Academy Investment
		limit = {
			has_modifier = dubois_academy_investment_modifier
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}

	if = { #Exodus Congress
		limit = {
			has_modifier = lepsius_historical_materialistic_school_modifier
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}

	if = { #Troy Congress
		limit = {
			has_modifier = lepsius_troy_myth_modifier
		}
		change_variable = {
			name = academics_estimated_monthly_academy_progress_var
			add = 1
		}
	}
}

### Astronomical Objects GLOBAL variables ###
#Creates a list of the ten countries with the highest astronomical objects.
#As this effect is called in an effect, it creates the list with GLOBAL variables.
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
verrier_create_astronomical_objects_ranking_global_effect = {
	#Removes the GLOBAL ranking variables
	remove_global_variable = verrier_astronomical_objects_rank_1_global_var
	remove_global_variable = verrier_astronomical_objects_rank_2_global_var
	remove_global_variable = verrier_astronomical_objects_rank_3_global_var
	remove_global_variable = verrier_astronomical_objects_rank_4_global_var
	remove_global_variable = verrier_astronomical_objects_rank_5_global_var
	remove_global_variable = verrier_astronomical_objects_rank_6_global_var
	remove_global_variable = verrier_astronomical_objects_rank_7_global_var
	remove_global_variable = verrier_astronomical_objects_rank_8_global_var
	remove_global_variable = verrier_astronomical_objects_rank_9_global_var
	remove_global_variable = verrier_astronomical_objects_rank_10_global_var

	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:verrier_astronomical_objects
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = { has_global_variable = verrier_astronomical_objects_rank_1_global_var }
			}
			set_global_variable = {
				name = verrier_astronomical_objects_rank_1_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = verrier_astronomical_objects_rank_2_global_var }
			}
			set_global_variable = {
				name = verrier_astronomical_objects_rank_2_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = verrier_astronomical_objects_rank_3_global_var }
			}
			set_global_variable = {
				name = verrier_astronomical_objects_rank_3_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = verrier_astronomical_objects_rank_4_global_var }
			}
			set_global_variable = {
				name = verrier_astronomical_objects_rank_4_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = verrier_astronomical_objects_rank_5_global_var }
			}
			set_global_variable = {
				name = verrier_astronomical_objects_rank_5_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = verrier_astronomical_objects_rank_6_global_var }
			}
			set_global_variable = {
				name = verrier_astronomical_objects_rank_6_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = verrier_astronomical_objects_rank_7_global_var }
			}
			set_global_variable = {
				name = verrier_astronomical_objects_rank_7_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = verrier_astronomical_objects_rank_8_global_var }
			}
			set_global_variable = {
				name = verrier_astronomical_objects_rank_8_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = verrier_astronomical_objects_rank_9_global_var }
			}
			set_global_variable = {
				name = verrier_astronomical_objects_rank_9_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = verrier_astronomical_objects_rank_10_global_var }
			}
			set_global_variable = {
				name = verrier_astronomical_objects_rank_10_global_var
				value = this
			}
		}
	}
}

#Removes the GLOBAL ranking variables
verrier_remove_astronomical_objects_ranking_variables = {
	remove_global_variable = verrier_astronomical_objects_rank_1_global_var
	remove_global_variable = verrier_astronomical_objects_rank_2_global_var
	remove_global_variable = verrier_astronomical_objects_rank_3_global_var
	remove_global_variable = verrier_astronomical_objects_rank_4_global_var
	remove_global_variable = verrier_astronomical_objects_rank_5_global_var
	remove_global_variable = verrier_astronomical_objects_rank_6_global_var
	remove_global_variable = verrier_astronomical_objects_rank_7_global_var
	remove_global_variable = verrier_astronomical_objects_rank_8_global_var
	remove_global_variable = verrier_astronomical_objects_rank_9_global_var
	remove_global_variable = verrier_astronomical_objects_rank_10_global_var
}

#This effect creates a a variable to display the rank of each country for astronomical objects
verrier_astronomical_rank_effect = {
	set_local_variable = { #This is used to keep track of the current rank
		name = current_rank
		value = 0
	}
	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:verrier_astronomical_objects
		max = 1000 #Apparently without this it just takes one country.
		check_range_bounds = no #prevents errors

		remove_variable = verrier_astronomical_rank_country_var
		change_local_variable = {
			name = current_rank
			add = 1
		}
		set_variable = { #uses the current rank to set the rank variable for the country.
			name = verrier_astronomical_rank_country_var
			value = local_var:current_rank
		}
	}
}

### Specimens GLOBAL variables ###
#Creates a list of the ten countries with the highest Specimens.
#As this effect is called in an effect, it creates the list with GLOBAL variables.
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
dubois_create_specimen_ranking_global_effect = {
#Removes the GLOBAL ranking variables
	remove_global_variable = dubois_specimens_rank_1_global_var
	remove_global_variable = dubois_specimens_rank_2_global_var
	remove_global_variable = dubois_specimens_rank_3_global_var
	remove_global_variable = dubois_specimens_rank_4_global_var
	remove_global_variable = dubois_specimens_rank_5_global_var
	remove_global_variable = dubois_specimens_rank_6_global_var
	remove_global_variable = dubois_specimens_rank_7_global_var
	remove_global_variable = dubois_specimens_rank_8_global_var
	remove_global_variable = dubois_specimens_rank_9_global_var
	remove_global_variable = dubois_specimens_rank_10_global_var

	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:dubois_specimen
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = { has_global_variable = dubois_specimens_rank_1_global_var }
			}
			set_global_variable = {
				name = dubois_specimens_rank_1_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_specimens_rank_2_global_var }
			}
			set_global_variable = {
				name = dubois_specimens_rank_2_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_specimens_rank_3_global_var }
			}
			set_global_variable = {
				name = dubois_specimens_rank_3_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_specimens_rank_4_global_var }
			}
			set_global_variable = {
				name = dubois_specimens_rank_4_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_specimens_rank_5_global_var }
			}
			set_global_variable = {
				name = dubois_specimens_rank_5_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_specimens_rank_6_global_var }
			}
			set_global_variable = {
				name = dubois_specimens_rank_6_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_specimens_rank_7_global_var }
			}
			set_global_variable = {
				name = dubois_specimens_rank_7_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_specimens_rank_8_global_var }
			}
			set_global_variable = {
				name = dubois_specimens_rank_8_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_specimens_rank_9_global_var }
			}
			set_global_variable = {
				name = dubois_specimens_rank_9_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_specimens_rank_10_global_var }
			}
			set_global_variable = {
				name = dubois_specimens_rank_10_global_var
				value = this
			}
		}
	}	
}

#Removes the GLOBAL ranking variables
dubois_remove_specimen_ranking_variables = {
	remove_global_variable = dubois_specimens_rank_1_global_var
	remove_global_variable = dubois_specimens_rank_2_global_var
	remove_global_variable = dubois_specimens_rank_3_global_var
	remove_global_variable = dubois_specimens_rank_4_global_var
	remove_global_variable = dubois_specimens_rank_5_global_var
	remove_global_variable = dubois_specimens_rank_6_global_var
	remove_global_variable = dubois_specimens_rank_7_global_var
	remove_global_variable = dubois_specimens_rank_8_global_var
	remove_global_variable = dubois_specimens_rank_9_global_var
	remove_global_variable = dubois_specimens_rank_10_global_var
}

#This effect creates a a variable to display the rank of each country for specimens
dubois_specimen_rank_effect = {
	set_local_variable = { #This is used to keep track of the current rank
		name = current_rank
		value = 0
	}
	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:dubois_specimen
		max = 1000 #Apparently without this it just takes one country.
		check_range_bounds = no #prevents errors

		remove_variable = dubois_specimen_rank_country_var
		change_local_variable = {
			name = current_rank
			add = 1
		}
		set_variable = { #uses the current rank to set the rank variable for the country.
			name = dubois_specimen_rank_country_var
			value = local_var:current_rank
		}
	}
}

### Dinosaur Skeletons GLOBAL variables ###
#Creates a list of the ten countries with the most Dinosaur Skeletons.
#As this effect is called in an effect, it creates the list with GLOBAL variables.
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
dubois_create_dinosaur_skeleton_ranking_global_effect = {
	#Removes the GLOBAL ranking variables
	remove_global_variable = dubois_dinosaur_skeleton_rank_1_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_2_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_3_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_4_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_5_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_6_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_7_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_8_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_9_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_10_global_var

	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:dubois_dinosaur_skeleton
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = { has_global_variable = dubois_dinosaur_skeleton_rank_1_global_var }
			}
			set_global_variable = {
				name = dubois_dinosaur_skeleton_rank_1_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_dinosaur_skeleton_rank_2_global_var }
			}
			set_global_variable = {
				name = dubois_dinosaur_skeleton_rank_2_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_dinosaur_skeleton_rank_3_global_var }
			}
			set_global_variable = {
				name = dubois_dinosaur_skeleton_rank_3_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_dinosaur_skeleton_rank_4_global_var }
			}
			set_global_variable = {
				name = dubois_dinosaur_skeleton_rank_4_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_dinosaur_skeleton_rank_5_global_var }
			}
			set_global_variable = {
				name = dubois_dinosaur_skeleton_rank_5_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_dinosaur_skeleton_rank_6_global_var }
			}
			set_global_variable = {
				name = dubois_dinosaur_skeleton_rank_6_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_dinosaur_skeleton_rank_7_global_var }
			}
			set_global_variable = {
				name = dubois_dinosaur_skeleton_rank_7_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_dinosaur_skeleton_rank_8_global_var }
			}
			set_global_variable = {
				name = dubois_dinosaur_skeleton_rank_8_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_dinosaur_skeleton_rank_9_global_var }
			}
			set_global_variable = {
				name = dubois_dinosaur_skeleton_rank_9_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_dinosaur_skeleton_rank_10_global_var }
			}
			set_global_variable = {
				name = dubois_dinosaur_skeleton_rank_10_global_var
				value = this
			}
		}
	}	
}

#Removes the GLOBAL ranking variables
dubois_remove_dinosaur_skeleton_ranking_variables = {
	remove_global_variable = dubois_dinosaur_skeleton_rank_1_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_2_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_3_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_4_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_5_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_6_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_7_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_8_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_9_global_var
	remove_global_variable = dubois_dinosaur_skeleton_rank_10_global_var
}

#This effect creates a a variable to display the rank of each country for Dinosaur Skeletons
dubois_dinosaur_skeleton_rank_effect = {
	set_local_variable = { #This is used to keep track of the current rank
		name = current_rank
		value = 0
	}
	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:dubois_dinosaur_skeleton
		max = 1000 #Apparently without this it just takes one country.
		check_range_bounds = no #prevents errors

		remove_variable = dubois_dinosaur_skeleton_rank_country_var
		change_local_variable = {
			name = current_rank
			add = 1
		}
		set_variable = { #uses the current rank to set the rank variable for the country.
			name = dubois_dinosaur_skeleton_rank_country_var
			value = local_var:current_rank
		}
	}
}

### Total Artifacts GLOBAL variables ###
#Creates a list of the ten countries with the most Total Artifacts.
#As this effect is called in an effect, it creates the list with GLOBAL variables.
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
lepsius_create_total_artifacts_ranking_global_effect = {
	#Removes the GLOBAL ranking variables
	remove_global_variable = lepsius_total_artifacts_rank_1_global_var
	remove_global_variable = lepsius_total_artifacts_rank_2_global_var
	remove_global_variable = lepsius_total_artifacts_rank_3_global_var
	remove_global_variable = lepsius_total_artifacts_rank_4_global_var
	remove_global_variable = lepsius_total_artifacts_rank_5_global_var
	remove_global_variable = lepsius_total_artifacts_rank_6_global_var
	remove_global_variable = lepsius_total_artifacts_rank_7_global_var
	remove_global_variable = lepsius_total_artifacts_rank_8_global_var
	remove_global_variable = lepsius_total_artifacts_rank_9_global_var
	remove_global_variable = lepsius_total_artifacts_rank_10_global_var

	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:lepsius_total_artifacts
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_artifacts_rank_1_global_var }
			}
			set_global_variable = {
				name = lepsius_total_artifacts_rank_1_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_artifacts_rank_2_global_var }
			}
			set_global_variable = {
				name = lepsius_total_artifacts_rank_2_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_artifacts_rank_3_global_var }
			}
			set_global_variable = {
				name = lepsius_total_artifacts_rank_3_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_artifacts_rank_4_global_var }
			}
			set_global_variable = {
				name = lepsius_total_artifacts_rank_4_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_artifacts_rank_5_global_var }
			}
			set_global_variable = {
				name = lepsius_total_artifacts_rank_5_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_artifacts_rank_6_global_var }
			}
			set_global_variable = {
				name = lepsius_total_artifacts_rank_6_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_artifacts_rank_7_global_var }
			}
			set_global_variable = {
				name = lepsius_total_artifacts_rank_7_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_artifacts_rank_8_global_var }
			}
			set_global_variable = {
				name = lepsius_total_artifacts_rank_8_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_artifacts_rank_9_global_var }
			}
			set_global_variable = {
				name = lepsius_total_artifacts_rank_9_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_artifacts_rank_10_global_var }
			}
			set_global_variable = {
				name = lepsius_total_artifacts_rank_10_global_var
				value = this
			}
		}
	}	
}

#Removes the GLOBAL ranking variables
lepsius_remove_total_artifacts_ranking_variables = {
	remove_global_variable = lepsius_total_artifacts_rank_1_global_var
	remove_global_variable = lepsius_total_artifacts_rank_2_global_var
	remove_global_variable = lepsius_total_artifacts_rank_3_global_var
	remove_global_variable = lepsius_total_artifacts_rank_4_global_var
	remove_global_variable = lepsius_total_artifacts_rank_5_global_var
	remove_global_variable = lepsius_total_artifacts_rank_6_global_var
	remove_global_variable = lepsius_total_artifacts_rank_7_global_var
	remove_global_variable = lepsius_total_artifacts_rank_8_global_var
	remove_global_variable = lepsius_total_artifacts_rank_9_global_var
	remove_global_variable = lepsius_total_artifacts_rank_10_global_var
}

#This effect creates a a variable to display the rank of each country for Total Artifacts
lepsius_total_artifacts_rank_effect = {
	set_local_variable = { #This is used to keep track of the current rank
		name = current_rank
		value = 0
	}
	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:lepsius_total_artifacts
		max = 1000 #Apparently without this it just takes one country.
		check_range_bounds = no #prevents errors

		remove_variable = lepsius_total_artifacts_rank_country_var
		change_local_variable = {
			name = current_rank
			add = 1
		}
		set_variable = { #uses the current rank to set the rank variable for the country.
			name = lepsius_total_artifacts_rank_country_var
			value = local_var:current_rank
		}
	}
}

### Total Human Fossils GLOBAL variables ###
#Creates a list of the ten countries with the most Human Fossils.
#As this effect is called in an effect, it creates the list with GLOBAL variables.
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
lepsius_create_total_human_fossils_ranking_global_effect = {
	#Removes the GLOBAL ranking variables
	remove_global_variable = lepsius_total_human_fossils_rank_1_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_2_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_3_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_4_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_5_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_6_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_7_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_8_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_9_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_10_global_var

	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:lepsius_total_human_fossil
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_human_fossils_rank_1_global_var }
			}
			set_global_variable = {
				name = lepsius_total_human_fossils_rank_1_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_human_fossils_rank_2_global_var }
			}
			set_global_variable = {
				name = lepsius_total_human_fossils_rank_2_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_human_fossils_rank_3_global_var }
			}
			set_global_variable = {
				name = lepsius_total_human_fossils_rank_3_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_human_fossils_rank_4_global_var }
			}
			set_global_variable = {
				name = lepsius_total_human_fossils_rank_4_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_human_fossils_rank_5_global_var }
			}
			set_global_variable = {
				name = lepsius_total_human_fossils_rank_5_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_human_fossils_rank_6_global_var }
			}
			set_global_variable = {
				name = lepsius_total_human_fossils_rank_6_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_human_fossils_rank_7_global_var }
			}
			set_global_variable = {
				name = lepsius_total_human_fossils_rank_7_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_human_fossils_rank_8_global_var }
			}
			set_global_variable = {
				name = lepsius_total_human_fossils_rank_8_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_human_fossils_rank_9_global_var }
			}
			set_global_variable = {
				name = lepsius_total_human_fossils_rank_9_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = lepsius_total_human_fossils_rank_10_global_var }
			}
			set_global_variable = {
				name = lepsius_total_human_fossils_rank_10_global_var
				value = this
			}
		}
	}	
}

#Removes the GLOBAL ranking variables
lepsius_remove_total_human_fossils_ranking_variables = {
	remove_global_variable = lepsius_total_human_fossils_rank_1_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_2_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_3_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_4_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_5_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_6_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_7_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_8_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_9_global_var
	remove_global_variable = lepsius_total_human_fossils_rank_10_global_var
}

#This effect creates a a variable to display the rank of each country for Human Fossils
lepsius_total_human_fossil_rank_effect = {
	set_local_variable = { #This is used to keep track of the current rank
		name = current_rank
		value = 0
	}
	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:lepsius_total_human_fossil
		max = 1000 #Apparently without this it just takes one country.
		check_range_bounds = no #prevents errors

		remove_variable = lepsius_total_human_fossil_rank_country_var
		change_local_variable = {
			name = current_rank
			add = 1
		}
		set_variable = { #uses the current rank to set the rank variable for the country.
			name = lepsius_total_human_fossil_rank_country_var
			value = local_var:current_rank
		}
	}
}

#This effect sets up all the variables for the Mountaineering Overview
dubois_mountaineering_view_set_up_effect = {

	#Removes all GUI variables
	remove_variable = GUI_dubois_mountaineer_var

	#Sets a random Mountaineer as a variable
	if = {
		limit = {
			any_scope_character = {
				has_trait = dubois_mountaineer
			}
		}
		random_scope_character = {
			limit = {
				has_trait = dubois_mountaineer
			}
			save_scope_as = GUI_dubois_mountaineer_scope
		}
		set_variable = {
			name = GUI_dubois_mountaineer_var
			value = scope:GUI_dubois_mountaineer_scope
		}
	}
}

#This effect sets up all the variables for the Olympic Overview
vikelas_set_member_states_effect = {

	#Removes all GUI variables
	remove_variable = GUI_vikelas_athlete_var
	remove_global_variable = vikelas_ioc_president_global_var
	remove_variable = GUI_vikelas_next_host_var

	#Calculates how many Participants there are
	vikelas_calculate_number_participants_effect = yes

	#Sets the IOC President as a variable
	if = {
		limit = {
			any_country = {
				has_variable = vikelas_ioc_founding_country_var
			}
		}
		random_country = {
			limit = {
				has_variable = vikelas_ioc_founding_country_var
			}
			save_scope_as = ioc_president_scope
		}
		set_global_variable = {
			name = vikelas_ioc_president_global_var
			value = scope:ioc_president_scope
		}
	}

	#Sets a random Athlete as a variable
	if = {
		limit = {
			any_scope_character = {
				OR = {
					has_trait = vikelas_athlete
					has_trait = vikelas_winner
				}
			}
		}
		random_scope_character = {
			limit = {
				OR = {
					has_trait = vikelas_athlete
					has_trait = vikelas_winner
				}
			}
			save_scope_as = GUI_vikelas_athlete_scope
		}
		set_variable = {
			name = GUI_vikelas_athlete_var
			value = scope:GUI_vikelas_athlete_scope
		}
	}

	#Sets the next host as a variable
	if = {
		limit = {
			any_country = {
				OR = {
					has_modifier = vikelas_olympics_preparation_modifier
					has_modifier = vikelas_olympics_hosting_modifier
				}
			}
		}
		random_country = {
			limit = {
				OR = {
					has_modifier = vikelas_olympics_preparation_modifier
					has_modifier = vikelas_olympics_hosting_modifier
				}
			}
			save_scope_as = GUI_vikelas_next_host_scope
		}
		set_variable = {
			name = GUI_vikelas_next_host_var
			value = scope:GUI_vikelas_next_host_scope
		}
	}
}

### Mountain Ascents GLOBAL variables ###
#Creates a list of the ten countries with the most Mountain Ascents.
#As this effect is called in an effect, it creates the list with GLOBAL variables.
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
dubois_create_mountain_ascents_ranking_global_effect = {
	#Removes the GLOBAL ranking variables
	remove_global_variable = dubois_mountain_ascents_rank_1_global_var
	remove_global_variable = dubois_mountain_ascents_rank_2_global_var
	remove_global_variable = dubois_mountain_ascents_rank_3_global_var
	remove_global_variable = dubois_mountain_ascents_rank_4_global_var
	remove_global_variable = dubois_mountain_ascents_rank_5_global_var
	remove_global_variable = dubois_mountain_ascents_rank_6_global_var
	remove_global_variable = dubois_mountain_ascents_rank_7_global_var
	remove_global_variable = dubois_mountain_ascents_rank_8_global_var
	remove_global_variable = dubois_mountain_ascents_rank_9_global_var
	remove_global_variable = dubois_mountain_ascents_rank_10_global_var

	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:dubois_mountains_conquered_var
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = { has_global_variable = dubois_mountain_ascents_rank_1_global_var }
			}
			set_global_variable = {
				name = dubois_mountain_ascents_rank_1_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_mountain_ascents_rank_2_global_var }
			}
			set_global_variable = {
				name = dubois_mountain_ascents_rank_2_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_mountain_ascents_rank_3_global_var }
			}
			set_global_variable = {
				name = dubois_mountain_ascents_rank_3_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_mountain_ascents_rank_4_global_var }
			}
			set_global_variable = {
				name = dubois_mountain_ascents_rank_4_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_mountain_ascents_rank_5_global_var }
			}
			set_global_variable = {
				name = dubois_mountain_ascents_rank_5_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_mountain_ascents_rank_6_global_var }
			}
			set_global_variable = {
				name = dubois_mountain_ascents_rank_6_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_mountain_ascents_rank_7_global_var }
			}
			set_global_variable = {
				name = dubois_mountain_ascents_rank_7_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_mountain_ascents_rank_8_global_var }
			}
			set_global_variable = {
				name = dubois_mountain_ascents_rank_8_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_mountain_ascents_rank_9_global_var }
			}
			set_global_variable = {
				name = dubois_mountain_ascents_rank_9_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = dubois_mountain_ascents_rank_10_global_var }
			}
			set_global_variable = {
				name = dubois_mountain_ascents_rank_10_global_var
				value = this
			}
		}
	}
}

#Removes the GLOBAL ranking variables
verrier_remove_mountain_ascents_objects_ranking_variables = {
	remove_global_variable = dubois_mountain_ascents_rank_1_global_var
	remove_global_variable = dubois_mountain_ascents_rank_2_global_var
	remove_global_variable = dubois_mountain_ascents_rank_3_global_var
	remove_global_variable = dubois_mountain_ascents_rank_4_global_var
	remove_global_variable = dubois_mountain_ascents_rank_5_global_var
	remove_global_variable = dubois_mountain_ascents_rank_6_global_var
	remove_global_variable = dubois_mountain_ascents_rank_7_global_var
	remove_global_variable = dubois_mountain_ascents_rank_8_global_var
	remove_global_variable = dubois_mountain_ascents_rank_9_global_var
	remove_global_variable = dubois_mountain_ascents_rank_10_global_var
}

#This effect creates a a variable to display the rank of each country for conquered mountains
dubois_mountain_ascents_rank_effect = {
	set_local_variable = { #This is used to keep track of the current rank
		name = current_rank
		value = 0
	}
	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:dubois_mountains_conquered_var
		max = 1000 #Apparently without this it just takes one country.
		check_range_bounds = no #prevents errors

		remove_variable = dubois_mountain_ascents_rank_country_var
		change_local_variable = {
			name = current_rank
			add = 1
		}
		set_variable = { #uses the current rank to set the rank variable for the country.
			name = dubois_mountain_ascents_rank_country_var
			value = local_var:current_rank
		}
	}
}

#This effect sets up all the variables for the Schneider Trophy Overview
curtiss_set_schneider_overview_effect = {

	#Removes all GUI variables
	remove_variable = GUI_curtiss_pilot_var

	#Sets a pilot as a variable if there is one
	if = {
		limit = {
			any_scope_character = {
				has_trait = curtiss_pilot
			}
		}
		random_scope_character = {
			limit = {
				has_trait = curtiss_pilot
			}
			save_scope_as = GUI_curtiss_pilot_scope
		}
		set_variable = {
			name = GUI_curtiss_pilot_var
			value = scope:GUI_curtiss_pilot_scope
		}
	}

	#Sets the last winning country as a variable
	if = {
		limit = {
			any_country = {
				has_variable = curtiss_last_trophy_winner_var
			}
		}
		random_country = {
			limit = {
				has_variable = curtiss_last_trophy_winner_var
			}
			save_scope_as = GUI_curtiss_last_trophy_winner_scope
		}
		set_variable = {
			name = GUI_curtiss_last_trophy_winner_for_gui_var
			value = scope:GUI_curtiss_last_trophy_winner_scope
		}
	}
}

### Schneider Trophy Participants GLOBAL variables ###
#Creates a list of the Schneider Trophy Participants ranked for Points.
#As this effect is called in an effect, it creates the list with GLOBAL variables.
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
curtiss_create_schneider_trophy_current_ranking_global_effect = {
	#Removes the GLOBAL ranking variables
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_1_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_2_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_3_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_4_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_5_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_6_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_7_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_8_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_9_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_10_global_var

	ordered_country = {
		limit = {
			has_variable = schneider_trophy_point
			has_journal_entry = je_curtiss_schneider_trophy_race
		}
		order_by = var:schneider_trophy_point
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = { has_global_variable = curtiss_create_schneider_trophy_current_rank_1_global_var }
			}
			set_global_variable = {
				name = curtiss_create_schneider_trophy_current_rank_1_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_create_schneider_trophy_current_rank_2_global_var }
			}
			set_global_variable = {
				name = curtiss_create_schneider_trophy_current_rank_2_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_create_schneider_trophy_current_rank_3_global_var }
			}
			set_global_variable = {
				name = curtiss_create_schneider_trophy_current_rank_3_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_create_schneider_trophy_current_rank_4_global_var }
			}
			set_global_variable = {
				name = curtiss_create_schneider_trophy_current_rank_4_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_create_schneider_trophy_current_rank_5_global_var }
			}
			set_global_variable = {
				name = curtiss_create_schneider_trophy_current_rank_5_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_create_schneider_trophy_current_rank_6_global_var }
			}
			set_global_variable = {
				name = curtiss_create_schneider_trophy_current_rank_6_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_create_schneider_trophy_current_rank_7_global_var }
			}
			set_global_variable = {
				name = curtiss_create_schneider_trophy_current_rank_7_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_create_schneider_trophy_current_rank_8_global_var }
			}
			set_global_variable = {
				name = curtiss_create_schneider_trophy_current_rank_8_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_create_schneider_trophy_current_rank_9_global_var }
			}
			set_global_variable = {
				name = curtiss_create_schneider_trophy_current_rank_9_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_create_schneider_trophy_current_rank_10_global_var }
			}
			set_global_variable = {
				name = curtiss_create_schneider_trophy_current_rank_10_global_var
				value = this
			}
		}
	}
}

#Removes the GLOBAL ranking variables
curtiss_remove_schneider_trophy_current_ranking_variables = {
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_1_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_2_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_3_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_4_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_5_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_6_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_7_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_8_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_9_global_var
	remove_global_variable = curtiss_create_schneider_trophy_current_rank_10_global_var
}

### Schneider Trophy Victories GLOBAL variables ###
#Creates a list of the ten countries with the most Schneider Trophy Victories.
#As this effect is called in an effect, it creates the list with GLOBAL variables.
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
curtiss_create_schneider_trophy_victories_ranking_global_effect = {
	#Removes the GLOBAL ranking variables
	remove_global_variable = curtiss_schneider_trophy_victories_rank_1_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_2_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_3_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_4_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_5_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_6_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_7_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_8_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_9_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_10_global_var

	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:curtiss_schneider_trophy_victories_var
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = { has_global_variable = curtiss_schneider_trophy_victories_rank_1_global_var }
			}
			set_global_variable = {
				name = curtiss_schneider_trophy_victories_rank_1_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_schneider_trophy_victories_rank_2_global_var }
			}
			set_global_variable = {
				name = curtiss_schneider_trophy_victories_rank_2_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_schneider_trophy_victories_rank_3_global_var }
			}
			set_global_variable = {
				name = curtiss_schneider_trophy_victories_rank_3_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_schneider_trophy_victories_rank_4_global_var }
			}
			set_global_variable = {
				name = curtiss_schneider_trophy_victories_rank_4_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_schneider_trophy_victories_rank_5_global_var }
			}
			set_global_variable = {
				name = curtiss_schneider_trophy_victories_rank_5_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_schneider_trophy_victories_rank_6_global_var }
			}
			set_global_variable = {
				name = curtiss_schneider_trophy_victories_rank_6_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_schneider_trophy_victories_rank_7_global_var }
			}
			set_global_variable = {
				name = curtiss_schneider_trophy_victories_rank_7_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_schneider_trophy_victories_rank_8_global_var }
			}
			set_global_variable = {
				name = curtiss_schneider_trophy_victories_rank_8_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_schneider_trophy_victories_rank_9_global_var }
			}
			set_global_variable = {
				name = curtiss_schneider_trophy_victories_rank_9_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = curtiss_schneider_trophy_victories_rank_10_global_var }
			}
			set_global_variable = {
				name = curtiss_schneider_trophy_victories_rank_10_global_var
				value = this
			}
		}
	}
}

#Removes the GLOBAL ranking variables
curtiss_remove_schneider_trophy_victories_ranking_global_effect = {
	remove_global_variable = curtiss_schneider_trophy_victories_rank_1_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_2_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_3_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_4_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_5_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_6_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_7_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_8_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_9_global_var
	remove_global_variable = curtiss_schneider_trophy_victories_rank_10_global_var
}

#This effect creates a a variable to display the rank of each country for conquered mountains
curtiss_schneider_trophy_victories_rank_effect = {
	set_local_variable = { #This is used to keep track of the current rank
		name = current_rank
		value = 0
	}
	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:curtiss_schneider_trophy_victories_var
		max = 1000 #Apparently without this it just takes one country.
		check_range_bounds = no #prevents errors

		remove_variable = curtiss_schneider_trophy_wins_rank_country_var
		change_local_variable = {
			name = current_rank
			add = 1
		}
		set_variable = { #uses the current rank to set the rank variable for the country.
			name = curtiss_schneider_trophy_wins_rank_country_var
			value = local_var:current_rank
		}
	}
}

#########################################################################

### Car Racing Victories GLOBAL variables ###
#Creates a list of the ten countries with the most Grand Prix Victories.
#As this effect is called in an effect, it creates the list with GLOBAL variables.
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
vikelas_create_car_racing_victories_ranking_global_effect = {
	#Removes the GLOBAL ranking variables
	remove_global_variable = vikelas_create_car_racing_current_rank_1_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_2_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_3_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_4_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_5_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_6_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_7_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_8_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_9_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_10_global_var

	ordered_country = {
		limit = {
			has_variable = vikelas_grand_prix_victories_var
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:vikelas_grand_prix_victories_var
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = { has_global_variable = vikelas_create_car_racing_current_rank_1_global_var }
			}
			set_global_variable = {
				name = vikelas_create_car_racing_current_rank_1_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = vikelas_create_car_racing_current_rank_2_global_var }
			}
			set_global_variable = {
				name = vikelas_create_car_racing_current_rank_2_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = vikelas_create_car_racing_current_rank_3_global_var }
			}
			set_global_variable = {
				name = vikelas_create_car_racing_current_rank_3_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = vikelas_create_car_racing_current_rank_4_global_var }
			}
			set_global_variable = {
				name = vikelas_create_car_racing_current_rank_4_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = vikelas_create_car_racing_current_rank_5_global_var }
			}
			set_global_variable = {
				name = vikelas_create_car_racing_current_rank_5_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = vikelas_create_car_racing_current_rank_6_global_var }
			}
			set_global_variable = {
				name = vikelas_create_car_racing_current_rank_6_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = vikelas_create_car_racing_current_rank_7_global_var }
			}
			set_global_variable = {
				name = vikelas_create_car_racing_current_rank_7_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = vikelas_create_car_racing_current_rank_8_global_var }
			}
			set_global_variable = {
				name = vikelas_create_car_racing_current_rank_8_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = vikelas_create_car_racing_current_rank_9_global_var }
			}
			set_global_variable = {
				name = vikelas_create_car_racing_current_rank_9_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = vikelas_create_car_racing_current_rank_10_global_var }
			}
			set_global_variable = {
				name = vikelas_create_car_racing_current_rank_10_global_var
				value = this
			}
		}
	}
}

#Removes the GLOBAL ranking variables
vikelas_remove_car_racing_victories_ranking_global_effect = {
	remove_global_variable = vikelas_create_car_racing_current_rank_1_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_2_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_3_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_4_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_5_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_6_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_7_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_8_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_9_global_var
	remove_global_variable = vikelas_create_car_racing_current_rank_10_global_var
}

#This effect creates a a variable to display the rank of each country for Grand Prix Victories
vikelas_car_racing_victories_rank_effect = {
	set_local_variable = { #This is used to keep track of the current rank
		name = current_rank
		value = 0
	}
	ordered_country = {
		limit = {
			has_variable = vikelas_grand_prix_victories_var
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:vikelas_grand_prix_victories_var
		max = 1000 #Apparently without this it just takes one country.
		check_range_bounds = no #prevents errors

		remove_variable = vikelas_car_racing_wins_rank_country_var
		change_local_variable = {
			name = current_rank
			add = 1
		}
		set_variable = { #uses the current rank to set the rank variable for the country.
			name = vikelas_car_racing_wins_rank_country_var
			value = local_var:current_rank
		}
	}
}

################################################

### Composers ###

elgar_set_up_travelling_composers_effect = {
	if = {
		limit = {
			any_character_in_void = {
				has_variable = mr_is_travelling_composer_var
			}
		}
		clear_variable_list = mr_travelling_composer_list
		random_character_in_void = {
			limit = {
				has_variable = mr_is_travelling_composer_var
			}
			root = {
				add_to_variable_list = {
					name = mr_travelling_composer_list
					target = prev
				}
			}
		}
	}
}

### Musical Tradition GLOBAL variables ###
#Creates a list of the ten countries with the highest musical tradition.
#As this effect is called in an effect, it creates the list with GLOBAL variables.
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
elgar_create_music_tradition_ranking_global_effect = {
	#Removes the GLOBAL ranking variables
	remove_global_variable = elgar_music_tradition_rank_1_global_var
	remove_global_variable = elgar_music_tradition_rank_2_global_var
	remove_global_variable = elgar_music_tradition_rank_3_global_var
	remove_global_variable = elgar_music_tradition_rank_4_global_var
	remove_global_variable = elgar_music_tradition_rank_5_global_var
	remove_global_variable = elgar_music_tradition_rank_6_global_var
	remove_global_variable = elgar_music_tradition_rank_7_global_var
	remove_global_variable = elgar_music_tradition_rank_8_global_var
	remove_global_variable = elgar_music_tradition_rank_9_global_var
	remove_global_variable = elgar_music_tradition_rank_10_global_var

	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:elgar_music_tradition
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = { has_global_variable = elgar_music_tradition_rank_1_global_var }
			}
			set_global_variable = {
				name = elgar_music_tradition_rank_1_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = elgar_music_tradition_rank_2_global_var }
			}
			set_global_variable = {
				name = elgar_music_tradition_rank_2_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = elgar_music_tradition_rank_3_global_var }
			}
			set_global_variable = {
				name = elgar_music_tradition_rank_3_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = elgar_music_tradition_rank_4_global_var }
			}
			set_global_variable = {
				name = elgar_music_tradition_rank_4_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = elgar_music_tradition_rank_5_global_var }
			}
			set_global_variable = {
				name = elgar_music_tradition_rank_5_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = elgar_music_tradition_rank_6_global_var }
			}
			set_global_variable = {
				name = elgar_music_tradition_rank_6_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = elgar_music_tradition_rank_7_global_var }
			}
			set_global_variable = {
				name = elgar_music_tradition_rank_7_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = elgar_music_tradition_rank_8_global_var }
			}
			set_global_variable = {
				name = elgar_music_tradition_rank_8_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = elgar_music_tradition_rank_9_global_var }
			}
			set_global_variable = {
				name = elgar_music_tradition_rank_9_global_var
				value = this
			}
		}
		else_if = {
			limit = {
				NOT = { has_global_variable = elgar_music_tradition_rank_10_global_var }
			}
			set_global_variable = {
				name = elgar_music_tradition_rank_10_global_var
				value = this
			}
		}
	}
}

#Removes the GLOBAL ranking variables
verrier_remove_astronomical_objects_ranking_variables = {
	remove_global_variable = elgar_music_tradition_rank_1_global_var
	remove_global_variable = elgar_music_tradition_rank_2_global_var
	remove_global_variable = elgar_music_tradition_rank_3_global_var
	remove_global_variable = elgar_music_tradition_rank_4_global_var
	remove_global_variable = elgar_music_tradition_rank_5_global_var
	remove_global_variable = elgar_music_tradition_rank_6_global_var
	remove_global_variable = elgar_music_tradition_rank_7_global_var
	remove_global_variable = elgar_music_tradition_rank_8_global_var
	remove_global_variable = elgar_music_tradition_rank_9_global_var
	remove_global_variable = elgar_music_tradition_rank_10_global_var
}

#This effect creates a a variable to display the rank of each country for astronomical objects
elgar_musical_rank_effect = {
	set_local_variable = { #This is used to keep track of the current rank
		name = current_rank
		value = 0
	}
	ordered_country = {
		limit = {
			is_revolutionary = no #Hopefully keeps revolutions from appearing in the ranking
			NOR = {
				c:PRC ?= this
				is_country_type = decentralized
			}
		}
		order_by = var:elgar_music_tradition
		max = 1000 #Apparently without this it just takes one country.
		check_range_bounds = no #prevents errors

		remove_variable = elgar_musical_rank_country_var
		change_local_variable = {
			name = current_rank
			add = 1
		}
		set_variable = { #uses the current rank to set the rank variable for the country.
			name = elgar_musical_rank_country_var
			value = local_var:current_rank
		}
	}
}
