#######################
# AI SCRPITED EFFECTS #
#######################

############################################################################

#This effect removes Void Characters of countries that no longer exist.
ai_remove_characters_effect = {
	if = {
		limit = { NOT = { has_global_variable = mr_on_yearly_no_more_global_var } }
		set_global_variable = {
			name = mr_on_yearly_no_more_global_var
			days = 364
		}
		#Composers
		every_character_in_void = {
			limit = {
				has_variable = mr_is_composer_var
				NOT = { exists = owner }
				OR = {
					var:elgar_composer_experience >= 400
					is_historical = yes
				}
			}
			remove_variable = mr_is_composer_var
			set_variable = mr_is_travelling_composer_var
			if = {
				limit = {
					NOT = { has_variable = mr_travelling_composer_year_counter_var }
				}
				set_variable = {
					name = mr_travelling_composer_year_counter_var
					value = 0
				}
				add_to_global_variable_list = {
					name = mr_travelling_composer_global_list
					target = this
				}
			}
		}
		#Writers and Local Writers
		every_character_in_void = {
			limit = {
				OR = {
					has_variable = mr_is_writer_var
					has_variable = mr_is_local_writer_var
				}
				NOT = { exists = owner }
			}
			free_character_from_void = yes
		}
		#Painters
		every_character_in_void = {
			limit = {
				has_variable = mr_is_painter_var
				NOT = { exists = owner }
				OR = {
					var:klimt_painter_experience >= 400
					is_historical = yes
				}
			}
			remove_variable = mr_is_painter_var
			set_variable = mr_is_independent_painter_var
			if = {
				limit = {
					NOT = { has_variable = mr_travelling_composer_year_counter_var }
				}
				set_variable = {
					name = mr_travelling_composer_year_counter_var
					value = 0
				}
				add_to_global_variable_list = {
					name = mr_independent_painter_global_list
					target = this
				}
			}
		}
		#Other Void characters
		every_character_in_void = {
			limit = {
				NOR = {
					exists = owner
					OR = {
						has_variable = mr_is_travelling_composer_var
						has_variable = mr_is_independent_painter_var
					}
				}
			}
			free_character_from_void = no
		}
	}
}

#Handles the Pacific Expedition
ai_pacific_expedition_effect = {
	if = {
		limit = {
			country_rank >= rank_value:major_power
			weekly_net_fixed_income > money_amount_multiplier_medium
			gold_reserves > 0
			has_technology_researched = screw_frigate
			has_technology_researched = dialectics
			NOR = {
				has_modifier = rapanui_pacific_expedition_modifier
				has_modifier = rapanui_had_pacific_expedition_modifier
			}
			navy_size >= 15
			any_scope_building = {
				is_building_type = building_port
			}
			any_scope_building = {
				is_building_type = building_university
			}
			any_scope_character = {
				has_role = admiral
				is_busy = no
			}
			NOT = {
				any_country = {
					OR = {
						has_technology_researched = dreadnought
						has_technology_researched = destroyer
					}
				}
			}
		}

		#Effect
		add_treasury = -25000
		add_modifier = {
			name = rapanui_pacific_expedition_modifier
		}
		trigger_event = { 
			id = rapanui.201
			popup = yes 
		}
	}
}

#Handles the Mountain Expedition
ai_mountain_expedition_effect = {
	if = {
		limit = {
			any_scope_character = {
				has_role = general
				is_busy = no
				OR = {
					has_trait = dubois_mountaineer
					has_trait = explorer
					has_trait = mountain_commander
					has_trait = surveyor
				}
			}
			has_technology_researched = nationalism
			has_technology_researched = prospecting
			gold_reserves > 0
			NOR = {
				has_modifier = dubois_summit_level_1_modifier
				has_modifier = dubois_summit_level_2_modifier
				has_modifier = dubois_summit_level_3_modifier
				has_modifier = dubois_summit_level_4_modifier
				has_modifier = dubois_summit_level_5_modifier
				has_modifier = dubois_summit_level_6_modifier
				has_modifier = dubois_mountaineering_disaster_modifier
				has_modifier = dubois_mountaineering_disappointment_modifier
				has_journal_entry = je_dubois_mountain_expedition
				has_variable = dubois_current_mountain_expedition_var
			}
			OR = {
				dubois_has_unconquered_summit_no_tt_trigger = yes
				any_country = {
					dubois_has_unconquered_summit_no_tt_trigger = yes
					has_diplomatic_pact = {
						who = ROOT
						type = mountaineering_license
					}
				}
			}
		}

		#Effect
		add_treasury = -25000
		set_variable = {
			name = dubois_current_mountain_expedition_var
			days = 90
		}
		trigger_event = { 
			id = dubois.411
			popup = yes 
		}
	}
}

#Handles the Arctica Expedition
ai_arctica_expedition_effect = {
	if = {
		limit = {
			has_technology_researched = zeppelins
			NOR = {
				has_strategy = ai_strategy_armed_isolationism
				is_diplomatic_play_committed_participant = yes
				is_at_war = yes
			}
			weekly_net_fixed_income > money_amount_multiplier_small
			gold_reserves > 0
			NOR = {
				has_modifier = curtiss_arctica_expedition_modifier
				has_modifier = curtiss_had_arctica_expedition_modifier
			}
			any_scope_building = {
				is_building_type = building_verrier_observatory
				has_active_production_method = pm_curtiss_weather_station
			}
			curtiss_has_active_pilot_no_tooltip_trigger = yes
			OR = {
				any_scope_state = {
					mr_arctic_states_trigger = yes
				}
				any_country = {
					has_diplomatic_pact = {
						who = ROOT
						type = airspace_convention
					}				
					mr_arctic_states_trigger = yes
				}
			}
		}

		#Effect
		set_variable = {
			name = curtiss_zeppelin_progress
			value = 0
		}
		set_variable = {
			name = curtiss_zeppelin_science
			value = 0
		}
		set_variable = {
			name = curtiss_zeppelin_danger
			value = 0
		}
		add_modifier = {
			name = curtiss_arctica_expedition_modifier
		}
		add_modifier = {
			name = curtiss_zeppelin_expedition_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		trigger_event = { 
			id = curtiss.520
			popup = yes 
		}
	}
}

#Handles the Transatlantic Cable Expedition
ai_transatlantic_cable_expedition_effect = {
	if = {
		limit = {
			NOR = {
				has_variable = gaudi_transatlantic_cable_var
				has_global_variable = gaudi_transatlantic_radio_var
				has_variable = gaudi_transatlantic_cable_expedition_var
				has_modifier = gaudi_transatlantic_cable_expedition_failed_modifier
			}
			weekly_net_fixed_income > money_amount_multiplier_medium
			has_technology_researched = screw_frigate
			has_technology_researched = electric_telegraph
			any_scope_building = {
				is_building_type = building_manzoni_publishing_industry
				is_under_construction = no
				has_active_production_method = manzoni_pm_electric_telegraph
				cash_reserves_ratio > 0.5
				occupancy >= 0.75
				level >= 5
			}
			any_scope_state = {
				any_scope_building = {
					is_building_type = building_port
				}
				OR = {
					region = sr:region_north_sea_coast
					region = sr:region_england
					region = sr:region_france
					region = sr:region_iberia
					region = sr:region_dixie
					region = sr:region_new_england
					region = sr:region_canada
				}
			}
		}

		#Effect
		if = {
			limit = {
				is_player = yes
			}
			add_treasury = -250000
		}
		set_variable = gaudi_transatlantic_cable_expedition_var
		trigger_event = { 
			id = rapanui.501
			popup = yes
		}
	}
}

#Handles the Northwest Passage Expedition
ai_northwest_passage_expedition_effect = {
	if = {
		limit = {
			NOT = {
				has_global_variable = rapanui_northwest_passage_found_var
			}
			NOR = {
				has_modifier = rapanui_northwest_expedition_modifier
				has_modifier = rapanui_had_northwest_expedition_modifier
			}
			weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			navy_size >= 25
			any_scope_character = {
				has_role = admiral
				is_busy = no
			}
			has_technology_researched = screw_frigate
			has_technology_researched = dialectics
			has_technology_researched = canneries
			OR = {
				ig:ig_armed_forces = {
					is_in_government = yes
				}
				ig:ig_industrialists = {
					is_in_government = yes
				}
				ig:ig_intelligentsia = {
					is_in_government = yes
				}
			}
			OR = {
				any_scope_interest_marker = {
					region = sr:region_canada
				}
				any_scope_interest_marker = {
					region = sr:region_pacific_coast
				}
				any_scope_interest_marker = {
					region = sr:region_north_sea_coast
				}
			}
			any_scope_building = {
				is_building_type = building_port
			}
			any_scope_building = {
				is_building_type = building_university
			}
		}

		#Effect
		add_treasury = -100000
		add_modifier = {
			name = rapanui_northwest_expedition_modifier
		}
		trigger_event = { 
			id = rapanui.401
			popup = yes
		}
	}
}

#Handles Zoo Expansion for the AI
ai_zoo_expansion_effect = {
	if = {
		limit = {
			any_scope_state = {
				is_capital = yes
				any_scope_building = {
					is_building_type = building_dubois_zoo
					level > 0
					NOT = {
						has_active_production_method = pm_zoo_level_5
					}
				}
			}
		}
		#Zoo Level 2
		if = { 
			limit = {
				NOT = {
					has_variable = dubois_zoo_first_extension
				}
				any_scope_state = {
					is_capital = yes
					any_scope_building = {
						is_building_type = building_dubois_zoo
						level > 0
						NOR = {
							has_active_production_method = pm_zoo_level_2
							has_active_production_method = pm_zoo_level_3
							has_active_production_method = pm_zoo_level_4
							has_active_production_method = pm_zoo_level_5
						}
					}
				}
				var:dubois_zoo_animal_total >= 10
				OR = {
					var:dubois_zoo_animal_africa >= 2
					var:dubois_zoo_animal_asia >= 2
					var:dubois_zoo_animal_australia >= 2
				}
				NOT = {
					has_modifier = dubois_zoo_extension_modifier
				}
			}
	
			#Effect
			set_variable = dubois_zoo_first_extension
			random_scope_state = {
				limit = {
					has_building = building_dubois_zoo
					is_capital = yes
				}
				activate_production_method = {
					building_type = building_dubois_zoo
					production_method = pm_zoo_level_2
				}
			}
			add_modifier = {
				name = dubois_zoo_extension_modifier
				days = 300
			}
		}
		#Zoo Level 3
		if = {
			limit = {
				NOT = {
					has_variable = dubois_zoo_second_extension
				}
				any_scope_state = {
					is_capital = yes
					any_scope_building = {
						is_building_type = building_dubois_zoo
						level > 0
						NOR = {
							has_active_production_method = pm_zoo_level_3
							has_active_production_method = pm_zoo_level_4
							has_active_production_method = pm_zoo_level_5
						}
						
					}
				}
				var:dubois_zoo_animal_total >= 20
				OR = {
					var:dubois_zoo_animal_africa >= 5
					var:dubois_zoo_animal_asia >= 5
					var:dubois_zoo_animal_australia >= 5
					var:dubois_zoo_animal_australia >= 5
				}
				NOT = {
					has_modifier = dubois_zoo_extension_modifier
				}
			}
	
			#Effect
			set_variable = dubois_zoo_second_extension
			random_scope_state = {
				limit = {
					has_building = building_dubois_zoo
					is_capital = yes
				}
				activate_production_method = {
					building_type = building_dubois_zoo
					production_method = pm_zoo_level_3
				}
			}
			add_modifier = {
				name = dubois_zoo_extension_modifier
				days = 400
			}
		}
		#Zoo Level 4
		if = {
			limit = {
				NOT = {
					has_variable = dubois_zoo_third_extension
				}
				any_scope_state = {
					is_capital = yes
					any_scope_building = {
						is_building_type = building_dubois_zoo
						level > 0
						NOR = {
							has_active_production_method = pm_zoo_level_4
							has_active_production_method = pm_zoo_level_5
						}
						
					}
				}
				var:dubois_zoo_animal_total >= 30
				NOT = {
					has_modifier = dubois_zoo_extension_modifier
				}
			}
	
			#Effect
			set_variable = dubois_zoo_third_extension
			random_scope_state = {
				limit = {
					has_building = building_dubois_zoo
					is_capital = yes
				}
				activate_production_method = {
					building_type = building_dubois_zoo
					production_method = pm_zoo_level_4
				}
			}
			add_modifier = {
				name = dubois_zoo_extension_modifier
				days = 500
			}
		}
		#Zoo Level 5
		if = {
			limit = {
				NOT = {
					has_variable = dubois_zoo_fourth_extension
				}
				any_scope_state = {
					is_capital = yes
					any_scope_building = {
						is_building_type = building_dubois_zoo
						level > 0
						NOT = {
							has_active_production_method = pm_zoo_level_5
						}
						
					}
				}
				var:dubois_zoo_animal_total >= 40
				NOT = {
					has_modifier = dubois_zoo_extension_modifier
				}
			}
	
			#Effect
			set_variable = dubois_zoo_fourth_extension
			random_scope_state = {
				limit = {
					has_building = building_dubois_zoo
					is_capital = yes
				}
				activate_production_method = {
					building_type = building_dubois_zoo
					production_method = pm_zoo_level_5
				}
			}
			add_modifier = {
				name = dubois_zoo_extension_modifier
				days = 600
			}
		}
	}
}

#Handles Botanical Garden and Specimen Collection for AI
ai_specimen_garden_collection_effect = {
	if = {
		limit = {
			dubois_has_naturalist_no_tooltip_trigger = yes
			any_scope_building = {
				is_building_type = building_dubois_zoo
				level > 0
			}
			var:dubois_specimen >= 50000
			NOT = {
				any_scope_state = {
					is_production_method_active = {
						building_type = building_dubois_zoo
						production_method = pm_botanical_garden
					}
				}
			}
		}

		#Effect
		dubois_add_x_specimen_effect = { AMOUNT = -50000 }
		random_scope_state = {
			limit = {
				has_building = building_dubois_zoo
			}
			activate_production_method = {
				building_type = building_dubois_zoo
				production_method = pm_botanical_garden
			}
		}
	}
	if = {
		limit = {
			dubois_has_naturalist_no_tooltip_trigger = yes
			any_scope_building = {
				is_building_type = building_dubois_zoo
				level > 0
			}
			var:dubois_specimen >= 50000
			NOT = {
				any_scope_state = {
					is_production_method_active = {
						building_type = building_dubois_zoo
						production_method = pm_specimen_collection
					}
				}
			}
		}

		#Effect
		dubois_add_x_specimen_effect = { AMOUNT = -50000 }
		random_scope_state = {
			limit = {
				has_building = building_dubois_zoo
			}
			activate_production_method = {
				building_type = building_dubois_zoo
				production_method = pm_specimen_collection
			}
		}
	}
}

#Handles Animal Breeding for AI
ai_animal_breeding_effect = {
	if = {
		limit = {
			has_technology_researched = dubois_nature_protection_tech
			has_variable = dubois_naturalist_var
			literacy_rate >= 60
			any_scope_building = {
				is_building_type = building_dubois_national_park
				level > 0
			}
			any_scope_building = {
				is_building_type = building_dubois_zoo
				level > 0
			}
			dubois_nature_reserve_breeding_possible_no_tooltip_trigger = yes
		}

		#Effect
		set_variable = dubois_breeding_animals_var
		trigger_event = {
			id = dubois.1301
			popup = yes
		}
	}
}

#Handles the Naturalist for the AI
ai_naturalist_effect = {
	if = { #Checks for Naturalist
		limit = { dubois_has_active_naturalist_no_tooltip = yes }

		#Zoological Expedition
		if = {
			limit = {
				has_technology_researched = dubois_theory_of_evolution_tech
				NOT = {
					has_modifier = dubois_search_local_animal_modifier
				}
				dubois_has_local_animal = yes
			}
			
			#Effect
			add_modifier = {
				name = dubois_search_local_animal_modifier
			}
			hidden_effect = {
				dubois_set_catch_animals = yes
				var:dubois_naturalist_var = {
					add_modifier = {
						name = dubois_animal_hunter_modifier
					}
					set_character_busy_and_immortal = yes
				}
				trigger_event = {
					id = dubois.21
					days = 365
				}
			}
		}
		#Safari Expedition
		if = {
			limit = {
				has_technology_researched = dubois_theory_of_evolution_tech
				has_technology_researched = civilizing_mission
				NOR = {
					has_modifier = dubois_on_safari_modifier
					has_modifier = dubois_had_safari_modifier
				}
				any_scope_state = {
					is_capital = yes
					OR = {
						is_production_method_active = {
							building_type = building_dubois_zoo
							production_method = pm_zoo_level_2
						}
						is_production_method_active = {
							building_type = building_dubois_zoo
							production_method = pm_zoo_level_3
						}
						is_production_method_active = {
							building_type = building_dubois_zoo
							production_method = pm_zoo_level_4
						}
					}
				}
				dubois_safari_possible = yes
			}

			#Effect
			add_modifier = {
				name = dubois_on_safari_modifier
			}
			trigger_event = {
				id = dubois.31
				popup = yes
			}
			hidden_effect = {
				var:dubois_naturalist_var = {
					add_modifier = {
						name = dubois_animal_hunter_modifier
					}
					set_character_busy_and_immortal = yes
				}
			}
		}
		#Botanical Expedition
		if = {
			limit = {
				NOT = {
					has_modifier = dubois_botanical_expedition_modifier
				}
				var:dubois_specimen <= 50000
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
				has_technology_researched = dubois_theory_of_evolution_tech
				has_technology_researched = malaria_prevention
				dubois_botanical_expedition_banned_no_tooltip_trigger = no
				OR = {
					dubois_has_rainforest_no_tooltip = yes
					any_country = {
						has_diplomatic_pact = {
							who = ROOT
							type = botanical_license
						}				
						dubois_has_rainforest_no_tooltip = yes
					}
				}
			}

			#Effect
			trigger_event = { 
				id = dubois.301
				popup = yes 
			}
		}
	}
}

#Handles the Paleontology for the AI
ai_paleontology_yearly_effect = {
	if = { #Checks for paleontological collection
		limit = {
			var:dubois_fossil >= 100
			any_scope_building = {
				is_building_type = building_dubois_zoo
				state = {
					is_capital = yes
				}
				is_under_construction = no
				NOT = {
					has_active_production_method = pm_paleontological_collection
				}
			}
		}
		#Effect
		dubois_add_x_fossils_effect = { AMOUNT = -100 } #removes fossils
		random_scope_building = { #activates production method
			limit = {
				is_building_type = building_dubois_zoo
				state = {
					is_capital = yes
				}
				is_under_construction = no
				NOT = {
					has_active_production_method = pm_paleontological_collection
				}
			}
			state = {
				activate_production_method = {
					building_type = building_dubois_zoo
					production_method = pm_paleontological_collection
				}
			}
		}
	}
	if = {
		limit = {
			has_variable = dubois_paleontologist_var
		}
		
		# Updates the Cost of Paleontology
		remove_modifier = dubois_paleontological_research_modifier
		add_modifier = {
			name = dubois_paleontological_research_modifier
			multiplier = money_amount_multiplier_very_small
		}

		# adds yearly fossils
		dubois_add_x_fossils_effect = { AMOUNT = dubois_yearly_regular_fossils_value }

		# special fossil events
		trigger_event = {
			on_action  = dubois_on_yearly_pulse_special_fossil_events
		}

		# Bone acquisition
		if = {
			limit = { #Only possible if the country can find bones
				dubois_has_potential_dinosaur_bone = yes
			}
			if = {
				limit = {
					NOT = {
						has_variable = dubois_dinosaur_excavation_finding_progress
					}
				}
				set_variable = {
					name = dubois_dinosaur_excavation_finding_progress
					value = dubois_dinosaur_excavation_find_yearly_progress_value
				}
			}
			else = {
				change_variable = {
					name = dubois_dinosaur_excavation_finding_progress
					add = dubois_dinosaur_excavation_find_yearly_progress_value
				}
			}
			if = {
				limit = {
					var:dubois_dinosaur_excavation_finding_progress >= dubois_dinosaur_excavation_finding_progress_goal_value
				}
				change_variable = {
					name = dubois_dinosaur_excavation_finding_progress
					subtract = dubois_dinosaur_excavation_finding_progress_goal_value
				}
				random_list = {
					1 = { #North America
						trigger = {
							dubois_dinosaur_research_in_north_america = yes
							dubois_has_maximum_north_american_dinosaur_bone = no
						}
						set_variable = {
							name = dinosaur_bone_randomizer
							value = { 1 5 }
						}
						change_variable = {
							name = dubois_north_american_dinosaur_bone
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_north_american_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						remove_variable = dinosaur_bone_randomizer
					}
					1 = { #South America
						trigger = {
							dubois_dinosaur_research_in_south_america = yes
							dubois_has_maximum_south_american_dinosaur_bone = no
						}
						set_variable = {
							name = dinosaur_bone_randomizer
							value = { 1 5 }
						}
						change_variable = {
							name = dubois_south_american_dinosaur_bone
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_south_american_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						remove_variable = dinosaur_bone_randomizer
					}
					1 = { #Africa
						trigger = {
							dubois_dinosaur_research_in_africa = yes
							dubois_has_maximum_african_dinosaur_bone = no
						}
						set_variable = {
							name = dinosaur_bone_randomizer
							value = { 1 5 }
						}
						change_variable = {
							name = dubois_african_dinosaur_bone
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_african_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						remove_variable = dinosaur_bone_randomizer
					}
					1 = { #Asia
						trigger = {
							dubois_dinosaur_research_in_asia = yes
							dubois_has_maximum_asian_dinosaur_bone = no
						}
						set_variable = {
							name = dinosaur_bone_randomizer
							value = { 1 5 }
						}
						change_variable = {
							name = dubois_asian_dinosaur_bone
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_asian_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						remove_variable = dinosaur_bone_randomizer
					}
					1 = { #Australia
						trigger = {
							dubois_dinosaur_research_in_australia = yes
							dubois_has_maximum_australian_dinosaur_bone = no
						}
						set_variable = {
							name = dinosaur_bone_randomizer
							value = { 1 5 }
						}
						change_variable = {
							name = dubois_australian_dinosaur_bone
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_australian_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						remove_variable = dinosaur_bone_randomizer
					}
					1 = { #Europe
						trigger = {
							dubois_dinosaur_research_in_europe = yes
							dubois_has_maximum_european_dinosaur_bone = no
						}
						set_variable = {
							name = dinosaur_bone_randomizer
							value = { 1 5 }
						}
						change_variable = {
							name = dubois_european_dinosaur_bone
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_european_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						change_variable = {
							name = dubois_dinosaur_bone_total
							add = var:dinosaur_bone_randomizer
						}
						remove_variable = dinosaur_bone_randomizer
					}
				}
			}
		}

		#Dinosaur Skeletons
		if = { #North America
			limit = {
				var:dubois_north_american_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_ankylosaurus_var
					has_variable = dubois_stegosaurus_var
					has_variable = dubois_diplodocus_var
					has_variable = dubois_triceratops_var
					has_variable = dubois_tyrannosaurus_var
				}
			}
			set_variable = dubois_construct_north_american_dinosaur_var
			dubois_construct_north_american_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
		if = { #South America
			limit = {
				var:dubois_south_american_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_antarctosaurus_var
					has_variable = dubois_argyrosaurus_var
				}
			}
			set_variable = dubois_construct_south_american_dinosaur_var
			dubois_construct_south_american_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
		if = { #Europe
			limit = {
				var:dubois_european_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_iguanodon_var
					has_variable = dubois_plateosaurus_var
				}
			}
			set_variable = dubois_construct_european_dinosaur_var
			dubois_construct_european_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
		if = { #Africa
			limit = {
				var:dubois_african_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_giraffatitan_var
					has_variable = dubois_spinosaurus_var
				}
			}
			set_variable = dubois_construct_african_dinosaur_var
			dubois_construct_african_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
		if = { #Asia
			limit = {
				var:dubois_asian_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_psittacosaurus_var
					has_variable = dubois_velociraptor_var
				}
			}
			set_variable = dubois_construct_asian_dinosaur_var
			dubois_construct_asian_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
		if = { #Australia
			limit = {
				var:dubois_australian_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_muttaburrasaurus_var
					has_variable = dubois_rhoetosaurus_var
				}
			}
			set_variable = dubois_construct_australian_dinosaur_var
			dubois_construct_australian_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
	}
}

#Removes the paleontological modifier if there is no paleontologist
ai_paleontology_monthly_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = dubois_paleontologist_var
			}
			has_modifier = dubois_paleontological_research_modifier
		}
		remove_modifier = dubois_paleontological_research_modifier
	}
}

#Handles the Anthropologist for the AI
ai_anthropologist_effect = {
	#Tests if there is an active anthropologist
	if = {
		limit = { lepsius_has_active_anthropologist_no_tooltip_trigger = yes }
		#Unknown Bone Identification
		if = {
			limit = {
				lepsius_has_unknown_bone_no_tooltip_trigger = yes
			}
			#Effect
			hidden_effect = {
				lepsius_set_fossil_identification_progress = yes
			}
			lepsius_set_anthropologist_busy_effect = yes
			add_journal_entry = {
				type = je_lepsius_fossil_identification
			}
		}
		#Examine Cave
		if = {
			limit = {
				NOT = {
					has_modifier = lepsius_cave_examination_modifier
				}
				any_scope_state = {
					lepsius_has_discovered_cave_no_tooltip_trigger = yes
				}
			}
			#Effect
			add_treasury = -50000
			lepsius_set_anthropologist_busy_effect = yes
			add_modifier = {
				name = lepsius_cave_examination_modifier
			}
			trigger_event = { 
				id = lepsius.1401
				popup = yes 
			}
		}
	}
}

#Handles Congresses for the AI
ai_congresses_effect = {
	#Congresses require Major Power or higher status
	if = {
		limit = { country_rank >= rank_value:major_power }
		#Exodus Congress
		if = {
			limit = {
				NOR = {
					has_global_variable = lepsius_exodus_congress_hosted_var
					any_country = {
						has_modifier = lepsius_congress_host_modifier
					}
				}
				global_var:lepsius_global_artifacts >= 175
				var:lepsius_egyptian_artifact_minor >= 25
				has_technology_researched = lepsius_antiquarianism_tech
				country_has_building_type_levels = {  
					target = bt:building_university  
					value  >= 5
				}
				any_scope_building = {
					is_building_type = building_lepsius_archaeological_museum
				}
				lepsius_has_archaeologist_no_tooltip_trigger = yes
				any_country = {
					lepsius_has_archaeologist_no_tooltip_trigger = yes
					count >= 5
				}
			}

			#Effect
			trigger_event = { 
				id = lepsius.1101
				popup = yes 
			}
			set_global_variable = lepsius_exodus_congress_hosted_var
			add_modifier = {
				name = lepsius_congress_host_modifier
				years = 5
			}
		}
		#Civilization Congress
		if = {
			limit = {
				has_global_variable = lepsius_exodus_congress_hosted_var
				NOR = {
					has_global_variable = lepsius_civilization_congress_hosted_var
					any_country = {
						has_modifier = lepsius_congress_host_modifier
					}
				}
				var:lepsius_mesopotamian_artifact_minor >= 25
				global_var:lepsius_global_artifacts >= 330
				has_technology_researched = lepsius_early_archaeology_tech
				country_has_building_type_levels = {  
					target = bt:building_university  
					value  >= 10
				}
				any_scope_building = {
					is_building_type = building_lepsius_archaeological_museum
				}
				lepsius_has_archaeologist_no_tooltip_trigger = yes
				any_country = {
					has_variable = lepsius_archaeologist_var
					count >= 10
				}
			}

			#Effect
			trigger_event = { 
				id = lepsius.1111
				popup = yes 
			}
			set_global_variable = lepsius_civilization_congress_hosted_var
			add_modifier = {
				name = lepsius_congress_host_modifier
				years = 5
			}
		}
		#Troy Congress
		if = {
			limit = {
				has_global_variable = lepsius_civilization_congress_hosted_var
				has_global_variable = lepsius_support_schliemann_var
				NOR = {
					has_global_variable = lepsius_troy_congress_hosted_var
					any_country = {
						has_modifier = lepsius_congress_host_modifier
					}
				}
				var:lepsius_aegean_artifact_minor >= 25
				global_var:lepsius_global_artifacts >= 550
				has_technology_researched = lepsius_early_archaeology_tech
				country_has_building_type_levels = {  
					target = bt:building_university  
					value  >= 20
				}
				any_scope_building = {
					is_building_type = building_lepsius_archaeological_museum
				}
				lepsius_has_archaeologist_no_tooltip_trigger = yes
				any_country = {
					has_variable = lepsius_archaeologist_var
					count >= 15
				}
			}

			#Effect
			trigger_event = { 
				id = lepsius.1121
				popup = yes 
			}
			set_global_variable = lepsius_troy_congress_hosted_var
			add_modifier = {
				name = lepsius_congress_host_modifier
				years = 5
			}
		}
		#Asteroid Congress
		if = {
			limit = {
				NOR = {
					has_global_variable = verrier_asteroid_congress_hosted_var
					any_country = {
						has_modifier = verrier_congress_host_modifier
					}
				}
				has_global_variable = verrier_neptune_discovered_var
				has_global_variable = verrier_ceres_discovered_global_var
				has_global_variable = verrier_pallas_discovered_global_var
				has_global_variable = verrier_vesta_discovered_global_var
				has_global_variable = verrier_juno_discovered_global_var
				global_var:verrier_total_astronomical_objects >= 1650
				has_technology_researched = verrier_astronomy_tech
				country_has_building_type_levels = {  
					target = bt:building_university  
					value  >= 5
				}
				any_scope_building = {
					is_building_type = building_verrier_observatory
				}
				verrier_has_astronomer_no_tooltip_trigger = yes
			}

			#Effect
			trigger_event = { 
				id = verrier.30
				popup = yes 
			}
			set_global_variable = verrier_asteroid_congress_hosted_var
			add_modifier = {
				name = verrier_congress_host_modifier
				years = 5
			}
		}
		#Carte du Ciel Congress
		if = {
			limit = {
				has_global_variable = verrier_asteroid_congress_hosted_var
				NOR = {
					has_global_variable = verrier_carte_congress_hosted_var
					any_country = {
						has_modifier = verrier_congress_host_modifier
					}
				}
				global_var:verrier_total_astronomical_objects >= 7700
				has_technology_researched = verrier_electromagnetism_tech
				has_technology_researched = camera
				country_has_building_type_levels = {  
					target = bt:building_university  
					value  >= 10
				}
				any_scope_building = {
					is_building_type = building_verrier_observatory
				}
				verrier_has_astronomer_no_tooltip_trigger = yes
			}

			#Effect
			trigger_event = { 
				id = verrier.80
				popup = yes 
			}
			set_global_variable = verrier_carte_congress_hosted_var
			add_modifier = {
				name = verrier_congress_host_modifier
				years = 5
			}
		}
		#Great Debate Congress
		if = {
			limit = {
				has_global_variable = verrier_carte_congress_hosted_var
				NOR = {
					has_global_variable = verrier_debate_congress_hosted_var
					any_country = {
						has_modifier = verrier_congress_host_modifier
					}
				}
				global_var:verrier_total_astronomical_objects >= 13200
				has_technology_researched = verrier_astro_physics_tech
				country_has_building_type_levels = {  
					target = bt:building_university
					value  >= 15
				}
				any_scope_building = {
					is_building_type = building_verrier_observatory
				}
				verrier_has_astronomer_no_tooltip_trigger = yes
			}

			#Effect
			trigger_event = { 
				id = verrier.86
				popup = yes 
			}
			set_global_variable = verrier_debate_congress_hosted_var
			add_modifier = {
				name = verrier_congress_host_modifier
				years = 5
			}
		}
		#TODO: Origin of the Moon Congress
		#Hippocampus Congress
		if = {
			limit = {
				NOR = {
					has_global_variable = dubois_hippocampus_congress_hosted_var
					any_country = {
						has_modifier = dubois_congress_host_modifier
					}
				}
				var:dubois_specimen >= 20000
				global_var:dubois_global_specimen >= 110000
				has_technology_researched = dubois_theory_of_evolution_tech
				country_has_building_type_levels = {  
					target = bt:building_university  
					value  >= 10
				}
				any_scope_building = {
					is_building_type = building_dubois_zoo
				}
				dubois_has_naturalist_no_tooltip_trigger = yes
				any_country = {
					dubois_has_naturalist_no_tooltip_trigger = yes
					count >= 5
				}
			}

			#Effect
			trigger_event = { 
				id = dubois.901
				popup = yes 
			}
			set_global_variable = dubois_hippocampus_congress_hosted_var
			add_modifier = {
				name = dubois_congress_host_modifier
				years = 5
			}
		}
	}
	#Origin Congress
	if = {
		limit = {
			has_global_variable = dubois_hippocampus_congress_hosted_var
			NOR = {
				has_global_variable = dubois_origin_congress_hosted_var
				any_country = {
					has_modifier = dubois_congress_host_modifier
				}
			}
			has_technology_researched = lepsius_anthropology_tech
			has_technology_researched = dubois_genetics_tech
			var:lepsius_total_human_fossil >= 10
			global_var:lepsius_global_human_fossil >= 55
			OR = {
				var:lepsius_neanderthalensis_human_fossil >= 3
				var:lepsius_erectus_human_fossil >= 3
				var:lepsius_australopithecus_human_fossil >= 3
				var:lepsius_paranthropus_human_fossil >= 3
			}
			country_has_building_type_levels = {  
				target = bt:building_university  
				value  >= 25
			}
			any_scope_building = {
				is_building_type = building_dubois_zoo
			}
			lepsius_has_anthropologist_no_tooltip_trigger = yes
			any_country = {
				lepsius_has_anthropologist_no_tooltip_trigger = yes
				count >= 10
			}
		}

		#Effect
		trigger_event = { 
			id = dubois.911
			popup = yes 
		}
		set_global_variable = dubois_origin_congress_hosted_var
		add_modifier = {
			name = dubois_congress_host_modifier
			years = 5
		}
	}
	#Dinosaur Extinction Congress
	if = {
		limit = {
			has_global_variable = dubois_hippocampus_congress_hosted_var
			NOR = {
				has_global_variable = dubois_extinction_congress_hosted_var
				any_country = {
					has_modifier = dubois_congress_host_modifier
				}
			}
			has_technology_researched = dubois_paleontology_tech
			global_var:dubois_global_fossil >= 550
			country_has_building_type_levels = {  
				target = bt:building_university  
				value  >= 20
			}
			any_scope_building = {
				is_building_type = building_dubois_zoo
			}
			dubois_has_paleontologist_no_tooltip_trigger = yes
			any_country = {
				dubois_has_paleontologist_no_tooltip_trigger = yes
				count >= 15
			}
			dubois_has_dinosaur_skeleton_no_tooltip_trigger = yes
			any_country = {
				dubois_has_dinosaur_skeleton_no_tooltip_trigger = yes
				count >= 5
			}
		}

		#Effect
		trigger_event = { 
			id = dubois.921
			popup = yes 
		}
		set_global_variable = dubois_extinction_congress_hosted_var
		add_modifier = {
			name = dubois_congress_host_modifier
			years = 5
		}
	}
	#TODO: Continental Drift Congress
	#TODO: Age of the Earth Congress
}

#Acquire masterwork painting
ai_acquire_masterwork_painting_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = klimt_acquire_masterwork_var
			}
			klimt_has_gallery = yes
			AND = {
				NOT = {
					has_global_variable = elgar_art_nouveau_discovered #AI should not waste Painting Tradition if it has the theoretical option to get Art Nouveau CoA
				}
				var:klimt_painting_tradition_var >= 950
			}
			klimt_can_acquire_masterwork_no_tooltip_trigger = yes
		}
		set_variable = klimt_acquire_masterwork_var
		trigger_event = { 
			id = klimt.110
			popup = yes
		}
	}
}

#Handles Building Construction for the AI
ai_special_building_construction_effect = {
	#Observatory
	if = {
		limit = {
			NOT = {
				owner = {
					any_scope_building = {
						is_building_type = building_verrier_observatory
					}
				}
			}
			owner = {
				OR = {
					AND = {
						OR = {
							has_technology_researched = verrier_astronomy_tech
							verrier_has_astronomer = yes
						}
						any_scope_building = {
							is_building_type = building_university
						}
					}
					has_variable = verrier_allowed_to_build_observatory
				}
			}
		}
		#Effect
		capital = {
			set_variable = ai_observatory_allowed_var
			start_building_construction = building_verrier_observatory
		}
	}
	# Zoo
	if = {
		limit = {
			owner = {
				has_technology_researched = dubois_theory_of_evolution_tech
			}
			NOT = {
				owner = {
					any_scope_building = {
						is_building_type = building_dubois_zoo
					}
				}
			}
			dubois_has_zoo_minimum = yes
		}
		#Effect
		capital = {
			set_variable = ai_zoo_allowed_var
			start_building_construction = building_dubois_zoo
		}
	}
	# Archaeological Museum
	if = {
		limit = {
			owner = {
				has_technology_researched = lepsius_antiquarianism_tech
				NOT = {
					any_scope_building = {
						is_building_type = building_lepsius_archaeological_museum
					}
				}
				lepsius_has_artifacts = yes
			}
		}
		#Effect
		capital = {
			set_variable = ai_museum_allowed_var
			start_building_construction = building_lepsius_archaeological_museum
		}
	}
	# National Library
	if = {
		limit = {
			has_technology_researched = realism
			NOT = {
				owner = {
					any_scope_building = {
						is_building_type = building_manzoni_library
					}
				}
			}
			manzoni_has_books = yes
		}
		#Effect
		capital = {
			set_variable = ai_library_allowed_var
			start_building_construction = building_manzoni_library
		}
	}
	# Gallery
	if = {
		limit = {
			has_technology_researched = realism
			NOT = {
				any_scope_building = {
					is_building_type = building_klimt_gallery
				}
			}
			klimt_painter_has_specialization_no_tooltip_trigger = yes
		}
		#Effect
		capital = {
			set_variable = ai_gallery_allowed_var
			start_building_construction = building_klimt_gallery
		}
	}
}

#Handles the promotion of Artists
ai_promote_artists_effect = {
	if = {
		limit = {
			any_scope_building = {
				is_building_type = building_arts_academy
			}
		}
		random_list = {
			10 = { #Composer
				#Effect
				set_variable = artists_promote_composer_active_var
				set_variable = artists_promotion_active
	
				#Trigger
				trigger = {
					elgar_has_composer_no_tooltip_trigger = no #Put this as a trigger instead of a modifier
					NOR = {
						has_variable = artists_promote_composer_active_var
						has_variable = artists_promotion_active
					}
					any_scope_building = {
						is_building_type = building_arts_academy
						has_active_production_method = pm_artists_arts_academy_conservatory
					}
				}
	
				#Modifier
				modifier = {
					if = {
						limit = {
							OR = { #Cultures that are more probable to promote Composers
								country_has_primary_culture = cu:north_italian
								country_has_primary_culture = cu:south_italian
								country_has_primary_culture = cu:russian
								country_has_primary_culture = cu:south_german
							}
						}
						add = 5 #If the AI has a Composer already, it will not try to get another one.
					}
				}
			}
			10 = { #Writer
				#Effect
				set_variable = artists_promote_writer_active_var
				set_variable = artists_promotion_active
	
				#Trigger
				trigger = {
					OR = {
						manzoni_has_writer_no_tooltip = no  #Put this as a trigger instead of a modifier
						AND = { #Can also promote writers if already has the other artists
							elgar_has_composer_no_tooltip_trigger = yes
							klimt_has_painter_no_tooltip = yes
						}
					}
					NOR = {
						has_variable = artists_promote_writer_active_var
						has_variable = artists_promotion_active
					}
					any_scope_building = {
						is_building_type = building_arts_academy
						has_active_production_method = pm_artists_arts_academy_salon
					}
				}
	
				#Modifier
				modifier = {
					if = {
						limit = {
							OR = { #Cultures that are more probable to promote Writers
								country_has_primary_culture = cu:yankee
								country_has_primary_culture = cu:dixie
								country_has_primary_culture = cu:british
								country_has_primary_culture = cu:north_german
							}
						}
						add = 5 #If the AI has a Composer already, it will not try to get another one.
					}
				}
			}
			10 = { #Painter
				#Effect
				set_variable = artists_promote_painter_active_var
				set_variable = artists_promotion_active
	
				#Trigger
				trigger = {
					klimt_has_painter_no_tooltip = no  #Put this as a trigger instead of a modifier
					NOR = {
						has_variable = artists_promote_painter_active_var
						has_variable = artists_promotion_active
					}
					any_scope_building = {
						is_building_type = building_arts_academy
						has_active_production_method = pm_artists_arts_academy_studio
					}
				}
	
				#Modifier
				modifier = {
					if = {
						limit = {
							OR = { #Cultures that are more probable to promote Painters
								country_has_primary_culture = cu:french
								country_has_primary_culture = cu:spanish
							}
						}
						add = 5 #If the AI has a Composer already, it will not try to get another one.
					}
				}
			}
		}
	}
}

#Handles the Patron of the Arts for the AI
ai_patron_of_arts_effect = {
	#Adds Patron of the Arts
	if = {
		limit = {
			NOT = {
				has_modifier = artists_patron_of_the_arts_modifier
			}
			any_scope_building = {
				OR = {
					is_building_type = building_arts_academy
					is_building_type = building_elgar_opera
				}
			}
			weekly_net_fixed_income > money_amount_multiplier_small
			gold_reserves > 0
		}

		#Effect
		set_variable = {
            name = patron_of_the_arts_cooldown_var
            months = 12
        }
        if = {
			limit = {
				has_modifier = artists_patron_of_the_arts_modifier
			}
			remove_modifier = artists_patron_of_the_arts_modifier
		}
		add_modifier = {
			name = artists_patron_of_the_arts_modifier
			multiplier = money_amount_multiplier_small
		}
	}
	#Removes Patron of the Arts
	if = {
		limit = {
			has_modifier = artists_patron_of_the_arts_modifier
			NOT = {
				has_variable = patron_of_the_arts_cooldown_var
			}
			weekly_net_fixed_income < money_amount_multiplier_small
			gold_reserves < 0
		}

		#Effect
		remove_modifier = artists_patron_of_the_arts_modifier
	}
}

#Handles the activation of the Composer for the AI
ai_composer_activation_effect = {
	if = {
		limit = {
			elgar_has_active_composer_no_tooltip_trigger = yes
			NOR = {
				has_modifier = elgar_conductor_exhausted_modifier
				has_variable = elgar_visiting_opera_var
			}
		}

		#Effect
		set_variable = elgar_visiting_opera_var
		trigger_event = { #The rest is handled in this event
			id = elgar.30
			popup = yes
		}
	}
}

#Handles the Elgar Monuments for the AI
ai_elgar_monuments_effect = {
	#Mozart Monument
	if = {
		limit = {
			NOT = { has_global_variable = elgar_mozart_monument_var }
			has_technology_researched = romanticism
			s:STATE_TYROL = {
				any_scope_state = {
					owner = root
				}
			}
			var:elgar_music_tradition >= 50
		}

		#Effect
		trigger_event = { 
			id = elgar.111
			popup = yes
		}
		set_global_variable = elgar_mozart_monument_var
	}
	if = {
		limit = {
			NOT = { has_global_variable = elgar_beethoven_monument_var }
			has_variable = elgar_beethoven_sponsor_var
			has_technology_researched = elgar_irrationalism_tech
			var:elgar_music_tradition >= 100
			s:STATE_NORTH_RHINE = {
				any_scope_state = {
					owner = root
				}
			}
		}

		#Effect
		trigger_event = { 
			id = elgar.102
			popup = yes
		}
		set_global_variable = elgar_beethoven_monument_var
	}
}

#Handles the Musikverein for the AI
ai_musikverein_effect = {
	if = {
		limit = {
			NOT = { has_global_variable = elgar_musikverein_var }
			has_technology_researched = nationalism
			has_technology_researched = elgar_irrationalism_tech
			var:elgar_music_tradition >= 250
			elgar_has_great_composer_no_tooltip_trigger = yes
			OR = {
				country_has_primary_culture = cu:south_german
				country_has_primary_culture = cu:north_german
				country_has_primary_culture = cu:united_german
				country_has_primary_culture = cu:alemannic
				country_has_primary_culture = cu:united_swiss
			}
		}

		#Effect
		add_modifier = {
			name = elgar_founded_musikverein_modifier
		}
		trigger_event = { 
			id = elgar.121
			popup = yes
		}
		set_global_variable = elgar_musikverein_var
	}
}

#Handles the NBC for the AI
ai_nbc_effect = {
	#Found NBC
	if = {
		limit = {
			NOT = { has_variable = elgar_nbc_var }
			has_technology_researched = radio
			has_technology_researched = elgar_mass_culture_tech
			NOR = {
				has_law = law_type:law_laissez_faire
				has_law = law_type:law_anarchy
			}
			any_scope_state = {
				any_scope_building = {
					is_building_type = building_railway
					has_active_production_method = pm_elgar_radio_stations
				}
				percent >= 0.35
			}
		}

		#Effect
		set_variable = elgar_nbc_var
		trigger_event = {
			id = elgar.40
			popup = yes
		}
	}
	#NBC Licence
	if = {
		limit = {
			has_variable = elgar_nbc_var
			has_technology_researched = radio
			has_technology_researched = political_agitation
			has_technology_researched = elgar_mass_culture_tech
			NOR = {
				has_variable = elgar_nbc_decision_taken
				has_modifier = elgar_nbc_news_modifier
				has_modifier = elgar_nbc_education_modifier
				has_modifier = elgar_nbc_government_modifier
				has_modifier = elgar_nbc_monarch_modifier
				has_modifier = elgar_nbc_propaganda_modifier
				has_law = law_type:law_laissez_faire
				has_law = law_type:law_anarchy
			}
			any_scope_building = {
				is_building_type = building_railway
				has_active_production_method = pm_elgar_radio_stations
			}
		}

		#Effect
		trigger_event = {
			id = elgar.40
			popup = yes
		}
		set_variable = elgar_nbc_decision_taken
	}
}

#Handles the Writer for the AI
ai_writer_effects = {
	if = { #First checks for an active Writer
		limit = { manzoni_has_active_writer_no_tooltip_trigger = yes }
		# Newspaper Novel
		if = {
			limit = {
				has_technology_researched = realism
				var:manzoni_writer_var ?= {
					has_trait = manzoni_writer_fiction
				}
				NOR = {
					var:manzoni_writer_var ?= {
						has_variable = manzoni_newspaper_novel_var
					}
					has_modifier = manzoni_newspaper_novel_scandal_modifier
				}
				any_scope_building = {
					is_building_type = building_manzoni_publishing_industry
					is_under_construction = no
					cash_reserves_ratio > 0.5
					occupancy >= 0.75
				}
			}

			#Effect
			var:manzoni_writer_var = {
				set_character_busy_and_immortal = yes
			}
			add_journal_entry = {
				type = pbi_je_objective_bestseller
			}
			random_scope_state = {
				limit = {
					has_building = building_manzoni_publishing_industry
				}
				set_variable = pbi_flag_bestseller_target
			}
		}
		#Reading Tour
		if = {
			limit = {
				NOR = {
					var:manzoni_writer_var ?= {
						has_variable = manzoni_reading_tour_var
					}
					has_modifier = manzoni_writer_on_tour_modifier
				}
				var:manzoni_writer_var ?= {
					OR = {
						has_trait = manzoni_writer_fiction
						has_trait = manzoni_writer_poet
						has_trait = manzoni_universal_writer
					}
				}
				any_country = {
					NOT = {
						is_country_type = decentralized
					}
					manzoni_writer_meets_foreign_taste_trigger = yes
				}
			}
			
			#Effect
			var:manzoni_writer_var = {
				set_character_busy_and_immortal = yes
			}
			add_modifier = {
				name = manzoni_writer_on_tour_modifier
			}
			trigger_event = {
				id = manzoni.331
				popup = yes
			}
		}
	}
}

#Handles the Painter Trip for the AI
ai_painter_trip_effect = {
	if = {
		limit = {
			NOT = { has_variable = klimt_trip_destination_var }
			klimt_has_active_painter_no_tooltip_trigger = yes
			klimt_painter_trip_possible_no_tooltip_trigger = yes
		}

		#Effect
		set_variable = klimt_trip_destination_var
		trigger_event = { 
			id = klimt.401
			popup = yes
		}
	}
}

#Handles the Vernissage for the AI
ai_painter_vernissage_effect = {
	if = {
		limit = {
			klimt_has_active_painter_no_tooltip_trigger = yes
			any_scope_building = {
				has_active_production_method = pm_artists_arts_academy_studio
			}
			klimt_vernissage_possible_no_tooltip_trigger = yes
		}

		#Effect
		trigger_event = { 
			id = klimt.40
			popup = yes
		}
	}
}


