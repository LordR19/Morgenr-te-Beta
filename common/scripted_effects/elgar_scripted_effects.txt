##########################
# ELGAR SCRIPTED EFFECTS #
##########################

#by Marco Dandolo

#############################

#Technology Add

#Small Add

elgar_small_add_technology = {
	if = {
		limit = {
			can_research = elgar_classicism_tech
		}
		add_technology_progress = { progress = 1500 technology = elgar_classicism_tech }
	}
	else_if = {
		limit = {
			can_research = romanticism
		}
		add_technology_progress = { progress = 1500 technology = romanticism }
	}
	else_if = {
		limit = {
			can_research = realism
		}
		add_technology_progress = { progress = 1500 technology = realism }
	}
	else_if = {
		limit = {
			can_research = elgar_irrationalism_tech
		}
		add_technology_progress = { progress = 1500 technology = elgar_irrationalism_tech }
	}
	else_if = {
		limit = {
			can_research = camera
		}
		add_technology_progress = { progress = 3000 technology = camera }
	}
	else_if = {
		limit = {
			can_research = film
		}
		add_technology_progress = { progress = 3000 technology = civilizing_mission }
	}
	else_if = {
		limit = {
			can_research = elgar_art_deco_tech
		}
		add_technology_progress = { progress = 3000 technology = elgar_art_deco_tech }
	}
	else_if = {
		limit = {
			can_research = elgar_neoclassicism_tech
		}
		add_technology_progress = { progress = 3000 technology = elgar_neoclassicism_tech }
	}
	else_if = {
		limit = {
			can_research = elgar_new_objectivity_tech
		}
		add_technology_progress = { progress = 3000 technology = elgar_new_objectivity_tech }
	}
	else_if = {
		limit = {
			can_research = organized_sports
		}
		add_technology_progress = { progress = 3000 technology = organized_sports }
	}
	else_if = {
		limit = {
			can_research = elgar_mass_culture_tech
		}
		add_technology_progress = { progress = 5500 technology = elgar_mass_culture_tech }
	}
	else = {
		#TODO add an effect
	}
}

#Medium Add

elgar_medium_add_technology = {
	if = {
		limit = {
			can_research = elgar_classicism_tech
		}
		add_technology_progress = { progress = 3500 technology = elgar_classicism_tech }
	}
	else_if = {
		limit = {
			can_research = romanticism
		}
		add_technology_progress = { progress = 3500 technology = romanticism }
	}
	else_if = {
		limit = {
			can_research = realism
		}
		add_technology_progress = { progress = 3500 technology = realism }
	}
	else_if = {
		limit = {
			can_research = elgar_irrationalism_tech
		}
		add_technology_progress = { progress = 3500 technology = elgar_irrationalism_tech }
	}
	else_if = {
		limit = {
			can_research = camera
		}
		add_technology_progress = { progress = 5500 technology = camera }
	}
	else_if = {
		limit = {
			can_research = film
		}
		add_technology_progress = { progress = 5500 technology = civilizing_mission }
	}
	else_if = {
		limit = {
			can_research = elgar_art_deco_tech
		}
		add_technology_progress = { progress = 5500 technology = elgar_art_deco_tech }
	}
	else_if = {
		limit = {
			can_research = elgar_neoclassicism_tech
		}
		add_technology_progress = { progress = 5500 technology = elgar_neoclassicism_tech }
	}
	else_if = {
		limit = {
			can_research = elgar_new_objectivity_tech
		}
		add_technology_progress = { progress = 5500 technology = elgar_new_objectivity_tech }
	}
	else_if = {
		limit = {
			can_research = organized_sports
		}
		add_technology_progress = { progress = 5500 technology = organized_sports }
	}
	else_if = {
		limit = {
			can_research = elgar_mass_culture_tech
		}
		add_technology_progress = { progress = 9000 technology = elgar_mass_culture_tech }
	}
	else = {
		#TODO add an effect
	}
}

#Medium Add

elgar_large_add_technology = {
	if = {
		limit = {
			can_research = elgar_classicism_tech
		}
		add_technology_progress = { progress = 6000 technology = elgar_classicism_tech }
	}
	else_if = {
		limit = {
			can_research = romanticism
		}
		add_technology_progress = { progress = 6000 technology = romanticism }
	}
	else_if = {
		limit = {
			can_research = realism
		}
		add_technology_progress = { progress = 6000 technology = realism }
	}
	else_if = {
		limit = {
			can_research = elgar_irrationalism_tech
		}
		add_technology_progress = { progress = 6000 technology = elgar_irrationalism_tech }
	}
	else_if = {
		limit = {
			can_research = camera
		}
		add_technology_progress = { progress = 9000 technology = camera }
	}
	else_if = {
		limit = {
			can_research = film
		}
		add_technology_progress = { progress = 9000 technology = civilizing_mission }
	}
	else_if = {
		limit = {
			can_research = elgar_art_deco_tech
		}
		add_technology_progress = { progress = 9000 technology = elgar_art_deco_tech }
	}
	else_if = {
		limit = {
			can_research = elgar_neoclassicism_tech
		}
		add_technology_progress = { progress = 9000 technology = elgar_neoclassicism_tech }
	}
	else_if = {
		limit = {
			can_research = elgar_new_objectivity_tech
		}
		add_technology_progress = { progress = 9000 technology = elgar_new_objectivity_tech }
	}
	else_if = {
		limit = {
			can_research = organized_sports
		}
		add_technology_progress = { progress = 9000 technology = organized_sports }
	}
	else_if = {
		limit = {
			can_research = elgar_mass_culture_tech
		}
		add_technology_progress = { progress = 15000 technology = elgar_mass_culture_tech }
	}
	else = {
		#TODO add an effect
	}
}

#######################################################################################

###Tour###

#Donizetti

elgar_donizetti_tournee_italy = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:south_italian
				country_has_primary_culture = cu:north_italian
				country_has_primary_culture = cu:united_italian
				country_has_primary_culture = cu:corsican
				country_has_primary_culture = cu:alemannic
				country_has_primary_culture = cu:united_swiss
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_donizetti_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1011
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_donizetti_tournee_grand_tour = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:south_italian
				country_has_primary_culture = cu:north_italian
				country_has_primary_culture = cu:united_italian
				country_has_primary_culture = cu:corsican
				country_has_primary_culture = cu:alemannic
				country_has_primary_culture = cu:united_swiss
				country_has_primary_culture = cu:french
				country_has_primary_culture = cu:wallonian
				country_has_primary_culture = cu:flemish
				country_has_primary_culture = cu:dutch
				country_has_primary_culture = cu:south_german
				country_has_primary_culture = cu:united_german
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_donizetti_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1011
			popup = yes
			days = { 10 30 }
		}
	}
}

#Berlioz

elgar_berlioz_tournee_north_germany = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:north_german
				country_has_primary_culture = cu:wallonian
				country_has_primary_culture = cu:flemish
				country_has_primary_culture = cu:dutch
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_berlioz_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1111
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_berlioz_tournee_south_germany = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:south_german
				country_has_primary_culture = cu:united_german
				country_has_primary_culture = cu:alemannic
				country_has_primary_culture = cu:united_swiss
				country_has_primary_culture = cu:hungarian
				country_has_primary_culture = cu:czech
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_berlioz_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1111
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_berlioz_tournee_britain = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:british
				country_has_primary_culture = cu:irish
				country_has_primary_culture = cu:scottish
				country_has_primary_culture = cu:welsh
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_berlioz_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1111
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_berlioz_tournee_russia = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:russian
				country_has_primary_culture = cu:byelorussian
				country_has_primary_culture = cu:ukrainian
				country_has_primary_culture = cu:estonian
				country_has_primary_culture = cu:latvian
				country_has_primary_culture = cu:lithuanian
				country_has_primary_culture = cu:polish
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_berlioz_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1111
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_berlioz_tournee_spain = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:catalan
				country_has_primary_culture = cu:basque
				country_has_primary_culture = cu:spanish
				country_has_primary_culture = cu:portuguese
				country_has_primary_culture = cu:galician
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_berlioz_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1111
			popup = yes
			days = { 10 30 }
		}
	}
}

#Liszt

elgar_liszt_tournee_italy = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:south_italian
				country_has_primary_culture = cu:north_italian
				country_has_primary_culture = cu:united_italian
				country_has_primary_culture = cu:corsican
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_liszt_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1211
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_liszt_tournee_germany = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:south_german
				country_has_primary_culture = cu:north_german
				country_has_primary_culture = cu:alemannic
				country_has_primary_culture = cu:united_swiss
				country_has_primary_culture = cu:united_german
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_liszt_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1211
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_liszt_tournee_western_europe = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:french
				country_has_primary_culture = cu:wallonian
				country_has_primary_culture = cu:flemish
				country_has_primary_culture = cu:dutch
				country_has_primary_culture = cu:british
				country_has_primary_culture = cu:irish
				country_has_primary_culture = cu:scottish
				country_has_primary_culture = cu:welsh
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_liszt_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1211
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_liszt_tournee_eastern_europe = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:russian
				country_has_primary_culture = cu:byelorussian
				country_has_primary_culture = cu:ukrainian
				country_has_primary_culture = cu:estonian
				country_has_primary_culture = cu:latvian
				country_has_primary_culture = cu:lithuanian
				country_has_primary_culture = cu:polish
				ROOT = c:TUR
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_liszt_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1211
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_liszt_tournee_spain = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:catalan
				country_has_primary_culture = cu:basque
				country_has_primary_culture = cu:spanish
				country_has_primary_culture = cu:portuguese
				country_has_primary_culture = cu:galician
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_liszt_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1211
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_liszt_tournee_grand_tour = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:french
				country_has_primary_culture = cu:wallonian
				country_has_primary_culture = cu:flemish
				country_has_primary_culture = cu:south_german
				country_has_primary_culture = cu:united_german
				country_has_primary_culture = cu:alemannic
				country_has_primary_culture = cu:united_swiss
				country_has_primary_culture = cu:north_italian
				country_has_primary_culture = cu:south_italian
				country_has_primary_culture = cu:united_italian
				country_has_primary_culture = cu:hungarian
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_liszt_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1211
			popup = yes
			days = { 10 30 }
		}
	}
}

#Wagner

elgar_wagner_tournee = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:french
				country_has_primary_culture = cu:north_german
				country_has_primary_culture = cu:south_german
				country_has_primary_culture = cu:united_german
				country_has_primary_culture = cu:alemannic
				country_has_primary_culture = cu:united_swiss
				country_has_primary_culture = cu:north_italian
				country_has_primary_culture = cu:united_italian
				country_has_primary_culture = cu:russian
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_wagner_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1311
			popup = yes
			days = { 10 30 }
		}
	}
}

#Grieg

elgar_grieg_tournee_scandinavia = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:danish
				country_has_primary_culture = cu:swedish
				country_has_primary_culture = cu:norwegian
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_grieg_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1411
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_grieg_tournee_northern_europe = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:danish
				country_has_primary_culture = cu:swedish
				country_has_primary_culture = cu:norwegian
				country_has_primary_culture = cu:north_german
				country_has_primary_culture = cu:south_german
				country_has_primary_culture = cu:united_german
				country_has_primary_culture = cu:russian
				country_has_primary_culture = cu:polish
				country_has_primary_culture = cu:czech
				country_has_primary_culture = cu:wallonian
				country_has_primary_culture = cu:flemish
				country_has_primary_culture = cu:dutch
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_grieg_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1411
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_grieg_tournee_western_europe = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:danish
				country_has_primary_culture = cu:swedish
				country_has_primary_culture = cu:norwegian
				country_has_primary_culture = cu:north_german
				country_has_primary_culture = cu:south_german
				country_has_primary_culture = cu:united_german
				country_has_primary_culture = cu:south_italian
				country_has_primary_culture = cu:north_italian
				country_has_primary_culture = cu:united_italian
				country_has_primary_culture = cu:alemannic
				country_has_primary_culture = cu:united_swiss
				country_has_primary_culture = cu:french
				country_has_primary_culture = cu:british
				country_has_primary_culture = cu:irish
				country_has_primary_culture = cu:scottish
				country_has_primary_culture = cu:welsh
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_grieg_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1411
			popup = yes
			days = { 10 30 }
		}
	}
}

#Brahms

elgar_brahms_tournee = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:north_german
				country_has_primary_culture = cu:south_german
				country_has_primary_culture = cu:united_german
				country_has_primary_culture = cu:alemannic
				country_has_primary_culture = cu:united_swiss
				country_has_primary_culture = cu:czech
				country_has_primary_culture = cu:danish
				country_has_primary_culture = cu:dutch
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_brahms_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1511
			popup = yes
			days = { 10 30 }
		}
	}
}

#Delius

elgar_delius_tournee = {
	random_country = {
		limit = {
			OR = {
				country_has_primary_culture = cu:north_german
				country_has_primary_culture = cu:alemannic
				country_has_primary_culture = cu:united_swiss
				country_has_primary_culture = cu:british
				country_has_primary_culture = cu:french
				country_has_primary_culture = cu:wallonian
				country_has_primary_culture = cu:norwegian
				country_has_primary_culture = cu:danish
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_delius_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1611
			popup = yes
			days = { 10 30 }
		}
	}
}

#Mahler

elgar_mahler_europe_tournee = {
	random_country = {
		limit = {
			any_scope_building = {
				is_building_type = building_elgar_opera
				level >= 5
			}
			OR = {
				has_technology_researched = elgar_art_nouveau_tech
				has_technology_researched = elgar_impressionism_tech
				has_technology_researched = elgar_expressionism_tech
			}
			any_scope_state = {
				is_capital = yes
				OR = {
					region = sr:region_england
					region = sr:region_iberia
					region = sr:region_france
					region = sr:region_rhine
					region = sr:region_italy
					region = sr:region_north_germany
					region = sr:region_south_germany
					region = sr:region_baltic
					region = sr:region_poland
					region = sr:region_russia
				}
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_mahler_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1711
			popup = yes
			days = { 10 30 }
		}
	}
}

elgar_mahler_world_tournee = {
	random_country = {
		limit = {
			any_scope_building = {
				is_building_type = building_elgar_opera
				level >= 8
			}
			OR = {
				has_technology_researched = elgar_art_nouveau_tech
				has_technology_researched = elgar_impressionism_tech
				has_technology_researched = elgar_expressionism_tech
			}
			any_scope_state = {
				is_capital = yes
				OR = {
					region = sr:region_england
					region = sr:region_north_sea_coast
					region = sr:region_iberia
					region = sr:region_france
					region = sr:region_occitania
					region = sr:region_rhine
					region = sr:region_italy
					region = sr:region_balkans
					region = sr:region_north_germany
					region = sr:region_south_germany
					region = sr:region_baltic
					region = sr:region_danubia
					region = sr:region_poland
					region = sr:region_russia
					region = sr:region_dnieper
					region = sr:region_canada
					region = sr:region_new_england
					region = sr:region_pacific_coast
					region = sr:region_great_plains
					region = sr:region_the_midwest
					region = sr:region_dixie
				}
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_mahler_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1711
			popup = yes
			days = { 10 30 }
		}
	}
}

#Rachmaninoff

elgar_rachmaninov_tournee = {
	random_country = {
		limit = {
			any_scope_building = {
				is_building_type = building_elgar_opera
				level >= 10
			}
			OR = {
				has_technology_researched = elgar_art_deco_tech
				has_technology_researched = elgar_neoclassicism_tech
				has_technology_researched = elgar_new_objectivity_tech
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_rachmaninov_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1811
			popup = yes
			days = { 10 30 }
		}
	}
}

#Prokofiev

elgar_prokofiev_tournee = {
	random_country = {
		limit = {
			any_scope_building = {
				is_building_type = building_elgar_opera
				level >= 10
			}
			OR = {
				has_technology_researched = elgar_art_deco_tech
				has_technology_researched = elgar_neoclassicism_tech
				has_technology_researched = elgar_new_objectivity_tech
			}
			NOT = {
				any_scope_state = {
					has_modifier = elgar_prokofiev_was_here_modifier
				}
			}
		}
		trigger_event = {
			id = elgar.1911
			popup = yes
			days = { 10 30 }
		}
	}
}

#############################

###Composer Lotto###

elgar_composer_lotto_1 = {

	if = {
		limit = {
			elgar_has_great_composer = yes
		}
		trigger_event = {
			id = elgar.321 #Elgar 321: Great Composer meet
			days = { 2 3 }
		}
	}
	random_list = {
		3 = { 
			trigger_event = {
				id = elgar.301 #Elgar 301: Good rehearsals
				days = { 5 7 }
			}
		}
		2 = { 
			trigger_event = {
				id = elgar.302 #Elgar 302: Mediocre rehearsals
				days = { 5 7 }
			}
		}
		
		1 = { 
			trigger_event = {
				id = elgar.305 #Elgar 305: Sold out!
				days = { 5 7 }
			}
		}
		3 = { 
			trigger_event = {
				id = elgar.307 #Elgar 307: Musical friendship
				days = { 5 7 }
			}
		}
		2 = { 
			trigger_event = {
				id = elgar.308 #Elgar 308: Musical rivalry
				days = { 5 7 }
			}
		}
		2 = { 
			trigger_event = {
				id = elgar.309 #Elgar 309: Inspirations
				days = { 5 7 }
			}
		}
		2 = { 
			trigger_event = {
				id = elgar.310 #Elgar 310: Mania
				days = { 5 7 }
			}
		}
		2 = { 
			trigger_event = {
				id = elgar.311 #Elgar 311: Music brings people together
				days = { 5 7 }
			}
		}
		2 = { 
			trigger_event = {
				id = elgar.314 #Elgar 314: No inspiration
				days = { 5 7 }
			}
		}
		2 = { 
			trigger_event = {
				id = elgar.315 #Elgar 315: A private concert
				days = { 5 7 }
			}
		}
	}
}

elgar_composer_lotto_2 = {
	random_list = {
		2 = { 
			trigger_event = {
				id = elgar.303 #Elgar 303: An amorous dedication
				days = { 12 14 }
			}
		}
		2 = { 
			trigger_event = {
				id = elgar.304 #Elgar 304: An evening reception (Monarchy)
				days = { 12 14 }
			}
		}
		1 = { 
			trigger_event = {
				id = elgar.306 #Elgar 306: Surprising premiere
				days = { 12 14 }
			}
		}
		1 = { 
			trigger_event = {
				id = elgar.312 #Elgar 312: Assassination attempt at the Opera!
				days = { 12 14 }
			}
		}
		1 = { 
			trigger_event = {
				id = elgar.313 #Elgar 313: A minor work
				days = { 12 14 }
			}
		}
	}
}

elgar_composer_lotto_3 = {
	random_list = {
		1 = { 
			trigger_event = {
				id = elgar.317 #Elgar 317: Musical desaster
				days = { 30 40 }
			}
		}
		1 = { 
			trigger_event = {
				id = elgar.318 #Elgar 318: Scandal concert
				days = { 30 40 }
			}
		}
		1 = { 
			trigger_event = {
				id = elgar.319 #Elgar 319: Zeitgeist
				days = { 30 40 }
			}
		}
		1 = { 
			trigger_event = {
				id = elgar.320 #Elgar 320: Propaganda
				days = { 30 40 }
			}
		}
	}
}

#############################

###Music tradition###

#Effect to add $AMOUNT$ Music Tradition
elgar_add_x_music_tradition_effect = {
	# Amount = amount of music tradition to add
	if = { #This changes the Amount depending on the power rank.
		limit = { country_rank = rank_value:great_power }
		save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
			name = music_tradition_amount
			value = { #This is the way to calculate with temporary_scope_values. It is quite useful
				value = $AMOUNT$
				multiply = 0.5
				round = yes
			}
		}
	}
	else_if = {
		limit = { country_rank = rank_value:major_power }
		save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
			name = music_tradition_amount
			value = { #This is the way to calculate with temporary_scope_values. It is quite useful
				value = $AMOUNT$
				multiply = 0.75
				round = yes
			}
		}
	}
	else = { #In case that you are below major power you get all of the musical tradition
		save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
			name = music_tradition_amount
			value = $AMOUNT$
		}
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = elgar_add_x_music_tradition_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = elgar_add_x_music_tradition_tradition_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = elgar_add_x_music_tradition_plus_x_tt
	}

	#Yearly Music Tradition can be used for a report, they are added with each normal Music Tradition
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = elgar_yearly_music_tradition_var
			}
		}
		set_variable = {
			name = elgar_yearly_music_tradition_var
			value = 0
		}
	}
	change_variable = {
		name = elgar_yearly_music_tradition_var
		add = scope:music_tradition_amount
	}
	change_global_variable = {
		name = elgar_global_music_tradition_var
		add = scope:music_tradition_amount
	}

	#This part adds the AMOUNT of Music Tradition
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = elgar_music_tradition
			}
		}
		set_variable = {
			name = elgar_music_tradition
			value = 0
		}
	}
	change_variable = {
		name = elgar_music_tradition
		add = scope:music_tradition_amount
	}

	#elgar_composer_total_music_tradition_var is used to keep track of all the Music Tradition that a specific Writer created.
	#It is used to show how successful the Writer is.
	#Every time a normal Music Tradition Point is added, the same number gets added here.
	if = {
		limit = { #Only works if there actually is a Writer
			has_variable = elgar_composer_var
		}
		var:elgar_composer_var = {
			if = { #Fallback if the variable does not exist yet
				limit = {
					NOT = {
						has_variable = elgar_composer_total_music_tradition_var
					}
				}
				set_variable = {
					name = elgar_composer_total_music_tradition_var
					value = 0
				}
			}
			change_variable = { #The amount of Musical Tradition that this Composer discovered
				name = elgar_composer_total_music_tradition_var
				add = scope:music_tradition_amount
			}
		}
	}
}

#Effect to add $AMOUNT$ Music Tradition
elgar_add_x_music_tradition_unscaled_effect = {
	# Amount = amount of music tradition to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = music_tradition_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = elgar_add_x_music_tradition_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = elgar_add_x_music_tradition_tradition_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = elgar_add_x_music_tradition_plus_x_tt
	}

	#Yearly Music Tradition can be used for a report, they are added with each normal Music Tradition
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = elgar_yearly_music_tradition_var
			}
		}
		set_variable = {
			name = elgar_yearly_music_tradition_var
			value = 0
		}
	}
	change_variable = {
		name = elgar_yearly_music_tradition_var
		add = scope:music_tradition_amount
	}
	change_global_variable = {
		name = elgar_global_music_tradition_var
		add = scope:music_tradition_amount
	}

	#This part adds the AMOUNT of Music Tradition
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = elgar_music_tradition
			}
		}
		set_variable = {
			name = elgar_music_tradition
			value = 0
		}
	}
	change_variable = {
		name = elgar_music_tradition
		add = scope:music_tradition_amount
	}

	#elgar_composer_total_music_tradition_var is used to keep track of all the Music Tradition that a specific Writer created.
	#It is used to show how successful the Writer is.
	#Every time a normal Music Tradition Point is added, the same number gets added here.
	if = {
		limit = { #Only works if there actually is a Writer
			has_variable = elgar_composer_var
		}
		var:elgar_composer_var = {
			if = { #Fallback if the variable does not exist yet
				limit = {
					NOT = {
						has_variable = elgar_composer_total_music_tradition_var
					}
				}
				set_variable = {
					name = elgar_composer_total_music_tradition_var
					value = 0
				}
			}
			change_variable = { #The amount of Musical Tradition that this Composer discovered
				name = elgar_composer_total_music_tradition_var
				add = scope:music_tradition_amount
			}
		}
	}
}

elgar_add_1_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 1
	}
	custom_tooltip = elgar_add_1_music_tradition_tt
}

elgar_add_2_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 2
	}
	custom_tooltip = elgar_add_2_music_tradition_tt
}

elgar_add_3_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 3
	}
	custom_tooltip = elgar_add_3_music_tradition_tt
}

elgar_add_4_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 4
	}
	custom_tooltip = elgar_add_4_music_tradition_tt
}

elgar_add_5_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 5
	}
	custom_tooltip = elgar_add_5_music_tradition_tt
}

elgar_add_6_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 6
	}
	custom_tooltip = elgar_add_6_music_tradition_tt
}

elgar_add_10_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 10
	}
	custom_tooltip = elgar_add_10_music_tradition_tt
}

elgar_add_15_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 15
	}
	custom_tooltip = elgar_add_15_music_tradition_tt
}

elgar_add_25_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 25
	}
	custom_tooltip = elgar_add_25_music_tradition_tt
}

elgar_add_50_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 50
	}
	custom_tooltip = elgar_add_50_music_tradition_tt
}

elgar_add_75_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 50
	}
	custom_tooltip = elgar_add_75_music_tradition_tt
}

elgar_add_100_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 100
	}
	custom_tooltip = elgar_add_100_music_tradition_tt
}

elgar_add_200_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = 200
	}
	custom_tooltip = elgar_add_200_music_tradition_tt
}

##############################

elgar_sub_1_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = -1
	}
	custom_tooltip = elgar_sub_1_music_tradition_tt
}

elgar_sub_5_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = -5
	}
	custom_tooltip = elgar_sub_5_music_tradition_tt
}

elgar_sub_10_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = -10
	}
	custom_tooltip = elgar_sub_10_music_tradition_tt
}

elgar_sub_25_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = -25
	}
	custom_tooltip = elgar_sub_25_music_tradition_tt
}

elgar_sub_100_music_tradition = {
	change_variable = {
 		name = elgar_music_tradition
 		add = -100
	}
	custom_tooltip = elgar_sub_100_music_tradition_tt
}

##############################

set_elgar_conductor_scope_effect = {
	var:elgar_composer_var = {
		save_scope_as = elgar_conductor
	}
}

set_elgar_composer_scope_effect = {
	var:elgar_composer_var = {
		save_scope_as = elgar_composer_scope
	}
}

elgar_add_elgar_composer_num_seasons_effect = {
	var:elgar_composer_var = {
		change_variable = {
			name = elgar_composer_num_seasons_var
			add = 1
		}
	}
}

elgar_add_elgar_composer_num_compositions_effect = {
	var:elgar_composer_var = {
		change_variable = {
			name = elgar_composer_num_compositions_var
			add = 1
		}
	}
}

elgar_add_elgar_composer_num_tours_effect = {
	var:elgar_composer_var = {
		change_variable = {
			name = elgar_composer_num_tours_var
			add = 1
		}
	}
}

elgar_add_elgar_composer_num_masterworks_effect = {
	var:elgar_composer_var = {
		change_variable = {
			name = elgar_composer_num_masterworks_var
			add = 1
		}
	}
}

elgar_add_1_composer = {
	change_variable = {
 		name = elgar_had_composers
 		add = 1
	}
}

set_elgar_composer_progress = {
	set_variable = {
 		name = elgar_composer_progress
 		value = 0
	}
}

elgar_add_1_composer_progress = {
	change_variable = {
 		name = elgar_composer_progress
 		add = 1
	}
	custom_tooltip = elgar_add_1_composer_progress_tt
}

elgar_add_3_composer_progress = {
	change_variable = {
 		name = elgar_composer_progress
 		add = 3
	}
	custom_tooltip = elgar_add_3_composer_progress_tt
}

elgar_add_5_composer_progress = {
	change_variable = {
 		name = elgar_composer_progress
 		add = 5
	}
	custom_tooltip = elgar_add_3_composer_progress_tt
}

elgar_sub_1_composer_progress = {
	change_variable = {
 		name = elgar_composer_progress
 		add = -3
	}
	custom_tooltip = elgar_sub_1_composer_progress_tt
}

elgar_sub_3_composer_progress = {
	change_variable = {
 		name = elgar_composer_progress
 		add = -3
	}
	custom_tooltip = elgar_sub_3_composer_progress_tt
}

##############################

elgar_add_variables = {
	set_variable = {
        name = elgar_music_tradition
        value = 0
	}
	set_variable = {
        name = elgar_had_composers
        value = 0
	}
	set_variable = elgar_variables_var
}

##############################

#Creates a list of the ten countries with the highest musical tradition
#As this effect is called in an effect, it creates the list with normal variables
#Look at the customizable localizations to see how the countries are displayed.
#Basically the custom loc uses the variable to display both the countries in their order as well as the variables of those countries
elgar_create_musical_tradition_ranking_effect = {
	ordered_country = {
		limit = {
			NOT = { #Hopefully keeps revolutions to appear in the ranking
				is_revolutionary = yes
			}
		}
		order_by = var:elgar_music_tradition
		max = 10 #Limits the list to the ten top countires
		check_range_bounds = no #prevents errors

		#This part checks one after another whether the the first, second, etc. ranked countries are saved already.
		#Luckily the ordered_country effect iterates through the countries one after another.
		#So the first country gets saved to the first variable but as that variable now is set,
		# the second country gets saved to the second variable and so on.
		if = {
			limit = {
				NOT = {
					root = {
						has_variable = elgar_musical_tradition_rank_1_var
					}
				}
			}
			root = {
				set_variable = { #The countries are actually saved to the country that uses the effect in the event window
					name = elgar_musical_tradition_rank_1_var
					value = prev
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					root = {
						has_variable = elgar_musical_tradition_rank_2_var
					}
				}
			}
			root = {
				set_variable = {
					name = elgar_musical_tradition_rank_2_var
					value = prev
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					root = {
						has_variable = elgar_musical_tradition_rank_3_var
					}
				}
			}
			root = {
				set_variable = {
					name = elgar_musical_tradition_rank_3_var
					value = prev
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					root = {
						has_variable = elgar_musical_tradition_rank_4_var
					}
				}
			}
			root = {
				set_variable = {
					name = elgar_musical_tradition_rank_4_var
					value = prev
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					root = {
						has_variable = elgar_musical_tradition_rank_5_var
					}
				}
			}
			root = {
				set_variable = {
					name = elgar_musical_tradition_rank_5_var
					value = prev
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					root = {
						has_variable = elgar_musical_tradition_rank_6_var
					}
				}
			}
			root = {
				set_variable = {
					name = elgar_musical_tradition_rank_6_var
					value = prev
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					root = {
						has_variable = elgar_musical_tradition_rank_7_var
					}
				}
			}
			root = {
				set_variable = {
					name = elgar_musical_tradition_rank_7_var
					value = prev
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					root = {
						has_variable = elgar_musical_tradition_rank_8_var
					}
				}
			}
			root = {
				set_variable = {
					name = elgar_musical_tradition_rank_8_var
					value = prev
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					root = {
						has_variable = elgar_musical_tradition_rank_9_var
					}
				}
			}
			root = {
				set_variable = {
					name = elgar_musical_tradition_rank_9_var
					value = prev
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					root = {
						has_variable = elgar_musical_tradition_rank_10_var
					}
				}
			}
			root = {
				set_variable = {
					name = elgar_musical_tradition_rank_10_var
					value = prev
				}
			}
		}
	}	
}

#Removes the ranking variables
elgar_remove_musical_tradition_ranking_variables = {
	remove_variable = elgar_musical_tradition_rank_1_var
	remove_variable = elgar_musical_tradition_rank_2_var
	remove_variable = elgar_musical_tradition_rank_3_var
	remove_variable = elgar_musical_tradition_rank_4_var
	remove_variable = elgar_musical_tradition_rank_5_var
	remove_variable = elgar_musical_tradition_rank_6_var
	remove_variable = elgar_musical_tradition_rank_7_var
	remove_variable = elgar_musical_tradition_rank_8_var
	remove_variable = elgar_musical_tradition_rank_9_var
	remove_variable = elgar_musical_tradition_rank_10_var
}