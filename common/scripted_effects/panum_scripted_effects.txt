##########################
# PANUM SCRIPTED EFFECTS #
##########################

#by Marco Dandolo

### Technology ###

#Small Add

panum_small_add_technology = {
	if = {
		limit = { has_game_rule = mr_tech_normal_rule }
		if = {
			limit = {
				can_research = medical_degrees
			}
			add_technology_progress = { progress = 1500 technology = medical_degrees }
		}
		else_if = {
			limit = {
				can_research = panum_vaccination_tech
			}
			add_technology_progress = { progress = 1500 technology = panum_vaccination_tech }
		}
		else_if = {
			limit = {
				can_research = pharmaceuticals
			}
			add_technology_progress = { progress = 1500 technology = pharmaceuticals }
		}
		else_if = {
			limit = {
				can_research = quinine
			}
			add_technology_progress = { progress = 1500 technology = quinine }
		}
		else_if = {
			limit = {
				can_research = triage
			}
			add_technology_progress = { progress = 1500 technology = triage }
		}
		else_if = {
			limit = {
				can_research = theiler_microbiology_tech
			}
			add_technology_progress = { progress = 3000 technology = theiler_microbiology_tech }
		}
		else_if = {
			limit = {
				can_research = modern_nursing
			}
			add_technology_progress = { progress = 3000 technology = modern_nursing }
		}
		else_if = {
			limit = {
				can_research = pasteurization
			}
			add_technology_progress = { progress = 3000 technology = pasteurization }
		}
		else_if = {
			limit = {
				can_research = malaria_prevention
			}
			add_technology_progress = { progress = 3000 technology = malaria_prevention }
		}
		else_if = {
			limit = {
				can_research = dubois_genetics_tech
			}
			add_technology_progress = { progress = 3000 technology = dubois_genetics_tech }
		}
		else_if = {
			limit = {
				can_research = panum_antitoxins_tech
			}
			add_technology_progress = { progress = 3000 technology = panum_antitoxins_tech }
		}
		else_if = {
			limit = {
				can_research = antibiotics
			}
			add_technology_progress = { progress = 5500 technology = antibiotics }
		}
		else = {
			physician_experience_gain_effect = { AMOUNT = 5 }
			dubois_add_x_academy_progress = { AMOUNT = 2 }
		}
	}
	else_if = {
		limit = { has_game_rule = mr_tech_half_rule }
		if = {
			limit = {
				can_research = medical_degrees
			}
			add_technology_progress = { progress = 750 technology = medical_degrees }
		}
		else_if = {
			limit = {
				can_research = panum_vaccination_tech
			}
			add_technology_progress = { progress = 750 technology = panum_vaccination_tech }
		}
		else_if = {
			limit = {
				can_research = pharmaceuticals
			}
			add_technology_progress = { progress = 750 technology = pharmaceuticals }
		}
		else_if = {
			limit = {
				can_research = quinine
			}
			add_technology_progress = { progress = 750 technology = quinine }
		}
		else_if = {
			limit = {
				can_research = triage
			}
			add_technology_progress = { progress = 750 technology = triage }
		}
		else_if = {
			limit = {
				can_research = theiler_microbiology_tech
			}
			add_technology_progress = { progress = 1500 technology = theiler_microbiology_tech }
		}
		else_if = {
			limit = {
				can_research = modern_nursing
			}
			add_technology_progress = { progress = 1500 technology = modern_nursing }
		}
		else_if = {
			limit = {
				can_research = pasteurization
			}
			add_technology_progress = { progress = 1500 technology = pasteurization }
		}
		else_if = {
			limit = {
				can_research = malaria_prevention
			}
			add_technology_progress = { progress = 1500 technology = malaria_prevention }
		}
		else_if = {
			limit = {
				can_research = dubois_genetics_tech
			}
			add_technology_progress = { progress = 1500 technology = dubois_genetics_tech }
		}
		else_if = {
			limit = {
				can_research = panum_antitoxins_tech
			}
			add_technology_progress = { progress = 1500 technology = panum_antitoxins_tech }
		}
		else_if = {
			limit = {
				can_research = antibiotics
			}
			add_technology_progress = { progress = 2750 technology = antibiotics }
		}
		else = {
			physician_experience_gain_effect = { AMOUNT = 5 }
			dubois_add_x_academy_progress = { AMOUNT = 2 }
		}
	}
	else_if = {
		limit = { has_game_rule = mr_tech_quarter_rule }
		if = {
			limit = {
				can_research = medical_degrees
			}
			add_technology_progress = { progress = 375 technology = medical_degrees }
		}
		else_if = {
			limit = {
				can_research = panum_vaccination_tech
			}
			add_technology_progress = { progress = 375 technology = panum_vaccination_tech }
		}
		else_if = {
			limit = {
				can_research = pharmaceuticals
			}
			add_technology_progress = { progress = 375 technology = pharmaceuticals }
		}
		else_if = {
			limit = {
				can_research = quinine
			}
			add_technology_progress = { progress = 375 technology = quinine }
		}
		else_if = {
			limit = {
				can_research = triage
			}
			add_technology_progress = { progress = 375 technology = triage }
		}
		else_if = {
			limit = {
				can_research = theiler_microbiology_tech
			}
			add_technology_progress = { progress = 750 technology = theiler_microbiology_tech }
		}
		else_if = {
			limit = {
				can_research = modern_nursing
			}
			add_technology_progress = { progress = 750 technology = modern_nursing }
		}
		else_if = {
			limit = {
				can_research = pasteurization
			}
			add_technology_progress = { progress = 750 technology = pasteurization }
		}
		else_if = {
			limit = {
				can_research = malaria_prevention
			}
			add_technology_progress = { progress = 750 technology = malaria_prevention }
		}
		else_if = {
			limit = {
				can_research = dubois_genetics_tech
			}
			add_technology_progress = { progress = 750 technology = dubois_genetics_tech }
		}
		else_if = {
			limit = {
				can_research = panum_antitoxins_tech
			}
			add_technology_progress = { progress = 750 technology = panum_antitoxins_tech }
		}
		else_if = {
			limit = {
				can_research = antibiotics
			}
			add_technology_progress = { progress = 1375 technology = antibiotics }
		}
		else = {
			physician_experience_gain_effect = { AMOUNT = 5 }
			dubois_add_x_academy_progress = { AMOUNT = 2 }
		}
	}
}

#Medium Add

panum_medium_add_technology = {
	if = {
		limit = { has_game_rule = mr_tech_normal_rule }
		if = {
			limit = {
				can_research = medical_degrees
			}
			add_technology_progress = { progress = 3500 technology = medical_degrees }
		}
		else_if = {
			limit = {
				can_research = panum_vaccination_tech
			}
			add_technology_progress = { progress = 3500 technology = panum_vaccination_tech }
		}
		else_if = {
			limit = {
				can_research = pharmaceuticals
			}
			add_technology_progress = { progress = 3500 technology = pharmaceuticals }
		}
		else_if = {
			limit = {
				can_research = quinine
			}
			add_technology_progress = { progress = 3500 technology = quinine }
		}
		else_if = {
			limit = {
				can_research = triage
			}
			add_technology_progress = { progress = 3500 technology = triage }
		}
		else_if = {
			limit = {
				can_research = theiler_microbiology_tech
			}
			add_technology_progress = { progress = 5500 technology = theiler_microbiology_tech }
		}
		else_if = {
			limit = {
				can_research = modern_nursing
			}
			add_technology_progress = { progress = 5500 technology = modern_nursing }
		}
		else_if = {
			limit = {
				can_research = pasteurization
			}
			add_technology_progress = { progress = 5500 technology = pasteurization }
		}
		else_if = {
			limit = {
				can_research = malaria_prevention
			}
			add_technology_progress = { progress = 5500 technology = malaria_prevention }
		}
		else_if = {
			limit = {
				can_research = dubois_genetics_tech
			}
			add_technology_progress = { progress = 5500 technology = dubois_genetics_tech }
		}
		else_if = {
			limit = {
				can_research = panum_antitoxins_tech
			}
			add_technology_progress = { progress = 5500 technology = panum_antitoxins_tech }
		}
		else_if = {
			limit = {
				can_research = antibiotics
			}
			add_technology_progress = { progress = 9000 technology = antibiotics }
		}
		else = {
			physician_experience_gain_effect = { AMOUNT = 10 }
			dubois_add_x_academy_progress = { AMOUNT = 4 }
		}
	}
	else_if = {
		limit = { has_game_rule = mr_tech_half_rule }
		if = {
			limit = {
				can_research = medical_degrees
			}
			add_technology_progress = { progress = 1750 technology = medical_degrees }
		}
		else_if = {
			limit = {
				can_research = panum_vaccination_tech
			}
			add_technology_progress = { progress = 1750 technology = panum_vaccination_tech }
		}
		else_if = {
			limit = {
				can_research = pharmaceuticals
			}
			add_technology_progress = { progress = 1750 technology = pharmaceuticals }
		}
		else_if = {
			limit = {
				can_research = quinine
			}
			add_technology_progress = { progress = 1750 technology = quinine }
		}
		else_if = {
			limit = {
				can_research = triage
			}
			add_technology_progress = { progress = 1750 technology = triage }
		}
		else_if = {
			limit = {
				can_research = theiler_microbiology_tech
			}
			add_technology_progress = { progress = 2750 technology = theiler_microbiology_tech }
		}
		else_if = {
			limit = {
				can_research = modern_nursing
			}
			add_technology_progress = { progress = 2750 technology = modern_nursing }
		}
		else_if = {
			limit = {
				can_research = pasteurization
			}
			add_technology_progress = { progress = 2750 technology = pasteurization }
		}
		else_if = {
			limit = {
				can_research = malaria_prevention
			}
			add_technology_progress = { progress = 2750 technology = malaria_prevention }
		}
		else_if = {
			limit = {
				can_research = dubois_genetics_tech
			}
			add_technology_progress = { progress = 2750 technology = dubois_genetics_tech }
		}
		else_if = {
			limit = {
				can_research = panum_antitoxins_tech
			}
			add_technology_progress = { progress = 2750 technology = panum_antitoxins_tech }
		}
		else_if = {
			limit = {
				can_research = antibiotics
			}
			add_technology_progress = { progress = 4500 technology = antibiotics }
		}
		else = {
			physician_experience_gain_effect = { AMOUNT = 10 }
			dubois_add_x_academy_progress = { AMOUNT = 4 }
		}
	}
	else_if = {
		limit = { has_game_rule = mr_tech_quarter_rule }
		if = {
			limit = {
				can_research = medical_degrees
			}
			add_technology_progress = { progress = 875 technology = medical_degrees }
		}
		else_if = {
			limit = {
				can_research = panum_vaccination_tech
			}
			add_technology_progress = { progress = 875 technology = panum_vaccination_tech }
		}
		else_if = {
			limit = {
				can_research = pharmaceuticals
			}
			add_technology_progress = { progress = 875 technology = pharmaceuticals }
		}
		else_if = {
			limit = {
				can_research = quinine
			}
			add_technology_progress = { progress = 875 technology = quinine }
		}
		else_if = {
			limit = {
				can_research = triage
			}
			add_technology_progress = { progress = 875 technology = triage }
		}
		else_if = {
			limit = {
				can_research = theiler_microbiology_tech
			}
			add_technology_progress = { progress = 1375 technology = theiler_microbiology_tech }
		}
		else_if = {
			limit = {
				can_research = modern_nursing
			}
			add_technology_progress = { progress = 1375 technology = modern_nursing }
		}
		else_if = {
			limit = {
				can_research = pasteurization
			}
			add_technology_progress = { progress = 1375 technology = pasteurization }
		}
		else_if = {
			limit = {
				can_research = malaria_prevention
			}
			add_technology_progress = { progress = 1375 technology = malaria_prevention }
		}
		else_if = {
			limit = {
				can_research = dubois_genetics_tech
			}
			add_technology_progress = { progress = 1375 technology = dubois_genetics_tech }
		}
		else_if = {
			limit = {
				can_research = panum_antitoxins_tech
			}
			add_technology_progress = { progress = 1375 technology = panum_antitoxins_tech }
		}
		else_if = {
			limit = {
				can_research = antibiotics
			}
			add_technology_progress = { progress = 2250 technology = antibiotics }
		}
		else = {
			physician_experience_gain_effect = { AMOUNT = 10 }
			dubois_add_x_academy_progress = { AMOUNT = 4 }
		}
	}
}

#Large Add

panum_large_add_technology = {
	if = {
		limit = { has_game_rule = mr_tech_normal_rule }
		if = {
			limit = {
				can_research = medical_degrees
			}
			add_technology_progress = { progress = 6000 technology = medical_degrees }
		}
		else_if = {
			limit = {
				can_research = panum_vaccination_tech
			}
			add_technology_progress = { progress = 6000 technology = panum_vaccination_tech }
		}
		else_if = {
			limit = {
				can_research = pharmaceuticals
			}
			add_technology_progress = { progress = 6000 technology = pharmaceuticals }
		}
		else_if = {
			limit = {
				can_research = quinine
			}
			add_technology_progress = { progress = 6000 technology = quinine }
		}
		else_if = {
			limit = {
				can_research = triage
			}
			add_technology_progress = { progress = 6000 technology = triage }
		}
		else_if = {
			limit = {
				can_research = theiler_microbiology_tech
			}
			add_technology_progress = { progress = 9000 technology = theiler_microbiology_tech }
		}
		else_if = {
			limit = {
				can_research = modern_nursing
			}
			add_technology_progress = { progress = 9000 technology = modern_nursing }
		}
		else_if = {
			limit = {
				can_research = pasteurization
			}
			add_technology_progress = { progress = 9000 technology = pasteurization }
		}
		else_if = {
			limit = {
				can_research = malaria_prevention
			}
			add_technology_progress = { progress = 9000 technology = malaria_prevention }
		}
		else_if = {
			limit = {
				can_research = dubois_genetics_tech
			}
			add_technology_progress = { progress = 9000 technology = dubois_genetics_tech }
		}
		else_if = {
			limit = {
				can_research = panum_antitoxins_tech
			}
			add_technology_progress = { progress = 9000 technology = panum_antitoxins_tech }
		}
		else_if = {
			limit = {
				can_research = antibiotics
			}
			add_technology_progress = { progress = 15000 technology = antibiotics }
		}
		else = {
			physician_experience_gain_effect = { AMOUNT = 15 }
			dubois_add_x_academy_progress = { AMOUNT = 6 }
		}
	}
	else_if = {
		limit = { has_game_rule = mr_tech_half_rule }
		if = {
			limit = {
				can_research = medical_degrees
			}
			add_technology_progress = { progress = 3000 technology = medical_degrees }
		}
		else_if = {
			limit = {
				can_research = panum_vaccination_tech
			}
			add_technology_progress = { progress = 3000 technology = panum_vaccination_tech }
		}
		else_if = {
			limit = {
				can_research = pharmaceuticals
			}
			add_technology_progress = { progress = 3000 technology = pharmaceuticals }
		}
		else_if = {
			limit = {
				can_research = quinine
			}
			add_technology_progress = { progress = 3000 technology = quinine }
		}
		else_if = {
			limit = {
				can_research = triage
			}
			add_technology_progress = { progress = 3000 technology = triage }
		}
		else_if = {
			limit = {
				can_research = theiler_microbiology_tech
			}
			add_technology_progress = { progress = 4500 technology = theiler_microbiology_tech }
		}
		else_if = {
			limit = {
				can_research = modern_nursing
			}
			add_technology_progress = { progress = 4500 technology = modern_nursing }
		}
		else_if = {
			limit = {
				can_research = pasteurization
			}
			add_technology_progress = { progress = 4500 technology = pasteurization }
		}
		else_if = {
			limit = {
				can_research = malaria_prevention
			}
			add_technology_progress = { progress = 4500 technology = malaria_prevention }
		}
		else_if = {
			limit = {
				can_research = dubois_genetics_tech
			}
			add_technology_progress = { progress = 4500 technology = dubois_genetics_tech }
		}
		else_if = {
			limit = {
				can_research = panum_antitoxins_tech
			}
			add_technology_progress = { progress = 4500 technology = panum_antitoxins_tech }
		}
		else_if = {
			limit = {
				can_research = antibiotics
			}
			add_technology_progress = { progress = 7500 technology = antibiotics }
		}
		else = {
			physician_experience_gain_effect = { AMOUNT = 15 }
			dubois_add_x_academy_progress = { AMOUNT = 6 }
		}
	}
	else_if = {
		limit = { has_game_rule = mr_tech_quarter_rule }
		if = {
			limit = {
				can_research = medical_degrees
			}
			add_technology_progress = { progress = 1500 technology = medical_degrees }
		}
		else_if = {
			limit = {
				can_research = panum_vaccination_tech
			}
			add_technology_progress = { progress = 1500 technology = panum_vaccination_tech }
		}
		else_if = {
			limit = {
				can_research = pharmaceuticals
			}
			add_technology_progress = { progress = 1500 technology = pharmaceuticals }
		}
		else_if = {
			limit = {
				can_research = quinine
			}
			add_technology_progress = { progress = 1500 technology = quinine }
		}
		else_if = {
			limit = {
				can_research = triage
			}
			add_technology_progress = { progress = 1500 technology = triage }
		}
		else_if = {
			limit = {
				can_research = theiler_microbiology_tech
			}
			add_technology_progress = { progress = 2250 technology = theiler_microbiology_tech }
		}
		else_if = {
			limit = {
				can_research = modern_nursing
			}
			add_technology_progress = { progress = 2250 technology = modern_nursing }
		}
		else_if = {
			limit = {
				can_research = pasteurization
			}
			add_technology_progress = { progress = 2250 technology = pasteurization }
		}
		else_if = {
			limit = {
				can_research = malaria_prevention
			}
			add_technology_progress = { progress = 2250 technology = malaria_prevention }
		}
		else_if = {
			limit = {
				can_research = dubois_genetics_tech
			}
			add_technology_progress = { progress = 2250 technology = dubois_genetics_tech }
		}
		else_if = {
			limit = {
				can_research = panum_antitoxins_tech
			}
			add_technology_progress = { progress = 2250 technology = panum_antitoxins_tech }
		}
		else_if = {
			limit = {
				can_research = antibiotics
			}
			add_technology_progress = { progress = 3750 technology = antibiotics }
		}
		else = {
			physician_experience_gain_effect = { AMOUNT = 15 }
			dubois_add_x_academy_progress = { AMOUNT = 6 }
		}
	}
}

### Cholera ###

# This effect choses a random_scope_state with the highest urbanization
panum_set_cholera_state_effect = {
	ordered_scope_state = {
		limit = {
			NOT = {
				has_variable = panum_recent_cholera_var
			}
			any_scope_pop = {
				strata = poor
				standard_of_living <= 15
			}
			total_urbanization >= 500
		}
		order_by = total_urbanization
		max = 1 #Limits to the state with highest urbanization
		check_range_bounds = no #prevents errors

		set_variable = {
			name = panum_recent_cholera_var
			years = 10
		}
		save_scope_as = panum_disease_state
	}
}

# This effect adds the Cholera Modifier; time and type depends on several factors
panum_add_cholera_modifier_effect = {
	scope:panum_disease_state = {
		if = {
			limit = {
				ROOT = {
					has_technology_researched = modern_sewerage
				}
				OR = {
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 2
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_cholera_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_cholera_mild_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_cholera_mild_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					NOT = {
						has_law = law_type:law_no_health_system
					}
				}
				OR = {
					ROOT = {
						has_technology_researched = modern_sewerage
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_cholera_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_cholera_normal_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_cholera_normal_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					ROOT = {
						has_technology_researched = modern_sewerage
					}
					ROOT = {
						NOT = {
							has_law = law_type:law_no_health_system
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_cholera_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_cholera_severe_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_cholera_severe_modifier
					days = 365
				}
			}
		}
		else = {
			if = {
				limit = {
					ROOT = {
						panum_has_cholera_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_cholera_deadly_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_cholera_deadly_modifier
					days = 365
				}
			}
		}
	}
}

#Adds one disease description to the total of described diseases
panum_add_1_described_disease_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = panum_num_disease_descriptions_var
			}
		}
		set_variable = {
			name = panum_num_disease_descriptions_var
			value = 1
		}
	}
	else = {
		change_variable = {
			name = panum_num_disease_descriptions_var
			add = 1
		}
	}
}

#Adds one disease treatment to the total of diseases treatments
panum_add_1_treatment_disease_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = panum_num_disease_treatmentss_var
			}
		}
		set_variable = {
			name = panum_num_disease_treatmentss_var
			value = 1
		}
	}
	else = {
		change_variable = {
			name = panum_num_disease_treatmentss_var
			add = 1
		}
	}
}

# This effect adds the Cholera Description
panum_add_cholera_description_effect = {
	custom_tooltip = {
		text = panum_add_cholera_description_effect_tt
		set_variable = panum_cholera_description_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_cholera_description_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_cholera_description_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_cholera_description_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_cholera_description_inventor_var
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 40 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_description_cholera_notification
			}
		}
		#For each First Description, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
		#Keeps track of the number of described Diseases
		panum_add_1_described_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 20 }
		panum_small_add_technology = yes
		#For each Description, add 2 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 2 }
	}
}

# This effect adds the Cholera Treatment
panum_add_cholera_treatment_effect = {
	custom_tooltip = {
		text = panum_add_cholera_treatment_effect_tt
		set_variable = panum_cholera_treatment_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_cholera_treatment_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_cholera_treatment_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_cholera_treatment_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_cholera_treatment_inventor_var
			add_trait = panum_epidemiologist
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 60 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_treatment_cholera_notification
			}
		}
		#For each First Treatment, add 8 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 8 }
		#Keeps track of the number of Disease Treatments
		panum_add_1_treatment_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 30 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
		#For each Treatment, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
	}
}

# This effect sets the number of Cholera states to 1
panum_set_number_of_cholera_states_effect = {
	set_variable = {
		name = panum_number_of_cholera_states_var
		value = 1
	}
}

# This effect adds 1 to the total numbers of Cholera states. There should be no more than 3 Cholera states in an epidemic if a treatment is found
panum_add_number_of_cholera_states_effect = {
	change_variable = {
		name = panum_number_of_cholera_states_var
		add = 1
	}
}

#Effect to add $AMOUNT$ Cholera Description Clues
panum_add_x_cholera_description_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = cholera_description_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_cholera_description_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_cholera_description_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_cholera_description_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_cholera_description_clues_var
			}
		}
		set_variable = {
			name = panum_cholera_description_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_cholera_description_clues_var
		add = scope:cholera_description_clues_amount
	}
}

#Effect to add $AMOUNT$ Cholera Treatment Clues
panum_add_x_cholera_treatment_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = cholera_treatment_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_cholera_treatment_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_cholera_treatment_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_cholera_treatment_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_cholera_treatment_clues_var
			}
		}
		set_variable = {
			name = panum_cholera_treatment_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_cholera_treatment_clues_var
		add = scope:cholera_treatment_clues_amount
	}
}

### Tuberculosis ###

# This effect choses a random_scope_state with the lowest standard of living
panum_set_tuberculosis_state_effect = {
	ordered_scope_state = {
		limit = {
			NOT = {
				has_variable = panum_recent_tuberculosis_var
			}
			any_scope_pop = {
				strata = poor
				standard_of_living <= 20
			}
			total_urbanization >= 750
		}
		order_by = panum_negative_sol_value
		max = 1 #Limits to the state with lowest standard of living
		check_range_bounds = no #prevents errors

		set_variable = {
			name = panum_recent_tuberculosis_var
			years = 10
		}
		save_scope_as = panum_disease_state
	}
}

# This effect adds the Tuberculosis Modifier; time and type depends on several factors
panum_add_tuberculosis_modifier_effect = {
	scope:panum_disease_state = {
		if = {
			limit = {
				ROOT = {
					has_technology_researched = pasteurization
				}
				OR = {
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 3
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_tuberculosis_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_tuberculosis_mild_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_tuberculosis_mild_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					ROOT = {
						has_technology_researched = pasteurization
					}
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 3
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_tuberculosis_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_tuberculosis_normal_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_tuberculosis_normal_modifier
					days = 365
				}
			}
		}
		else = {
			if = {
				limit = {
					ROOT = {
						panum_has_tuberculosis_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_tuberculosis_severe_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_tuberculosis_severe_modifier
					days = 365
				}
			}
		}
	}
}

# This effect adds the Tuberculosis Description
panum_add_tuberculosis_description_effect = {
	custom_tooltip = {
		text = panum_add_tuberculosis_description_effect_tt
		set_variable = panum_tuberculosis_description_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_tuberculosis_description_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_tuberculosis_description_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_tuberculosis_description_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_tuberculosis_description_inventor_var
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 40 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_description_tuberculosis_notification
			}
		}
		#For each First Description, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
		#Keeps track of the number of described Diseases
		panum_add_1_described_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 20 }
		panum_small_add_technology = yes
		#For each Description, add 2 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 2 }
	}
}

# This effect adds the Tuberculosis Treatment
panum_add_tuberculosis_treatment_effect = {
	custom_tooltip = {
		text = panum_add_tuberculosis_treatment_effect_tt
		set_variable = panum_tuberculosis_treatment_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_tuberculosis_treatment_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_tuberculosis_treatment_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_tuberculosis_treatment_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_tuberculosis_treatment_inventor_var
			add_trait = panum_epidemiologist
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 60 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_treatment_tuberculosis_notification
			}
		}
		#For each First Treatment, add 8 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 8 }
		#Keeps track of the number of Disease Treatments
		panum_add_1_treatment_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 30 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
		#For each Treatment, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
	}
}

# This effect sets the number of tuberculosis states to 1
panum_set_number_of_tuberculosis_states_effect = {
	set_variable = {
		name = panum_number_of_tuberculosis_states_var
		value = 1
	}
}

# This effect adds 1 to the total numbers of tuberculosis states. There should be no more than 3 tuberculosis states in an epidemic
panum_add_number_of_tuberculosis_states_effect = {
	change_variable = {
		name = panum_number_of_tuberculosis_states_var
		add = 1
	}
}

#Effect to add $AMOUNT$ Tuberculosis Description Clues
panum_add_x_tuberculosis_description_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = tuberculosis_description_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_tuberculosis_description_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_tuberculosis_description_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_tuberculosis_description_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_tuberculosis_description_clues_var
			}
		}
		set_variable = {
			name = panum_tuberculosis_description_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_tuberculosis_description_clues_var
		add = scope:tuberculosis_description_clues_amount
	}
}

#Effect to add $AMOUNT$ Tuberculosis Treatment Clues
panum_add_x_tuberculosis_treatment_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = tuberculosis_treatment_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_tuberculosis_treatment_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_tuberculosis_treatment_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_tuberculosis_treatment_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_tuberculosis_treatment_clues_var
			}
		}
		set_variable = {
			name = panum_tuberculosis_treatment_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_tuberculosis_treatment_clues_var
		add = scope:tuberculosis_treatment_clues_amount
	}
}

### Smallpox ###

# This effect choses a random_scope_state with the lowest standard of living
panum_set_smallpox_state_effect = {
	ordered_scope_state = {
		limit = {
			NOT = {
				has_variable = panum_recent_smallpox_var
			}
			any_scope_pop = {
				strata = poor
				standard_of_living <= 16
			}
		}
		order_by = panum_negative_sol_value
		max = 1 #Limits to the state with lowest standard of living
		check_range_bounds = no #prevents errors

		set_variable = {
			name = panum_recent_smallpox_var
			years = 10
		}
		save_scope_as = panum_disease_state
	}
}

# This effect adds the Smallpox Modifier; time and type depends on several factors
panum_add_smallpox_modifier_effect = {
	scope:panum_disease_state = {
		if = {
			limit = {
				ROOT = {
					has_technology_researched = panum_vaccination_tech
				}
				OR = {
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 1
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_smallpox_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_smallpox_mild_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_smallpox_mild_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					ROOT = {
						has_technology_researched = panum_vaccination_tech
					}
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 1
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_smallpox_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_smallpox_normal_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_smallpox_normal_modifier
					days = 365
				}
			}
		}
		else = {
			if = {
				limit = {
					ROOT = {
						panum_has_smallpox_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_smallpox_severe_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_smallpox_severe_modifier
					days = 365
				}
			}
		}
	}
}

# This effect adds the Smallpox Description
panum_add_smallpox_description_effect = {
	custom_tooltip = {
		text = panum_add_smallpox_description_effect_tt
		set_variable = panum_smallpox_description_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_smallpox_description_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_smallpox_description_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_smallpox_description_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_smallpox_description_inventor_var
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 40 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_description_smallpox_notification
			}
		}
		#For each First Description, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
		#Keeps track of the number of described Diseases
		panum_add_1_described_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 20 }
		panum_small_add_technology = yes
		#For each Treatment, add 2 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 2 }
	}
}

# This effect adds the Smallpox Treatment
panum_add_smallpox_treatment_effect = {
	custom_tooltip = {
		text = panum_add_smallpox_treatment_effect_tt
		set_variable = panum_smallpox_treatment_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_smallpox_treatment_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_smallpox_treatment_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_smallpox_treatment_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_smallpox_treatment_inventor_var
			add_trait = panum_epidemiologist
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 60 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_treatment_smallpox_notification
			}
		}
		#For each First Treatment, add 8 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 8 }
		#Keeps track of the number of Disease Treatments
		panum_add_1_treatment_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 30 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
		#For each Treatment, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
	}
}

# This effect sets the number of Smallpox states to 1
panum_set_number_of_smallpox_states_effect = {
	set_variable = {
		name = panum_number_of_smallpox_states_var
		value = 1
	}
}

# This effect adds 1 to the total numbers of Smallpox states. There should be no more than 3 Smallpox states in an epidemic if a treatment is found
panum_add_number_of_smallpox_states_effect = {
	change_variable = {
		name = panum_number_of_smallpox_states_var
		add = 1
	}
}

#Effect to add $AMOUNT$ Smallpox Description Clues
panum_add_x_smallpox_description_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = smallpox_description_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_smallpox_description_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_smallpox_description_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_smallpox_description_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_smallpox_description_clues_var
			}
		}
		set_variable = {
			name = panum_smallpox_description_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_smallpox_description_clues_var
		add = scope:smallpox_description_clues_amount
	}
}

#Effect to add $AMOUNT$ Smallpox Treatment Clues
panum_add_x_smallpox_treatment_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = smallpox_treatment_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_smallpox_treatment_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_smallpox_treatment_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_smallpox_treatment_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_smallpox_treatment_clues_var
			}
		}
		set_variable = {
			name = panum_smallpox_treatment_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_smallpox_treatment_clues_var
		add = scope:smallpox_treatment_clues_amount
	}
}

### Typhus ###

# This effect choses a random_scope_state with the highest devastation
panum_set_typhus_state_effect = {
	ordered_scope_state = {
		limit = {
			NOT = {
				has_variable = panum_recent_typhus_var
			}
			devastation > 0.15
		}
		order_by = devastation
		max = 1 #Limits to the state with lowest standard of living
		check_range_bounds = no #prevents errors

		set_variable = {
			name = panum_recent_typhus_var
			years = 10
		}
		save_scope_as = panum_disease_state
	}
}

# This effect adds the Typhus Modifier; time and type depends on several factors
panum_add_typhus_modifier_effect = {
	scope:panum_disease_state = {
		if = {
			limit = {
				ROOT = {
					has_technology_researched = modern_nursing
				}
				OR = {
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 2
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_typhus_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_typhus_mild_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_typhus_mild_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					ROOT = {
						has_technology_researched = modern_nursing
					}
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 2
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_typhus_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_typhus_normal_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_typhus_normal_modifier
					days = 365
				}
			}
		}
		else = {
			if = {
				limit = {
					ROOT = {
						panum_has_typhus_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_typhus_severe_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_typhus_severe_modifier
					days = 365
				}
			}
		}
	}
}

# This effect adds the Typhus Description
panum_add_typhus_description_effect = {
	custom_tooltip = {
		text = panum_add_typhus_description_effect_tt
		set_variable = panum_typhus_description_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_typhus_description_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_typhus_description_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_typhus_description_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_typhus_description_inventor_var
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 40 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_description_typhus_notification
			}
		}
		#For each First Description, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
		#Keeps track of the number of described Diseases
		panum_add_1_described_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 20 }
		panum_small_add_technology = yes
		#For each Description, add 2 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 2 }
	}
}

# This effect adds the Typhus Treatment
panum_add_typhus_treatment_effect = {
	custom_tooltip = {
		text = panum_add_typhus_treatment_effect_tt
		set_variable = panum_typhus_treatment_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_typhus_treatment_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_typhus_treatment_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_typhus_treatment_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_typhus_treatment_inventor_var
			add_trait = panum_epidemiologist
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 60 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_treatment_typhus_notification
			}
		}
		#For each First Treatment, add 8 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 8 }
		#Keeps track of the number of Disease Treatments
		panum_add_1_treatment_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 30 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
		#For each Treatment, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
	}
}

#Effect to add $AMOUNT$ Typhus Description Clues
panum_add_x_typhus_description_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = typhus_description_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_typhus_description_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_typhus_description_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_typhus_description_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_typhus_description_clues_var
			}
		}
		set_variable = {
			name = panum_typhus_description_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_typhus_description_clues_var
		add = scope:typhus_description_clues_amount
	}
}

#Effect to add $AMOUNT$ Typhus Treatment Clues
panum_add_x_typhus_treatment_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = typhus_treatment_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_typhus_treatment_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_typhus_treatment_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_typhus_treatment_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_typhus_treatment_clues_var
			}
		}
		set_variable = {
			name = panum_typhus_treatment_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_typhus_treatment_clues_var
		add = scope:typhus_treatment_clues_amount
	}
}

### Yellow Fever ###

# This effect choses a random_scope_state with the highest Mosquito Terrain
panum_set_yellow_fever_state_effect = {
	ordered_scope_state = {
		limit = {
			NOT = {
				has_variable = panum_recent_yellow_fever_var
			}
			OR = {
				region = sr:region_dixie
				region = sr:region_mexico
				region = sr:region_central_america
				region = sr:region_caribbean
	
				region = sr:region_brazil
				region = sr:region_gran_colombia
				state_region = s:STATE_SANTA_CRUZ
				state_region = s:STATE_LA_PAZ
				state_region = s:STATE_PASTAZA
				state_region = s:STATE_ACRE
				state_region = s:STATE_ALTO_PARAGUAY
				state_region = s:STATE_BAJO_PARAGUAY
				state_region = s:STATE_CORRIENTES
				state_region = s:STATE_SANTA_FE
				state_region = s:STATE_BUENOS_AIRES
	
				AND = {
					state_is_in_africa = yes
					has_state_trait = state_trait_malaria
				}
				AND = {
					state_is_in_africa = yes
					has_state_trait = state_trait_severe_malaria
				}
			}
		}
		order_by = panum_mosquito_terrain_value
		max = 1 #Limits to the state with the highest Mosquito Terrain
		check_range_bounds = no #prevents errors

		set_variable = {
			name = panum_recent_yellow_fever_var
			years = 10
		}
		save_scope_as = panum_disease_state
	}
}

# This effect adds the Yellow Fever Modifier; time and type depends on several factors
panum_add_yellow_fever_modifier_effect = {
	scope:panum_disease_state = {
		if = {
			limit = {
				ROOT = {
					has_technology_researched = malaria_prevention
				}
				OR = {
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 2
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_yellow_fever_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_yellow_fever_mild_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_yellow_fever_mild_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					ROOT = {
						has_technology_researched = malaria_prevention
					}
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 2
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_yellow_fever_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_yellow_fever_normal_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_yellow_fever_normal_modifier
					days = 365
				}
			}
		}
		else = {
			if = {
				limit = {
					ROOT = {
						panum_has_yellow_fever_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_yellow_fever_severe_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_yellow_fever_severe_modifier
					days = 365
				}
			}
		}
	}
}

# This effect adds the Yellow Fever Description
panum_add_yellow_fever_description_effect = {
	custom_tooltip = {
		text = panum_add_yellow_fever_description_effect_tt
		set_variable = panum_yellow_fever_description_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_yellow_fever_description_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_yellow_fever_description_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_yellow_fever_description_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_yellow_fever_description_inventor_var
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 40 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_description_yellow_fever_notification
			}
		}
		#For each First Description, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
		#Keeps track of the number of described Diseases
		panum_add_1_described_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 20 }
		panum_small_add_technology = yes
		#For each Description, add 2 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 2 }
	}
}

# This effect adds the Yellow Fever Treatment
panum_add_yellow_fever_treatment_effect = {
	custom_tooltip = {
		text = panum_add_yellow_fever_treatment_effect_tt
		set_variable = panum_yellow_fever_treatment_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_yellow_fever_treatment_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_yellow_fever_treatment_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_yellow_fever_treatment_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_yellow_fever_treatment_inventor_var
			add_trait = panum_epidemiologist
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 60 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_treatment_yellow_fever_notification
			}
		}
		#For each First Treatment, add 8 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 8 }
		#Keeps track of the number of Disease Treatments
		panum_add_1_treatment_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 30 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
		#For each Treatment, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
	}
}

# This effect sets the number of Yellow Fever states to 1
panum_set_number_of_yellow_fever_states_effect = {
	set_variable = {
		name = panum_number_of_yellow_fever_states_var
		value = 1
	}
}

# This effect adds 1 to the total numbers of Yellow Fever states. There should be no more than 3 Yellow Fever states in an epidemic
panum_add_number_of_yellow_fever_states_effect = {
	change_variable = {
		name = panum_number_of_yellow_fever_states_var
		add = 1
	}
}

#Effect to add $AMOUNT$ Yellow Fever Description Clues
panum_add_x_yellow_fever_description_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = yellow_fever_description_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_yellow_fever_description_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_yellow_fever_description_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_yellow_fever_description_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_yellow_fever_description_clues_var
			}
		}
		set_variable = {
			name = panum_yellow_fever_description_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_yellow_fever_description_clues_var
		add = scope:yellow_fever_description_clues_amount
	}
}

#Effect to add $AMOUNT$ Yellow Fever Treatment Clues
panum_add_x_yellow_fever_treatment_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = yellow_fever_treatment_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_yellow_fever_treatment_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_yellow_fever_treatment_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_yellow_fever_treatment_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_yellow_fever_treatment_clues_var
			}
		}
		set_variable = {
			name = panum_yellow_fever_treatment_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_yellow_fever_treatment_clues_var
		add = scope:yellow_fever_treatment_clues_amount
	}
}

### Measles ###

# This effect choses an incorporated random_scope_state which did not have measles yet
panum_set_measles_state_effect = {
	ordered_scope_state = {
		limit = {
			NOT = {
				has_variable = panum_recent_measles_var
			}
		}
		order_by = panum_negative_sol_value
		max = 1 #Limits to the state with lowest standard of living
		check_range_bounds = no #prevents errors

		set_variable = {
			name = panum_recent_measles_var
			years = 25 #Immunity for roughly a generation
		}
		save_scope_as = panum_disease_state
	}
}

# This effect adds the Measles Modifier; time and type depends on several factors
panum_add_measles_modifier_effect = {
	scope:panum_disease_state = {
		if = {
			limit = {
				ROOT = {
					has_technology_researched = antibiotics
				}
				OR = {
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 5
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_measles_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_measles_mild_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_measles_mild_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					ROOT = {
						has_technology_researched = antibiotics
					}
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 5
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_measles_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_measles_normal_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_measles_normal_modifier
					days = 365
				}
			}
		}
		else = {
			if = {
				limit = {
					ROOT = {
						panum_has_measles_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_measles_severe_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_measles_severe_modifier
					days = 365
				}
			}
		}
	}
}

# This effect adds the Measles Description
panum_add_measles_description_effect = {
	custom_tooltip = {
		text = panum_add_measles_description_effect_tt
		set_variable = panum_measles_description_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_measles_description_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_measles_description_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_measles_description_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_measles_description_inventor_var
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 40 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_description_measles_notification
			}
		}
		#For each First Description, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
		#Keeps track of the number of described Diseases
		panum_add_1_described_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 20 }
		panum_small_add_technology = yes
		#For each Description, add 2 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 2 }
	}
}

# This effect adds the Measles Treatment
panum_add_measles_treatment_effect = {
	custom_tooltip = {
		text = panum_add_measles_treatment_effect_tt
		set_variable = panum_measles_treatment_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_measles_treatment_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_measles_treatment_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_measles_treatment_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_measles_treatment_inventor_var
			add_trait = panum_epidemiologist
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 60 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_treatment_measles_notification
			}
		}
		#For each First Treatment, add 8 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 8 }
		#Keeps track of the number of Disease Treatments
		panum_add_1_treatment_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 30 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
		#For each Treatment, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
	}
}

# This effect sets the number of Measles states to 1
panum_set_number_of_measles_states_effect = {
	set_variable = {
		name = panum_number_of_measles_states_var
		value = 1
	}
}

# This effect adds 1 to the total numbers of Measles states. There should be no more than 3 measles states in an epidemic and only 1 if a treatment is found
panum_add_number_of_measles_states_effect = {
	change_variable = {
		name = panum_number_of_measles_states_var
		add = 1
	}
}

#Effect to add $AMOUNT$ Measles Description Clues
panum_add_x_measles_description_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = measles_description_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_measles_description_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_measles_description_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_measles_description_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_measles_description_clues_var
			}
		}
		set_variable = {
			name = panum_measles_description_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_measles_description_clues_var
		add = scope:measles_description_clues_amount
	}
}

#Effect to add $AMOUNT$ Measles Treatment Clues
panum_add_x_measles_treatment_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = measles_treatment_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_measles_treatment_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_measles_treatment_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_measles_treatment_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_measles_treatment_clues_var
			}
		}
		set_variable = {
			name = panum_measles_treatment_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_measles_treatment_clues_var
		add = scope:measles_treatment_clues_amount
	}
}

### Scarlet ###

# This effect choses an incorporated random_scope_state which did not have scarlet yet
panum_set_scarlet_state_effect = {
	ordered_scope_state = {
		limit = {
			NOT = {
				has_variable = panum_recent_scarlet_var
			}
			is_incorporated = yes
		}
		order_by = panum_negative_sol_value
		max = 1 #Limits to the state with lowest standard of living
		check_range_bounds = no #prevents errors

		set_variable = {
			name = panum_recent_scarlet_var
			years = 10
		}
		save_scope_as = panum_disease_state
	}
}

# This effect adds the Scarlet Modifier; time and type depends on several factors
panum_add_scarlet_modifier_effect = {
	scope:panum_disease_state = {
		if = {
			limit = {
				ROOT = {
					has_technology_researched = panum_antitoxins_tech
				}
				OR = {
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 3
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_scarlet_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_scarlet_mild_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_scarlet_mild_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					ROOT = {
						has_technology_researched = panum_antitoxins_tech
					}
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 3
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_scarlet_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_scarlet_normal_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_scarlet_normal_modifier
					days = 365
				}
			}
		}
		else = {
			if = {
				limit = {
					ROOT = {
						panum_has_scarlet_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_scarlet_severe_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_scarlet_severe_modifier
					days = 365
				}
			}
		}
	}
}

# This effect adds the Scarlet Description
panum_add_scarlet_description_effect = {
	custom_tooltip = {
		text = panum_add_scarlet_description_effect_tt
		set_variable = panum_scarlet_description_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_scarlet_description_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_scarlet_description_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_scarlet_description_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_scarlet_description_inventor_var
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 40 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_description_scarlet_notification
			}
		}
		#For each First Description, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
		#Keeps track of the number of described Diseases
		panum_add_1_described_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 20 }
		panum_small_add_technology = yes
		#For each Description, add 2 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 2 }
	}
}

# This effect adds the Scarlet Treatment
panum_add_scarlet_treatment_effect = {
	custom_tooltip = {
		text = panum_add_scarlet_treatment_effect_tt
		set_variable = panum_scarlet_treatment_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_scarlet_treatment_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_scarlet_treatment_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_scarlet_treatment_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_scarlet_treatment_inventor_var
			add_trait = panum_epidemiologist
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 60 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_treatment_scarlet_notification
			}
		}
		#For each First Treatment, add 8 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 8 }
		#Keeps track of the number of Disease Treatments
		panum_add_1_treatment_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 30 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
		#For each Treatment, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
	}
}

#Effect to add $AMOUNT$ Scarlet Description Clues
panum_add_x_scarlet_description_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = scarlet_description_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_scarlet_description_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_scarlet_description_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_scarlet_description_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_scarlet_description_clues_var
			}
		}
		set_variable = {
			name = panum_scarlet_description_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_scarlet_description_clues_var
		add = scope:scarlet_description_clues_amount
	}
}

#Effect to add $AMOUNT$ Scarlet Treatment Clues
panum_add_x_scarlet_treatment_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = scarlet_treatment_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_scarlet_treatment_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_scarlet_treatment_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_scarlet_treatment_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_scarlet_treatment_clues_var
			}
		}
		set_variable = {
			name = panum_scarlet_treatment_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_scarlet_treatment_clues_var
		add = scope:scarlet_treatment_clues_amount
	}
}

### Plague ###

# This effect choses a random_scope_state with the lowest standard of living
panum_set_plague_state_effect = {
	ordered_scope_state = {
		limit = {
			NOT = {
				has_variable = panum_recent_plague_var
			}
			any_scope_pop = {
				strata = poor
				standard_of_living <= 15
			}
		}
		order_by = panum_negative_sol_value
		max = 1 #Limits to the state with lowest standard of living
		check_range_bounds = no #prevents errors

		set_variable = {
			name = panum_recent_plague_var
			years = 10
		}
		save_scope_as = panum_disease_state
	}
}

# This effect adds the Plague Modifier; time and type depends on several factors
panum_add_plague_modifier_effect = {
	scope:panum_disease_state = {
		if = {
			limit = {
				ROOT = {
					has_technology_researched = panum_antitoxins_tech
				}
				OR = {
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 2
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_plague_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_plague_mild_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_plague_mild_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					ROOT = {
						has_technology_researched = panum_antitoxins_tech
					}
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 2
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_plague_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_plague_normal_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_plague_normal_modifier
					days = 365
				}
			}
		}
		else = {
			if = {
				limit = {
					ROOT = {
						panum_has_plague_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_plague_severe_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_plague_severe_modifier
					days = 365
				}
			}
		}
	}
}

# This effect adds the Plague Description
panum_add_plague_description_effect = {
	custom_tooltip = {
		text = panum_add_plague_description_effect_tt
		set_variable = panum_plague_description_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_plague_description_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_plague_description_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_plague_description_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_plague_description_inventor_var
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 40 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_description_plague_notification
			}
		}
		#For each First Description, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
		#Keeps track of the number of described Diseases
		panum_add_1_described_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 20 }
		panum_small_add_technology = yes
		#For each Description, add 2 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 2 }
	}
}

# This effect adds the Plague Treatment
panum_add_plague_treatment_effect = {
	custom_tooltip = {
		text = panum_add_plague_treatment_effect_tt
		set_variable = panum_plague_treatment_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_plague_treatment_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_plague_treatment_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_plague_treatment_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_plague_treatment_inventor_var
			add_trait = panum_epidemiologist
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 60 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_treatment_plague_notification
			}
		}
		#For each First Treatment, add 8 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 8 }
		#Keeps track of the number of Disease Treatments
		panum_add_1_treatment_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 30 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
		#For each First Treatment, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
	}
}

# This effect sets the number of Plague states to 1
panum_set_number_of_plague_states_effect = {
	set_variable = {
		name = panum_number_of_plague_states_var
		value = 1
	}
}

# This effect adds 1 to the total numbers of Plague states. There should be no more than 3 Plague states in an epidemic if a treatment is found
panum_add_number_of_plague_states_effect = {
	change_variable = {
		name = panum_number_of_plague_states_var
		add = 1
	}
}

#Effect to add $AMOUNT$ Plague Description Clues
panum_add_x_plague_description_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = plague_description_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_plague_description_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_plague_description_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_plague_description_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_plague_description_clues_var
			}
		}
		set_variable = {
			name = panum_plague_description_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_plague_description_clues_var
		add = scope:plague_description_clues_amount
	}
}

#Effect to add $AMOUNT$ Plague Treatment Clues
panum_add_x_plague_treatment_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = plague_treatment_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_plague_treatment_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_plague_treatment_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_plague_treatment_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_plague_treatment_clues_var
			}
		}
		set_variable = {
			name = panum_plague_treatment_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_plague_treatment_clues_var
		add = scope:plague_treatment_clues_amount
	}
}

### Diphteria ###

# This effect choses a random_scope_state with the lowest standard of living
panum_set_diphteria_state_effect = {
	ordered_scope_state = {
		limit = {
			NOT = {
				has_variable = panum_recent_diphteria_var
			}
			any_scope_pop = {
				strata = poor
				standard_of_living <= 20
			}
		}
		order_by = panum_negative_sol_value
		max = 1 #Limits to the state with lowest standard of living
		check_range_bounds = no #prevents errors

		set_variable = {
			name = panum_recent_diphteria_var
			years = 10
		}
		save_scope_as = panum_disease_state
	}
}

# This effect adds the Diphteria Modifier; time and type depends on several factors
panum_add_diphteria_modifier_effect = {
	scope:panum_disease_state = {
		if = {
			limit = {
				ROOT = {
					has_technology_researched = panum_antitoxins_tech
				}
				OR = {
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 3
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_diphteria_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_diphteria_mild_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_diphteria_mild_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					ROOT = {
						has_technology_researched = panum_antitoxins_tech
					}
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 3
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_diphteria_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_diphteria_normal_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_diphteria_normal_modifier
					days = 365
				}
			}
		}
		else = {
			if = {
				limit = {
					ROOT = {
						panum_has_diphteria_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_diphteria_severe_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_diphteria_severe_modifier
					days = 365
				}
			}
		}
	}
}

# This effect adds the Diphteria Description
panum_add_diphteria_description_effect = {
	custom_tooltip = {
		text = panum_add_diphteria_description_effect_tt
		set_variable = panum_diphteria_description_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_diphteria_description_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_diphteria_description_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_diphteria_description_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_diphteria_description_inventor_var
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 40 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_description_diphteria_notification
			}
		}
		#For each First Description, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
		#Keeps track of the number of described Diseases
		panum_add_1_described_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 20 }
		panum_small_add_technology = yes
		#For each Description, add 2 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 2 }
	}
}

# This effect adds the Diphteria Treatment
panum_add_diphteria_treatment_effect = {
	custom_tooltip = {
		text = panum_add_diphteria_treatment_effect_tt
		set_variable = panum_diphteria_treatment_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_diphteria_treatment_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_diphteria_treatment_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_diphteria_treatment_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_diphteria_treatment_inventor_var
			add_trait = panum_epidemiologist
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 60 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_treatment_diphteria_notification
			}
		}
		#For each First Treatment, add 8 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 8 }
		#Keeps track of the number of Disease Treatments
		panum_add_1_treatment_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 30 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
		#For each Treatment, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
	}
}

#Effect to add $AMOUNT$ Diphteria Description Clues
panum_add_x_diphteria_description_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = diphteria_description_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_diphteria_description_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_diphteria_description_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_diphteria_description_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_diphteria_description_clues_var
			}
		}
		set_variable = {
			name = panum_diphteria_description_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_diphteria_description_clues_var
		add = scope:diphteria_description_clues_amount
	}
}

#Effect to add $AMOUNT$ Diphteria Treatment Clues
panum_add_x_diphteria_treatment_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = diphteria_treatment_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_diphteria_treatment_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_diphteria_treatment_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_diphteria_treatment_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_diphteria_treatment_clues_var
			}
		}
		set_variable = {
			name = panum_diphteria_treatment_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_diphteria_treatment_clues_var
		add = scope:diphteria_treatment_clues_amount
	}
}

### Polio ###

# This effect choses a random_scope_state with the lowest standard of living
panum_set_polio_state_effect = {
	ordered_scope_state = {
		limit = {
			NOT = {
				has_variable = panum_recent_polio_var
			}
			any_scope_pop = {
				strata = poor
				standard_of_living <= 25
			}
			total_urbanization >= 1000
		}
		order_by = panum_negative_sol_value
		max = 1 #Limits to the state with lowest standard of living
		check_range_bounds = no #prevents errors

		set_variable = {
			name = panum_recent_polio_var
			years = 10
		}
		save_scope_as = panum_disease_state
	}
}

# This effect adds the Polio Modifier; time and type depends on several factors
panum_add_polio_modifier_effect = {
	scope:panum_disease_state = {
		if = {
			limit = {
				ROOT = {
					has_technology_researched = panum_antitoxins_tech
				}
				OR = {
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 4
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_polio_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_polio_mild_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_polio_mild_modifier
					days = 365
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					ROOT = {
						has_technology_researched = panum_antitoxins_tech
					}
					ROOT = {
						institution_investment_level = {
							institution	= institution_health_system
							value >= 4
						}
					}
					panum_state_has_clinic_trigger = yes
				}
			}
			if = {
				limit = {
					ROOT = {
						panum_has_polio_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_polio_normal_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_polio_normal_modifier
					days = 365
				}
			}
		}
		else = {
			if = {
				limit = {
					ROOT = {
						panum_has_polio_treatment_trigger = yes
					}
				}
				add_modifier = {
					name = panum_epidemic_polio_severe_modifier
					days = 60
				}
			}
			else = {
				add_modifier = {
					name = panum_epidemic_polio_severe_modifier
					days = 365
				}
			}
		}
	}
}

# This effect adds the Polio Description
panum_add_polio_description_effect = {
	custom_tooltip = {
		text = panum_add_polio_description_effect_tt
		set_variable = panum_polio_description_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_polio_description_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_polio_description_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_polio_description_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_polio_description_inventor_var
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 40 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_description_polio_notification
			}
		}
		#For each First Description, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
		#Keeps track of the number of described Diseases
		panum_add_1_described_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 20 }
		panum_small_add_technology = yes
		#For each Description, add 2 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 2 }
	}
}

# This effect adds the Polio Treatment
panum_add_polio_treatment_effect = {
	custom_tooltip = {
		text = panum_add_polio_treatment_effect_tt
		set_variable = panum_polio_treatment_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_polio_treatment_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_polio_treatment_year_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_polio_treatment_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_polio_treatment_inventor_var
			add_trait = panum_epidemiologist
		}
		add_modifier = {
			name = panum_medical_avant_garde_modifier
			years = 5
		}
		physician_experience_gain_effect = { AMOUNT = 60 }
		panum_medium_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_treatment_polio_notification
			}
		}
		#For each First Treatment, add 8 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 8 }
		#Keeps track of the number of Disease Treatments
		panum_add_1_treatment_disease_effect = yes
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 30 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
		#For each Treatment, add 4 to the medical score
		panum_add_x_medical_score_points_effect = { AMOUNT = 4 }
	}
}

#Effect to add $AMOUNT$ Polio Description Clues
panum_add_x_polio_description_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = polio_description_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_polio_description_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_polio_description_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_polio_description_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_polio_description_clues_var
			}
		}
		set_variable = {
			name = panum_polio_description_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_polio_description_clues_var
		add = scope:polio_description_clues_amount
	}
}

#Effect to add $AMOUNT$ Polio Treatment Clues
panum_add_x_polio_treatment_clues_effect = {
	# Amount = amount of Clues to add
	save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
		name = polio_treatment_clues_amount
		value = $AMOUNT$
	}
	
	#This part is used to display an accurate tooltip (Gain, loss, etc.)
	if = { #Negative Plural Tooltip if local_var is negative
		limit = { $AMOUNT$ < 0 }
		custom_tooltip = panum_add_x_polio_treatment_clues_minus_x_tt
	}
	if = { #Neutral Tooltip if $AMOUNT$ is 0
		limit = { $AMOUNT$ = 0 }
		custom_tooltip = panum_add_x_polio_treatment_clues_0_tt
	}
	if = { #Positive Plural Tooltip if $AMOUNT$ is positive
		limit = { $AMOUNT$ > 0 }
		custom_tooltip = panum_add_x_polio_treatment_clues_plus_x_tt
	}

	#This part adds the AMOUNT of Clues
	if = { #Fallback if the variable does not exist yet
		limit = {
			NOT = {
				has_variable = panum_polio_treatment_clues_var
			}
		}
		set_variable = {
			name = panum_polio_treatment_clues_var
			value = 0
		}
	}
	change_variable = {
		name = panum_polio_treatment_clues_var
		add = scope:polio_treatment_clues_amount
	}
}

### General ###

# Remove all disease effects
panum_remove_disease_effect = {
	if = {
		limit = {
			has_modifier = panum_personal_treatment_cost_modifier
		}
		remove_modifier = panum_personal_treatment_cost_modifier
	}
	if = {
		limit = {
			has_modifier = panum_cholera_hospitals_modifier
		}
		remove_modifier = panum_cholera_hospitals_modifier
	}
	every_scope_building = {
		limit = {
			has_modifier = panum_factory_quarantine_modifier
		}
		remove_modifier = panum_factory_quarantine_modifier
	}
	every_scope_state = {
		limit = {
			has_modifier = panum_the_great_equalizer_modifier
		}
		remove_modifier = panum_the_great_equalizer_modifier
	}
	every_scope_state = {
		limit = {
			has_modifier = panum_unjust_death_modifier
		}
		remove_modifier = panum_unjust_death_modifier
	}
	every_scope_state = {
		limit = {
			has_modifier = panum_mass_graves_modifier
		}
		remove_modifier = panum_mass_graves_modifier
	}
	every_scope_state = {
		limit = {
			has_modifier = panum_slow_burials_modifier
		}
		remove_modifier = panum_slow_burials_modifier
	}
	every_scope_state = {
		limit = {
			has_modifier = panum_public_panic_modifier
		}
		remove_modifier = panum_public_panic_modifier
	}
	every_scope_character = {
		limit = {
			has_trait = panum_cholera
		}
		remove_trait = panum_cholera
		set_variable = panum_cholera_immunity_var
	}
	every_scope_character = {
		limit = {
			has_modifier = panum_personal_treatment_modifier
		}
		remove_modifier = panum_personal_treatment_modifier
	}

	######TUBERCULOSIS######

	every_scope_state = {
		limit = {
			has_modifier = panum_forbidden_spitting_modifier
		}
		remove_modifier = panum_forbidden_spitting_modifier
	}
	every_scope_state = {
		limit = {
			has_modifier = panum_tuberculosis_quarantine_modifier
		}
		remove_modifier = panum_tuberculosis_quarantine_modifier
	}
	every_scope_character = {
		limit = {
			has_trait = panum_tuberculosis
		}
		remove_trait = panum_tuberculosis
		set_variable = panum_tuberculosis_immunity_var
	}
	every_scope_state = {
		limit = {
			has_modifier = panum_help_against_tuberculosis_modifier
		}
		remove_modifier = panum_help_against_tuberculosis_modifier
	}
	every_scope_state = {
		limit = {
			has_modifier = panum_tuberculosis_hospital_modifier
		}
		remove_modifier = panum_tuberculosis_hospital_modifier
	}

	######TYPHUS######

	every_scope_state = {
		limit = {
			has_modifier = panum_typhus_quarantine_modifier
		}
		remove_modifier = panum_typhus_quarantine_modifier
	}

	every_scope_state = {
		limit = {
			has_modifier = panum_typhus_fever_sheds_modifier
		}
		remove_modifier = panum_typhus_fever_sheds_modifier
	}

	every_scope_state = {
		limit = {
			has_modifier = panum_typhus_rigid_rules_modifier
		}
		remove_modifier = panum_typhus_rigid_rules_modifier
	}

	if = {
		limit = {
			has_modifier = panum_typhus_fever_sheds_help_modifier
		}
		remove_modifier = panum_typhus_fever_sheds_help_modifier
	}

	every_scope_state = {
		limit = {
			has_modifier = panum_additional_fever_shed_protection_modifier
		}
		remove_modifier = panum_additional_fever_shed_protection_modifier
	}

	every_scope_state = {
		limit = {
			has_modifier = panum_additional_funeral_aids_modifier
		}
		remove_modifier = panum_additional_funeral_aids_modifier
	}

	every_scope_building = {
		limit = {
			has_modifier = panum_typhus_barracks_modifier
		}
		remove_modifier = panum_typhus_barracks_modifier
	}

	######YELLOW FEVER######

	every_scope_state = {
		limit = {
			has_modifier = panum_yellow_fever_quarantine_modifier
		}
		remove_modifier = panum_yellow_fever_quarantine_modifier
	}

	every_scope_building = {
		limit = {
			has_modifier = panum_plantation_quarantine_modifier
		}
		remove_modifier = panum_plantation_quarantine_modifier
	}

	every_scope_state = {
		limit = {
			has_modifier = panum_administrative_evacuation_modifier
		}
		remove_modifier = panum_administrative_evacuation_modifier
	}

	every_scope_building = {
		limit = {
			has_modifier = panum_yellow_fever_barracks_modifier
		}
		remove_modifier = panum_yellow_fever_barracks_modifier
	}

	every_scope_building = {
		limit = {
			has_modifier = panum_yellow_fever_port_modifier
		}
		remove_modifier = panum_yellow_fever_port_modifier
	}
}

# Add Medical Inventions (Descriptions, Treatments) depending on start date
panum_set_start_medical_inventions_effect = {
	if = {
		limit = {
			game_date >= 1796.1.1 #Edward Jenner invents vaccine
		}
		set_global_variable = {
			name = theiler_smallpox_vaccine_year_global_var
			value = 1796
		}
		if = {
			limit = {
				exists = c:GBR
			}
			c:GBR = {
				country_definition = {
					set_global_variable = {
						name = theiler_smallpox_vaccine_invented_global_var
						value = this
					}
				}
			}
		}
	}
	if = {
		limit = {
			game_date >= 1500.1.1 #Variolation
		}
		set_global_variable = {
			name = panum_smallpox_treatment_year_global_var
			value = 1500
		}
		if = {
			limit = {
				exists = c:CHI
			}
			c:CHI = {
				country_definition = {
					set_global_variable = {
						name = panum_smallpox_treatment_invented_global_var
						value = this
					}
				}
			}
		}
	}
	if = {
		limit = {
			game_date >= 925.1.1 #Rhazes
		}
		set_global_variable = {
			name = panum_smallpox_description_year_global_var
			value = 925
		}
		if = {
			limit = {
				exists = c:PER
			}
			c:PER = {
				country_definition = {
					set_global_variable = {
						name = panum_smallpox_description_invented_global_var
						value = this
					}
				}
			}
		}
	}
	every_country = {
		set_variable = GUI_panum_cholera_information_display_visible_var #Used to display something in the Medical Faculty
		set_variable = { #Used for the ranking
			name = panum_medical_score_points_var
			value = 0
		}
	}
	#Smallpox should basically be defeated in 1836
	if = {
		limit = {
			year >= 1836
		}
		every_country = {
			limit = {
				NOT = { is_country_type = decentralized }
			}
			set_variable = panum_smallpox_description_var
			#Keeps track of the number of described Diseases
			panum_add_1_described_disease_effect = yes
			set_variable = panum_smallpox_treatment_var
			#Keeps track of the number of Disease Treatments
			panum_add_1_treatment_disease_effect = yes
			if = {
				limit = { has_technology_researched = panum_vaccination_tech }
				set_variable = theiler_smallpox_vaccine_var
			}
		}
	}
}

# Add Disease Description JE depending on the current local epidemic
panum_set_je_description_local_effect = {
	if = {
		limit = {
			has_journal_entry = je_panum_cholera
		}
		add_journal_entry = {
			type = je_panum_cholera_description
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_tuberculosis
		}
		add_journal_entry = {
			type = je_panum_tuberculosis_description
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_smallpox
		}
		add_journal_entry = {
			type = je_panum_smallpox_description
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_typhus
		}
		add_journal_entry = {
			type = je_panum_typhus_description
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_yellow_fever
		}
		add_journal_entry = {
			type = je_panum_yellow_fever_description
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_measles
		}
		add_journal_entry = {
			type = je_panum_measles_description
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_scarlet
		}
		add_journal_entry = {
			type = je_panum_scarlet_description
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_plague
		}
		add_journal_entry = {
			type = je_panum_plague_description
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_diphteria
		}
		add_journal_entry = {
			type = je_panum_diphteria_description
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_polio
		}
		add_journal_entry = {
			type = je_panum_polio_description
		}
	}
}

# Add a Disease Description clue depending on the JE for the expedition
panum_add_description_expedition_clue_effect = {
	if = {
		limit = {
			has_journal_entry = je_panum_cholera_description_expedition
		}
		panum_add_x_cholera_description_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_tuberculosis_description_expedition
		}
		panum_add_x_tuberculosis_description_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_smallpox_description_expedition
		}
		panum_add_x_smallpox_description_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_typhus_description_expedition
		}
		panum_add_x_typhus_description_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_yellow_fever_description_expedition
		}
		panum_add_x_yellow_fever_description_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_measles_description_expedition
		}
		panum_add_x_measles_description_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_scarlet_description_expedition
		}
		panum_add_x_scarlet_description_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_plague_description_expedition
		}
		panum_add_x_plague_description_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_diphteria_description_expedition
		}
		panum_add_x_diphteria_description_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_polio_description_expedition
		}
		panum_add_x_polio_description_clues_effect = { AMOUNT = 1 }
	}
	post_notification = panum_description_medical_expedition_notification
}

# Add Disease Treatment JE depending on the current local epidemic
panum_set_je_treatment_local_effect = {
	if = {
		limit = {
			has_journal_entry = je_panum_cholera
		}
		add_journal_entry = {
			type = je_panum_cholera_treatment
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_tuberculosis
		}
		add_journal_entry = {
			type = je_panum_tuberculosis_treatment
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_smallpox
		}
		add_journal_entry = {
			type = je_panum_smallpox_treatment
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_typhus
		}
		add_journal_entry = {
			type = je_panum_typhus_treatment
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_yellow_fever
		}
		add_journal_entry = {
			type = je_panum_yellow_fever_treatment
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_measles
		}
		add_journal_entry = {
			type = je_panum_measles_treatment
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_scarlet
		}
		add_journal_entry = {
			type = je_panum_scarlet_treatment
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_plague
		}
		add_journal_entry = {
			type = je_panum_plague_treatment
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_diphteria
		}
		add_journal_entry = {
			type = je_panum_diphteria_treatment
		}
	}
	if = {
		limit = {
			has_journal_entry = je_panum_diphteria
		}
		add_journal_entry = {
			type = je_panum_diphteria_treatment
		}
	}
}

# Add a Disease Treatment clue depending on the JE for the expedition
panum_add_treatment_expedition_clue_effect = {
	if = {
		limit = {
			has_journal_entry = je_panum_cholera_treatment_expedition
		}
		panum_add_x_cholera_treatment_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_tuberculosis_treatment_expedition
		}
		panum_add_x_tuberculosis_treatment_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_smallpox_treatment_expedition
		}
		panum_add_x_smallpox_treatment_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_typhus_treatment_expedition
		}
		panum_add_x_typhus_treatment_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_yellow_fever_treatment_expedition
		}
		panum_add_x_yellow_fever_treatment_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_measles_treatment_expedition
		}
		panum_add_x_measles_treatment_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_scarlet_treatment_expedition
		}
		panum_add_x_scarlet_treatment_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_plague_treatment_expedition
		}
		panum_add_x_plague_treatment_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_diphteria_treatment_expedition
		}
		panum_add_x_diphteria_treatment_clues_effect = { AMOUNT = 1 }
	}
	if = {
		limit = {
			has_journal_entry = je_panum_polio_treatment_expedition
		}
		panum_add_x_polio_treatment_clues_effect = { AMOUNT = 1 }
	}
	post_notification = panum_treatment_medical_expedition_notification
}

# Add Disease Description depending on Disease
panum_add_disease_description_effect = {
	if = {
		limit = {
			var:panum_disease_title_var ?= 1
		}
		panum_add_cholera_description_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 2
		}
		panum_add_tuberculosis_description_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 3
		}
		panum_add_smallpox_description_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 4
		}
		panum_add_typhus_description_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 5
		}
		panum_add_yellow_fever_description_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 6
		}
		panum_add_measles_description_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 7
		}
		panum_add_scarlet_description_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 8
		}
		panum_add_plague_description_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 9
		}
		panum_add_diphteria_description_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 10
		}
		panum_add_polio_description_effect = yes
	}
}

# Add Disease Treatment depending on Disease
panum_add_disease_treatment_effect = {
	if = {
		limit = {
			var:panum_disease_title_var ?= 1
		}
		panum_add_cholera_treatment_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 2
		}
		panum_add_tuberculosis_treatment_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 3
		}
		panum_add_smallpox_treatment_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 4
		}
		panum_add_typhus_treatment_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 5
		}
		panum_add_yellow_fever_treatment_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 6
		}
		panum_add_measles_treatment_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 7
		}
		panum_add_scarlet_treatment_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 8
		}
		panum_add_plague_treatment_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 9
		}
		panum_add_diphteria_treatment_effect = yes
	}
	if = {
		limit = {
			var:panum_disease_title_var ?= 10
		}
		panum_add_polio_treatment_effect = yes
	}
}

# Add a 50 % chance that the physician gains the Epidemiologist trait
panum_add_epidemiologist_chance_effect = {
	if = {
		limit = {
			NOT = {
				var:panum_physician_var = {
					has_trait = panum_epidemiologist
				}
			}
		}
		random_list = {
			1 = {
				var:panum_physician_var = {
					add_trait = panum_epidemiologist
				}
			}
			1 = {}
		}
	}
	var:panum_physician_var = {
		set_character_busy_and_immortal = no
	}
}

# Add clues on Medical Congress depending on Congress Topic
panum_add_medical_congress_clues_effect = {
	#General
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_general_var
			}
		}
		dubois_add_x_academy_progress = { AMOUNT = 20 }
	}
	#Cholera
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_cholera_var
			}
		}
		if = {
			limit = {
				panum_has_physician = yes
			}
			panum_add_x_cholera_description_clues_effect = { AMOUNT = 1 }
			panum_add_x_cholera_treatment_clues_effect = { AMOUNT = 2 }
		}
		if = {
			limit = {
				theiler_has_microbiologist = yes
			}
			theiler_add_x_cholera_pathogen_clues_effect = { AMOUNT = 1 }
			theiler_add_x_cholera_vaccine_clues_effect = { AMOUNT = 2 }
		}
	}
	#Tuberculosis
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_tuberculosis_var
			}
		}
		if = {
			limit = {
				panum_has_physician = yes
			}
			panum_add_x_tuberculosis_description_clues_effect = { AMOUNT = 1 }
			panum_add_x_tuberculosis_treatment_clues_effect = { AMOUNT = 2 }
		}
		if = {
			limit = {
				theiler_has_microbiologist = yes
			}
			theiler_add_x_tuberculosis_pathogen_clues_effect = { AMOUNT = 1 }
			theiler_add_x_tuberculosis_vaccine_clues_effect = { AMOUNT = 2 }
		}
	}
	#Smallpox
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_smallpox_var
			}
		}
		if = {
			limit = {
				panum_has_physician = yes
			}
			panum_add_x_smallpox_description_clues_effect = { AMOUNT = 1 }
			panum_add_x_smallpox_treatment_clues_effect = { AMOUNT = 2 }
		}
		if = {
			limit = {
				theiler_has_microbiologist = yes
			}
			theiler_add_x_smallpox_pathogen_clues_effect = { AMOUNT = 1 }
			theiler_add_x_smallpox_vaccine_clues_effect = { AMOUNT = 2 }
		}
	}
	#Typhus
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_typhus_var
			}
		}
		if = {
			limit = {
				panum_has_physician = yes
			}
			panum_add_x_typhus_description_clues_effect = { AMOUNT = 1 }
			panum_add_x_typhus_treatment_clues_effect = { AMOUNT = 2 }
		}
		if = {
			limit = {
				theiler_has_microbiologist = yes
			}
			theiler_add_x_typhus_pathogen_clues_effect = { AMOUNT = 1 }
			theiler_add_x_typhus_vaccine_clues_effect = { AMOUNT = 2 }
		}
	}
	#Yellow Fever
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_yellow_fever_var
			}
		}
		if = {
			limit = {
				panum_has_physician = yes
			}
			panum_add_x_yellow_fever_description_clues_effect = { AMOUNT = 1 }
			panum_add_x_yellow_fever_treatment_clues_effect = { AMOUNT = 2 }
		}
		if = {
			limit = {
				theiler_has_microbiologist = yes
			}
			theiler_add_x_yellow_fever_pathogen_clues_effect = { AMOUNT = 1 }
			theiler_add_x_yellow_fever_vaccine_clues_effect = { AMOUNT = 2 }
		}
	}
	#Measles
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_measles_var
			}
		}
		if = {
			limit = {
				panum_has_physician = yes
			}
			panum_add_x_measles_description_clues_effect = { AMOUNT = 1 }
			panum_add_x_measles_treatment_clues_effect = { AMOUNT = 2 }
		}
		if = {
			limit = {
				theiler_has_microbiologist = yes
			}
			theiler_add_x_measles_pathogen_clues_effect = { AMOUNT = 1 }
			theiler_add_x_measles_vaccine_clues_effect = { AMOUNT = 2 }
		}
	}
	#Scarlet
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_scarlet_var
			}
		}
		if = {
			limit = {
				panum_has_physician = yes
			}
			panum_add_x_scarlet_description_clues_effect = { AMOUNT = 1 }
			panum_add_x_scarlet_treatment_clues_effect = { AMOUNT = 2 }
		}
		if = {
			limit = {
				theiler_has_microbiologist = yes
			}
			theiler_add_x_scarlet_pathogen_clues_effect = { AMOUNT = 1 }
			theiler_add_x_scarlet_vaccine_clues_effect = { AMOUNT = 2 }
		}
	}
	#Plague
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_plague_var
			}
		}
		if = {
			limit = {
				panum_has_physician = yes
			}
			panum_add_x_plague_description_clues_effect = { AMOUNT = 1 }
			panum_add_x_plague_treatment_clues_effect = { AMOUNT = 2 }
		}
		if = {
			limit = {
				theiler_has_microbiologist = yes
			}
			theiler_add_x_plague_pathogen_clues_effect = { AMOUNT = 1 }
			theiler_add_x_plague_vaccine_clues_effect = { AMOUNT = 2 }
		}
	}
	#Diphteria
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_diphteria_var
			}
		}
		if = {
			limit = {
				panum_has_physician = yes
			}
			panum_add_x_diphteria_description_clues_effect = { AMOUNT = 1 }
			panum_add_x_diphteria_treatment_clues_effect = { AMOUNT = 2 }
		}
		if = {
			limit = {
				theiler_has_microbiologist = yes
			}
			theiler_add_x_diphteria_pathogen_clues_effect = { AMOUNT = 1 }
			theiler_add_x_diphteria_vaccine_clues_effect = { AMOUNT = 2 }
		}
	}
	#Polio
	if = {
		limit = {
			any_country = {
				has_modifier = panum_congress_host_modifier
				has_variable = panum_medical_congress_polio_var
			}
		}
		if = {
			limit = {
				panum_has_physician = yes
			}
			panum_add_x_polio_description_clues_effect = { AMOUNT = 1 }
			panum_add_x_polio_treatment_clues_effect = { AMOUNT = 2 }
		}
		if = {
			limit = {
				theiler_has_microbiologist = yes
			}
			theiler_add_x_polio_pathogen_clues_effect = { AMOUNT = 1 }
			theiler_add_x_polio_vaccine_clues_effect = { AMOUNT = 2 }
		}
	}
}

#Effect to add $AMOUNT$ Germ Theory Clues
panum_add_x_germ_theory_clues_effect = {
	if = {
		limit = {
			panum_has_miasma_theory_trigger = yes #Obsolete when Miasma theory was refuted
		}
		# Amount = amount of Clues to add
		save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
			name = germ_theory_clues_amount
			value = $AMOUNT$
		}

		#This part is used to display an accurate tooltip (Gain, loss, etc.)
		if = { #Negative Plural Tooltip if local_var is negative
			limit = { $AMOUNT$ < 0 }
			custom_tooltip = panum_add_x_germ_theory_clues_minus_x_tt
		}
		if = { #Neutral Tooltip if $AMOUNT$ is 0
			limit = { $AMOUNT$ = 0 }
			custom_tooltip = panum_add_x_germ_theory_clues_0_tt
		}
		if = { #Positive Plural Tooltip if $AMOUNT$ is positive
			limit = { $AMOUNT$ > 0 }
			custom_tooltip = panum_add_x_germ_theory_clues_plus_x_tt
		}

		#This part adds the AMOUNT of Clues
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_germ_theory_clues_var
				}
			}
			set_variable = {
				name = panum_germ_theory_clues_var
				value = 0
			}
		}
		change_variable = {
			name = panum_germ_theory_clues_var
			add = scope:germ_theory_clues_amount
		}
	}
}

# This effect adds the Germm Theory
panum_add_germ_theory_effect = {
	custom_tooltip = {
		text = panum_add_germ_theory_effect_tt
		set_variable = panum_germ_theory_var
	}
	if = {
		limit = {
			NOT = {
				has_global_variable = panum_germ_theory_invented_global_var
			}
		}
		set_global_variable = {
			name = panum_germ_theory_invented_global_var
			value = year
		}
		country_definition = {
			set_global_variable = {
				name = panum_germ_theory_invented_global_var
				value = this
			}
		}
		var:panum_physician_var = {
			set_variable = panum_physician_achievement_germ_theory_inventor_var
			add_trait = panum_epidemiologist
			add_trait = theiler_microbiologist
		}
		physician_experience_gain_effect = { AMOUNT = 50 }
		panum_large_add_technology = yes
		hidden_effect = {
			every_country = {
				limit = {
					is_player = yes
				}
				post_notification = panum_germ_theory_notification
			}
		}
	}
	else = {
		physician_experience_gain_effect = { AMOUNT = 25 }
		panum_small_add_technology = yes
		panum_add_epidemiologist_chance_effect = yes
	}
}

#Effect to add $AMOUNT$ Medical Score Points
panum_add_x_medical_score_points_effect = {
	if = {
		# Amount = amount of Points to add
		save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
			name = medical_score_points_amount
			value = $AMOUNT$
		}

		#This part is used to display an accurate tooltip (Gain, loss, etc.)
		if = { #Negative Plural Tooltip if local_var is negative
			limit = { $AMOUNT$ < 0 }
			custom_tooltip = panum_add_x_medical_score_points_minus_x_tt
		}
		if = { #Neutral Tooltip if $AMOUNT$ is 0
			limit = { $AMOUNT$ = 0 }
			custom_tooltip = panum_add_x_medical_score_points_0_tt
		}
		if = { #Positive Plural Tooltip if $AMOUNT$ is positive
			limit = { $AMOUNT$ > 0 }
			custom_tooltip = panum_add_x_medical_score_points_plus_x_tt
		}

		#This part adds the AMOUNT of Points
		if = { #Fallback if the variable does not exist yet
			limit = {
				NOT = {
					has_variable = panum_medical_score_points_var
				}
			}
			set_variable = {
				name = panum_medical_score_points_var
				value = 0
			}
		}
		change_variable = {
			name = panum_medical_score_points_var
			add = scope:medical_score_points_amount
		}
		panum_update_medical_score_modifier_effect = yes
	}
}

#Effect to update the medical score modifier
panum_update_medical_score_modifier_effect = {
	#This part removes every Medical Prestige Modifier
	while = {
		limit = {
			has_modifier = panum_medical_score_prestige_modifier
		}
		remove_modifier = panum_medical_score_prestige_modifier
	}
	#Adds the Medical Prestige Modifier if the country has any medical prestige
	if = {
		limit = { var:panum_medical_score_points_var > 0 }
		add_modifier = {
			name = panum_medical_score_prestige_modifier
			multiplier = root.var:panum_medical_score_points_var #Multiplies the base prestige with the number of medical points
		}
	}
}

### Medical Reformer ###

panum_create_medical_reformer_effect = {
	create_character = {
		is_agitator = yes
		ideology = ideology_panum_medical_reformer_public
		on_created = {
			add_trait = panum_physician
			add_modifier = {
				name = panum_medical_reformer_modifier
				is_decaying = yes
				years = 5
			}
		}
	}
}

### Effect for starting research from the Disease Journal Entry ###
panum_general_disease_research_from_je_effect = {
	every_country = {
		limit = {
			has_diplomatic_relevance = ROOT
			panum_has_active_physician_no_tooltip_trigger = yes
			NOT = { has_variable = panum_physician_action_active_var }
			OR = {
				panum_has_$DISEASE$_description_trigger = no
				AND = {
					panum_has_$DISEASE$_description_trigger = yes
					panum_has_$DISEASE$_treatment_trigger = no
				}
			}
		}
		if = {
			limit = {
				root = this
			}
			if = {
				limit = {
					is_ai = yes
				}
				#Effect for this country if it is AI
				if = {
					limit = { panum_has_$DISEASE$_description_trigger = no }
					set_variable = panum_physician_describe_disease_active_var
					random_scope_state = {
						limit = {
							panum_state_has_epidemic_trigger = yes
						}
						save_scope_as = panum_disease_state
					}
					var:panum_physician_var = {
						set_character_busy_and_immortal = yes
					}
					add_journal_entry = {
						type = je_panum_$DISEASE$_description
					}
				}
				else_if = {
					limit = {
						panum_has_$DISEASE$_treatment_trigger = no
						panum_$DISEASE$_research_tech_requirement_trigger = yes
					}
					set_variable = panum_physician_find_treatment_active_var
					random_scope_state = {
						limit = {
							panum_state_has_epidemic_trigger = yes
						}
						save_scope_as = panum_disease_state
					}
					var:panum_physician_var = {
						set_character_busy_and_immortal = yes
					}
					add_journal_entry = {
						type = je_panum_$DISEASE$_treatment
					}
				}
			}
		}
		else_if = {
			limit = {
				is_player = yes
				has_technology_researched = civilizing_mission
			}
			#Effect for foreign Player Country
			if = {
				limit = { panum_has_$DISEASE$_description_trigger = no }
				if = {
					limit = {
						NOR = {
							has_variable = panum_foreign_disease_research_only_notification_var
							has_variable = panum_foreign_disease_research_no_notification_var
						}
					}
					trigger_event = {
						id = panum.55
						popup = yes
					}
				}
				else_if = {
					limit = { has_variable = panum_foreign_disease_research_only_notification_var }
					post_notification = panum_foreign_description_possible_notification
				}
			}
			else_if = {
				limit = {
					panum_has_$DISEASE$_treatment_trigger = no
					panum_$DISEASE$_research_tech_requirement_trigger = yes
				}
				if = {
					limit = {
						NOR = {
							has_variable = panum_foreign_disease_research_only_notification_var
							has_variable = panum_foreign_disease_research_no_notification_var
						}
					}
					trigger_event = {
						id = panum.56
						popup = yes
					}
				}
				else_if = {
					limit = { has_variable = panum_foreign_disease_research_only_notification_var }
					post_notification = panum_foreign_treatment_possible_notification
				}
			}
		}
		else_if = {
			limit = { has_technology_researched = civilizing_mission }
			#Effect for foreign AI Country
			if = {
				limit = { panum_has_$DISEASE$_description_trigger = no }
				set_variable = panum_physician_describe_disease_foreign_active_var
				var:panum_physician_var = {
					set_character_busy_and_immortal = yes
				}
				add_journal_entry = {
					type = je_panum_$DISEASE$_description_expedition
					target = root
				}
			}
			else_if = {
				limit = {
					panum_has_$DISEASE$_treatment_trigger = no
					panum_$DISEASE$_research_tech_requirement_trigger = yes
				}
				set_variable = panum_physician_find_treatment_foreign_active_var
				var:panum_physician_var = {
					set_character_busy_and_immortal = yes
				}
				add_journal_entry = {
					type = je_panum_$DISEASE$_treatment_expedition
					target = root
				}
			}
		}
	}
}

### End of JEs ###
panum_remove_active_variables_effect = {
	remove_variable = panum_physician_describe_disease_active_var
	remove_variable = panum_physician_describe_disease_foreign_active_var
	remove_variable = panum_physician_find_treatment_active_var
	remove_variable = panum_physician_find_treatment_foreign_active_var
}

### Effect to remove all diseases variables ###
panum_remove_all_diseases_catalogue_variables_effect = {
	remove_variable = GUI_panum_cholera_information_display_visible_var
	remove_variable = GUI_panum_diphteria_information_display_visible_var
	remove_variable = GUI_panum_measles_information_display_visible_var
	remove_variable = GUI_panum_plague_information_display_visible_var
	remove_variable = GUI_panum_polio_information_display_visible_var
	remove_variable = GUI_panum_scarlet_information_display_visible_var
	remove_variable = GUI_panum_smallpox_information_display_visible_var
	remove_variable = GUI_panum_tuberculosis_information_display_visible_var
	remove_variable = GUI_panum_typhus_information_display_visible_var
	remove_variable = GUI_panum_yellow_fever_information_display_visible_var
}

#This effect creates a list of all characters of a country, that could be treated

#Checks if any characters of a country can be treated
panum_set_treatment_list_effect = {
	clear_variable_list = panum_characters_to_treat_variable_list

	every_scope_character = {
		limit = {
			NOT = { has_modifier = panum_physician_recent_treatment_modifier }
			is_ruler = yes
			panum_character_has_negative_health_trait_trigger = yes
		}
		root = {
			add_to_variable_list = {
				name = panum_characters_to_treat_variable_list
				target = prev
			}
		}
	}
	every_scope_character = {
		limit = {
			NOT = { has_modifier = panum_physician_recent_treatment_modifier }
			has_role = politician
			panum_character_has_negative_health_trait_trigger = yes
		}
		root = {
			add_to_variable_list = {
				name = panum_characters_to_treat_variable_list
				target = prev
			}
		}
	}
	every_scope_character = {
		limit = {
			NOT = { has_modifier = panum_physician_recent_treatment_modifier }
			has_role = agitator
			panum_character_has_negative_health_trait_trigger = yes
		}
		root = {
			add_to_variable_list = {
				name = panum_characters_to_treat_variable_list
				target = prev
			}
		}
	}
	every_scope_character = {
		limit = {
			NOT = { has_modifier = panum_physician_recent_treatment_modifier }
			has_role = general
			panum_character_has_negative_health_trait_trigger = yes
		}
		root = {
			add_to_variable_list = {
				name = panum_characters_to_treat_variable_list
				target = prev
			}
		}
	}
	every_scope_character = {
		limit = {
			NOT = { has_modifier = panum_physician_recent_treatment_modifier }
			has_role = admiral
			panum_character_has_negative_health_trait_trigger = yes
		}
		root = {
			add_to_variable_list = {
				name = panum_characters_to_treat_variable_list
				target = prev
			}
		}
	}
	if = {
		limit = {
			gaudi_has_engineer = yes
			var:gaudi_engineer_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:gaudi_engineer_var
		}
	}
	if = {
		limit = {
			mendelejew_has_chemist_no_tooltip_trigger = yes
			var:mendelejew_chemist_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:mendelejew_chemist_var
		}
	}
	if = {
		limit = {
			verrier_has_astronomer_no_tooltip_trigger = yes
			var:verrier_astronomer_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:verrier_astronomer_var
		}
	}
	if = {
		limit = {
			curie_has_physicist_no_tooltip_trigger = yes
			var:curie_physicist_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:curie_physicist_var
		}
	}
	if = {
		limit = {
			dubois_has_geologist_no_tooltip_trigger = yes
			var:dubois_geologist_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:dubois_geologist_var
		}
	}
	if = {
		limit = {
			dubois_has_naturalist_no_tooltip_trigger = yes
			var:dubois_naturalist_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:dubois_naturalist_var
		}
	}
	if = {
		limit = {
			dubois_has_paleontologist_no_tooltip_trigger = yes
			var:dubois_paleontologist_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:dubois_paleontologist_var
		}
	}
	if = {
		limit = {
			theiler_has_biologist_no_tooltip_trigger = yes
			var:theiler_biologist_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:theiler_biologist_var
		}
	}
	if = {
		limit = {
			lepsius_has_archaeologist_no_tooltip_trigger = yes
			var:lepsius_archaeologist_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:lepsius_archaeologist_var
		}
	}
	if = {
		limit = {
			lepsius_has_anthropologist_no_tooltip_trigger = yes
			var:lepsius_anthropologist_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:lepsius_anthropologist_var
		}
	}
	if = {
		limit = {
			elgar_has_composer_no_tooltip_trigger = yes
			var:elgar_composer_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:elgar_composer_var
		}
	}
	if = {
		limit = {
			manzoni_has_writer_no_tooltip = yes
			var:manzoni_writer_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:manzoni_writer_var
		}
	}
	if = {
		limit = {
			klimt_has_painter_no_tooltip = yes
			var:klimt_painter_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:klimt_painter_var
		}
	}
	if = {
		limit = {
			curtiss_has_balloonist_no_tooltip_trigger = yes
			var:curtiss_balloonist_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:curtiss_balloonist_var
		}
	}
	if = {
		limit = {
			curtiss_has_pilot_no_tooltip_trigger = yes
			var:curtiss_pilot_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:curtiss_pilot_var
		}
	}
	if = {
		limit = {
			has_variable = vikelas_racer_var
			var:vikelas_racer_var = {
				NOT = { has_modifier = panum_physician_recent_treatment_modifier }
				panum_character_has_negative_health_trait_trigger = yes
			}
		}
		add_to_variable_list = {
			name = panum_characters_to_treat_variable_list
			target = var:vikelas_racer_var
		}
	}
}

#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
panum_botched_treatment_ig_effect = {
	if = {
		limit = {
			OR = {
				has_role = politician
				has_role = agitator
				has_role = general
				has_role = admiral
			}
		}

		interest_group = {
			add_modifier = {
				name = panum_physician_botched_treatment_ig_modifier
				years = 2
			}
		}
	}
}

#This effect is used to add cooldown modifiers to the physician and the the patient
panum_treatment_cooldown_modifier_add_effect = {
	var:panum_physician_var = {
		add_modifier = {
			name = panum_physician_recent_treatment_conducted_modifier
			months = 6
		}
	}
	scope:chosen_character = {
		add_modifier = {
			name = panum_physician_recent_treatment_modifier
			years = 2
		}
	}
}

#Effect to add succesful treatment variable
panum_add_successful_treatment_effect = {
	var:panum_physician_var ?= {
		if = {
			limit = {
				NOT = { has_variable = panum_physician_successful_treatments_var }
			}
			set_variable = {
				name = panum_physician_successful_treatments_var
				value = 1
			}
		}
		else = {
			change_variable = {
				name = panum_physician_successful_treatments_var
				add = 1
			}
		}
	}
}
