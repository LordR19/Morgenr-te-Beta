### ARCHAEOLOGIST BUTTONS ###
#MR_INSPECT_EXCAVATION_BUTTON
mr_inspect_excavation_button = {
    scope = country
	is_shown = {
		lepsius_has_discovery_excavation = yes
		lepsius_on_excavation_inspection = no
		NOT = {
			has_modifier = lepsius_recent_excavation_inspection_modifier
		}
		NOT = {
			has_variable = lepsius_inspect_excavation_decision_on
		}
	}
    is_valid = {
		custom_tooltip = {
			text = lepsius_inspect_excavation_tt
			lepsius_has_discovery_excavation = yes
 		}
		custom_tooltip = {
			text = lepsius_has_artifacts_for_discovery_tt
			lepsius_has_artifacts_for_discovery = yes
 		}
		has_technology_researched = lepsius_modern_archaeology_tech
		OR = {
			lepsius_has_active_experienced_archaeologist = yes
			lepsius_has_active_famous_archaeologist = yes
		}
    }
    effect = {
		set_variable = lepsius_inspect_excavation_decision_on
		trigger_event = { 
			id = lepsius.801 
			popup = yes 
		}
    }
    ai_chance = {
		base = 100
	}
}

#MR_CANCEL_EXCAVATION_BUTTON
mr_cancel_excavation_button = {
    scope = country
	is_shown = {
		is_player = yes
		lepsius_on_archaeological_excavation = yes
		lepsius_on_excavation_inspection = no
		NOT = {
			has_variable = lepsius_cancel_excavation_decision_on
		}
	}
    is_valid = {
		custom_tooltip = {
			text = lepsius_on_archaeological_excavation_tt
			lepsius_on_archaeological_excavation = yes
 		}
    }
    effect = {
		set_variable = lepsius_cancel_excavation_decision_on
		trigger_event = { id = lepsius.190 popup = yes }
    }
    ai_chance = {
		base = 0
	}
}

#MR_LOCAL_EXCAVATION_BUTTON
mr_local_excavation_button = {
    scope = country
	is_shown = {
		has_technology_researched = lepsius_antiquarianism_tech
		NOT = {
			has_modifier = lepsius_local_excavation_modifier
		}
	}
    is_valid = {
		has_technology_researched = lepsius_early_archaeology_tech
		custom_tooltip = {
			text = lepsius_excavation_team_needed_tt
			var:lepsius_excavation_teams >= 1
 		}
		lepsius_has_active_archaeologist = yes
    }
    effect = {
		add_treasury = -25000
		custom_tooltip = {
			text = lepsius_sub_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = -1
 			}
 		}
		lepsius_set_archaeologist_busy_effect = yes
		hidden_effect = {
			trigger_event = { id = lepsius.1201 popup = yes }			
		}
    }
    ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				country_rank <= rank_value:major_power
			}
			add = 100
		}
		modifier = {
			trigger = { 
				var:lepsius_local_artifact_minor >= 50
			}
			add = -1000
		}
	}
}

#MR_FIRST_EXCAVATION_TEAM_BUTTON
mr_first_excavation_team_button = {
    scope = country
	is_shown = {
		has_technology_researched = lepsius_antiquarianism_tech
		NOT = {
			has_variable = lepsius_first_excavation_team
		}
	}
    is_valid = {
		has_technology_researched = lepsius_antiquarianism_tech
		any_scope_building = {
			is_building_type = building_university
			level >= 3
		}
		literacy_rate >= 0.33
    }
    effect = {
		lepsius_total_excavation_teams_add = yes
		custom_tooltip = {
			text = lepsius_add_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = 1
			}
 		}	
		set_variable = lepsius_first_excavation_team	
    }
    ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
	}
}

#MR_SECOND_EXCAVATION_TEAM_BUTTON
mr_second_excavation_team_button = {
    scope = country
	is_shown = {
		has_technology_researched = lepsius_antiquarianism_tech
		has_variable = lepsius_first_excavation_team
		NOT = {
			has_variable = lepsius_second_excavation_team
		}
	}
    is_valid = {
		has_technology_researched = lepsius_antiquarianism_tech
		lepsius_has_experienced_archaeologist = yes
		any_scope_building = {
			is_building_type = building_lepsius_archaeological_museum
		}
    }
    effect = {
		lepsius_total_excavation_teams_add = yes
		custom_tooltip = {
			text = lepsius_add_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = 1
			}
 		}	
		set_variable = lepsius_second_excavation_team	
    }
    ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				NOT = {
					any_country = {
						has_diplomatic_pact = {
							who = ROOT
							type = excavation_license
						}				
						lepsius_has_excavation_site = yes
					}
				}
			}
			add = -1000
		}
	}
}

#MR_THIRD_EXCAVATION_TEAM_BUTTON
mr_third_excavation_team_button = {
    scope = country
	is_shown = {
		has_technology_researched = lepsius_modern_archaeology_tech
		has_variable = lepsius_first_excavation_team
		has_variable = lepsius_second_excavation_team
		NOT = {
			has_variable = lepsius_third_excavation_team
		}
	}
    is_valid = {
		has_technology_researched = lepsius_modern_archaeology_tech
		any_scope_building = {
			is_building_type = building_university
			level >= 15
		}
		literacy_rate >= 0.66
    }
    effect = {
		lepsius_total_excavation_teams_add = yes
		custom_tooltip = {
			text = lepsius_add_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = 1
			}
 		}		
		set_variable = lepsius_third_excavation_team
    }
    ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				NOT = {
					any_country = {
						has_diplomatic_pact = {
							who = ROOT
							type = excavation_license
						}				
						lepsius_has_excavation_site = yes
					}
				}
			}
			add = -1000
		}
	}
}

#MR_FOURTH_EXCAVATION_TEAM_BUTTON
mr_fourth_excavation_team_button = {
    scope = country
	is_shown = {
		has_technology_researched = lepsius_modern_archaeology_tech
		has_variable = lepsius_first_excavation_team
		has_variable = lepsius_second_excavation_team
		has_variable = lepsius_third_excavation_team
		NOT = {
			has_variable = lepsius_fourth_excavation_team
		}
	}
    is_valid = {
		has_technology_researched = lepsius_modern_archaeology_tech
		lepsius_has_famous_archaeologist = yes
    }
    effect = {
		lepsius_total_excavation_teams_add = yes
		custom_tooltip = {
			text = lepsius_add_archaeological_team_tt
			change_variable = {
 				name = lepsius_excavation_teams
 				add = 1
			}
 		}		
		set_variable = lepsius_fourth_excavation_team	
    }
    ai_chance = {
		base = 0
		modifier = {
			trigger = { 
				weekly_net_fixed_income > money_amount_multiplier_medium
				gold_reserves > 0
			}
			add = 100
		}
		modifier = {
			trigger = {
				NOT = {
					any_country = {
						has_diplomatic_pact = {
							who = ROOT
							type = excavation_license
						}				
						lepsius_has_excavation_site = yes
					}
				}
			}
			add = -1000
		}
	}
}
