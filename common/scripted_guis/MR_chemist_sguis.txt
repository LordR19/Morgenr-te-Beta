### CHEMIST BUTTONS ###

#Does the country have a chemist
mr_has_chemist_sgui = {
	scope = country
	is_shown = {
		has_variable = mendelejew_chemist_var
	}
}

#Sets the Ranking up
mr_chemistry_ranking_sgui = {
	scope = country
	effect = {
		mendelejew_create_chemical_ranking_list_effect = yes
	}
}

#MR_CHEMIST_THEORY_BUTTON
mr_chemist_theory_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHEMIST_ACTIVE_TRIGGER_TT
			mendelejew_has_active_chemist = yes
		}
		custom_tooltip = {
            text = MR_PACIFIC_UNIVERSITY_BUILDING_TRIGGER_TT
            any_scope_building = {
				is_building_type = building_university
				level > 0
			}
        }
		custom_tooltip = {
			text = MR_ASTEROID_CONGRESS_OBSERVATORY_BUILDING_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_verrier_observatory
				level > 0
			}
		}
		mendelejew_element_can_theorize_trigger = yes
	}
	effect = {
		trigger_event = {
			id = mendelejew.102
			popup = yes
		}
		if = {
			limit = {
				has_variable = mendelejew_chemist_var
			}
			var:mendelejew_chemist_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 100 # The chance that the AI will activate this SGUI (script value between 1 and 100)
		modifier = {
			trigger = {
				var:mendelejew_chemist_var ?= {
					has_trait = mendelejew_chemist_theorist
				}
			}
			add = 1000
		}
		modifier = {
			trigger = {
				var:mendelejew_chemist_var ?= {
					has_trait = mendelejew_chemist_periodic_table_inventor
				}
			}
			add = 1000
		}
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_chemist_theorize_active_sgui = {
	scope = country
	is_shown = {
		has_journal_entry = je_mendelejew_element_theory
	}
}

#MR_CHEMIST_DISCOVERY_BUTTON
mr_chemist_discovery_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHEMIST_ACTIVE_TRIGGER_TT
			mendelejew_has_active_chemist = yes
		}
		custom_tooltip = {
            text = MR_PACIFIC_UNIVERSITY_BUILDING_TRIGGER_TT
            any_scope_building = {
				is_building_type = building_university
				level > 0
			}
        }
		custom_tooltip = {
			text = MR_ASTEROID_CONGRESS_OBSERVATORY_BUILDING_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_verrier_observatory
				level > 0
			}
		}
		custom_tooltip = {
			text = MR_CHEMIST_MINERALS_DISCOVERY_TRIGGER_TT
			var:agassiz_generic_minerals_var >= 5000
		}
		mendelejew_element_can_discover_trigger = yes
	}
	effect = {
		trigger_event = {
			id = mendelejew.202
			popup = yes
		}
		if = {
			limit = {
				has_variable = mendelejew_chemist_var
			}
			var:mendelejew_chemist_var = {
				set_character_busy_and_immortal = yes
			}
		}
		agassiz_add_x_generic_minerals_effect = {
			AMOUNT = -5000
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 200 # The chance that the AI will activate this SGUI (script value between 1 and 100)
		modifier = {
			trigger = {
				var:mendelejew_chemist_var ?= {
					has_trait = mendelejew_chemist_analyst
				}
			}
			add = 1000
		}
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_chemist_discovery_active_sgui = {
	scope = country
	is_shown = {
		has_journal_entry = je_mendelejew_element_discovery
	}
}

#MR_CHEMIST_ISOLATION_BUTTON
mr_chemist_isolation_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHEMIST_ACTIVE_TRIGGER_TT
			mendelejew_has_active_chemist = yes
		}
		custom_tooltip = {
            text = MR_ACADEMICS_PROMOTE_UNIVERSITY_MATHEMATICS_TT
            any_scope_state = {
                is_production_method_active = {
                    building_type = building_university
                    production_method = pm_dubois_university_mathematics
                }
            }
        }
		custom_tooltip = {
			text = MR_ASTEROID_CONGRESS_OBSERVATORY_BUILDING_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_verrier_observatory
				level > 0
			}
		}
		custom_tooltip = {
			text = MR_CHEMIST_MINERALS_ISOLATION_TRIGGER_TT
			var:agassiz_generic_minerals_var >= 10000
		}
		mendelejew_element_can_isolate_trigger = yes
	}
	effect = {
		trigger_event = {
			id = mendelejew.302
			popup = yes
		}
		if = {
			limit = {
				has_variable = mendelejew_chemist_var
			}
			var:mendelejew_chemist_var = {
				set_character_busy_and_immortal = yes
			}
		}
		agassiz_add_x_generic_minerals_effect = {
			AMOUNT = -10000
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 300 # The chance that the AI will activate this SGUI (script value between 1 and 100)
		modifier = {
			trigger = {
				var:mendelejew_chemist_var ?= {
					has_trait = mendelejew_chemist_inspector
				}
			}
			add = 1000
		}
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_chemist_isolation_active_sgui = {
	scope = country
	is_shown = {
		has_journal_entry = je_mendelejew_element_isolation
	}
}

####################################################################################################################

#MR_CHEMIST_FERTILIZER_BUTTON
mr_chemist_fertilizer_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHEMIST_ACTIVE_TRIGGER_TT
			mendelejew_has_active_chemist = yes
		}
		custom_tooltip = {
			text = MR_CHEMIST_IMPROVE_FERTILIZER_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_chemical_plants
				level > 0
				NOR = {
					has_modifier = mendelejew_building_throughput_add_modifier
					has_modifier = mendelejew_building_production_mult_modifier
					has_modifier = mendelejew_building_goods_input_mult_modifier
				}
			}
		}
	}
	effect = {
		add_journal_entry = { type = je_mendelejew_improve_fertilizer_project }
		add_modifier = {
			name = mendelejew_chemist_fertilizer_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		if = {
			limit = {
				has_variable = mendelejew_chemist_var
			}
			var:mendelejew_chemist_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_chemist_fertilizer_active_sgui = {
	scope = country
	is_shown = {
		has_journal_entry = je_mendelejew_improve_fertilizer_project
	}
}

#MR_CHEMIST_EXPLOSIVES_BUTTON
mr_chemist_explosives_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHEMIST_ACTIVE_TRIGGER_TT
			mendelejew_has_active_chemist = yes
		}
		custom_tooltip = {
			text = MR_CHEMIST_IMPROVE_EXPLOSIVES_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_explosives_factory
				level > 0
				NOR = {
					has_modifier = mendelejew_building_throughput_add_modifier
					has_modifier = mendelejew_building_production_mult_modifier
					has_modifier = mendelejew_building_goods_input_mult_modifier
				}
			}
		}
	}
	effect = {
		add_journal_entry = { type = je_mendelejew_improve_explosives_project }
		add_modifier = {
			name = mendelejew_chemist_explosives_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		if = {
			limit = {
				has_variable = mendelejew_chemist_var
			}
			var:mendelejew_chemist_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_chemist_explosives_active_sgui = {
	scope = country
	is_shown = {
		has_journal_entry = je_mendelejew_improve_explosives_project
	}
}

#MR_CHEMIST_SYNTHETICS_BUTTON
mr_chemist_synthetics_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHEMIST_ACTIVE_TRIGGER_TT
			mendelejew_has_active_chemist = yes
		}
		custom_tooltip = {
			text = MR_CHEMIST_IMPROVE_SYNTHETICS_TRIGGER_TT
			any_scope_building = {
				OR = {
					is_building_type = building_synthetics_plants
					is_building_type = building_mendelejew_hydrogenation_plants
				}
				level > 0
				NOR = {
					has_modifier = mendelejew_building_throughput_add_modifier
					has_modifier = mendelejew_building_production_mult_modifier
					has_modifier = mendelejew_building_goods_input_mult_modifier
				}
			}
		}
	}
	effect = {
		add_journal_entry = { type = je_mendelejew_improve_synthetics_project }
		add_modifier = {
			name = mendelejew_chemist_synthetics_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		if = {
			limit = {
				has_variable = mendelejew_chemist_var
			}
			var:mendelejew_chemist_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_chemist_synthetics_active_sgui = {
	scope = country
	is_shown = {
		has_journal_entry = je_mendelejew_improve_synthetics_project
	}
}

#MR_CHEMIST_CONGRESS_BUTTON
mr_chemist_congress_button = {
    scope = country
	is_shown = {
		NOT = {
			has_global_variable = mendelejew_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = mendelejew_congress_host_modifier
			}
		}
	}
    is_valid = {
		custom_tooltip = {
			text = MR_MAJOR_POWER_HIGHER_TRIGGER_TT
			country_rank >= rank_value:major_power
		}
		custom_tooltip = {
			text = MR_CARTE_DE_CIEL_CONGRESS_ELECTROMAGNETISM_TECH_TRIGGER_TT
			has_technology_researched = verrier_electromagnetism_tech
		}
		custom_tooltip = {
			text = MR_UNIVERSITY_BUILDING_LEVEL_10_TRIGGER_TT
			country_has_building_type_levels = {  
				target = bt:building_university  
				value  >= 10
			}
		}
		custom_tooltip = {
			text = MR_ASTEROID_CONGRESS_OBSERVATORY_BUILDING_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_verrier_observatory
				level > 0
			}
		}
		custom_tooltip = {
			text = MR_CHEMIST_TRIGGER_TT
			mendelejew_has_chemist = yes
		}
		custom_tooltip = {
			text = MR_CHEMIST_CONGRESS_5_CHEMISTS_TRIGGER_TT
			any_country = {
				mendelejew_has_chemist = yes
				count >= 5
			}
		}
		custom_tooltip = {
			text = MR_CHEMIST_CONGRESS_ELEMENTS_TRIGGER_TT
			global_var:mendelejew_isolated_elements_global_number_var >= 60
		}
    }
    effect = {
        trigger_event = { 
			id = mendelejew.601
			popup = yes 
		}
		set_global_variable = mendelejew_congress_hosted_var
		add_modifier = {
			name = mendelejew_congress_host_modifier
			years = 5
		}
    }

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 0 # The chance that the AI will activate this SGUI (script value between 1 and 100)
		modifier = {
			trigger = {
				global_var:mendelejew_isolated_elements_global_number_var >= 62
			}
			add = 1000
		}
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

###############################################################################################################

#MR_CHEMIST_SYNTHETIC_OIL_BUTTON
mr_chemist_synthetic_oil_button = {
    scope = country
    is_valid = {
		NOT = {
			has_technology_researched = mendelejew_synthetic_fuel_tech
		}
		custom_tooltip = {
			text = MR_CHEMIST_ACTIVE_TRIGGER_TT
			mendelejew_has_active_chemist = yes
		}
		custom_tooltip = {
			text = MR_CHEMIST_MODERN_PHYSICS_TECH_TRIGGER_TT
			has_technology_researched = verrier_modern_physics_tech
		}
		custom_tooltip = {
			text = MR_CHEMIST_PLASTICS_TECH_TRIGGER_TT
			has_technology_researched = plastics
		}
		custom_tooltip = {
			text = MR_COMBUSTION_ENGINE_TECH_TRIGGER_TT
			has_technology_researched = combustion_engine
		}
		custom_tooltip = {
			text = MR_UNIVERSITY_BUILDING_LEVEL_10_TRIGGER_TT
			country_has_building_type_levels = {  
				target = bt:building_university  
				value  >= 10
			}
		}
		custom_tooltip = {
			text = MR_ASTEROID_CONGRESS_OBSERVATORY_BUILDING_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_verrier_observatory
				level > 0
			}
		}
		custom_tooltip = {
			text = MR_CHEMIST_HAS_IMPROVED_SYNTHETICS_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_synthetics_plants
				level > 0
				has_modifier = mendelejew_building_throughput_add_modifier
				has_modifier = mendelejew_building_production_mult_modifier
				has_modifier = mendelejew_building_goods_input_mult_modifier
			}
		}
    }
    effect = {
        add_journal_entry = { type = je_mendelejew_synthetic_oil }
		add_modifier = {
			name = mendelejew_chemist_synthetic_oil_cost_modifier
			multiplier = money_amount_multiplier_medium
		}
		if = {
			limit = {
				has_variable = mendelejew_chemist_var
			}
			var:mendelejew_chemist_var = {
				set_character_busy_and_immortal = yes
			}
		}
    }

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 100 # The chance that the AI will activate this SGUI (script value between 1 and 100)
		modifier = {
			trigger = {
				OR = {
					c:GER ?= this
					was_formed_from = GER
				}
			}
			add = 2000
		}
		modifier = {
			trigger = {
				market = {
					mg:oil ?= { market_goods_has_goods_shortage = yes }
				}
			}
			add = 5000
		}
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

#MR_CHEMIST_SYNTHETIC_RUBBER_BUTTON
mr_chemist_synthetic_rubber_button = {
    scope = country
	is_shown = {
		IEX_is_active_trigger = no
	}
    is_valid = {
		NOT = {
			has_technology_researched = mendelejew_synthetic_rubber_tech
		}
		custom_tooltip = {
			text = MR_CHEMIST_ACTIVE_TRIGGER_TT
			mendelejew_has_active_chemist = yes
		}
		custom_tooltip = {
			text = MR_CHEMIST_MODERN_PHYSICS_TECH_TRIGGER_TT
			has_technology_researched = verrier_modern_physics_tech
		}
		custom_tooltip = {
			text = MR_CHEMIST_PLASTICS_TECH_TRIGGER_TT
			has_technology_researched = plastics
		}
		custom_tooltip = {
			text = MR_ART_SILK_TECH_TRIGGER_TT
			has_technology_researched = art_silk
		}
		custom_tooltip = {
			text = MR_UNIVERSITY_BUILDING_LEVEL_10_TRIGGER_TT
			country_has_building_type_levels = {  
				target = bt:building_university  
				value  >= 10
			}
		}
		custom_tooltip = {
			text = MR_ASTEROID_CONGRESS_OBSERVATORY_BUILDING_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_verrier_observatory
				level > 0
			}
		}
		custom_tooltip = {
			text = MR_CHEMIST_HAS_IMPROVED_SYNTHETICS_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_synthetics_plants
				level > 0
				has_modifier = mendelejew_building_throughput_add_modifier
				has_modifier = mendelejew_building_production_mult_modifier
				has_modifier = mendelejew_building_goods_input_mult_modifier
			}
		}
    }
    effect = {
        add_journal_entry = { type = je_mendelejew_synthetic_rubber }
		add_modifier = {
			name = mendelejew_chemist_synthetic_rubber_cost_modifier
			multiplier = money_amount_multiplier_medium
		}
		if = {
			limit = {
				has_variable = mendelejew_chemist_var
			}
			var:mendelejew_chemist_var = {
				set_character_busy_and_immortal = yes
			}
		}
    }

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 100 # The chance that the AI will activate this SGUI (script value between 1 and 100)
		modifier = {
			trigger = {
				OR = {
					c:GER ?= this
					was_formed_from = GER
				}
			}
			add = 2000
		}
		modifier = {
			trigger = {
				market = {
					mg:rubber ?= { market_goods_has_goods_shortage = yes }
				}
			}
			add = 5000
		}
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}
