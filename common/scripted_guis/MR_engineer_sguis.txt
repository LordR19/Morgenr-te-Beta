### ENGINEER BUTTONS ###

#by Lord R

#MR_CHANGE_TO_CIVIL_EGINEER_BUTTON_TT
gaudi_change_to_civil_engineer_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHANGE_TO_CIVIL_EGINEER_BUTTON_HAS_NO_CIVIL_ENGINEER_TT
			gaudi_has_no_civil_engineer_trigger = yes
		}
		custom_tooltip = {
			text = MR_CHANGE_TO_CIVIL_EGINEER_BUTTON_NO_RECENT_SPECIALIZATION_SWITCH_TT
			NOT = { has_modifier = academics_engineer_recent_specialization_switch_modifier }
		}
	}
	effect = {
		gaudi_set_civil_engineer_effect = yes
		add_modifier = {
			name = academics_engineer_recent_specialization_switch_modifier
			years = 5
		}	
	}
}

#MR_CHANGE_TO_MECHANICAL_EGINEER_BUTTON_TT
gaudi_change_to_mechanical_engineer_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHANGE_TO_MECHANICAL_EGINEER_BUTTON_HAS_NO_MECHANICAL_ENGINEER_TT
			gaudi_has_no_mechanical_engineer_trigger = yes
		}
		custom_tooltip = {
			text = MR_CHANGE_TO_CIVIL_EGINEER_BUTTON_NO_RECENT_SPECIALIZATION_SWITCH_TT
			NOT = { has_modifier = academics_engineer_recent_specialization_switch_modifier }
		}
	}
	effect = {
		gaudi_set_mechanical_engineer_effect = yes
		add_modifier = {
			name = academics_engineer_recent_specialization_switch_modifier
			years = 5
		}
	}
}

#MR_CHANGE_TO_MILITARY_EGINEER_BUTTON_TT
gaudi_change_to_military_engineer_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHANGE_TO_MILITARY_EGINEER_BUTTON_HAS_NO_MILITARY_ENGINEER_TT
			gaudi_has_no_military_engineer_trigger = yes
		}
		custom_tooltip = {
			text = MR_CHANGE_TO_CIVIL_EGINEER_BUTTON_NO_RECENT_SPECIALIZATION_SWITCH_TT
			NOT = { has_modifier = academics_engineer_recent_specialization_switch_modifier }
		}
	}
	effect = {
		gaudi_set_military_engineer_effect = yes
		add_modifier = {
			name = academics_engineer_recent_specialization_switch_modifier
			years = 5
		}
	}
}

#MR_CHANGE_TO_ELECTRICAL_EGINEER_BUTTON_TT
gaudi_change_to_electrical_engineer_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHANGE_TO_ELECTRICAL_EGINEER_BUTTON_PHYSICS_TECH_TRIGGER_TT
			has_technology_researched = verrier_physics_tech
		}
		custom_tooltip = {
			text = MR_CHANGE_TO_ELECTRICAL_EGINEER_BUTTON_HAS_NO_ELECTRICAL_ENGINEER_TT
			gaudi_has_no_electrical_engineer_trigger = yes
		}
		custom_tooltip = {
			text = MR_CHANGE_TO_CIVIL_EGINEER_BUTTON_NO_RECENT_SPECIALIZATION_SWITCH_TT
			NOT = { has_modifier = academics_engineer_recent_specialization_switch_modifier }
		}
	}
	effect = {
		gaudi_set_electrical_engineer_effect = yes
		add_modifier = {
			name = academics_engineer_recent_specialization_switch_modifier
			years = 5
		}
	}
}

#MR_CHANGE_TO_AERONAUTICAL_EGINEER_BUTTON_TT
gaudi_change_to_aeronautical_engineer_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_CHANGE_TO_AERONAUTICAL_EGINEER_BUTTON_RECONNAISSANCE_BALLOON_TECH_TRIGGER_TT
			has_technology_researched = curtiss_reconnaissance_balloon_tech
		}
		custom_tooltip = {
			text = MR_CHANGE_TO_AERONAUTICAL_EGINEER_BUTTON_HAS_NO_AERONAUTICAL_ENGINEER_TT
			gaudi_has_no_aeronautical_engineer_trigger = yes
		}
		custom_tooltip = {
			text = MR_CHANGE_TO_CIVIL_EGINEER_BUTTON_NO_RECENT_SPECIALIZATION_SWITCH_TT
			NOT = { has_modifier = academics_engineer_recent_specialization_switch_modifier }
		}
	}
	effect = {
		gaudi_set_aeronautical_engineer_effect = yes
		add_modifier = {
			name = academics_engineer_recent_specialization_switch_modifier
			years = 5
		}
	}
}

#############################################

#MR_STOP_ENGINEERING_PROJECT_BUTTON
mr_stop_engineering_project_button = {
	scope = country
	is_shown = {
		has_variable = gaudi_can_stop_active_engineering_project_var
	}
	is_valid = {
		always = yes
	}
	effect = {
		set_variable = gaudi_stop_engineering_project_var
	}
}

### Civil Engineer Buttons ###

#MR_CIVIL_ENGINEER_RESEARCH_BUTTON
mr_civil_engineer_research_button = {
	scope = country
	is_shown = {
		gaudi_has_civil_engineer_trigger = yes
	}
	is_valid = {
		gaudi_has_active_engineer = yes
	}
	effect = {
		add_modifier = {
			name = gaudi_engineer_project_low_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		add_journal_entry = { type = je_gaudi_civil_research_project }
		var:gaudi_engineer_var = {
			set_character_busy_and_immortal = yes
		}
	}
}

#MR_CIVIL_ENGINEER_INFRASTRUCTURE_BUTTON
mr_civil_engineer_infrastructure_button = {
	scope = country
	is_shown = {
		gaudi_has_civil_engineer_trigger = yes
	}
	is_valid = {
		gaudi_has_active_engineer = yes
		custom_tooltip = {
			text = MR_CIVIL_ENGINEER_INFRASTRUCTURE_TRIGGER_TT
			any_scope_state = {
				OR = {
					NOT = { has_modifier = gaudi_modern_roads_modifier }
					NOT = { has_modifier = gaudi_canal_systems_modifier }
					NOT = { has_modifier = gaudi_new_bridge_modifier }
					NOT = { has_modifier = gaudi_new_tunnel_modifier }
					AND = {
						NOT = { has_modifier = gaudi_modernized_railway_lines_modifier }
						any_scope_building = {
							is_building_type = building_railway
							level > 0
						}
					}
				}
			}
		}
	}
	effect = {
		add_modifier = {
			name = gaudi_engineer_project_low_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		add_journal_entry = { type = je_gaudi_civil_research_project }
		var:gaudi_engineer_var = {
			set_character_busy_and_immortal = yes
		}
	}
}

#MR_CIVIL_ENGINEER_CONSTRUCTION_BUTTON
mr_civil_engineer_construction_button = {
	scope = country
	is_shown = {
		gaudi_has_civil_engineer_trigger = yes
	}
	is_valid = {
		gaudi_has_active_engineer = yes
		custom_tooltip = {
			text = MR_CIVIL_ENGINEER_CONSTRUCTION_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_construction_sector
				level > 0
				NOR = {
					has_modifier = gaudi_new_construction_methods_modifier
					has_modifier = gaudi_faster_construction_methods_modifier
					has_modifier = gaudi_efficient_construction_methods_modifier
				}
			}
		}
	}
	effect = {
		add_journal_entry = { type = je_gaudi_construction_sector_project }
		add_modifier = {
			name = gaudi_engineer_project_low_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		var:gaudi_engineer_var = {
			set_character_busy_and_immortal = yes
		}
	}
}

### Mechanical Engineer Buttons ###

#MR_MECHANICAL_ENGINEER_RESEARCH_BUTTON
mr_mechanical_engineer_research_button = {
	scope = country
	is_shown = {
		gaudi_has_mechanical_engineer_trigger = yes
	}
	is_valid = {
		gaudi_has_active_engineer = yes
	}
	effect = {
		add_journal_entry = { type = je_gaudi_mechanical_research_project }
		add_modifier = {
			name = gaudi_engineer_project_low_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		var:gaudi_engineer_var = {
			set_character_busy_and_immortal = yes
		}
	}
}

#MR_MECHANICAL_ENGINEER_LOCOMOTIVES_BUTTON
mr_mechanical_engineer_locomotives_button = {
	scope = country
	is_shown = {
		gaudi_has_mechanical_engineer_trigger = yes
	}
	is_valid = {
		gaudi_has_active_engineer = yes
		custom_tooltip = {
			text = MR_MECHANICAL_ENGINEER_LOCOMOTIVES_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_railway
				level > 0
				NOR = {
					has_modifier = gaudi_locomotive_tier_1_modifier
					has_modifier = gaudi_locomotive_tier_2_modifier
					has_modifier = gaudi_locomotive_tier_3_modifier
					has_modifier = gaudi_locomotive_tier_4_modifier
					has_modifier = gaudi_locomotive_tier_5_modifier
				}
			}
		}
	}
	effect = {
		add_journal_entry = { type = je_gaudi_new_locomotives_project }
		add_modifier = {
			name = gaudi_engineer_project_medium_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		var:gaudi_engineer_var = {
			set_character_busy_and_immortal = yes
		}
	}
}

#MR_MECHANICAL_ENGINEER_INDUSTRIES_BUTTON
mr_mechanical_engineer_industries_button = {
	scope = country
	is_shown = {
		gaudi_has_mechanical_engineer_trigger = yes
	}
	is_valid = {
		gaudi_has_active_engineer = yes
		custom_tooltip = {
			text = MR_MECHANICAL_ENGINEER_INDUSTRIES_TRIGGER_TT
			any_scope_building = {
				NOR = {
					is_building_group = bg_whaling
					is_building_group = bg_fishing
					is_building_group = bg_service
					is_building_group = bg_urban_facilities
					is_building_group = bg_power
					is_building_group = bg_government
					is_building_group = bg_infrastructure
					is_building_group = bg_military
					is_building_type = building_elgar_opera
				}
				level > 0
				NOR = {
					has_modifier = gaudi_building_throughput_add_modifier
					has_modifier = gaudi_building_production_mult_modifier
					has_modifier = gaudi_building_goods_input_mult_modifier
				}
			}
		}
	}
	effect = {
		add_journal_entry = { type = je_gaudi_modernizing_industries_project }
		add_modifier = {
			name = gaudi_engineer_project_medium_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		var:gaudi_engineer_var = {
			set_character_busy_and_immortal = yes
		}
	}
}

### Military Engineer Buttons ###

#MR_MILITARY_ENGINEER_RESEARCH_BUTTON
mr_military_engineer_research_button = {
	scope = country
	is_shown = {
		gaudi_has_military_engineer_trigger = yes
	}
	is_valid = {
		gaudi_has_active_engineer = yes
	}
	effect = {
		add_journal_entry = { type = je_gaudi_military_research_project }
		add_modifier = {
			name = gaudi_engineer_project_low_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		var:gaudi_engineer_var = {
			set_character_busy_and_immortal = yes
		}
	}
}
