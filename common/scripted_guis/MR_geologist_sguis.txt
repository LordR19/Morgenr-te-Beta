### GEOLOGIST BUTTONS ###

#Does the country have a goelogist
mr_has_geologist_sgui = {
	scope = country
	is_shown = {
		has_variable = dubois_geologist_var
	}
}

#Sets the Ranking up
#mr_geologist_ranking_sgui = {
#	scope = country
#	effect = {
#		agassiz_create_geological_ranking_list_effect = yes
#	}
#}

####################################################################################################################

#MR_GEOLOGIST_ORE_VEIN_BUTTON
mr_geologist_ore_vein_button = {
	scope = country
	is_shown = {
		NOT = {
			has_variable = agassiz_decide_ore_vein_var
		}
	}
	is_valid = {
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_FIND_ORE_TRIGGER_TT
			agassiz_can_find_new_vein_trigger = yes
		}
	}
	effect = {
		set_variable = agassiz_decide_ore_vein_var
		if = {
			limit = {
				has_variable = dubois_geologist_var
			}
			var:dubois_geologist_var = {
				set_character_busy_and_immortal = yes
			}
		}
		trigger_event = {
			id = agassiz.100
			popup = yes
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_geologist_ore_vein_active_sgui = {
	scope = country
	is_shown = {
		OR = {
			has_journal_entry = je_agassiz_find_coal_project
			has_journal_entry = je_agassiz_find_iron_project
			has_journal_entry = je_agassiz_find_lead_project
			has_journal_entry = je_agassiz_find_sulfur_project
			has_journal_entry = je_agassiz_find_gold_project
			has_journal_entry = je_agassiz_find_uranium_project
		}
	}
}

#MR_GEOLOGIST_OIL_BUTTON
mr_geologist_oil_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_GEOLOGIST_PUMPJACKS_TECH_TRIGGER_TT
			has_technology_researched = pumpjacks
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_FIND_OIL_TRIGGER_TT
			agassiz_can_find_oil_trigger = yes
		}
	}
	effect = {
		add_journal_entry = { type = je_agassiz_find_oil_project }
		add_modifier = {
			name = agassiz_ore_search_cost_modifier
			multiplier = money_amount_multiplier_medium
		}
		if = {
			limit = {
				has_variable = dubois_geologist_var
			}
			var:dubois_geologist_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_geologist_oil_active_sgui = {
	scope = country
	is_shown = {
		has_journal_entry = je_agassiz_find_oil_project
	}
}

#MR_SELL_MINERALS_FOR_RARE_MINERAL_BUTTON
mr_sell_minerals_for_rare_mineral_button = {
    scope = country
    is_valid = {
		custom_tooltip = {
			text = MR_SELL_MINERALS_FOR_RARE_MINERAL_TRIGGER
			var:agassiz_generic_minerals_var >= 20000
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
    }
    effect = {
		agassiz_add_x_generic_minerals_effect = { AMOUNT = -20000 }
		agassiz_add_x_rare_minerals_effect = { AMOUNT = 1 }
    }
}

#MR_MINERAL_CABINET_BUTTON
mr_mineral_cabinet_button = {
    scope = country
	is_shown = {
		NOT = {
			capital = {
				is_production_method_active = {
					building_type = building_dubois_zoo
					production_method = pm_mineral_cabinet
				}
			}
		}
	}
    is_valid = {
		custom_tooltip = {
			text = MR_VISIT_ZOO_BUILDING_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_dubois_zoo
				level > 0
			}
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
		custom_tooltip = {
			text = MR_MINERAL_CABINET_NUMBER_TRIGGER_TT
			var:agassiz_rare_minerals_var >= 50
		}
    }
    effect = {
        agassiz_add_x_rare_minerals_effect = { AMOUNT = -50 }
		if = {
			limit = { NOT = { has_building = building_dubois_zoo } }
			custom_tooltip = MR_SPECIMEN_GARDEN_EFFECT_TT
		}
		if = {
			limit = {
				capital = {
					has_building = building_dubois_zoo
				}
			}
			activate_production_method = {
				building_type = building_dubois_zoo
				production_method = pm_mineral_cabinet
			}
		}
		else = {
			random_scope_state = {
				limit = {
					has_building = building_dubois_zoo
				}
				activate_production_method = {
					building_type = building_dubois_zoo
					production_method = pm_mineral_cabinet
				}
			}
		}
    }
}

#MR_GEOLOGIST_UNDERWATER_MOUNTAINS_BUTTON
mr_geologist_underwater_mountains_button = {
	scope = country
	is_shown = {
		has_global_variable = dubois_mid_atlantic_ridge_var
		NOT = {
			has_variable = dubois_mid_atlantic_ridge_examined_var
		}
	}
	is_valid = {
		custom_tooltip = {
			text = MR_SAFARI_EXPEDITION_EVOLUTION_TRIGGER_TT
			has_technology_researched = dubois_theory_of_evolution_tech
		}
		custom_tooltip = {
			text = MR_UNDERWATER_MOUNTAINS_SOUNDING_TRIGGER_TT
			has_technology_researched = agassiz_sounding_tech
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_EXPERIENCED_TRIGGER_TT
			var:dubois_geologist_var = {
				OR = {
					has_trait = dubois_geologist_experienced
					has_trait = dubois_geologist_famous
				}
			}
		}
	}
	effect = {
		add_journal_entry = { type = je_agassiz_mid_atlantic_ridge }
		add_modifier = {
			name = agassiz_mid_atlantic_ridge_cost_modifier
			multiplier = money_amount_multiplier_medium
		}
		if = {
			limit = {
				has_variable = dubois_geologist_var
			}
			var:dubois_geologist_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_geologist_expedition_active_sgui = {
	scope = country
	is_shown = {
		has_journal_entry = je_agassiz_mid_atlantic_ridge
	}
}