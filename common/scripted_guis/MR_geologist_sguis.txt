### GEOLOGIST BUTTONS ###

#Does the country have a goelogist
mr_has_geologist_sgui = {
	scope = country
	is_shown = {
		has_variable = dubois_geologist_var
	}
}

#Sets the Ranking up
mr_geologist_ranking_sgui = {
	scope = country
	effect = {
		agassiz_create_geological_ranking_list_effect = yes
	}
}

####################################################################################################################

#MR_GEOLOGIST_GEOLOGICAL_RESEARCH_BUTTON
mr_geologist_geological_research_button = {
	scope = country
	is_shown = {
		NOT = {
			has_journal_entry = je_agassiz_geological_research
		}
	}
	is_valid = {
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
	}
	effect = {
		add_journal_entry = { type = je_agassiz_geological_research }
		if = {
			limit = {
				has_variable = dubois_geologist_var
			}
			var:dubois_geologist_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 0 # The chance that the AI will activate this SGUI (script value between 1 and 100)
		modifier = { #Less than 100000 Minerals
			trigger = {
				var:agassiz_generic_minerals_var < 100000
			}
			add = 10
		}
		modifier = { #Should activated when there is a cave
			trigger = {
				any_scope_state = {
					lepsius_has_cave = yes
					lepsius_has_discovered_cave = no
				}
			}
			add = 100
		}
		modifier = { #Should activated when there is formation
			trigger = {
				any_scope_state = {
					has_variable = dubois_has_normal_formation_var
					NOT = {
						has_state_trait = dubois_state_trait_normal_formation
					}
				}
			}
			add = 100
		}
		modifier = { #Should activated when there is Great formation
			trigger = {
				any_scope_state = {
					has_variable = dubois_has_great_formation_var
					NOR = {
						has_state_trait = dubois_state_trait_great_north_american_formation
						has_state_trait = dubois_state_trait_south_american_formation
						has_state_trait = dubois_state_trait_great_european_formation
						has_state_trait = dubois_state_trait_great_african_formation
						has_state_trait = dubois_state_trait_great_asian_formation
						has_state_trait = dubois_state_trait_great_australian_formation
					}
				}
			}
			add = 100
		}
		modifier = { #Should activated when there is Uranium
			trigger = {
				has_technology_researched = verrier_modern_physics_tech
				any_scope_state = {
					curie_is_uranium_state = yes
					NOT = {
						has_state_trait = curie_state_trait_uranium
					}
				}
			}
			add = 100
		}
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

#MR_GEOLOGIST_GEOLOGICAL_RESEARCH_STOP_BUTTON
mr_geologist_geological_research_stop_button = {
	scope = country
	is_shown = {
		has_journal_entry = je_agassiz_geological_research
	}
	is_valid = {
		NOT = { has_variable = agassiz_stop_geologist_improving_project_var }
	}
	effect = {
		set_variable = agassiz_stop_geologist_improving_project_var
	}
}

#MR_GEOLOGIST_VOLCANO_EXPEDITION_BUTTON
mr_geologist_volcano_expedition_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_HAS_UNEXPLORED_VOLCANO_WITH_OBSERVATORY_TRIGGER_TT
			any_scope_state = {
				agassiz_state_has_unexplored_volcano = yes
			}
		}
	}
	effect = {
		trigger_event = {
			id = agassiz.601
			popup = yes
		}
		set_variable = agassiz_volcano_expedition_active_var
		if = {
			limit = {
				has_variable = dubois_geologist_var
			}
			var:dubois_geologist_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 100 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_geologist_volcano_expedition_active = {
	scope = country
	is_shown = {
		has_variable = agassiz_volcano_expedition_active_var
	}
}

#MR_GEOLOGIST_AGE_EARTH_BUTTON_TT
mr_geologist_age_earth_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_GEOLOGY_TECH_TRIGGER_TT
			has_technology_researched = agassiz_geology_tech
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_CAN_CALCULATE_TRIGGER_TT
			dubois_has_geologist = yes
			NOT = {
				var:dubois_geologist_var ?= {
					has_variable = agassiz_geologist_calculated_age_earth_var
				}
			}
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_EXPERIENCED_TRIGGER_TT
			var:dubois_geologist_var ?= {
				OR = {
					has_trait = dubois_geologist_experienced
					has_trait = dubois_geologist_famous
				}
			}
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_CALCULATE_AGE_TRIGGER_TT
			agassiz_can_calculate_new_age_of_earth_trigger = yes
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_NO_AGE_DEBATE_TRIGGER_TT
			NOT = {
				has_global_variable = agassiz_age_of_earth_debate_global_var
			}
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_NOT_DEMOTIVATED_TRIGGER_TT
			NOT = {
				has_modifier = agassiz_geologist_demotivated_modifier
			}
		}
	}
	effect = {
		set_global_variable = agassiz_age_of_earth_debate_global_var
		trigger_event = {
			id = agassiz.401
			popup = yes
		}
		set_variable = {
			name = agassiz_age_earth_active_var
			days = 200
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_geologist_age_earth_active = {
	scope = country
	is_shown = {
		has_variable = agassiz_age_earth_active_var
	}
}

#MR_GEOLOGIST_ORE_VEIN_BUTTON_TT
mr_geologist_ore_vein_button = {
	scope = country
	is_shown = {
		NOR = {
			has_variable = agassiz_decide_ore_vein_var
			has_journal_entry = je_agassiz_find_coal_project
			has_journal_entry = je_agassiz_find_iron_project
			has_journal_entry = je_agassiz_find_lead_project
			has_journal_entry = je_agassiz_find_sulfur_project
			has_journal_entry = je_agassiz_find_gold_project
			has_journal_entry = je_agassiz_find_uranium_project
		}
	}
	is_valid = {
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
		custom_tooltip = {
			text = MR_GEOLOGY_TECH_TRIGGER_TT
			has_technology_researched = agassiz_geology_tech
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_FIND_ORE_TRIGGER_TT
			agassiz_can_find_new_vein_trigger = yes
		}
	}
	effect = {
		set_variable = agassiz_decide_ore_vein_var
		if = {
			limit = {
				has_variable = dubois_geologist_var
			}
			var:dubois_geologist_var = {
				set_character_busy_and_immortal = yes
			}
		}
		trigger_event = {
			id = agassiz.100
			popup = yes
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

#MR_GEOLOGIST_ORE_VEIN_BUTTON_STOP_TT
mr_geologist_ore_vein_stop_button = {
	scope = country
	is_shown = {
		OR = {
			has_variable = agassiz_decide_ore_vein_var
			has_journal_entry = je_agassiz_find_coal_project
			has_journal_entry = je_agassiz_find_iron_project
			has_journal_entry = je_agassiz_find_lead_project
			has_journal_entry = je_agassiz_find_sulfur_project
			has_journal_entry = je_agassiz_find_gold_project
			has_journal_entry = je_agassiz_find_uranium_project
		}
	}
	is_valid = {
		NOT = { has_variable = agassiz_stop_geologist_improving_project_var }
		OR = {
			has_journal_entry = je_agassiz_find_coal_project
			has_journal_entry = je_agassiz_find_iron_project
			has_journal_entry = je_agassiz_find_lead_project
			has_journal_entry = je_agassiz_find_sulfur_project
			has_journal_entry = je_agassiz_find_gold_project
			has_journal_entry = je_agassiz_find_uranium_project
		}
	}
	effect = {
		set_variable = agassiz_stop_geologist_improving_project_var
	}
}

mr_geologist_ore_vein_active_sgui = {
	scope = country
	is_shown = {
		OR = {
			has_journal_entry = je_agassiz_find_coal_project
			has_journal_entry = je_agassiz_find_iron_project
			has_journal_entry = je_agassiz_find_lead_project
			has_journal_entry = je_agassiz_find_sulfur_project
			has_journal_entry = je_agassiz_find_gold_project
			has_journal_entry = je_agassiz_find_uranium_project
		}
	}
}

#MR_GEOLOGIST_OIL_BUTTON
mr_geologist_oil_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_GEOLOGIST_PUMPJACKS_TECH_TRIGGER_TT
			has_technology_researched = pumpjacks
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_FIND_OIL_TRIGGER_TT
			agassiz_can_find_oil_trigger = yes
		}
	}
	effect = {
		add_journal_entry = { type = je_agassiz_find_oil_project }
		add_modifier = {
			name = agassiz_ore_search_cost_modifier
			multiplier = money_amount_multiplier_medium
		}
		if = {
			limit = {
				has_variable = dubois_geologist_var
			}
			var:dubois_geologist_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_geologist_oil_active_sgui = {
	scope = country
	is_shown = {
		has_journal_entry = je_agassiz_find_oil_project
	}
}

#MR_SELL_MINERALS_FOR_RARE_MINERAL_BUTTON
mr_sell_minerals_for_rare_mineral_button = {
    scope = country
    is_valid = {
		custom_tooltip = {
			text = MR_SELL_MINERALS_FOR_RARE_MINERAL_TRIGGER
			var:agassiz_generic_minerals_var >= 20000
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
    }
    effect = {
		agassiz_add_x_generic_minerals_effect = { AMOUNT = -20000 }
		agassiz_add_x_rare_minerals_effect = { AMOUNT = 1 }
    }
}

#MR_MINERAL_CABINET_BUTTON
mr_mineral_cabinet_button = {
    scope = country
	is_shown = {
		NOT = {
			capital = {
				is_production_method_active = {
					building_type = building_dubois_zoo
					production_method = pm_mineral_cabinet
				}
			}
		}
	}
    is_valid = {
		custom_tooltip = {
			text = MR_VISIT_ZOO_BUILDING_TRIGGER_TT
			any_scope_building = {
				is_building_type = building_dubois_zoo
				level > 0
			}
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
		custom_tooltip = {
			text = MR_MINERAL_CABINET_NUMBER_TRIGGER_TT
			var:agassiz_rare_minerals_var >= 50
		}
    }
    effect = {
        agassiz_add_x_rare_minerals_effect = { AMOUNT = -50 }
		if = {
			limit = { NOT = { has_building = building_dubois_zoo } }
			custom_tooltip = MR_SPECIMEN_GARDEN_EFFECT_TT
		}
		if = {
			limit = {
				capital = {
					has_building = building_dubois_zoo
				}
			}
			activate_production_method = {
				building_type = building_dubois_zoo
				production_method = pm_mineral_cabinet
			}
		}
		else = {
			random_scope_state = {
				limit = {
					has_building = building_dubois_zoo
				}
				activate_production_method = {
					building_type = building_dubois_zoo
					production_method = pm_mineral_cabinet
				}
			}
		}
    }
}

#MR_GEOLOGIST_UNDERWATER_MOUNTAINS_BUTTON
mr_geologist_underwater_mountains_button = {
	scope = country
	is_shown = {
		has_global_variable = dubois_mid_atlantic_ridge_var
		NOT = {
			has_variable = dubois_mid_atlantic_ridge_examined_var
		}
	}
	is_valid = {
		custom_tooltip = {
			text = MR_SAFARI_EXPEDITION_EVOLUTION_TRIGGER_TT
			has_technology_researched = dubois_theory_of_evolution_tech
		}
		custom_tooltip = {
			text = MR_UNDERWATER_MOUNTAINS_SOUNDING_TRIGGER_TT
			has_technology_researched = agassiz_sounding_tech
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_EXPERIENCED_TRIGGER_TT
			var:dubois_geologist_var = {
				OR = {
					has_trait = dubois_geologist_experienced
					has_trait = dubois_geologist_famous
				}
			}
		}
	}
	effect = {
		add_journal_entry = { type = je_agassiz_mid_atlantic_ridge }
		add_modifier = {
			name = agassiz_mid_atlantic_ridge_cost_modifier
			multiplier = money_amount_multiplier_medium
		}
		if = {
			limit = {
				has_variable = dubois_geologist_var
			}
			var:dubois_geologist_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

mr_geologist_expedition_active_sgui = {
	scope = country
	is_shown = {
		has_journal_entry = je_agassiz_mid_atlantic_ridge
	}
}

#MR_GEOLOGIST_PALEONTOLOGIST_SYMPOSIUM_BUTTON
mr_geologist_paleontologist_symposium_button = {
	scope = country
	is_shown = {
		NOT = {
			has_variable = dubois_geologist_paleontologist_smyposium_var
		}
	}
	is_valid = {
		custom_tooltip = {
			text = MR_GEOLOGY_TECH_TRIGGER_TT
			has_technology_researched = agassiz_geology_tech
		}
		custom_tooltip = {
			text = MR_EXTINCTION_CONGRESS_PALEONTOLOGY_TECH_TRIGGER_TT
			has_technology_researched = dubois_paleontology_tech
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_ACTIVE_TRIGGER_TT
			dubois_has_active_geologist = yes
		}
		custom_tooltip = {
			text = MR_ACTIVE_PALEONTOLOGIST_TRIGGER
			has_variable = dubois_paleontologist_var
			var:dubois_paleontologist_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_FAMOUS_TRIGGER_TT
			var:dubois_geologist_var = {
				has_trait = dubois_geologist_famous
			}
		}
		custom_tooltip = {
			text = MR_PALEONTOLOGIST_FAMOUS_TRIGGER_TT
			var:dubois_geologist_var = {
				has_trait = dubois_paleontologist_famous
			}
		}
	}
	effect = {
		set_variable = dubois_geologist_paleontologist_smyposium_var
		trigger_event = {
			id = agassiz.202
			popup = yes
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

#MR_GEOLOGIST_TECTONICS_CONGRESS_BUTTON
mr_geologist_tectonics_congress_button = {
	scope = country
	is_shown = {
		NOT = {
			has_global_variable = agassiz_tectonic_congress_hosted_var
		}
		NOT = {
			any_country = {
				has_modifier = agassiz_congress_host_modifier
			}
		}
	}
	is_valid = {
		custom_tooltip = {
			text = MR_GEOLOGIST_FAMOUS_TRIGGER_TT
			trigger_if = {
				limit = { has_variable = dubois_geologist_var }
				var:dubois_geologist_var = {
					has_trait = dubois_geologist_famous
				}
			}
			trigger_else = {
				always = no
			}
		}
		custom_tooltip = {
			text = MR_UNDERWATER_MOUNTAINS_SOUNDING_TRIGGER_TT
			has_technology_researched = agassiz_seismology_tech
		}
		custom_tooltip = {
			text = MR_EXTINCTION_CONGRESS_PALEONTOLOGY_TECH_TRIGGER_TT
			has_technology_researched = dubois_paleontology_tech
		}
		custom_tooltip = {
			text = MR_UNDERWATER_MOUNTAINS_SOUNDING_TRIGGER_TT
			has_technology_researched = agassiz_sounding_tech
		}
		custom_tooltip = {
			text = MR_GEOLOGIST_CONGRESS_KNOWLEDGE_TRIGGER_TT
			var:agassiz_geological_knowledge_var > 15
		}
	}
	effect = {
		set_global_variable = agassiz_tectonic_congress_hosted_var
		var:dubois_geologist_var = {
			set_variable = agassiz_geologist_invented_plate_tectonics_var
		}
		trigger_event = { 
			id = agassiz.501
			popup = yes 
		}
		add_modifier = {
			name = agassiz_congress_host_modifier
			years = 5
		}
	}

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 10 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 4 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}