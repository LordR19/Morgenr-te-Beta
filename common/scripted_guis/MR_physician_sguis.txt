### PHYSICIAN BUTTONS ###

#by Lord R & Marco Dandolo

#Does the country have a physician
mr_has_physician_sgui = {
	scope = country
	is_shown = {
		has_variable = panum_physician_var
	}
}

#MR_PHYSICIAN_DESCRIBE_DISEASE_BUTTON
mr_physician_describe_disease_button = {
    scope = country
    is_valid = {
		hidden_trigger = {
			NOT = {
				has_variable = panum_physician_action_active_var
			}
		}
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_PHYSICIAN_CAN_DESCRIBE_LOCAL_DISEASE_TRIGGER_TT
			panum_can_describe_local_disease_trigger = yes
		}
    }
    effect = {
		set_variable = panum_physician_action_active_var
		set_variable = panum_physician_describe_disease_active_var
		trigger_event = { 
			id = panum.51
			popup = yes 
		}
    }
}
#Checks if this is button is active
mr_physician_describe_disease_active = {
	is_shown = {
		has_variable = panum_physician_describe_disease_active_var
	}
}

#MR_PHYSICIAN_DESCRIBE_DISEASE_FOREIGN_BUTTON
mr_physician_describe_disease_foreign_button = {
    scope = country
    is_valid = {
		hidden_trigger = {
			NOT = {
				has_variable = panum_physician_action_active_var
			}
		}
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_PHYSICIAN_CAN_DESCRIBE_FOREIGN_DISEASE_TRIGGER_TT
			panum_can_describe_foreign_disease_trigger = yes
		}
		custom_tooltip = {
			text = MR_CIVILIZING_MISSION_TECH_TRIGGER_TT
			has_technology_researched = civilizing_mission
		}
    }
    effect = {
		set_variable = panum_physician_action_active_var
		set_variable = panum_physician_describe_disease_foreign_active_var
		trigger_event = { 
			id = panum.52
			popup = yes
		}
    }
}
#Checks if this is button is active
mr_physician_describe_disease_foreign_active = {
	is_shown = {
		has_variable = panum_physician_describe_disease_foreign_active_var
	}
}

#MR_PHYSICIAN_FIND_TREATMENT_BUTTON
mr_physician_find_treatment_button = {
    scope = country
    is_valid = {
		hidden_trigger = {
			NOT = {
				has_variable = panum_physician_action_active_var
			}
		}
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_PHYSICIAN_CAN_FIND_LOCAL_TREATMENT_TRIGGER_TT
			panum_can_find_local_treatment_trigger = yes
		}
    }
    effect = {
		set_variable = panum_physician_action_active_var
		set_variable = panum_physician_find_treatment_active_var
		trigger_event = { 
			id = panum.53
			popup = yes 
		}
    }
}
#Checks if this is button is active
mr_physician_find_treatment_active = {
	is_shown = {
		has_variable = panum_physician_find_treatment_active_var
	}
}

#MR_PHYSICIAN_FIND_TREATMENT_FOREIGN_BUTTON
mr_physician_find_treatment_foreign_button = {
    scope = country
    is_valid = {
		hidden_trigger = {
			NOT = {
				has_variable = panum_physician_action_active_var
			}
		}
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_PHYSICIAN_CAN_FIND_FOREIGN_TREATMENT_TRIGGER_TT
			panum_can_find_foreign_treatment_trigger = yes
		}
		custom_tooltip = {
			text = MR_CIVILIZING_MISSION_TECH_TRIGGER_TT
			has_technology_researched = civilizing_mission
		}
    }
    effect = {
		set_variable = panum_physician_action_active_var
		set_variable = panum_physician_find_treatment_foreign_active_var
		trigger_event = { 
			id = panum.54
			popup = yes 
		}
    }
}
#Checks if this is button is active
mr_physician_find_treatment_foreign_active = {
	is_shown = {
		has_variable = panum_physician_find_treatment_foreign_active_var
	}
}

#MR_MEDICAL_CONGRESS_BUTTON
mr_medical_congress_button = {
    scope = country
    is_valid = {
		custom_tooltip = {
			text = MR_HAS_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
		}
		custom_tooltip = {
			text = MR_MEDICAL_CONGRESS_PHARMACEUTICALS_TECH_TRIGGER_TT
			has_technology_researched = pharmaceuticals
		}
		custom_tooltip = {
			text = MR_MEDICINE_8_COUNTRIES_WITH_PHYSICIAN_TRIGGER_TT
			any_country = {
				panum_has_physician = yes
				count >= 8
			}
		}
		custom_tooltip = {
			text = MR_ASTEROID_CONGRESS_UNIVERSITY_BUILDING_TRIGGER_TT
			country_has_building_type_levels = {  
				target = bt:building_university  
				value  >= 5
			}
		}
		custom_tooltip = {
			text = MR_MEDICAL_AVANTGARDE_TRIGGER_TT
			NOT = {
				any_country = {
					has_modifier = panum_medical_avant_garde_modifier
				}
			}
		}
		custom_tooltip = {
			text = MR_MEDICAL_CONGRESS_COOLDOWN_TRIGGER_TT
			NOT = {
				any_country = {
					has_modifier = panum_congress_host_modifier
				}
			}
		}
    }
    effect = {
		trigger_event = { 
			id = panum.2000
			popup = yes 
		}
		add_modifier = {
			name = panum_congress_host_modifier
			years = 5
		}	
    }

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 100 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 6 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}