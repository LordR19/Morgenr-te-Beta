### PHYSICIAN BUTTONS ###

#by Lord R & Marco Dandolo

#Does the country have a physician
mr_has_physician_sgui = {
	scope = country
	is_shown = {
		has_variable = panum_physician_var
	}
}

#MR_PHYSICIAN_DESCRIBE_DISEASE_BUTTON
mr_physician_describe_disease_button = {
    scope = country
    is_valid = {
		hidden_trigger = {
			NOT = {
				has_variable = panum_physician_action_active_var
			}
		}
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_PHYSICIAN_CAN_DESCRIBE_LOCAL_DISEASE_TRIGGER_TT
			panum_can_describe_local_disease_trigger = yes
		}
    }
    effect = {
		set_variable = panum_physician_action_active_var
		set_variable = panum_physician_describe_disease_active_var
		trigger_event = { 
			id = panum.51
			popup = yes 
		}
    }
}
#Checks if this is button is active
mr_physician_describe_disease_active = {
	is_shown = {
		has_variable = panum_physician_describe_disease_active_var
	}
}

#MR_PHYSICIAN_DESCRIBE_DISEASE_FOREIGN_BUTTON
mr_physician_describe_disease_foreign_button = {
    scope = country
    is_valid = {
		hidden_trigger = {
			NOT = {
				has_variable = panum_physician_action_active_var
			}
		}
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_PHYSICIAN_CAN_DESCRIBE_FOREIGN_DISEASE_TRIGGER_TT
			panum_can_describe_foreign_disease_trigger = yes
		}
		custom_tooltip = {
			text = MR_CIVILIZING_MISSION_TECH_TRIGGER_TT
			has_technology_researched = civilizing_mission
		}
    }
    effect = {
		set_variable = panum_physician_action_active_var
		set_variable = panum_physician_describe_disease_foreign_active_var
		trigger_event = { 
			id = panum.52
			popup = yes
		}
    }
}
#Checks if this is button is active
mr_physician_describe_disease_foreign_active = {
	is_shown = {
		has_variable = panum_physician_describe_disease_foreign_active_var
	}
}

#MR_PHYSICIAN_FIND_TREATMENT_BUTTON
mr_physician_find_treatment_button = {
    scope = country
    is_valid = {
		hidden_trigger = {
			NOT = {
				has_variable = panum_physician_action_active_var
			}
		}
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_PHYSICIAN_CAN_FIND_LOCAL_TREATMENT_TRIGGER_TT
			panum_can_find_local_treatment_trigger = yes
		}
    }
    effect = {
		set_variable = panum_physician_action_active_var
		set_variable = panum_physician_find_treatment_active_var
		trigger_event = { 
			id = panum.53
			popup = yes 
		}
    }
}
#Checks if this is button is active
mr_physician_find_treatment_active = {
	is_shown = {
		has_variable = panum_physician_find_treatment_active_var
	}
}

#MR_PHYSICIAN_FIND_TREATMENT_FOREIGN_BUTTON
mr_physician_find_treatment_foreign_button = {
    scope = country
    is_valid = {
		hidden_trigger = {
			NOT = {
				has_variable = panum_physician_action_active_var
			}
		}
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_PHYSICIAN_CAN_FIND_FOREIGN_TREATMENT_TRIGGER_TT
			panum_can_find_foreign_treatment_trigger = yes
		}
		custom_tooltip = {
			text = MR_CIVILIZING_MISSION_TECH_TRIGGER_TT
			has_technology_researched = civilizing_mission
		}
    }
    effect = {
		set_variable = panum_physician_action_active_var
		set_variable = panum_physician_find_treatment_foreign_active_var
		trigger_event = { 
			id = panum.54
			popup = yes 
		}
    }
}
#Checks if this is button is active
mr_physician_find_treatment_foreign_active = {
	is_shown = {
		has_variable = panum_physician_find_treatment_foreign_active_var
	}
}

#MR_PHYSICIAN_EXPAND_MEDICAL_SYSTEM_BUTTON
mr_physician_expand_medical_system_button = {
    scope = country
    is_valid = {
		hidden_trigger = {
			NOT = {
				has_variable = panum_physician_action_active_var
			}
		}
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_PHYSICIAN_HAS_HEALTH_SYSTEM_TRIGGER_TT
			NOT = {
				has_law = law_type:law_no_health_system
			}
		}
		custom_tooltip = {
			text = MR_PHYSICIAN_HAS_HEALTH_SYSTEM_INSTITUTION_TRIGGER_TT
			institution_investment_level = {
				institution	= institution_health_system
				value >= 1
			}
		}
		OR = {
			custom_tooltip = {
				text = MR_PHYSICIAN_HAS_POSSIBLE_CLINIC_TRIGGER_TT
				any_scope_state = {
					any_scope_building = {
						is_building_type = building_government_administration
						level >= 5
						has_active_production_method = pm_panum_no_clinic
					}
				}
			}
			custom_tooltip = {
				text = MR_PHYSICIAN_HAS_POSSIBLE_HOSPITAL_TRIGGER_TT
				any_scope_state = {
					any_scope_building = {
						is_building_type = building_government_administration
						level >= 20
						has_active_production_method = pm_panum_clinic
					}
				}
			}
		}
    }
    effect = {
		set_variable = mr_physician_expand_medical_system_var
		add_modifier = {
			name = panum_medical_system_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		add_journal_entry = { type = je_panum_medical_system_project }
		if = {
			limit = {
				has_variable = panum_physician_var
			}
			var:panum_physician_var = {
				set_character_busy_and_immortal = yes
			}
		}
    }
}
#Checks if this is button is active
mr_physician_expand_medical_system_active = {
	is_shown = {
		has_variable = mr_physician_expand_medical_system_var
	}
}

#MR_PHYSICIAN_MEDICAL_RESEARCH_BUTTON
mr_physician_medical_research_button = {
	scope = country
	is_valid = {
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
	}
	effect = {
		set_variable = mr_physician_medical_research_var
		add_modifier = {
			name = panum_medical_research_cost_modifier
			multiplier = money_amount_multiplier_small
		}
		add_journal_entry = { type = je_panum_medical_research_project }
		if = {
			limit = {
				has_variable = panum_physician_var
			}
			var:panum_physician_var = {
				set_character_busy_and_immortal = yes
			}
		}
	}
}
#Active
mr_physician_medical_research_stop_button = {
	scope = country
	is_shown = {
		has_journal_entry = je_panum_medical_research_project
	}
	is_valid = {
		custom_tooltip = {
			text = MR_PHYSICIAN_MEDICAL_RESEARCH_STOP_BUTTON_TRIGGER_TT
			NOT = {
				has_variable = panum_stop_medical_project_var
			}
		}
	}
	effect = {
		set_variable = panum_stop_medical_project_var
	}
}

#MR_MEDICAL_CONGRESS_BUTTON
mr_medical_congress_button = {
    scope = country
    is_valid = {
		custom_tooltip = {
			text = MR_HAS_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
		}
		custom_tooltip = {
			text = MR_MEDICAL_CONGRESS_PHARMACEUTICALS_TECH_TRIGGER_TT
			has_technology_researched = pharmaceuticals
		}
		custom_tooltip = {
			text = MR_MEDICINE_8_COUNTRIES_WITH_PHYSICIAN_TRIGGER_TT
			any_country = {
				panum_has_physician = yes
				count >= 8
			}
		}
		custom_tooltip = {
			text = MR_ASTEROID_CONGRESS_UNIVERSITY_BUILDING_TRIGGER_TT
			country_has_building_type_levels = {  
				target = bt:building_university  
				value  >= 5
			}
		}
		custom_tooltip = {
			text = MR_MEDICAL_AVANTGARDE_TRIGGER_TT
			has_modifier = panum_medical_avant_garde_modifier
		}
		custom_tooltip = {
			text = MR_MEDICAL_CONGRESS_COOLDOWN_TRIGGER_TT
			NOT = {
				any_country = {
					has_modifier = panum_congress_host_modifier
				}
			}
		}
    }
    effect = {
		trigger_event = { 
			id = panum.2000
			popup = yes 
		}
		add_modifier = {
			name = panum_congress_host_modifier
			years = 5
		}	
    }

	ai_is_valid = { always = yes }	# Whether this SGUI is available to the AI or not (default false)
	ai_chance = {
		base = 100 # The chance that the AI will activate this SGUI (script value between 1 and 100)
	}
	ai_frequency = 6 # Named value determining how frequently the AI will evaluate this SGUI (in months)
}

#Button for treatment
mr_physician_character_treatment_button_sgui = {
	scope = country
	is_valid = {
		NOT = {
			has_variable = panum_physician_character_treatment_button_active
		}
		trigger_if = {
			limit = { has_variable = panum_physician_var }
			custom_tooltip = {
				text = MR_PHYSICIAN_NO_RECENT_TREATMENT_TRIGGER_TT
			NOT = {
				var:panum_physician_var = {
					has_modifier = panum_physician_recent_treatment_conducted_modifier
				}
			}
			}
		}
		custom_tooltip = {
			text = MR_ACTIVE_PHYSICIAN_TRIGGER
			has_variable = panum_physician_var
			var:panum_physician_var = {
				is_busy = no
			}
		}
		custom_tooltip = {
			text = MR_CAN_ANY_CHARACTER_BE_TREATED_TRIGGER_TT
			panum_can_any_characters_be_treated_no_tooltip_trigger = yes
		}
	}
	effect = {
		set_variable = panum_physician_character_treatment_button_active
		panum_set_treatment_list_effect = yes
	}
}
mr_physician_character_treatment_window_active_sgui = {
	scope = country
	is_shown = {
		has_variable = panum_physician_character_treatment_button_active
		#Active Physician
		has_variable = panum_physician_var
		var:panum_physician_var = {
			is_busy = no
		}
	}
}
mr_physician_character_treatment_window_close_button_sgui = {
	scope = country
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
	}
}

mr_character_has_wounded_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = wounded
	}
}
mr_physician_wounded_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = wounded
				}

				modifier = {
					add = panum_wounded_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_wounded_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						2 = {
							add_trait = scarred

							trigger = {
								NOT = { has_trait = scarred }
							}
						}
						2 = {
							remove_trait = wounded
							add_trait = mr_seriously_injured

							trigger = {
								NOT = { has_trait = mr_seriously_injured }
							}
						}
						1 = {
							add_trait = sickly

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						2 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						7 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
					}
				}

				modifier = {
					add = panum_wounded_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_seriously_injured_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = mr_seriously_injured
	}
}
mr_physician_seriously_injured_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = mr_seriously_injured
				}

				modifier = {
					add = panum_seriously_injured_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_seriously_injured_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						2 = {
							add_trait = scarred

							trigger = {
								NOT = { has_trait = scarred }
							}
						}
						1 = {
							add_trait = sickly

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						2 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						7 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							add_trait = mr_blind

							trigger = {
								NOT = { has_trait = mr_blind }
							}
						}
						1 = {
							kill_character = yes
						}
					}
				}

				modifier = {
					add = panum_seriously_injured_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_kidney_stones_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = kidney_stones
	}
}
mr_physician_kidney_stones_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = kidney_stones
				}

				modifier = {
					add = panum_kidney_stones_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_kidney_stones_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						3 = {
							add_trait = scarred

							trigger = {
								NOT = { has_trait = scarred }
							}
						}
						3 = {
							add_trait = wounded

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						3 = {
							add_trait = sickly

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						4 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						9 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							kill_character = yes
						}
					}
				}

				modifier = {
					add = panum_kidney_stones_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_cancer_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = cancer
	}
}
mr_physician_cancer_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = cancer
				}

				modifier = {
					add = panum_cancer_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_cancer_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						3 = {
							add_trait = scarred

							trigger = {
								NOT = { has_trait = scarred }
							}
						}
						3 = {
							add_trait = wounded

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						3 = {
							add_trait = sickly

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						5 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						9 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							add_trait = mr_blind

							trigger = {
								NOT = { has_trait = mr_blind }
							}
						}
						1 = {
							kill_character = yes
						}
					}
				}

				modifier = {
					add = panum_cancer_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_syphilis_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = syphilis
	}
}
mr_physician_syphilis_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = syphilis
				}

				modifier = {
					add = panum_syphilis_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_syphilis_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						5 = {
							add_trait = scarred

							trigger = {
								NOT = { has_trait = scarred }
							}
						}
						5 = {
							add_trait = wounded

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						5 = {
							add_trait = sickly

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						10 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						20 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						2 = {
							add_trait = mr_blind

							trigger = {
								NOT = { has_trait = mr_blind }
							}
						}
						1 = {
							kill_character = yes
						}
					}
				}

				modifier = {
					add = panum_syphilis_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_sickly_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = sickly
	}
}
mr_physician_sickly_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = sickly
				}

				modifier = {
					add = panum_sickly_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_sickly_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						4 = {
							add_trait = alcoholic

							trigger = {
								NOT = { has_trait = alcoholic }
							}
						}
						4 = {
							add_trait = opium_addiction

							trigger = {
								NOT = { has_trait = opium_addiction }
							}
						}
						4 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						20 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							kill_character = yes
						}
					}
				}

				modifier = {
					add = panum_sickly_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_panum_cholera_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = panum_cholera
	}
}
mr_physician_panum_cholera_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = panum_cholera
				}

				modifier = {
					add = panum_cholera_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_cholera_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						8 = {
							add_trait = sickly

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						4 = {
							add_trait = alcoholic

							trigger = {
								NOT = { has_trait = alcoholic }
							}
						}
						4 = {
							add_trait = opium_addiction

							trigger = {
								NOT = { has_trait = opium_addiction }
							}
						}
						4 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						20 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							kill_character = yes
						}
					}
				}

				modifier = {
					add = panum_cholera_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_panum_tuberculosis_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = panum_tuberculosis
	}
}
mr_physician_panum_tuberculosis_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = panum_tuberculosis
				}

				modifier = {
					add = panum_tuberculosis_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_tuberculosis_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						8 = {
							add_trait = sickly

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						4 = {
							add_trait = alcoholic

							trigger = {
								NOT = { has_trait = alcoholic }
							}
						}
						4 = {
							add_trait = opium_addiction

							trigger = {
								NOT = { has_trait = opium_addiction }
							}
						}
						4 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						20 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							kill_character = yes
						}
					}
				}

				modifier = {
					add = panum_tuberculosis_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_panum_yellow_fever_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = panum_yellow_fever
	}
}
mr_physician_panum_yellow_fever_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = panum_yellow_fever
				}

				modifier = {
					add = panum_yellow_fever_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_yellow_fever_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						8 = {
							add_trait = sickly

							trigger = {
								NOT = { has_trait = sickly }
							}
						}
						4 = {
							add_trait = alcoholic

							trigger = {
								NOT = { has_trait = alcoholic }
							}
						}
						4 = {
							add_trait = opium_addiction

							trigger = {
								NOT = { has_trait = opium_addiction }
							}
						}
						4 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						20 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							kill_character = yes
						}
					}
				}

				modifier = {
					add = panum_yellow_fever_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_psychological_affliction_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = psychological_affliction
	}
}
mr_physician_psychological_affliction_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = psychological_affliction
				}

				modifier = {
					add = panum_psychological_affliction_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_psychological_affliction_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						1 = {
							add_trait = hedonist

							trigger = {
								NOT = { has_trait = hedonist }
							}
						}
						1 = {
							add_trait = alcoholic

							trigger = {
								NOT = { has_trait = hedonist }
							}
						}
						6 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							add_trait = opium_addiction

							trigger = {
								NOT = { has_trait = opium_addiction }
							}
						}
						1 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						1 = {
							add_trait = psychological_affliction

							trigger = {
								NOT = { has_trait = psychological_affliction }
							}
						}
					}
				}

				modifier = {
					add = panum_psychological_affliction_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_shellshocked_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = shellshocked
	}
}
mr_physician_shellshocked_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = shellshocked
				}

				modifier = {
					add = panum_shellshocked_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_shellshocked_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						1 = {
							add_trait = hedonist

							trigger = {
								NOT = { has_trait = hedonist }
							}
						}
						1 = {
							add_trait = alcoholic

							trigger = {
								NOT = { has_trait = hedonist }
							}
						}
						6 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							add_trait = opium_addiction

							trigger = {
								NOT = { has_trait = opium_addiction }
							}
						}
						1 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						1 = {
							add_trait = psychological_affliction

							trigger = {
								NOT = { has_trait = psychological_affliction }
							}
						}
					}
				}

				modifier = {
					add = panum_shellshocked_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_alcoholic_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = alcoholic
	}
}
mr_physician_alcoholic_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes
		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = alcoholic
				}

				modifier = {
					add = panum_alcoholic_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}

				modifier = {
					add = panum_alcoholic_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						3 = {
							add_trait = hedonist

							trigger = {
								NOT = { has_trait = hedonist }
							}
						}
						6 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							add_trait = opium_addiction

							trigger = {
								NOT = { has_trait = opium_addiction }
							}
						}
						1 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						1 = {
							add_trait = psychological_affliction

							trigger = {
								NOT = { has_trait = psychological_affliction }
							}
						}
					}
				}

				modifier = {
					add = panum_alcoholic_negative_effect_chance_value
				}
			}
		}
	}
}

mr_character_has_opium_addiction_trait_for_treatment_sgui = {
	scope = character
	is_shown = {
		has_trait = opium_addiction
	}
}
mr_physician_opium_addiction_treatment_button_sgui = {
	scope = country
	saved_scopes = {
        chosen_character
    }
	effect = {
		remove_variable = panum_physician_character_treatment_button_active
		panum_treatment_cooldown_modifier_add_effect = yes

		random_list = {
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2301
						popup = yes
					}
				}
				scope:chosen_character = {
					remove_trait = opium_addiction
				}

				modifier = {
					add = panum_opium_addiction_success_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2302
						popup = yes
					}
				}
				
				modifier = {
					add = panum_opium_addiction_no_effect_chance_value
				}
			}
			0 = {
				#Event to notify the player of result
				hidden_effect = {
					trigger_event = {
						id = panum.2303
						popup = yes
					}
				}
				scope:chosen_character = {
					#This effect adds a negative modifier to the I of the character if the character is not a Morgenröte Character
					panum_botched_treatment_ig_effect = yes

					random_list = {
						3 = {
							add_trait = cocaine_addiction

							trigger = {
								NOT = { has_trait = cocaine_addiction }
							}
						}
						6 = {
							add_modifier = {
								name = panum_physician_botched_treatment_modifier
								years = 2
							}
						}
						1 = {
							add_trait = psychological_affliction

							trigger = {
								NOT = { has_trait = psychological_affliction }
							}
						}
					}
				}

				modifier = {
					add = panum_opium_addiction_negative_effect_chance_value
				}
			}
		}
	}
}
