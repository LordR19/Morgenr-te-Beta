#################################
# MENDELEJEW SCRIPTED TRIGGERS  #
#################################

#by Marco Dandolo

############################

###Chemist Existence###

#Trigger if an unoccupied chemist exists
mendelejew_has_active_chemist = {
	custom_tooltip = {
		text = mendelejew_has_active_chemist_tt
		mendelejew_has_active_chemist_no_tooltip_trigger = yes
	}
}
mendelejew_has_active_chemist_no_tooltip_trigger = {
	has_variable = mendelejew_chemist_var
	var:mendelejew_chemist_var ?= {
		is_busy = no
	}
}

#Trigger to check if a specific element was already theorized
mendelejew_element_x_is_theorized_trigger = {
	#NUMBER --> Number of the Element in the Periodic Table
	hidden_trigger = {
		save_temporary_scope_value_as = { #This is used to display the amount in the tooltip
			name = value
			value = $NUMBER$
		}
	}

	custom_tooltip = {
		text = mendelejew_element_x_is_theorized_trigger_tt
		has_global_variable = mendelejew_theorized_element_$NUMBER$_global_var
	}
}

###Trigger to check when an element can be theorized

#Trigger for Post Game Elements
mendelejew_theory_post_game_element_trigger = {
	any_scope_building = {
		is_building_type = building_verrier_observatory
		has_active_production_method = pm_mendelejew_cyclotron
	}
}

#Trigger for Late Game Elements
mendelejew_theory_late_game_element_trigger = {
	OR = {
		AND = {
			any_scope_building = {
				is_building_type = building_verrier_observatory
				has_active_production_method = pm_mendelejew_spectroscopy
			}
			any_scope_building = {
				is_building_type = building_verrier_observatory
				has_active_production_method = pm_curie_physics_modern
			}
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_mendelejew_cyclotron
		}
	}
}

#Trigger for Mid Game Elements
mendelejew_theory_mid_game_element_trigger = {
	OR = {
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_mendelejew_spectroscopy
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_mendelejew_cyclotron
		}
	}
}

#Trigger for Early Game Elements
mendelejew_theory_early_game_element_trigger = {
	OR = {
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_mendelejew_chemistry
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_mendelejew_spectroscopy
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_mendelejew_cyclotron
		}
	}
}

#Trigger for Pre-Game Elements
mendelejew_theory_pre_game_element_trigger = {
	OR = {
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_mendelejew_chemistry_classical
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_mendelejew_chemistry
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_mendelejew_spectroscopy
		}
		any_scope_building = {
			is_building_type = building_verrier_observatory
			has_active_production_method = pm_mendelejew_cyclotron
		}
	}
}