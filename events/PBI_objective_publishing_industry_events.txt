########################################
# PBI OBJECTIVES EVENTS FOR MORGENRÖTE #
########################################

namespace = pbi_objective_publishing_industry_events

###################################################

#Original by Kaznoko

#Edited by LordR & Marco Dandolo

####################################################################################################

######TRANSATLANTIC CABLE######

#PBI Objectives 100: The First Word Across the Ocean
pbi_objective_publishing_industry_events.100 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_region

	title = pbi_objective_publishing_industry_events.100.t
	desc = pbi_objective_publishing_industry_events.100.d
  flavor = pbi_objective_publishing_industry_events.100.f

  gui_window = event_window_2char
  left_icon = scope:target_leader_1
  right_icon = scope:target_leader_2
	
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3
	
	trigger = {
	}

	immediate = {
		save_scope_as = target_country_1
		random_scope_character = {
			limit = {
				is_ruler = yes
			}
			save_scope_as = target_leader_1
		}
		if = {
			limit = {
				OR = {
					country_is_in_east_asia = yes
					country_is_in_central_asia = yes
				}
			}
			random_state = {
				limit = {
					state_region = s:STATE_CALIFORNIA
				}
				owner = {
					save_scope_as = target_country_2
					random_scope_character = {
						limit = {
							is_ruler = yes
						}
						save_scope_as = target_leader_2
					}
				}
				save_scope_as = target_region
			}
		}
		else_if = {
			limit = {
				OR = {
					country_is_in_europe = yes
					country_is_in_middle_east = yes
					country_is_in_africa = yes
				}
			}
			random_state = {
				limit = {
					state_region = s:STATE_DISTRICT_OF_COLUMBIA
				}
				owner = {
					save_scope_as = target_country_2
					random_scope_character = {
						limit = {
							is_ruler = yes
						}
						save_scope_as = target_leader_2
					}
				}
				save_scope_as = target_region
			}
		}
		else = {
			random_state = {
				limit = {
					state_region = s:STATE_HOME_COUNTIES
				}
				owner = {
					save_scope_as = target_country_2
					random_scope_character = {
						limit = {
							is_ruler = yes
						}
						save_scope_as = target_leader_2
					}
				}
				save_scope_as = target_region
			}
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.100.a
		default_option = yes
		add_modifier = {
			name = pbi_country_modifier_transoceanic_telegraph_cable
		}
	}
}

#PBI Objectives 101: Business Failure
pbi_objective_publishing_industry_events.101 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = root

	title = pbi_objective_publishing_industry_events.101.t
	desc = pbi_objective_publishing_industry_events.101.d
  flavor = pbi_objective_publishing_industry_events.101.f

	event_image = {
    video = "unspecific_politicians_arguing"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/asia/politician_parliament_motion"
	
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3
	
	trigger = {
	}

	immediate = {

	}

	option = {
		name = pbi_objective_publishing_industry_events.101.a
		default_option = yes
		add_investment_pool = -30000000
	}
}

#PBI Objectives 102: Great business leader
pbi_objective_publishing_industry_events.102 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = root

	title = pbi_objective_publishing_industry_events.102.t
	desc = pbi_objective_publishing_industry_events.102.d
  flavor = pbi_objective_publishing_industry_events.102.f

  event_image = {
    video = "unspecific_world_fair"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	duration = 3
	
	trigger = {
	}

	immediate = {
		set_variable = pbi_flag_objective_publishing_industry_events_102_on_going
		random_scope_character = {
			limit = {
				is_ruler = no
				is_heir = no
				has_role = admiral
			}
			save_scope_as = target_character_1
		}
		random_scope_character = {
			limit = {
				is_ruler = no
				is_heir = no
				has_role = admiral
				NOT = {
					THIS = scope:target_character_1
				}
			}
			save_scope_as = target_character_2
		}
		random_scope_character = {
			limit = {
				is_ruler = no
				is_heir = no
				has_role = admiral
				NOR = {
					THIS = scope:target_character_1
					THIS = scope:target_character_2
				}
			}
			save_scope_as = target_character_3
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.102.a
		trigger = {
			exists = scope:target_character_1
		}
		scope:target_character_1 = {
			set_variable = pbi_flag_character_in_laying
			set_character_busy_and_immortal = yes
		}
		remove_variable = pbi_flag_objective_publishing_industry_events_102_on_going
	}
	option = {
		name = pbi_objective_publishing_industry_events.102.b
		trigger = {
			exists = scope:target_character_2
		}
		scope:target_character_2 = {
			set_variable = pbi_flag_character_in_laying
			set_character_busy_and_immortal = yes
		}
		remove_variable = pbi_flag_objective_publishing_industry_events_102_on_going
	}
	option = {
		name = pbi_objective_publishing_industry_events.102.c
		trigger = {
			exists = scope:target_character_3
		}
		scope:target_character_3 = {
			set_variable = pbi_flag_character_in_laying
			set_character_busy_and_immortal = yes
		}
		remove_variable = pbi_flag_objective_publishing_industry_events_102_on_going
	}
	option = {
		name = pbi_objective_publishing_industry_events.102.e
		custom_tooltip = pbi_objective_publishing_industry_events.102.tt
		remove_variable = pbi_flag_objective_publishing_industry_events_102_on_going
		default_option = yes
	}
}

#PBI Objectives 103: Fund-raising
pbi_objective_publishing_industry_events.103 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = root

	title = pbi_objective_publishing_industry_events.103.t
	desc = pbi_objective_publishing_industry_events.103.d
  flavor = pbi_objective_publishing_industry_events.103.f

  event_image = {
    video = "europenorthamerica_capitalists_meeting"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/capitalists_meeting"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	duration = 3
	
	trigger = {
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		var:pbi_var_je_objective_across_the_sea = 1
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.103.a
		custom_tooltip = pbi_objective_publishing_industry_events.103.tt
		default_option = yes
	}
}

#PBI Objectives 104: Difficult fundraising
pbi_objective_publishing_industry_events.104 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.104.t
	desc = pbi_objective_publishing_industry_events.104.d
  flavor = pbi_objective_publishing_industry_events.104.f

  event_image = {
    video = "europenorthamerica_rich_and_poor"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/rich_and_poor"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	duration = 3
	
	trigger = {
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		any_scope_state = {
			has_building = building_urban_center
			any_scope_pop = {
				is_pop_type = capitalists
			}
			NOT = {
				has_modifier = pbi_state_modifier_laying_cables_cost
			}
		}
		var:pbi_var_je_objective_across_the_sea > 2
		var:pbi_var_je_objective_across_the_sea < 8
	}

	immediate = {
		random_scope_state = {
			limit = {
				has_building = building_urban_center
				any_scope_pop = {
					is_pop_type = capitalists
				}
				NOT = {
					has_modifier = pbi_state_modifier_laying_cables_cost
				}
			}
			save_scope_as = target_state
		}
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.104.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.100.bad
			change_variable = {
				name = pbi_var_je_objective_across_the_sea
				add = -2
			}
		}
		scope:target_state = {
			add_modifier = {
				name = pbi_state_modifier_laying_cables_cost
				multiplier = -1
				months = short_modifier_time
			}
		}
	}
}

#PBI Objectives 105: [concept_interest_group] Assistance
pbi_objective_publishing_industry_events.105 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = root

	title = pbi_objective_publishing_industry_events.105.t
	desc = pbi_objective_publishing_industry_events.105.d
  flavor = pbi_objective_publishing_industry_events.105.f

  event_image = {
    video = "unspecific_signed_contract"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/unspecific/signed_contract"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	duration = 3
	
	trigger = {
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		var:pbi_var_je_objective_across_the_sea > 1
		var:pbi_var_je_objective_across_the_sea < 8
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
		random_interest_group = {
			limit = {
				is_marginal = no
			}
			save_scope_as = target_ig
		}
		add_investment_pool = 1000000
	}

	option = {
		name = pbi_objective_publishing_industry_events.105.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.100.good
			change_variable = {
				name = pbi_var_je_objective_across_the_sea
				add = 1
			}
		}
		scope:target_ig = {
			add_modifier = {
				name = pbi_ig_modifier_sponsor_of_a_major_project
				months = short_modifier_time
				is_decaying = yes
			}
		}
	}
	option = {
		name = pbi_objective_publishing_industry_events.105.b
	}
}

#PBI Objectives 106: [concept_government] Assistance
pbi_objective_publishing_industry_events.106 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = root

	title = pbi_objective_publishing_industry_events.106.t
	desc = pbi_objective_publishing_industry_events.106.d
  flavor = pbi_objective_publishing_industry_events.106.f

  event_image = {
    video = "unspecific_signed_contract"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/unspecific/signed_contract"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	duration = 3
	
	trigger = {
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		NOT = {
			has_modifier = pbi_country_modifier_laying_cables_cost
		}
		var:pbi_var_je_objective_across_the_sea > 1
		var:pbi_var_je_objective_across_the_sea < 8
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.106.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.100.good
			change_variable = {
				name = pbi_var_je_objective_across_the_sea
				add = 2
			}
		}
		add_modifier = {
			name = pbi_country_modifier_laying_cables_cost
			multiplier = money_amount_multiplier_medium
		}
	}
	option = {
		name = pbi_objective_publishing_industry_events.106.b
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.100.bad
			change_variable = {
				name = pbi_var_je_objective_across_the_sea
				add = -2
			}
		}
	}
}

#PBI Objectives 107: Departure of submarine cable laying fleet
pbi_objective_publishing_industry_events.107 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.107.t
	desc = pbi_objective_publishing_industry_events.107.d
  flavor = pbi_objective_publishing_industry_events.107.f

	event_image = {
    video = "unspecific_steam_ship"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/unspecific/steam_ship"

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	duration = 3
	
	trigger = {
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		var:pbi_var_je_objective_across_the_sea = 8
	}

	immediate = {
		random_scope_state = {
			limit = {
				has_building = building_urban_center
				has_building = building_port
			}
			save_scope_as = target_state
		}
		set_variable = {
			name = pbi_flag_target_port
			value = scope:target_state
		}
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.107.a
		default_option = yes
		custom_tooltip = pbi_objective_publishing_industry_events.107.tt
		if = {
			limit = {
				has_modifier = pbi_country_modifier_laying_cables_cost
			}
			remove_modifier = pbi_country_modifier_laying_cables_cost
		}
		add_investment_pool = 30000000
		add_modifier = {
			name = modifier_large_expedition_cost
		}
	}
}

#PBI Objectives 108: Cable disconnected
pbi_objective_publishing_industry_events.108 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = root

	title = pbi_objective_publishing_industry_events.108.t
	desc = pbi_objective_publishing_industry_events.108.d
  flavor = pbi_objective_publishing_industry_events.108.f

	event_image = {
    video = "pbi_media_submarine_cable"
	}
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/unspecific/naval_battle"

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	duration = 3
	
	trigger = {
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		var:pbi_var_je_objective_across_the_sea > 14
		var:pbi_var_je_objective_across_the_sea < 18
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.108.a
		default_option = yes
		add_investment_pool = -3500000
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.100.bad
			change_variable = {
				name = pbi_var_je_objective_across_the_sea
				add = -2
			}
		}
	}
}

#PBI Objectives 109: Storm disrupts cable installation
pbi_objective_publishing_industry_events.109 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = root

	title = pbi_objective_publishing_industry_events.109.t
	desc = pbi_objective_publishing_industry_events.109.d
  flavor = pbi_objective_publishing_industry_events.109.f

	event_image = {
    video = "pbi_media_submarine_cable"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/unspecific/naval_battle"
	
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	duration = 3
	
	trigger = {
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		var:pbi_var_je_objective_across_the_sea > 14
		var:pbi_var_je_objective_across_the_sea < 18
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.109.a
		default_option = yes
		add_investment_pool = -3500000
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.100.bad
			change_variable = {
				name = pbi_var_je_objective_across_the_sea
				add = -1
			}
		}
	}
}

#PBI Objectives 110: Giant shadow
pbi_objective_publishing_industry_events.110 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = root

	title = pbi_objective_publishing_industry_events.110.t
	desc = pbi_objective_publishing_industry_events.110.d
  flavor = pbi_objective_publishing_industry_events.110.f

	event_image = {
    video = "pbi_media_submarine_cable"
	}
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/unspecific/naval_battle"
	
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	duration = 3
	
	trigger = {
		NOT = {
			has_variable = pbi_flag_did_objective_publishing_industry_events_110
		}
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		var:pbi_var_je_objective_across_the_sea > 14
		var:pbi_var_je_objective_across_the_sea < 18
	}

	immediate = {
		set_variable = pbi_flag_did_objective_publishing_industry_events_110
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.110.a
		default_option = yes
		add_investment_pool = -3500000
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.100.bad
			change_variable = {
				name = pbi_var_je_objective_across_the_sea
				add = -3
			}
		}
	}
}

#PBI Objectives 111: Triumphant return of the submarine cable laying fleet
pbi_objective_publishing_industry_events.111 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.111.t
	desc = pbi_objective_publishing_industry_events.111.d
  flavor = pbi_objective_publishing_industry_events.111.f

	event_image = {
    video = "unspecific_steam_ship"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/unspecific/steam_ship"

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	duration = 3
	
	trigger = {
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		var:pbi_var_je_objective_across_the_sea = 18
		exists = var:pbi_flag_target_port
	}

	immediate = {
		var:pbi_flag_target_port = {
			save_scope_as = target_state
		}
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.111.a
		default_option = yes
		remove_modifier = modifier_large_expedition_cost
		scope:target_character = {
			set_character_busy_and_immortal = no
		}
	}
}

#PBI Objectives 112: Communication Failure
pbi_objective_publishing_industry_events.112 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = root

	title = pbi_objective_publishing_industry_events.112.t
	desc = pbi_objective_publishing_industry_events.112.d
  flavor = pbi_objective_publishing_industry_events.101.f

  event_image = {
    video = "europenorthamerica_rich_and_poor"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/rich_and_poor"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	duration = 3
	
	trigger = {
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		var:pbi_var_je_objective_across_the_sea > 18
		var:pbi_var_je_objective_across_the_sea < 20
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.101.a
		default_option = yes
		set_variable = {
			name = pbi_var_je_objective_across_the_sea
			value = 0
		}
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			remove_variable = pbi_flag_character_in_laying
		}
	}
}

#PBI Objectives 113: Steady fundraising
pbi_objective_publishing_industry_events.113 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.113.t
	desc = pbi_objective_publishing_industry_events.113.d
  flavor = pbi_objective_publishing_industry_events.113.f

  event_image = {
    video = "europenorthamerica_capitalists_meeting"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/capitalists_meeting"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	duration = 3
	
	trigger = {
		any_scope_character = {
			has_variable = pbi_flag_character_in_laying
		}
		any_scope_state = {
			has_building = building_urban_center
			any_scope_pop = {
				is_pop_type = capitalists
			}
			NOT = {
				has_modifier = pbi_state_modifier_laying_cables_cost
			}
		}
		var:pbi_var_je_objective_across_the_sea > 1
		var:pbi_var_je_objective_across_the_sea < 8
	}

	immediate = {
		random_scope_state = {
			limit = {
				has_building = building_urban_center
				any_scope_pop = {
					is_pop_type = capitalists
				}
				NOT = {
					has_modifier = pbi_state_modifier_laying_cables_cost
				}
			}
			save_scope_as = target_state
		}
		random_scope_character = {
			limit = {
				has_variable = pbi_flag_character_in_laying
			}
			save_scope_as = target_character
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.103.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.100.good
			change_variable = {
				name = pbi_var_je_objective_across_the_sea
				add = 1
			}
		}
		scope:target_state = {
			add_modifier = {
				name = pbi_state_modifier_laying_cables_cost
				months = short_modifier_time
			}
		}
	}
}

####################################################################################################

######NEWSPAPER NOVEL######

#PBI Objectives 200: A successful Newspaper Novel
pbi_objective_publishing_industry_events.200 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.200.t
	desc = pbi_objective_publishing_industry_events.200.d
  flavor = pbi_objective_publishing_industry_events.200.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3
	
	trigger = {
	}

	immediate = {
		manzoni_newspaper_novel_effect = yes
	}
	option = {
		name = pbi_objective_publishing_industry_events.200.a
		default_option = yes
		writer_experience_gain_effect = { AMOUNT = 100 }
		manzoni_add_x_literary_tradition_effect = { AMOUNT = 30 }
		scope:target_character = {
			set_character_busy_and_immortal = no
			set_variable = manzoni_newspaper_novel_var
			add_modifier = {
				name = pbi_character_modifier_popular_writer
			}
		}
		add_modifier = {
			name = pbi_country_modifier_best_seller
			months = normal_modifier_time
			is_decaying = yes
		}
	}

	after = {
		remove_manzoni_newspaper_novel_state_effect = yes
	}
}

#PBI Objectives 200: Cancellation of serialization
pbi_objective_publishing_industry_events.201 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.201.t
	desc = pbi_objective_publishing_industry_events.201.d
  flavor = pbi_objective_publishing_industry_events.201.f

	event_image = {
    video = "unspecific_politicians_arguing"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/asia/politician_parliament_motion"
	
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3
	
	trigger = {
	}

	immediate = {
		manzoni_newspaper_novel_state_effect = yes
		set_variable = {
			name = pbi_var_je_objective_bestseller
			value = 0
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.201.a
		default_option = yes
		custom_tooltip = pbi_objective_publishing_industry_events.202.e.tt
		hidden_effect = {
			if = {
				limit = {
					manzoni_has_writer = yes
				}
				var:manzoni_writer_var ?= {
					set_character_busy_and_immortal = no
				}
			}
		}
	}
}

#PBI Objective 202: Great Writer of the Future
#Not needed, because our national writer is always the writer

#PBI Objectives 203: Unable to continue writing
pbi_objective_publishing_industry_events.203 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.203.t
	desc = pbi_objective_publishing_industry_events.203.d
  flavor = pbi_objective_publishing_industry_events.203.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	cooldown = {
		years = 1
	}
	
	trigger = {
		var:pbi_var_je_objective_bestseller > 2
		var:pbi_var_je_objective_bestseller < 11
		manzoni_has_writer = yes
	}

	immediate = {
		manzoni_newspaper_novel_effect = yes
	}

	option = {
		name = pbi_objective_publishing_industry_events.203.a
		default_option = yes
		scope:target_character = {
			add_modifier = {
				name = pbi_character_modifier_hardwork
				months = 6
				is_decaying = yes
			}
		}
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.good
			change_variable = {
				name = pbi_var_je_objective_bestseller
				add = 1
			}
		}
	}
	option = {
		name = pbi_objective_publishing_industry_events.203.b
		scope:target_character = {
			add_modifier = {
				name = pbi_character_modifier_change_of_pace
				months = 6
				is_decaying = yes
			}
		}
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.bad
			change_variable = {
				name = pbi_var_je_objective_bestseller
				add = -2
			}
		}
	}
}

#PBI Objectives 204: Who owns the manuscript?
pbi_objective_publishing_industry_events.204 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.204.t
	desc = pbi_objective_publishing_industry_events.204.d
  flavor = pbi_objective_publishing_industry_events.204.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	cooldown = {
		years = 1
	}
	
	trigger = {
		var:pbi_var_je_objective_bestseller > 4
		var:pbi_var_je_objective_bestseller < 11
		manzoni_has_writer = yes
	}

	immediate = {
		manzoni_newspaper_novel_effect = yes
	}

	option = {
		name = pbi_objective_publishing_industry_events.204.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.bad
			change_variable = {
				name = pbi_var_je_objective_bestseller
				add = -2
			}
		}
	}
	option = {
		name = pbi_objective_publishing_industry_events.204.b
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.stop
			set_variable = pbi_flag_objective_publishing_industry_events_200_risky
		}
	}
}

#PBI Objectives 205: Immoral Content
pbi_objective_publishing_industry_events.205 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.205.t
	desc = pbi_objective_publishing_industry_events.205.d
  flavor = pbi_objective_publishing_industry_events.205.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	cooldown = {
		years = 1
	}
	
	trigger = {
		var:pbi_var_je_objective_bestseller > 4
		var:pbi_var_je_objective_bestseller < 11
		manzoni_has_writer = yes
		any_interest_group = {
			NOT = {
				has_modifier = pbi_ig_modifier_regulation_of_expression
			}
			law_stance = {
				law = law_type:law_censorship
				value > neutral
			}
			law_stance = {
				law = law_type:law_state_religion
				value > neutral
			}
		}
		NOT = {
			var:manzoni_writer_var = {
				has_trait = manzoni_genre_devout
			}
		}
	}

	immediate = {
		manzoni_newspaper_novel_effect = yes
		random_interest_group = {
			limit = {
				NOT = {
					has_modifier = pbi_ig_modifier_regulation_of_expression
				}
				law_stance = {
					law = law_type:law_censorship
					value > neutral
				}
				law_stance = {
					law = law_type:law_state_religion
					value > neutral
				}
			}
			save_scope_as = target_ig
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.205.a
		default_option = yes
		scope:target_ig = {
			add_modifier = {
				name = pbi_ig_modifier_regulation_of_expression
				months = short_modifier_time
			}
		}
	}
	option = {
		name = pbi_objective_publishing_industry_events.205.b
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.bad
			change_variable = {
				name = pbi_var_je_objective_bestseller
				add = -3
			}
		}
		scope:target_ig = {
			add_modifier = {
				name = pbi_ig_modifier_regulation_of_expression
				months = short_modifier_time
				multiplier = -1
			}
		}
	}
}

#PBI Objectives 206: Suspicion of plagiarism
pbi_objective_publishing_industry_events.206 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.206.t
	desc = pbi_objective_publishing_industry_events.206.d
  flavor = pbi_objective_publishing_industry_events.206.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	cooldown = {
		years = 1
	}

	trigger = {
		var:pbi_var_je_objective_bestseller > 4
		var:pbi_var_je_objective_bestseller < 11
		manzoni_has_writer = yes
	}

	immediate = {
		manzoni_newspaper_novel_effect = yes
	}

	option = {
		name = pbi_objective_publishing_industry_events.206.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.bad
			change_variable = {
				name = pbi_var_je_objective_bestseller
				add = -2
			}
		}
	}
}

#PBI Objectives 207: A Novel Like a Prophecy
pbi_objective_publishing_industry_events.207 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.207.t
	desc = pbi_objective_publishing_industry_events.207.d
  flavor = pbi_objective_publishing_industry_events.207.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	cooldown = {
		years = 1
	}

	trigger = {
		var:pbi_var_je_objective_bestseller > 4
		var:pbi_var_je_objective_bestseller < 11
		manzoni_has_writer = yes
		var:manzoni_writer_var = {
			has_trait = manzoni_genre_crime_mystery
		}
	}

	immediate = {
		manzoni_newspaper_novel_effect = yes
	}

	option = {
		name = pbi_objective_publishing_industry_events.207.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.good
			change_variable = {
				name = pbi_var_je_objective_bestseller
				add = 1
			}
		}
	}
}

#PBI Objectives 208: Favorable book reviews by celebrities
pbi_objective_publishing_industry_events.208 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.208.t
	desc = pbi_objective_publishing_industry_events.208.d
  flavor = pbi_objective_publishing_industry_events.208.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character_1

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	cooldown = {
		years = 1
	}

	trigger = {
		var:pbi_var_je_objective_bestseller > 2
		var:pbi_var_je_objective_bestseller < 11
		manzoni_has_writer = yes
		var:manzoni_writer_var = {
			OR = {
				has_trait = manzoni_genre_literary_fiction
				has_trait = innovative
				has_trait = meticulous
				has_trait = erudite
			}
		}
	}

	immediate = {
		manzoni_newspaper_novel_effect = yes
		random_scope_character = {
			limit = {
				NOT = {
					THIS = scope:target_character
					is_heir = no
					is_ruler = no
				}
				has_trait = manzoni_writer_journalist
			}
			interest_group = {
				save_scope_as = target_ig_1
			}
			save_scope_as = target_character_1
		}
		if = {
			limit = {
				NOT = {
					exists = scope:target_character_1
				}
			}
			random_scope_character = {
				limit = {
					NOT = {
						THIS = scope:target_character
					}
					is_heir = no
					is_ruler = no
				}
				interest_group = {
					save_scope_as = target_ig_1
				}
				save_scope_as = target_character_1
			}
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.208.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.good
			change_variable = {
				name = pbi_var_je_objective_bestseller
				add = 1
			}
		}
		scope:target_character_1 = {
			add_modifier = {
				name = pbi_character_modifier_wise_counselor
				months = short_modifier_time
				is_decaying = yes
			}
		}
	}
	option = {
		name = pbi_objective_publishing_industry_events.208.b
	}
}

#PBI Objectives 209: Critical book reviews by celebrities
pbi_objective_publishing_industry_events.209 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.209.t
	desc = pbi_objective_publishing_industry_events.209.d
  flavor = pbi_objective_publishing_industry_events.209.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character_1

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	cooldown = {
		years = 1
	}

	trigger = {
		var:pbi_var_je_objective_bestseller > 2
		var:pbi_var_je_objective_bestseller < 11
		manzoni_has_writer = yes
	}

	immediate = {
		manzoni_newspaper_novel_effect = yes
		random_scope_character = {
			limit = {
				NOT = {
					THIS = scope:target_character
				}
				has_trait = manzoni_writer_journalist
			}
			interest_group = {
				save_scope_as = target_ig_1
			}
			save_scope_as = target_character_1
		}
		if = {
			limit = {
				NOT = {
					exists = scope:target_character_1
				}
			}
			random_scope_character = {
				limit = {
					NOT = {
						THIS = scope:target_character
					}
				}
				interest_group = {
					save_scope_as = target_ig_1
				}
				save_scope_as = target_character_1
			}
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.209.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.bad
			change_variable = {
				name = pbi_var_je_objective_bestseller
				add = -2
			}
		}
		scope:target_character_1 = {
			add_modifier = {
				name = pbi_character_modifier_wise_counselor
				months = short_modifier_time
				is_decaying = yes
			}
		}
	}
}

#PBI Objectives 210: Serialized novels attract attention
pbi_objective_publishing_industry_events.210 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.210.t
	desc = pbi_objective_publishing_industry_events.210.d
  flavor = pbi_objective_publishing_industry_events.210.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	cooldown = {
		years = 1
	}
	
	trigger = {
		var:pbi_var_je_objective_bestseller > 2
		var:pbi_var_je_objective_bestseller < 11
		manzoni_has_writer = yes
	}

	immediate = {
		manzoni_newspaper_novel_effect = yes
	}

	option = {
		name = pbi_objective_publishing_industry_events.210.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.good
			change_variable = {
				name = pbi_var_je_objective_bestseller
				add = 1
			}
		}
	}
}

#PBI Objectives 211: Ardent Fan
pbi_objective_publishing_industry_events.211 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.211.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_variable = pbi_flag_objective_publishing_industry_events_211_rich
				}
				desc = pbi_objective_publishing_industry_events.211.d.rich
			}
			triggered_desc = {
				trigger = {
					has_variable = pbi_flag_objective_publishing_industry_events_211_middle
				}
				desc = pbi_objective_publishing_industry_events.211.d.middle
			}
			desc = pbi_objective_publishing_industry_events.211.d.poor
		}
	}
  flavor = pbi_objective_publishing_industry_events.211.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	cooldown = {
		years = 1
	}
	
	trigger = {
		var:pbi_var_je_objective_bestseller > 4
		var:pbi_var_je_objective_bestseller < 11
		manzoni_has_writer = yes
	}

	immediate = {
		random_list = {
			30 = {
				set_variable = pbi_flag_objective_publishing_industry_events_211_rich
			}
			30 = {
				set_variable = pbi_flag_objective_publishing_industry_events_211_middle
			}
			30 = {
				set_variable = pbi_flag_objective_publishing_industry_events_211_poor
			}
		}
		manzoni_newspaper_novel_effect = yes
	}

	option = {
		name = pbi_objective_publishing_industry_events.211.a
		default_option = yes
		custom_tooltip = {
			text = pbi_objective_publishing_industry_events.200.good
			change_variable = {
				name = pbi_var_je_objective_bestseller
				add = 1
			}
		}
		if = {
			limit = {
				has_variable = pbi_flag_objective_publishing_industry_events_211_rich
			}
			scope:target_state = {
				add_modifier = {
					name = pbi_state_modifier_bestseller_rich
					months = short_modifier_time
				}
			}
		}
		else_if = {
			limit = {
				has_variable = pbi_flag_objective_publishing_industry_events_211_middle
			}
			scope:target_state = {
				add_modifier = {
					name = pbi_state_modifier_bestseller_middle
					months = short_modifier_time
				}
			}
		}
		else = {
			scope:target_state = {
				add_modifier = {
					name = pbi_state_modifier_bestseller_poor
					months = short_modifier_time
				}
			}
		}
		remove_variable = pbi_flag_objective_publishing_industry_events_211_rich
		remove_variable = pbi_flag_objective_publishing_industry_events_211_middle
		remove_variable = pbi_flag_objective_publishing_industry_events_211_poor
	}
}

#PBI Objectives 212: Suspension of serialization
pbi_objective_publishing_industry_events.212 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.212.t
	desc = pbi_objective_publishing_industry_events.212.d
  flavor = pbi_objective_publishing_industry_events.212.f

  gui_window = event_window_1char_tabloid
  left_icon = scope:target_character

  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear" 
  on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	cooldown = {
		years = 1
	}
	
	trigger = {
		has_variable = pbi_flag_objective_publishing_industry_events_200_risky
		var:pbi_var_je_objective_bestseller > 6
		var:pbi_var_je_objective_bestseller < 11
		manzoni_has_writer = yes
	}

	immediate = {
		manzoni_newspaper_novel_effect = yes
	}

	option = {
		name = pbi_objective_publishing_industry_events.212.a
		default_option = yes
		writer_experience_gain_effect = { AMOUNT = -5 }
		add_modifier = {
			name = manzoni_newspaper_novel_scandal_modifier
			days = 365
		}
		hidden_effect = {
			trigger_event = {
				id = pbi_objective_publishing_industry_events.201
				days = { 3 7 }
			}
		}
	}
}

####################################################################################################

#PBI Objectives 400-405 not added to Morgenröte

####################################################################################################

######JOURNALISTS ON THE BATTLEFIELD######

#PBI Objectives 300: Journalists on the battlefield
pbi_objective_publishing_industry_events.300 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = scope:target_state

	title = pbi_objective_publishing_industry_events.300.t
	desc = pbi_objective_publishing_industry_events.300.d
  flavor = pbi_objective_publishing_industry_events.300.f

  event_image = {
    video = "europenorthamerica_before_the_battle"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/before_the_battle"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3
	
	trigger = {
	}

	immediate = {
		random_scope_war = {
			limit = {
				any_scope_front = {
					any_scope_state = {
						NOT = { owner = ROOT }
					}
					any_scope_general = {
						owner = ROOT
					}
				}
			}
			save_scope_as = target_war
			random_scope_front = {
				limit = {
					any_scope_state = {
						NOT = { owner = ROOT }
					}
					any_scope_general = {
						owner = ROOT
					}
				}
				save_scope_as = target_front
				random_scope_state = {
					limit = {
						NOT = { owner = ROOT }
					}
					save_scope_as = target_state
				}
				random_scope_general = {
					limit = {
						owner = ROOT
					}
					save_scope_as = target_character
				}
			}
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.300.a
		default_option = yes
		add_modifier = {
			name = pbi_country_modifier_volunteer_soldier
			months = short_modifier_time
		}
	}
	option = {
		name = pbi_objective_publishing_industry_events.300.b
		add_modifier = {
			name = pbi_country_modifier_contribution
			months = short_modifier_time
		}
	}
}

####################################################################################################

######SHINE LIGHT ON######

#PBI Objectives 500: Shine light on
pbi_objective_publishing_industry_events.500 = {
	dlc = dlc_morgenrote

	type = country_event
	placement = root

	title = pbi_objective_publishing_industry_events.500.t
	desc = pbi_objective_publishing_industry_events.500.d
  flavor = pbi_objective_publishing_industry_events.500.f

  event_image = {
    video = "pbi_media_poor"
  }
  on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
  on_opened_soundeffect = "event:/SFX/Events/asia/factory_accident"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3
	
	trigger = {
		NOT = {
			has_variable = pbi_flag_did_objective_publishing_industry_events_500
		}
	}

	immediate = {
		set_variable = pbi_flag_did_objective_publishing_industry_events_500
		if = {
			limit = {
				has_law = law_type:law_child_labor_allowed
			}
			random_interest_group = {
				limit = {
					law_stance = {
						law = law_type:law_child_labor_allowed
						value > neutral
					}
				}
				leader = {
					save_scope_as = target_character_1
				}
			}
		}
		if = {
			limit = {
				NAND = {
					has_law = law_type:law_wage_subsidies
					has_law = law_type:law_old_age_pension
				}
			}
			random_interest_group = {
				limit = {
					law_stance = {
						law = law_type:law_wage_subsidies
						value < neutral
					}
					leader = {
						NAND = {
							exists = scope:target_character_1
							THIS = scope:target_character_1
						}
					}
				}
				leader = {
					save_scope_as = target_character_2
				}
			}
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_multicultural
				}
			}
			random_interest_group = {
				limit = {
					law_stance = {
						law = law_type:law_multicultural
						value < neutral
					}
					leader = {
						NAND = {
							exists = scope:target_character_1
							THIS = scope:target_character_1
						}
						NAND = {
							exists = scope:target_character_2
							THIS = scope:target_character_2
						}
					}
				}
				leader = {
					save_scope_as = target_character_3
				}
			}
		}
	}

	option = {
		name = pbi_objective_publishing_industry_events.500.a
		default_option = yes
		add_modifier = {
			name = pbi_country_modifier_expansion_of_public_welfare
			months = long_modifier_time
		}
	}
	option = {
		name = pbi_objective_publishing_industry_events.500.b
		trigger = {
			exists = scope:target_character_1
		}
		scope:target_character_1 = {
			set_ideology = ideology:ideology_reformer
		}
	}
	option = {
		name = pbi_objective_publishing_industry_events.500.c
		trigger = {
			exists = scope:target_character_2
		}
		scope:target_character_2 = {
			set_ideology = ideology:ideology_social_democrat
		}
	}
	option = {
		name = pbi_objective_publishing_industry_events.500.e
		trigger = {
			exists = scope:target_character_3
		}
		scope:target_character_3 = {
			set_ideology = ideology:ideology_reformer
		}
	}
}
