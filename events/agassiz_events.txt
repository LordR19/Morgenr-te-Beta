###################
# AGASSIZ EVENTS  #
###################

#by Marco Dandolo

###################

namespace = agassiz

###################

#################################################################################

#Agassiz 1: Yearly minerals
agassiz.1 = {
	dlc = dlc_morgenrote

	type = country_event
		
	hidden = yes

	trigger = {
		NOT = {
			has_variable = agassiz_mineral_cooldown_var
		}
		has_technology_researched = agassiz_geology_tech
	}

	immediate = {
		set_variable = {
			name = agassiz_mineral_cooldown_var
			days = 365
		}

		agassiz_add_x_generic_minerals_effect = {
			AMOUNT = agassiz_yearly_mineral_value
		}

		if = {
			limit = {
				has_variable = agassiz_yearly_generic_minerals_var
			}
			set_variable = {
				name = agassiz_generic_minerals_notification_var
				value = var:agassiz_yearly_generic_minerals_var
			}
			set_variable = {
				name = agassiz_yearly_generic_minerals_var
				value = 0
			}
		}
		post_notification = agassiz_yearly_minerals_notification
	}
}

#################################################################################

#Agassiz 100: Searching new ore veins
agassiz.100 = {
	dlc = dlc_morgenrote

	type = country_event

	title = agassiz.100.t

	desc = agassiz.100.d

	flavor = agassiz.100.f
	
	duration = 3

	event_image = {
		video = "europenorthamerica_gold_prospectors"
	}

	icon = "gfx/interface/icons/event_icons/event_geology.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
	}

	immediate = {
	}

	option = {	#Coal
		name = agassiz.100.h
		trigger = { agassiz_can_find_coal_vein_trigger = yes }
		add_journal_entry = { type = je_agassiz_find_coal_project }
		add_modifier = {
			name = agassiz_ore_search_cost_modifier
			multiplier = money_amount_multiplier_small
		}
	}

	option = {	#Iron
		name = agassiz.100.i
		trigger = { agassiz_can_find_iron_vein_trigger = yes }
		add_journal_entry = { type = je_agassiz_find_iron_project }
		add_modifier = {
			name = agassiz_ore_search_cost_modifier
			multiplier = money_amount_multiplier_small
		}
	}

	option = {	#Lead
		name = agassiz.100.j
		trigger = { agassiz_can_find_lead_vein_trigger = yes }
		add_journal_entry = { type = je_agassiz_find_lead_project }
		add_modifier = {
			name = agassiz_ore_search_cost_modifier
			multiplier = money_amount_multiplier_very_small
		}
	}

	option = {	#Sulfur
		name = agassiz.100.k
		trigger = { agassiz_can_find_sulfur_vein_trigger = yes }
		add_journal_entry = { type = je_agassiz_find_sulfur_project }
		add_modifier = {
			name = agassiz_ore_search_cost_modifier
			multiplier = money_amount_multiplier_very_small
		}
	}

	option = {	#Gold
		name = agassiz.100.l
		trigger = { agassiz_can_find_gold_vein_trigger = yes }
		add_journal_entry = { type = je_agassiz_find_gold_project }
		add_modifier = {
			name = agassiz_ore_search_cost_modifier
			multiplier = money_amount_multiplier_medium
		}
	}

	option = {	#Uranium
		name = agassiz.100.m
		trigger = { agassiz_can_find_uranium_vein_trigger = yes }
		add_journal_entry = { type = je_agassiz_find_uranium_project }
		add_modifier = {
			name = agassiz_ore_search_cost_modifier
			multiplier = money_amount_multiplier_medium
		}
	}

	option = {	#None of them
		name = agassiz.100.g
		trigger = { is_ai = no }
		default_option = yes
		var:dubois_geologist_var = {
			set_character_busy_and_immortal = no
		}
	}

	after = {
		remove_variable = agassiz_decide_ore_vein_var
	}
}

#Agassiz 101: New ore vein
agassiz.101 = {
	dlc = dlc_morgenrote

	type = country_event

	title = agassiz.101.t

	desc = agassiz.101.d

	flavor = agassiz.101.f
	
	duration = 3

	event_image = {
		video = "europenorthamerica_gold_prospectors"
	}

	icon = "gfx/interface/icons/event_icons/event_geology.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
	}

	immediate = {
	}

	option = {	#Good
		name = agassiz.101.g
		geologist_experience_gain_effect = { AMOUNT = 10 }
		agassiz_add_x_generic_minerals_effect = { AMOUNT = 2500 }
		random_list = {
			1 = {
				if = {
					limit = {
						NOT = {
							var:dubois_geologist_var = {
								has_trait = agassiz_prospector
							}
						}
					}
					var:dubois_geologist_var = {
						add_trait = agassiz_prospector
					}
				}
			}
			1 = {}
		}
	}

	after = {
		remove_variable = agassiz_building_geologist_improvement_var
	}
}

#Agassiz 102: Oil!
agassiz.102 = {
	dlc = dlc_morgenrote

	type = country_event

	title = agassiz.102.t

	desc = agassiz.102.d

	flavor = agassiz.102.f
	
	duration = 3

	event_image = {
		video = "middleeast_oil_derricks"
	}

	icon = "gfx/interface/icons/event_icons/event_geology.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
	}

	immediate = {
	}

	option = {	#Good
		name = agassiz.102.g
		geologist_experience_gain_effect = { AMOUNT = 15 }
		random_list = {
			1 = {
				if = {
					limit = {
						NOT = {
							var:dubois_geologist_var = {
								has_trait = agassiz_prospector
							}
						}
					}
					var:dubois_geologist_var = {
						add_trait = agassiz_prospector
					}
				}
			}
			1 = {}
		}
	}

	after = {
		remove_variable = agassiz_building_geologist_improvement_var
	}
}

#################################################################################

#Agassiz 201: Mid Atlantic Ridge
agassiz.201 = {
	dlc = dlc_morgenrote

	type = country_event

	title = agassiz.201.t

	desc = agassiz.201.d

	flavor = agassiz.201.f
	
	duration = 3

	event_image = {
		texture = "gfx/event_pictures/gaudi_pictures/gaudi_engineering_electrical_transatlantic_cable.dds"
	}

	icon = "gfx/interface/icons/event_icons/event_navigation.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
	}

	immediate = {
		set_variable = dubois_mid_atlantic_ridge_examined_var
		remove_modifier = agassiz_mid_atlantic_ridge_cost_modifier
	}

	option = {	#This will improve the geologist's geophysical understanding.
		name = agassiz.201.g
		trigger = {
			NOT = {
				var:dubois_geologist_var = {
					has_trait = agassiz_geophysicist
				}
			}
		}
		agassiz_add_x_geological_knowledge_effect = { AMOUNT = 1 }
		rapanui_add_x_oceanographic_understanding_effect = { AMOUNT = 5 }
		if = {
			limit = {
				NOT = {
					var:dubois_geologist_var = {
						has_trait = agassiz_geophysicist
					}
				}
			}
			var:dubois_geologist_var = {
				add_trait = agassiz_geophysicist
			}
		}
	}

	option = {	#This will improve the geologist's oceanographic understanding.
		name = agassiz.201.h
		trigger = {
			NOT = {
				var:dubois_geologist_var = {
					has_trait = agassiz_oceanographer
				}
			}
		}
		agassiz_add_x_geological_knowledge_effect = { AMOUNT = 1 }
		rapanui_add_x_oceanographic_understanding_effect = { AMOUNT = 5 }
		if = {
			limit = {
				NOT = {
					var:dubois_geologist_var = {
						has_trait = agassiz_oceanographer
					}
				}
			}
			var:dubois_geologist_var = {
				add_trait = agassiz_oceanographer
			}
		}
	}

	option = {	#This will improve the geologist's general understanding.
		name = agassiz.201.i
		default_option = yes
		agassiz_add_x_geological_knowledge_effect = { AMOUNT = 1 }
		rapanui_add_x_oceanographic_understanding_effect = { AMOUNT = 5 }
		geologist_experience_gain_effect = { AMOUNT = 30 }
	}

	after = {
	}
}

#Agassiz 202: Geological-Paleontological Symposium
agassiz.202 = {
	dlc = dlc_morgenrote

	type = country_event

	title = agassiz.202.t

	desc = agassiz.202.d

	flavor = agassiz.202.f
	
	duration = 3

	gui_window = event_window_2char

	left_icon = scope:dubois_geologist_scope
	right_icon = scope:dubois_paleontologist_scope

	icon = "gfx/interface/icons/event_icons/event_navigation.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
	}

	immediate = {
		var:dubois_geologist_var = {
			save_scope_as = dubois_geologist_scope
		}
		var:dubois_paleontologist_var = {
			save_scope_as = dubois_paleontologist_scope
		}
	}

	option = {	#A fruitful academic exchange
		name = agassiz.202.g
		agassiz_add_x_geological_knowledge_effect = { AMOUNT = 1 }
		dubois_add_x_academy_progress = { AMOUNT = 25 }
		dubois_medium_add_technology = yes
	}

	after = {
	}
}