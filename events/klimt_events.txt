#################
# KLIMT EVENTS  #
#################

#by Lord R & Marco Dandolo

###################

namespace = klimt

###################

#Klimt 401: Painter Destination
klimt.401 = {
	type = country_event

	title = klimt.401.t

	desc = klimt.401.d

	flavor = klimt.401.f

	gui_window = event_window_1char_tabloid

	left_icon = scope:klimt_painter

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_painting.dds"

	immediate = {
		var:klimt_painter_var ?= {
			save_scope_as = klimt_painter
		}
	}

	#Classicism
	option = {
		name = klimt.401.g
		default_option = yes
		trigger = {
			klimt_has_active_painter = yes
			has_global_variable = elgar_classicism_discovered
			NOT = {
				var:klimt_painter_var ?= {
					has_trait = klimt_classic_school
				}
			}
		}
		if = {
			limit = { has_variable = klimt_painter_var }
			var:klimt_painter_var = {
				set_character_busy_and_immortal = yes
				set_variable = klimt_painter_on_classic_school_trip
			}
		}
		else = {
			custom_tooltip = klimt_painter_becomes_busy_tt
		}
		custom_tooltip = klimt_painter_departs_tt
		hidden_effect = {
			trigger_event = {
				id = klimt.402
				days = { 30 60 }
			}
			random_country = {
				limit = {
					any_scope_state = {
						has_state_trait = artists_state_trait_center_classicism
					}
				}
				klimt_add_x_painting_tradition_unscaled_effect = {
					AMOUNT = 1
				}
				post_notification = klimt_classic_school_visit_notification
			}
		}

		ai_chance = {
			base = 1
		}
	}

	#Romanticism
	option = {
		name = klimt.401.h
		default_option = yes
		trigger = {
			klimt_has_active_painter = yes
			has_global_variable = elgar_romanticism_discovered
			NOT = {
				var:klimt_painter_var ?= {
					has_trait = klimt_romantic_school
				}
			}
		}
		if = {
			limit = { has_variable = klimt_painter_var }
			var:klimt_painter_var = {
				set_character_busy_and_immortal = yes
				set_variable = klimt_painter_on_romantic_school_trip
			}
		}
		else = {
			custom_tooltip = klimt_painter_becomes_busy_tt
		}
		custom_tooltip = klimt_painter_departs_tt
		hidden_effect = {
			trigger_event = {
				id = klimt.402
				days = { 30 60 }
			}
			random_country = {
				limit = {
					any_scope_state = {
						has_state_trait = artists_state_trait_center_romanticism
					}
				}
				klimt_add_x_painting_tradition_unscaled_effect = {
					AMOUNT = 1
				}
				post_notification = klimt_romantic_school_visit_notification
			}
		}

		ai_chance = {
			base = 1
		}
	}

	#Realism
	option = {
		name = klimt.401.i
		default_option = yes
		trigger = {
			klimt_has_active_painter = yes
			has_global_variable = artists_center_of_art_realism_founded_var
			NOT = {
				var:klimt_painter_var ?= {
					has_trait = klimt_realistic_school
				}
			}
		}
		if = {
			limit = { has_variable = klimt_painter_var }
			var:klimt_painter_var = {
				set_character_busy_and_immortal = yes
				set_variable = klimt_painter_on_realistic_school_trip
			}
		}
		else = {
			custom_tooltip = klimt_painter_becomes_busy_tt
		}
		custom_tooltip = klimt_painter_departs_tt
		hidden_effect = {
			trigger_event = {
				id = klimt.402
				days = { 30 60 }
			}
			random_country = {
				limit = {
					any_scope_state = {
						has_state_trait = artists_state_trait_center_realism
					}
				}
				klimt_add_x_painting_tradition_unscaled_effect = {
					AMOUNT = 1
				}
				post_notification = klimt_realistic_school_visit_notification
			}
		}

		ai_chance = {
			base = 1
		}
	}

	#Impressionism
	option = {
		name = klimt.401.j
		default_option = yes
		trigger = {
			klimt_has_active_painter = yes
			has_global_variable = elgar_impressionism_discovered
			NOT = {
				var:klimt_painter_var ?= {
					has_trait = klimt_impressionistic_school
				}
			}
		}
		if = {
			limit = { has_variable = klimt_painter_var }
			var:klimt_painter_var = {
				set_character_busy_and_immortal = yes
				set_variable = klimt_painter_on_impressionistic_school_trip
			}
		}
		else = {
			custom_tooltip = klimt_painter_becomes_busy_tt
		}
		custom_tooltip = klimt_painter_departs_tt
		hidden_effect = {
			trigger_event = {
				id = klimt.402
				days = { 30 60 }
			}
			random_country = {
				limit = {
					any_scope_state = {
						has_state_trait = artists_state_trait_center_impressionism
					}
				}
				klimt_add_x_painting_tradition_unscaled_effect = {
					AMOUNT = 1
				}
				post_notification = klimt_impressionistic_school_visit_notification
			}
		}

		ai_chance = {
			base = 2
		}
	}

	#Expressionism
	option = {
		name = klimt.401.k
		default_option = yes
		trigger = {
			klimt_has_active_painter = yes
			has_global_variable = elgar_expressionism_discovered
			NOT = {
				var:klimt_painter_var ?= {
					has_trait = klimt_expressionistic_school
				}
			}
		}
		if = {
			limit = { has_variable = klimt_painter_var }
			var:klimt_painter_var = {
				set_character_busy_and_immortal = yes
				set_variable = klimt_painter_on_expressionistic_school_trip
			}
		}
		else = {
			custom_tooltip = klimt_painter_becomes_busy_tt
		}
		custom_tooltip = klimt_painter_departs_tt
		hidden_effect = {
			trigger_event = {
				id = klimt.402
				days = { 30 60 }
			}
			random_country = {
				limit = {
					any_scope_state = {
						has_state_trait = artists_state_trait_center_expressionism
					}
				}
				klimt_add_x_painting_tradition_unscaled_effect = {
					AMOUNT = 1
				}
				post_notification = klimt_expressionistic_school_visit_notification
			}
		}

		ai_chance = {
			base = 2
		}
	}

	#Art Nouveau
	option = {
		name = klimt.401.l
		default_option = yes
		trigger = {
			klimt_has_active_painter = yes
			has_global_variable = elgar_art_nouveau_discovered
			NOT = {
				var:klimt_painter_var ?= {
					has_trait = klimt_art_nouveau_school
				}
			}
		}
		if = {
			limit = { has_variable = klimt_painter_var }
			var:klimt_painter_var = {
				set_character_busy_and_immortal = yes
				set_variable = klimt_painter_on_art_nouveau_school_trip
			}
		}
		else = {
			custom_tooltip = klimt_painter_becomes_busy_tt
		}
		custom_tooltip = klimt_painter_departs_tt
		hidden_effect = {
			trigger_event = {
				id = klimt.402
				days = { 30 60 }
			}
			random_country = {
				limit = {
					any_scope_state = {
						has_state_trait = artists_state_trait_center_art_nouveau
					}
				}
				klimt_add_x_painting_tradition_unscaled_effect = {
					AMOUNT = 1
				}
				post_notification = klimt_art_nouveau_school_visit_notification
			}
		}

		ai_chance = {
			base = 5
		}
	}


	option = { #Nevermind
		name = klimt.401.m
		trigger = {
			is_ai = no
		}

		ai_chance = { #Should never use
			base = 0
		}
	}

	after = {
		remove_variable = klimt_trip_destination_var
	}
}

#Klimt 402: Painter Arrival
klimt.402 = {
	type = country_event

	title = klimt.402.t

	placement = scope:klimt_center_of_art_scope

	desc = klimt.402.d

	flavor = klimt.402.f

	event_image = { #Classic
		trigger = {
			klimt_painter_trip_classic = yes
		}
		texture = "gfx/event_pictures/klimt_pictures/klimt_classicism.dds"
	}

	event_image = { #Romantic
		trigger = {
			klimt_painter_trip_romantic = yes
		}
		texture = "gfx/event_pictures/klimt_pictures/klimt_romanticism.dds"
	}

	event_image = { #Realistic
		trigger = {
			klimt_painter_trip_realistic = yes
		}
		texture = "gfx/event_pictures/klimt_pictures/klimt_realism.dds"
	}

	event_image = { #Impressionistic
		trigger = {
			klimt_painter_trip_impressionistic = yes
		}
		texture = "gfx/event_pictures/elgar_pictures/elgar_impressionism.dds"
	}

	event_image = { #Expressionistic
		trigger = {
			klimt_painter_trip_expressionistic = yes
		}
		texture = "gfx/event_pictures/elgar_pictures/elgar_expressionism.dds"
	}

	event_image = { #Art Nouveau
		trigger = {
			klimt_painter_trip_art_nouveau = yes
		}
		texture = "gfx/event_pictures/elgar_pictures/elgar_art_nouveau.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_painting.dds"

	immediate = {
		set_klimt_painter_progress = yes
		if = {
			limit = {
				klimt_painter_trip_classic = yes
			}
			random_state = {
				limit = {
					has_state_trait = artists_state_trait_center_classicism
				}
				save_scope_as = klimt_center_of_art_scope
			}
		}
		if = {
			limit = {
				klimt_painter_trip_romantic = yes
			}
			random_state = {
				limit = {
					has_state_trait = artists_state_trait_center_romanticism
				}
				save_scope_as = klimt_center_of_art_scope
			}
		}
		if = {
			limit = {
				klimt_painter_trip_realistic = yes
			}
			random_state = {
				limit = {
					has_state_trait = artists_state_trait_center_realism
				}
				save_scope_as = klimt_center_of_art_scope
			}
		}
		if = {
			limit = {
				klimt_painter_trip_impressionistic = yes
			}
			random_state = {
				limit = {
					has_state_trait = artists_state_trait_center_impressionism
				}
				save_scope_as = klimt_center_of_art_scope
			}
		}
		if = {
			limit = {
				klimt_painter_trip_expressionistic = yes
			}
			random_state = {
				limit = {
					has_state_trait = artists_state_trait_center_expressionism
				}
				save_scope_as = klimt_center_of_art_scope
			}
		}
		if = {
			limit = {
				klimt_painter_trip_art_nouveau = yes
			}
			random_state = {
				limit = {
					has_state_trait = artists_state_trait_center_art_nouveau
				}
				save_scope_as = klimt_center_of_art_scope
			}
		}
	}

	#Ah, $CENTEROFART$ City ...
	option = {
		name = klimt.402.g
		default_option = yes
		#add_journal_entry = {
		#	type = je_klimt_painter_trip
		#}
	}
}

###################

### Germany ###

#Klimt 1300: Spitzweg, Der arme Poet
klimt.1300 = {
	type = country_event
	placement = ROOT

	title = klimt.1300.t
	desc = klimt.1300.d
	flavor = klimt.1300.f

	event_image = {
		texture = "gfx/event_pictures/klimt_pictures/klimt_spitzweg.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_literature.dds"

	duration = 3

	trigger = {
		any_scope_state = {
			state_region = s:STATE_BAVARIA
		}
		has_technology_researched = romanticism
		game_date >= 1839.1.1
		NOT = { 
			has_global_variable = klimt_spitzweg_var 
		}
	}

	immediate = {
		set_global_variable = klimt_spitzweg_var
	}

	option = {
		name = klimt.1300.g #Ahahah, a funny painter!
		default_option = yes
		klimt_add_x_painting_tradition_effect = {
			AMOUNT = 25
		}
	}

	option = {
		name = klimt.1300.h #Wait! Satire against whom?
		klimt_add_x_painting_tradition_effect = {
			AMOUNT = 10
		}
		add_modifier = {
			name = klimt_spitzweg_not_funny_modifier
			years = 5
		}
	}

	after = {
	}
}