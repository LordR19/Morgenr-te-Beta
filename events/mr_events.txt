#######################
# MORGENROETE EVENTS  #
#######################

#by Marco Dandolo

###################

namespace = mr

###################

#Events

#Verrier 1: Check AI

#################################################################################

#Check AI

mr.1 = {
	type = country_event
		
	hidden = yes

	trigger = {
		OR = {
			NOT = {
				has_variable = lepsius_variables_var
			}
			NOT = {
				has_variable = verrier_variables_var
			}
			NOT = {
				has_variable = elgar_variables_var
			}
			NOT = {
				has_variable = dubois_variables_var
			}
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = {
					has_variable = lepsius_variables_var
				}
			}
			lepsius_add_variables = yes
		}
		if = {
			limit = {
				NOT = {
					has_variable = verrier_variables_var
				}
			}
			verrier_add_variables = yes
		}
		if = {
			limit = {
				NOT = {
					has_variable = elgar_variables_var
				}
			}
			elgar_add_variables = yes
		}
		if = {
			limit = {
				NOT = {
					has_variable = dubois_variables_var
				}
			}
			dubois_add_variables = yes
		}
	}
}

#Check Lepsius Exhibtions & Dubois Paleontology

mr.2 = {
	type = country_event
		
	hidden = yes

	trigger = {
		is_player = no
	}

	immediate = {
		#Egyptian Collection
		if = {
			limit = {
				var:lepsius_egyptian_artifact_minor >= 10
				NOT = {
					has_modifier = lepsius_small_egyptian_exhibition_modifier
					var:lepsius_egyptian_artifact_minor >= 25
				}
			}
			add_modifier = lepsius_small_egyptian_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_egyptian_artifact_minor >= 25
				NOT = {
					has_modifier = lepsius_medium_egyptian_exhibition_modifier
					var:lepsius_egyptian_artifact_minor >= 50
				}
			}
			remove_modifier = lepsius_small_egyptian_exhibition_modifier
			add_modifier = lepsius_medium_egyptian_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_egyptian_artifact_minor >= 50
				NOT = {
					has_modifier = lepsius_large_egyptian_exhibition_modifier
					var:lepsius_egyptian_artifact_minor >= 100
					var:lepsius_egyptian_artifact_major >= 1
				}
			}
			remove_modifier = lepsius_small_egyptian_exhibition_modifier
			remove_modifier = lepsius_medium_egyptian_exhibition_modifier
			add_modifier = lepsius_large_egyptian_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_egyptian_artifact_minor >= 100
				var:lepsius_egyptian_artifact_major >= 1
				NOT = {
					has_modifier = lepsius_excellent_egyptian_exhibition_modifier
				}
			}
			remove_modifier = lepsius_small_egyptian_exhibition_modifier
			remove_modifier = lepsius_medium_egyptian_exhibition_modifier
			remove_modifier = lepsius_large_egyptian_exhibition_modifier
			add_modifier = lepsius_excellent_egyptian_exhibition_modifier
		}
		#Mesopotamian Collection
		if = {
			limit = {
				var:lepsius_mesopotamian_artifact_minor >= 10
				NOT = {
					has_modifier = lepsius_small_mesopotamian_exhibition_modifier
					var:lepsius_mesopotamian_artifact_minor >= 25
				}
			}
			add_modifier = lepsius_small_mesopotamian_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_mesopotamian_artifact_minor >= 25
				NOT = {
					has_modifier = lepsius_medium_mesopotamian_exhibition_modifier
					var:lepsius_mesopotamian_artifact_minor >= 50
				}
			}
			remove_modifier = lepsius_small_mesopotamian_exhibition_modifier
			add_modifier = lepsius_medium_mesopotamian_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_mesopotamian_artifact_minor >= 50
				NOT = {
					has_modifier = lepsius_large_mesopotamian_exhibition_modifier
					var:lepsius_mesopotamian_artifact_minor >= 100
					var:lepsius_mesopotamian_artifact_major >= 1
				}
			}
			remove_modifier = lepsius_small_mesopotamian_exhibition_modifier
			remove_modifier = lepsius_medium_mesopotamian_exhibition_modifier
			add_modifier = lepsius_large_mesopotamian_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_mesopotamian_artifact_minor >= 100
				var:lepsius_mesopotamian_artifact_major >= 1
				NOT = {
					has_modifier = lepsius_excellent_mesopotamian_exhibition_modifier
				}
			}
			remove_modifier = lepsius_small_mesopotamian_exhibition_modifier
			remove_modifier = lepsius_medium_mesopotamian_exhibition_modifier
			remove_modifier = lepsius_large_mesopotamian_exhibition_modifier
			add_modifier = lepsius_excellent_mesopotamian_exhibition_modifier
		}
		#Aegean Collection
		if = {
			limit = {
				var:lepsius_aegean_artifact_minor >= 10
				NOT = {
					has_modifier = lepsius_small_aegean_exhibition_modifier
					var:lepsius_aegean_artifact_minor >= 25
				}
			}
			add_modifier = lepsius_small_aegean_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_aegean_artifact_minor >= 25
				NOT = {
					has_modifier = lepsius_medium_aegean_exhibition_modifier
					var:lepsius_aegean_artifact_minor >= 50
				}
			}
			remove_modifier = lepsius_small_aegean_exhibition_modifier
			add_modifier = lepsius_medium_aegean_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_aegean_artifact_minor >= 50
				NOT = {
					has_modifier = lepsius_large_aegean_exhibition_modifier
					var:lepsius_aegean_artifact_minor >= 100
					var:lepsius_aegean_artifact_major >= 1
				}
			}
			remove_modifier = lepsius_small_aegean_exhibition_modifier
			remove_modifier = lepsius_medium_aegean_exhibition_modifier
			add_modifier = lepsius_large_aegean_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_aegean_artifact_minor >= 100
				var:lepsius_aegean_artifact_major >= 1
				NOT = {
					has_modifier = lepsius_excellent_aegean_exhibition_modifier
				}
			}
			remove_modifier = lepsius_small_aegean_exhibition_modifier
			remove_modifier = lepsius_medium_aegean_exhibition_modifier
			remove_modifier = lepsius_large_aegean_exhibition_modifier
			add_modifier = lepsius_excellent_aegean_exhibition_modifier
		}
		#Precolumbian Collection
		if = {
			limit = {
				var:lepsius_precolumbian_artifact_minor >= 10
				NOT = {
					has_modifier = lepsius_small_precolumbian_exhibition_modifier
					var:lepsius_precolumbian_artifact_minor >= 25
				}
			}
			add_modifier = lepsius_small_precolumbian_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_precolumbian_artifact_minor >= 25
				NOT = {
					has_modifier = lepsius_medium_precolumbian_exhibition_modifier
					var:lepsius_precolumbian_artifact_minor >= 50
				}
			}
			remove_modifier = lepsius_small_precolumbian_exhibition_modifier
			add_modifier = lepsius_medium_precolumbian_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_precolumbian_artifact_minor >= 50
				NOT = {
					has_modifier = lepsius_large_precolumbian_exhibition_modifier
					var:lepsius_precolumbian_artifact_minor >= 100
					var:lepsius_precolumbian_artifact_major >= 1
				}
			}
			remove_modifier = lepsius_small_precolumbian_exhibition_modifier
			remove_modifier = lepsius_medium_precolumbian_exhibition_modifier
			add_modifier = lepsius_large_precolumbian_exhibition_modifier
		}
		if = {
			limit = {
				var:lepsius_precolumbian_artifact_minor >= 100
				var:lepsius_precolumbian_artifact_major >= 1
				NOT = {
					has_modifier = lepsius_excellent_precolumbian_exhibition_modifier
				}
			}
			remove_modifier = lepsius_small_precolumbian_exhibition_modifier
			remove_modifier = lepsius_medium_precolumbian_exhibition_modifier
			remove_modifier = lepsius_large_precolumbian_exhibition_modifier
			add_modifier = lepsius_excellent_precolumbian_exhibition_modifier
		}
		###############################################################################
		# PALEONTOLOGY                                                                #
		###############################################################################
		#Paleontologist: Research Modifier
		if = {
			limit = {
				dubois_has_paleontologist = yes
				NOT = {
					has_modifier = dubois_paleontological_research_modifier
				}
			}
			add_modifier = {
				name = dubois_paleontological_research_modifier
			}
		}
		if = {
			limit = {
				dubois_has_paleontologist = no
				has_modifier = dubois_paleontological_research_modifier
			}
			remove_modifier = dubois_paleontological_research_modifier
		}
		#Dinosaur Bones
		if = { #North America
			limit = {
				var:dubois_north_american_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_ankylosaurus_var
					#has_variable = dubois_brontosaurus_var
					has_variable = dubois_diplodocus_var
					has_variable = dubois_triceratops_var
					has_variable = dubois_tyrannosaurus_var
				}
			}
			set_variable = dubois_construct_north_american_dinosaur_var
			dubois_construct_north_american_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
		if = { #South America
			limit = {
				var:dubois_south_american_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_antarctosaurus_var
					has_variable = dubois_argyrosaurus_var
				}
			}
			set_variable = dubois_construct_south_american_dinosaur_var
			dubois_construct_south_american_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
		if = { #Europe
			limit = {
				var:dubois_european_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_iguanodon_var
					has_variable = dubois_plateosaurus_var
				}
			}
			set_variable = dubois_construct_european_dinosaur_var
			dubois_construct_european_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
		if = { #Africa
			limit = {
				var:dubois_african_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_giraffatitan_var
					#has_variable = dubois_melanorosaurus_var
					has_variable = dubois_spinosaurus_var
				}
			}
			set_variable = dubois_construct_african_dinosaur_var
			dubois_construct_african_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
		if = { #Asia
			limit = {
				var:dubois_asian_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NAND = {
					has_variable = dubois_psittacosaurus_var
					has_variable = dubois_velociraptor_var
				}
			}
			set_variable = dubois_construct_asian_dinosaur_var
			dubois_construct_asian_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
		if = { #Australia
			limit = {
				var:dubois_australian_dinosaur_bone >= 5
				dubois_has_paleontologist = yes
				NOT = {
					has_variable = dubois_muttaburrasaurus_var
				}
			}
			set_variable = dubois_construct_australian_dinosaur_var
			dubois_construct_australian_dinosaur = yes
			trigger_event = {
				id = dubois.2044
				days = 7 #AI will always build perfect skeletons immediately but never transforms fossils
			}
		}
	}
}

mr.3 = {
	type = country_event

	hidden = yes

	immediate = {
		copy_global_variables_to_local_effect = yes
		trigger_event = {
			id = mr.4
			days = 1
		}
	}
}

mr.4 = {
	type = country_event

	hidden = yes

	immediate = {
		clean_global_variables_effect = yes
		trigger_event = {
			id = elgar.2
			days = 1
		}
		trigger_event = {
			id = mr.2
			days = 1
		}
	}
}

#Check University PMs

mr.5 = {
	type = country_event

	hidden = yes

	trigger = {
		is_player = no
		any_scope_state = {
			is_production_method_active = {
				building_type = building_university
				production_method = pm_dubois_university_standard
			}
		}
		OR = {
			AND = {
				has_technology_researched = lepsius_antiquarianism_tech
				NOT = {
					any_scope_state = {
						is_production_method_active = {
							building_type = building_university
							production_method = pm_dubois_university_humanities
						}
					}
				}
			}
			AND = {
				has_technology_researched = dubois_theory_of_evolution_tech
				NOT = {
					any_scope_state = {
						is_production_method_active = {
							building_type = building_university
							production_method = pm_dubois_university_natural_history
						}
					}
				}
			}
			AND = {
				has_technology_researched = verrier_astronomy_tech
				NOT = {
					any_scope_state = {
						is_production_method_active = {
							building_type = building_university
							production_method = pm_dubois_university_mathematics
						}
					}
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				has_technology_researched = verrier_astronomy_tech
				NOT = {
					any_scope_state = {
						is_production_method_active = {
							building_type = building_university
							production_method = pm_dubois_university_mathematics
						}
					}
				}
			}
			random_scope_state = {
				limit = {
					is_production_method_active = {
						building_type = building_university
						production_method = pm_dubois_university_standard
					}
				}
				activate_production_method = {
					building_type = building_university
					production_method = pm_dubois_university_mathematics
				}
			}
		}
		if = {
			limit = {
				has_technology_researched = dubois_theory_of_evolution_tech
				NOT = {
					any_scope_state = {
						is_production_method_active = {
							building_type = building_university
							production_method = pm_dubois_university_natural_history
						}
					}
				}
			}
			random_scope_state = {
				limit = {
					is_production_method_active = {
						building_type = building_university
						production_method = pm_dubois_university_standard
					}
				}
				activate_production_method = {
					building_type = building_university
					production_method = pm_dubois_university_natural_history
				}
			}
		}
		if = {
			limit = {
				has_technology_researched = lepsius_antiquarianism_tech
				NOT = {
					any_scope_state = {
						is_production_method_active = {
							building_type = building_university
							production_method = pm_dubois_university_humanities
						}
					}
				}
			}
			random_scope_state = {
				limit = {
					is_production_method_active = {
						building_type = building_university
						production_method = pm_dubois_university_standard
					}
				}
				activate_production_method = {
					building_type = building_university
					production_method = pm_dubois_university_humanities
				}
			}
		}
	}
}